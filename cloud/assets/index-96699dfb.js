import{n as y,j as a,F as h,r as B,an as D}from"./@illa-design-764f0835.js";import{r as f}from"./react-bc846394.js";import{C as n,u as g,c as U,o as C,e as H,a as K,d as M}from"./style-3f22391e.js";import{v as x,R as O,u as Y}from"./index-6d3d9ceb.js";import{I as F}from"./index-2c2a283e.js";import{F as v}from"./index-d352fe71.js";import"./@emotion-09d14760.js";import"./index-a7dd09c4.js";import"./hook-73d0fb14.js";import"./index-6d14282f.js";import"./interface-8df5fe4c.js";import"./index-eab177f8.js";import"./utils-0e036474.js";import"./style-00a92373.js";import"./upstash-e9b235a2.js";import"./index-4370180f.js";import"./index.esm-11ba4214.js";import"./lodash-lib-cfb0e9ed.js";var b=(r=>(r.NONE="none",r.BASIC="basic",r.BEARER="bearer",r.APIKEY="API key",r))(b||{}),i=(r=>(r.NONE="none",r.BASIC="basic",r.BEARER="bearer",r.APIKEY="apiKey",r))(i||{}),R=(r=>(r.HEADER="Header",r.URLPARAMS="URL Params",r))(R||{}),d=(r=>(r.HEADER="header",r.URLPARAMS="urlParams",r))(d||{});const L=[{label:R.HEADER,value:d.HEADER},{label:R.URLPARAMS,value:d.URLPARAMS}],T=r=>{const{control:l,auth:e,watch:o}=r,{t:s}=v(),E=o("addTo",d.HEADER);return y(h,{children:[a(n,{title:s("editor.action.resource.db.label.key"),isRequired:!0,defaultValue:(e==null?void 0:e.key)??"",name:"key",rules:[{required:!0}],controlledType:["input"],control:l}),a(n,{title:s("editor.action.resource.db.label.value"),isRequired:!0,defaultValue:(e==null?void 0:e.value)??"",name:"value",rules:[{required:!0}],controlledType:["password"],control:l}),a(n,{title:s("editor.action.resource.db.label.add_to"),isRequired:!0,defaultValue:(e==null?void 0:e.addTo)??d.HEADER,name:"addTo",rules:[{required:!0}],controlledType:["select"],control:l,options:L}),E===d.HEADER&&a(n,{title:s("editor.action.resource.db.label.header_prefix"),defaultValue:(e==null?void 0:e.headerPrefix)??"Bearer",name:"headerPrefix",controlledType:["input"],control:l})]})};T.displayName="APIKeyAuthPanel";const S=r=>{const{control:l,auth:e}=r,{t:o}=v();return y(h,{children:[a(n,{title:o("editor.action.resource.restapi.label.basic_auth_username"),defaultValue:(e==null?void 0:e.username)??"",name:"username",controlledType:"input",control:l,isRequired:!0,rules:[{validate:x}]}),a(n,{title:o("editor.action.resource.restapi.label.basic_auth_password"),defaultValue:(e==null?void 0:e.password)??"",name:"password",controlledType:"password",control:l,isRequired:!0,rules:[{required:!0}]})]})};S.displayName="BasicAuthPanel";const k=r=>{const{control:l,auth:e}=r,{t:o}=v();return a(n,{title:o("editor.action.resource.restapi.label.bearerToken"),defaultValue:(e==null?void 0:e.bearerToken)??"",name:"bearerToken",controlledType:"input",control:l,isRequired:!0,rules:[{validate:x}]})};k.displayName="BearerAuthPanel";const j=[{label:b.NONE,value:i.NONE},{label:b.BASIC,value:i.BASIC},{label:b.BEARER,value:i.BEARER},{label:b.APIKEY,value:i.APIKEY}],z=r=>{const{resourceID:l}=r,{t:e}=v(),{control:o,formState:s,watch:E}=g(),{getResourceByID:q}=f.useContext(O),t=q(l),V=[{name:"urlParams",title:e("editor.action.resource.restapi.label.url_parameters"),defaultValue:t==null?void 0:t.content.urlParams},{name:"headers",defaultValue:t==null?void 0:t.content.headers,title:e("editor.action.resource.restapi.label.headers")},{name:"cookies",defaultValue:t==null?void 0:t.content.cookies,title:e("editor.action.resource.restapi.label.cookies")}],P=E("authentication",(t==null?void 0:t.content.authentication)??i.NONE);return a(h,{children:y("div",{css:U,children:[a(n,{controlledType:"input",isRequired:!0,title:e("editor.action.resource.db.label.name"),control:o,defaultValue:(t==null?void 0:t.resourceName)??"",rules:[{validate:x}],placeholders:[e("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:e("editor.action.resource.restapi.tip.name")}),a(B,{direction:"horizontal",ml:"24px",mr:"24px",mt:"16px",mb:"8px",w:"unset"}),a("div",{css:C,children:e("editor.action.resource.db.title.general_option")}),a(n,{title:e("editor.action.resource.restapi.label.base_url"),defaultValue:(t==null?void 0:t.content.baseUrl)??"",isRequired:!0,name:"baseUrl",controlledType:"input",control:o,rules:[{required:e("editor.action.resource.error.invalid_url"),validate:Y}],placeholders:[e("editor.action.resource.restapi.placeholder.base_url")],tips:s.errors.baseUrl&&y("div",{css:H,children:[a(D,{css:K}),a(h,{children:s.errors.baseUrl.message})]})}),V.map(({name:N,title:w,defaultValue:_})=>a(M,{control:o,defaultValue:_??[{key:"",value:""}],render:({field:{value:u,onChange:A}})=>a(F,{label:w,records:u,onAdd:()=>{A([...u,{key:"",value:""}])},onDelete:p=>{let c=[...u];c.splice(p,1),c.length===0&&(c=[{key:"",value:""}]),A(c)},onChangeKey:(p,c,I)=>{let m=[...u];m[p]={key:c,value:I},A(m)},onChangeValue:(p,c,I)=>{let m=[...u];m[p].value=I,A(m)}}),name:N},N)),a(n,{title:e("editor.action.resource.restapi.label.authentication"),defaultValue:(t==null?void 0:t.content.authentication)??"none",name:"authentication",controlledType:["select"],control:o,options:j}),P===i.BASIC&&a(S,{control:o,auth:t==null?void 0:t.content.authContent}),P===i.BEARER&&a(k,{control:o,auth:t==null?void 0:t.content.authContent}),P===i.APIKEY&&a(T,{watch:E,control:o,auth:t==null?void 0:t.content.authContent}),a(B,{direction:"horizontal",ml:"24px",mr:"24px",mt:"16px",mb:"8px",w:"unset"}),a("div",{css:C,children:e("editor.action.resource.db.title.graphql_introspection")}),a(n,{title:e("editor.action.resource.db.label.introspection"),contentLabel:e("editor.action.resource.db.label.disable_introspection"),defaultValue:(t==null?void 0:t.content.disableIntrospection)??!1,name:"disableIntrospection",controlledType:["switch"],control:o,tips:e("editor.action.resource.db.tip.introspection")})]})})};z.displayName="GraphQLConfigElement";export{z as default};
//# sourceMappingURL=index-96699dfb.js.map
