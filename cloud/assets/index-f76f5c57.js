import{k as t,q as x,y,l as v,a9 as I,B as P,ax as T,F as S}from"./@illa-design-df878cb8.js";import{F as R,a1 as U}from"./index-eebc598f.js";import"./index-1e58851c.js";import{r as b}from"./react-bc846394.js";import{u as q,c as E,C as n,o as w,d as N,g as k,l as A,b as B,h as D}from"./style-99767516.js";import{R as F,v as L,i as j}from"./index-2ef94cb6.js";import"./@emotion-28b7fe46.js";import"./index-024ffa35.js";import"./hook-77f8199a.js";import"./index-1c3ac52c.js";import"./interface-8df5fe4c.js";import"./utils-302dced1.js";import"./style-56e482f1.js";import"./upstash-7245fd7f.js";import"./index-ea7c545d.js";import"./index.esm-11ba4214.js";import"./lodash-lib-cfb0e9ed.js";const z={databaseIndex:0,databasePassword:"",databaseUsername:"",host:"",port:"6379",ssl:!1};function $(i){const m=/^redis:\/\/(.*):(.*)@(.*?)(?::(\d+))?$/,l=i.match(m);if(!l||l.length!==5)return;const[,e,a,s,h]=l;return{databaseUsername:e,databasePassword:a,host:s,port:h??80}}const C=i=>/^redis:\/\/(.*):(.*)@(.*?)(?::(\d+))?$/.test(i),G=i=>{const{resourceID:m,resourceType:l}=i,{t:e}=R(),{control:a,setValue:s}=q(),{getResourceByID:h}=b.useContext(F),d=h(m);let o;d===void 0?o=z:o=d.content;const[f,g]=b.useState(!1),c=b.useMemo(()=>({title:e("editor.action.resource.db.label.username_password"),controlledType:["input","password"],name:["databaseUsername","databasePassword"],defaultValue:[o.databaseUsername,o.databasePassword],placeholders:[e("editor.action.resource.db.placeholder.username"),e("editor.action.resource.db.placeholder.password")]}),[o.databasePassword,o.databaseUsername,e]),V=b.useCallback(r=>{const p=j(r??"");return p!==f&&g(p),!0},[f]);return t(S,{children:x("div",{css:E,children:[t(n,{controlledType:"input",isRequired:!0,title:e("editor.action.resource.db.label.name"),control:a,defaultValue:(d==null?void 0:d.resourceName)??"",rules:[{validate:L}],placeholders:[e("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:e("editor.action.resource.restapi.tip.name")}),t(y,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:w,children:e("editor.action.resource.db.title.general_option")}),t(N,{control:a,defaultValue:"",rules:{required:!1},render:({field:{value:r,onChange:p,onBlur:_}})=>x("div",{css:k,children:[t("div",{css:A,children:t("span",{css:B(v("grayBlue","02")),children:e("editor.action.form.option.neon.connection_string")})}),x("div",{css:D,children:[t(I,{onBlur:_,onChange:p,error:!C(r)&&r!=="",value:r,colorScheme:"techPurple",placeholder:"redis://myuser:mypassword@localhost:6379"}),t(P,{disabled:!C(r),onClick:()=>{const u=$(r);u!==void 0&&(s("host",u.host),s("port",u.port),s("databaseUsername",u.databaseUsername),s("databasePassword",u.databasePassword),p(""))},colorScheme:"techPurple",h:"32px",children:e("editor.action.form.option.neon.parse")})]})]}),name:"connectionString"}),t(n,{defaultValue:[o.host,o.port],title:e("editor.action.resource.db.label.hostname_port"),control:a,rules:[{required:!0,validate:V},{required:!0}],isRequired:!0,controlledType:["input","number"],name:["host","port"],placeholders:[e("editor.action.resource.db.placeholder.hostname"),"6379"],styles:[{flex:4},{flex:1}]}),f&&t(n,{defaultValue:"",name:"",title:"",controlledType:"none",control:a,tips:t(T,{title:e("editor.action.form.tips.connect_to_local.title.tips"),closable:!1,content:e("editor.action.form.tips.connect_to_local.selfhost")})}),l==="redis"&&t(n,{title:e("editor.action.resource.db.label.database_index"),defaultValue:o.databaseIndex,name:"databaseIndex",placeholders:[e("editor.action.resource.db.placeholder.database_index")],controlledType:"number",control:a}),t(n,{title:c.title,controlledType:c.controlledType,control:a,defaultValue:c.defaultValue,name:c.name,placeholders:c.placeholders}),U,t(y,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:w,children:e("editor.action.resource.db.title.advanced_option")}),t(n,{title:e("editor.action.resource.db.label.ssl_options"),control:a,defaultValue:o.ssl,controlledType:"switch",name:"ssl",contentLabel:e("editor.action.resource.db.tip.ssl_options")})]})})};G.displayName="RedisConfigElement";export{G as default};
//# sourceMappingURL=index-f76f5c57.js.map
