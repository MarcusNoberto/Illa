import{n as V,j as a,F as h,r as I,au as U}from"./@illa-design-764f0835.js";import{F as y}from"./index-a4f6767e.js";import{r as F}from"./react-bc846394.js";import{C as c,u as j,c as L,o as M,d as _}from"./style-3f22391e.js";import{v as b,R as O}from"./index-a9283bb8.js";import{I as v}from"./index-8657b16c.js";import"./@emotion-09d14760.js";import"./index-d58e9443.js";import"./hook-3fc26e38.js";import"./index-f9365e36.js";import"./interface-8df5fe4c.js";import"./index-eab177f8.js";import"./utils-5cfd8be4.js";import"./style-00a92373.js";import"./upstash-e9b235a2.js";import"./index-4370180f.js";import"./index.esm-11ba4214.js";import"./lodash-lib-cfb0e9ed.js";const z={baseUrl:"",urlParams:[{key:"",value:""}],headers:[{key:"",value:""}],cookies:[{key:"",value:""}],authentication:"none",selfSignedCert:!1,certs:{caCert:"",clientKey:"",clientCert:"",mode:"verify-full"},authContent:{}},A=p=>{const{control:m}=p,e=p.auth,{t:o}=y();return V(h,{children:[a(c,{title:o("editor.action.resource.restapi.label.basic_auth_username"),defaultValue:(e==null?void 0:e.username)??"",name:"username",isRequired:!0,controlledType:"input",control:m,rules:[{validate:b}]}),a(c,{title:o("editor.action.resource.restapi.label.basic_auth_password"),defaultValue:(e==null?void 0:e.password)??"",name:"password",isRequired:!0,controlledType:"password",control:m,rules:[{required:!0}]})]})};A.displayName="BasicAuthPanel";const x=p=>{const{control:m}=p,e=p.auth,{t:o}=y();return a(c,{title:o("editor.action.resource.restapi.label.bearerToken"),defaultValue:(e==null?void 0:e.token)??"",name:"token",controlledType:"input",control:m,isRequired:!0,rules:[{validate:b}]})};x.displayName="BearerAuthPanel";const G=[{title:"editor.action.resource.restapi.label.digest_auth_username",name:"username",controlledType:"input",defaultValue:"",required:!1},{title:"editor.action.resource.restapi.label.digest_auth_password",name:"password",controlledType:"password",defaultValue:"",required:!1}],q=p=>{const{control:m}=p,e=p.auth,{t:o}=y();return a(h,{children:G.map(d=>a(c,{title:o(d.title),defaultValue:(e==null?void 0:e[d.name])??d.defaultValue,name:d.name,controlledType:d.controlledType,control:m,isRequired:d.required},d.name))})};q.displayName="DigestAuthPanel";const W={none:null,basic:A,bearer:x,digest:q},H=p=>{var k,w,R,T,g;const{resourceID:m}=p,{t:e}=y(),{control:o,watch:d}=j(),{getResourceByID:P}=F.useContext(O),f=P(m),t=(f==null?void 0:f.content)??z,D=(d("baseUrl",t.baseUrl)??"").startsWith("https://"),S=d("selfSignedCert",t==null?void 0:t.selfSignedCert),N=d("mode",(k=t.certs)==null?void 0:k.mode)==="skip",E=d("authentication",t.authentication),C=W[E],K=[{label:e("editor.action.resource.restapi.option.authentication.none"),value:"none"},{label:e("editor.action.resource.restapi.option.authentication.basic_auth"),value:"basic"},{label:e("editor.action.resource.restapi.option.authentication.bearer"),value:"bearer"},{label:e("editor.action.form.option.restapi.authentication.digest_auth"),value:"digest"}],B=[{label:e("editor.action.form.option.restapi.verification_mode.full_verification"),value:"verify-full"},{label:e("editor.action.form.option.restapi.verification_mode.verify_ca_certificat"),value:"verify-ca"},{label:e("editor.action.form.option.restapi.verification_mode.skip_ca_certificate_"),value:"skip"}];return a(h,{children:V("div",{css:L,children:[a(c,{controlledType:"input",isRequired:!0,title:e("editor.action.resource.db.label.name"),control:o,defaultValue:(f==null?void 0:f.resourceName)??"",rules:[{validate:b}],placeholders:[e("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:e("editor.action.resource.restapi.tip.name")}),a(I,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),a("div",{css:M,children:e("editor.action.resource.db.title.general_option")}),a(c,{title:e("editor.action.resource.restapi.label.base_url"),defaultValue:t.baseUrl,isRequired:!0,name:"baseUrl",controlledType:"input",control:o,rules:[{validate:b}],placeholders:[e("editor.action.resource.restapi.placeholder.base_url")]}),a(_,{control:o,defaultValue:t.urlParams,render:({field:{value:i,onChange:s}})=>a(v,{label:e("editor.action.resource.restapi.label.url_parameters"),records:i,onAdd:()=>{s([...i,{key:"",value:""}])},onDelete:l=>{let r=[...i];r.splice(l,1),r.length===0&&(r=[{key:"",value:""}]),s(r)},onChangeKey:(l,r,u)=>{let n=[...i];n[l]={key:r,value:u},s(n)},onChangeValue:(l,r,u)=>{let n=[...i];n[l]={key:r,value:u},s(n)}}),name:"urlParams"}),a(_,{control:o,defaultValue:t.headers,render:({field:{value:i,onChange:s}})=>a(v,{label:e("editor.action.resource.restapi.label.headers"),records:i,onAdd:()=>{s([...i,{key:"",value:""}])},onDelete:l=>{let r=[...i];r.splice(l,1),r.length===0&&(r=[{key:"",value:""}]),s(r)},onChangeKey:(l,r,u)=>{let n=[...i];n[l]={key:r,value:u},s(n)},onChangeValue:(l,r,u)=>{let n=[...i];n[l]={key:r,value:u},s(n)}}),name:"headers"}),a(_,{control:o,defaultValue:t.cookies,render:({field:{value:i,onChange:s}})=>a(v,{label:e("editor.action.resource.restapi.label.cookies"),records:i,onAdd:()=>{s([...i,{key:"",value:""}])},onDelete:l=>{let r=[...i];r.splice(l,1),r.length===0&&(r=[{key:"",value:""}]),s(r)},onChangeKey:(l,r,u)=>{let n=[...i];n[l]={key:r,value:u},s(n)},onChangeValue:(l,r,u)=>{let n=[...i];n[l]={key:r,value:u},s(n)}}),name:"cookies"}),D&&a(c,{title:e("editor.action.form.label.restapi.certificates"),defaultValue:(t==null?void 0:t.selfSignedCert)??!1,name:"selfSignedCert",controlledType:"switch",control:o,contentLabel:e("editor.action.form.option.restapi.certificates")}),S&&V(h,{children:[a(c,{controlledType:["textarea"],title:e("editor.action.form.option.restapi.ca_certificate"),control:o,defaultValue:((w=t==null?void 0:t.certs)==null?void 0:w.caCert)??"",name:"caCert",placeholders:[e("editor.action.resource.db.placeholder.certificate")]}),a(c,{controlledType:["textarea"],title:e("editor.action.form.option.restapi.client_key"),control:o,defaultValue:((R=t==null?void 0:t.certs)==null?void 0:R.clientKey)??"",name:"clientKey",placeholders:[e("editor.action.resource.db.placeholder.certificate")]}),a(c,{controlledType:["textarea"],title:e("editor.action.form.option.restapi.client_certificate"),control:o,defaultValue:((T=t==null?void 0:t.certs)==null?void 0:T.clientCert)??"",name:"clientCert",placeholders:[e("editor.action.resource.db.placeholder.certificate")]}),a(c,{title:e("editor.action.form.label.restapi.verification_mode"),defaultValue:((g=t==null?void 0:t.certs)==null?void 0:g.mode)??"verify-full",name:"mode",controlledType:"select",control:o,options:B}),N&&a(c,{title:"",defaultValue:"",name:"",controlledType:"none",control:o,tips:a(U,{title:e("editor.action.form.tips.connect_to_local.title.tips"),content:e("editor.action.form.tips.restapi.verification_mode.skip_ca_certificate")})})]}),a(c,{title:e("editor.action.resource.restapi.label.authentication"),defaultValue:t.authentication,name:"authentication",controlledType:"select",control:o,options:K}),C&&a(C,{control:o,auth:t.authContent})]})})};H.displayName="RestApiConfigElement";export{H as default};
//# sourceMappingURL=index-5b2eb8ac.js.map
