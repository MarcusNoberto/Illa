import{k as t,q as i,y as f,aq as S,F as c,ax as V}from"./@illa-design-df878cb8.js";import{F as T,a1 as k}from"./index-30c690b7.js";import"./index-1e58851c.js";import{r as n}from"./react-bc846394.js";import{u as q,c as N,C as a,o as y,e as I,a as E}from"./style-99767516.js";import{R as L,u as R,v as d,i as A}from"./index-df9a8cb6.js";import"./@emotion-28b7fe46.js";import"./index-8c3e69ae.js";import"./hook-9a3caedf.js";import"./index-7d4aa6bf.js";import"./interface-8df5fe4c.js";import"./utils-2ec9fd7f.js";import"./style-56e482f1.js";import"./upstash-7245fd7f.js";import"./index-cd70edfe.js";import"./index.esm-11ba4214.js";import"./lodash-lib-cfb0e9ed.js";const F={ssl:!1,selfSigned:!1,privateKey:"",clientCert:"",caCert:""},D={host:"",port:"8443",databaseName:"",username:"",password:"",ssl:F},K=x=>{const{resourceID:C}=x,{t:e}=T(),{control:r,formState:p,watch:u}=q(),{getResourceByID:_}=n.useContext(L),s=_(C),o=(s==null?void 0:s.content)??D,[l,g]=n.useState(!1),m=u("ssl",o.ssl.ssl),v=m&&u("selfSigned",o.ssl.selfSigned),w=n.useCallback(h=>{const b=A(h??"");return b!==l&&g(b),R(h)},[l]);return t(c,{children:i("div",{css:N,children:[t(a,{controlledType:"input",isRequired:!0,title:e("editor.action.resource.db.label.name"),control:r,defaultValue:(s==null?void 0:s.resourceName)??"",rules:[{validate:d}],placeholders:[e("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:e("editor.action.resource.restapi.tip.name")}),t(f,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:y,children:e("editor.action.resource.db.title.general_option")}),t(a,{controlledType:["input","number"],isRequired:!0,title:e("editor.action.resource.db.label.hostname_port"),control:r,defaultValue:[o.host,o.port],rules:[{required:e("editor.action.resource.error.invalid_url"),validate:w},{required:!0}],placeholders:[e("editor.action.resource.db.placeholder.hostname"),"9440"],name:["host","port"],styles:[{},{w:"142px",ml:"8px"}],tips:p.errors.host&&!l?i("div",{css:I,children:[t(S,{css:E}),t(c,{children:p.errors.host.message})]}):null}),l&&t(a,{defaultValue:"",name:"",title:"",controlledType:"none",control:r,tips:t(V,{title:e("editor.action.form.tips.connect_to_local.title.tips"),closable:!1,content:e("editor.action.form.tips.connect_to_local.selfhost")})}),t(a,{controlledType:["input"],isRequired:!0,title:e("editor.action.resource.db.label.database"),control:r,defaultValue:o.databaseName,rules:[{validate:d}],placeholders:[e("editor.action.resource.db.placeholder.default")],name:"databaseName"}),t(a,{controlledType:["input","password"],title:e("editor.action.resource.db.label.username_password"),control:r,defaultValue:[o.username,o.password],placeholders:[e("editor.action.resource.db.placeholder.username"),e("editor.action.resource.db.placeholder.password")],name:["username","password"],styles:[{},{ml:"8px"}]}),k,t(f,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:y,children:e("editor.action.resource.db.title.advanced_option")}),t(a,{controlledType:["switch"],title:e("editor.action.resource.db.label.ssl_options"),control:r,defaultValue:o.ssl.ssl,name:"ssl",contentLabel:e("editor.action.resource.db.tip.ssl_options"),tips:e("editor.action.form.tips.clickhouse.ssl")}),m&&t(a,{controlledType:["switch"],title:"",control:r,defaultValue:o.ssl.selfSigned,name:"selfSigned",contentLabel:e("editor.action.resource.db.label.self_signed_certificate")}),v&&i(c,{children:[t(a,{controlledType:["textarea"],title:e("editor.action.resource.db.label.ca_certificate"),isRequired:!0,rules:[{validate:d}],control:r,defaultValue:o.ssl.caCert,name:"caCert",placeholders:[e("editor.action.resource.db.placeholder.certificate")]}),t(a,{controlledType:["textarea"],title:e("editor.action.resource.db.label.client_key"),control:r,defaultValue:o.ssl.privateKey,name:"privateKey",placeholders:[e("editor.action.resource.db.placeholder.certificate")]}),t(a,{controlledType:["textarea"],title:e("editor.action.resource.db.label.client_certificate"),control:r,defaultValue:o.ssl.clientCert,name:"clientCert",placeholders:[e("editor.action.resource.db.placeholder.certificate")]})]})]})})};K.displayName="ClickhouseConfigElement";export{K as default};
//# sourceMappingURL=index-22bcb2db.js.map
