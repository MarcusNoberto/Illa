import{j as t,n as m,r as y,an as q,F as b,au as I}from"./@illa-design-764f0835.js";import{F as R,Z as N}from"./index-a4f6767e.js";import"./index-eab177f8.js";import{r as h}from"./react-bc846394.js";import{u as k,c as E,C as a,o as x,e as M,a as A,d as O,f as D}from"./style-3f22391e.js";import{R as F,u as K,v,i as L}from"./index-a9283bb8.js";import{I as j}from"./index-8657b16c.js";import"./@emotion-09d14760.js";import"./index-d58e9443.js";import"./hook-3fc26e38.js";import"./index-f9365e36.js";import"./interface-8df5fe4c.js";import"./utils-5cfd8be4.js";import"./style-00a92373.js";import"./upstash-e9b235a2.js";import"./index-4370180f.js";import"./index.esm-11ba4214.js";import"./lodash-lib-cfb0e9ed.js";const z={ssl:!1,privateKey:"",clientCert:"",caCert:"",verificationMode:"full"},B={connectionOpts:[{key:"",value:""}],databaseName:"",host:"",password:"",port:"1433",ssl:z,username:""},G=w=>{const{resourceID:C}=w,{t:e}=R(),{control:r,formState:f,watch:_}=k(),{getResourceByID:V}=h.useContext(F),n=V(C),[p,S]=h.useState(!1),o=(n==null?void 0:n.content)??B,T=_("ssl",o.ssl.ssl),g=h.useCallback(s=>{const l=L(s??"");return l!==p&&S(l),K(s)},[p]);return t(b,{children:m("div",{css:E,children:[t(a,{controlledType:"input",isRequired:!0,title:e("editor.action.resource.db.label.name"),control:r,defaultValue:(n==null?void 0:n.resourceName)??"",rules:[{validate:v}],placeholders:[e("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:e("editor.action.resource.restapi.tip.name")}),t(y,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:x,children:e("editor.action.resource.db.title.general_option")}),t(a,{controlledType:["input","number"],isRequired:!0,title:e("editor.action.resource.db.label.hostname_port"),control:r,defaultValue:[o.host,o.port??1433],rules:[{required:e("editor.action.resource.error.invalid_url"),validate:g},{required:!0}],placeholders:[e("editor.action.resource.db.placeholder.hostname"),"1433"],name:["host","port"],styles:[{},{w:"142px",ml:"8px"}],tips:f.errors.host&&!p?m("div",{css:M,children:[t(q,{css:A}),t(b,{children:f.errors.host.message})]}):null}),p&&t(a,{defaultValue:"",name:"",title:"",controlledType:"none",control:r,tips:t(I,{title:e("editor.action.form.tips.connect_to_local.title.tips"),closable:!1,content:e("editor.action.form.tips.connect_to_local.selfhost")})}),t(a,{controlledType:["input"],isRequired:!0,title:e("editor.action.resource.db.label.database"),control:r,defaultValue:o.databaseName,rules:[{validate:v}],placeholders:[e("editor.action.resource.db.placeholder.database_name")],name:"databaseName"}),t(a,{controlledType:["input","password"],title:e("editor.action.resource.db.label.username_password"),control:r,defaultValue:[o.username,o.password],placeholders:[e("editor.action.resource.db.placeholder.username"),e("editor.action.resource.db.placeholder.password")],name:["username","password"],styles:[{},{ml:"8px"}]}),N,t(y,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:x,children:e("editor.action.resource.db.title.advanced_option")}),t(O,{control:r,defaultValue:o.connectionOpts,render:({field:{value:s,onChange:l}})=>t(j,{label:e("editor.action.resource.db.label.connection_options"),records:s,onAdd:()=>{l([...s,{key:"",value:""}])},onDelete:c=>{let i=[...s];i.splice(c,1),i.length===0&&(i=[{key:"",value:""}]),l(i)},onChangeKey:(c,i,u)=>{let d=[...s];d[c]={key:i,value:u},l(d)},onChangeValue:(c,i,u)=>{let d=[...s];d[c].value=u,l(d)}}),name:"connectionOpts"},"connectionOpts"),t("div",{css:D,children:e("editor.action.resource.db.tip.connection_options")}),t(a,{controlledType:["switch"],title:e("editor.action.resource.db.label.ssl_options"),control:r,defaultValue:o.ssl.ssl,name:"ssl",contentLabel:e("editor.action.resource.db.tip.ssl_options")}),T&&m(b,{children:[t(a,{controlledType:["textarea"],title:e("editor.action.resource.db.label.ca_certificate"),control:r,defaultValue:o.ssl.caCert,name:"caCert",placeholders:[e("editor.action.resource.db.placeholder.certificate")]}),t(a,{controlledType:["textarea"],title:e("editor.action.resource.db.label.client_key"),control:r,defaultValue:o.ssl.privateKey,name:"privateKey",placeholders:[e("editor.action.resource.db.placeholder.certificate")]}),t(a,{controlledType:["textarea"],title:e("editor.action.resource.db.label.client_certificate"),control:r,defaultValue:o.ssl.clientCert,name:"clientCert",placeholders:[e("editor.action.resource.db.placeholder.certificate")]})]})]})})};G.displayName="MicrosoftSqlConfigElement";export{G as default};
//# sourceMappingURL=index-d468560e.js.map
