{"version":3,"file":"index-796c6f06.js","sources":["../../../../packages/illa-public-component/Dashboard/AppCard/mobile/index.tsx","../../src/services/swr/app.ts","../../src/page/workspace/apps/mobile/style.ts","../../src/page/workspace/apps/mobile/index.tsx","../../src/page/workspace/apps/pc/style.ts","../../src/page/workspace/apps/pc/utils.ts","../../src/page/workspace/apps/pc/index.tsx","../../src/page/workspace/apps/index.tsx"],"sourcesContent":["import { Avatar } from \"@illa-public/avatar\"\nimport { APP_TYPE } from \"@illa-public/public-types\"\nimport { fromNow, getAuthToken, getILLABuilderURL } from \"@illa-public/utils\"\nimport { FC } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { Link, useParams } from \"react-router-dom\"\nimport { Button, Tag } from \"@illa-design/react\"\nimport DesktopIcon from \"../assets/desktop.svg?react\"\nimport MobileIcon from \"../assets/mobile.svg?react\"\nimport { MobileCardItemProps } from \"./interface\"\nimport {\n  cardItemContainerStyle,\n  cardItemFooterContainerStyle,\n  descContainerStyle,\n  editTimeInfo,\n  editorAvatarStyle,\n  editorInfoContainerStyle,\n  headerContainerStyle,\n  linkButtonStyle,\n  tagContainerStyle,\n  titleStyle,\n} from \"./style\"\n\nexport const MobileAppCardItem: FC<MobileCardItemProps> = (props) => {\n  const {\n    appName,\n    appActivity,\n    appDeployed,\n    appID,\n    description,\n    publishedToMarketplace,\n    editorInfo,\n    appType = APP_TYPE.PC,\n    cardType,\n  } = props\n\n  const { t } = useTranslation()\n  const { teamIdentifier } = useParams()\n\n  return (\n    <div css={cardItemContainerStyle}>\n      <header css={headerContainerStyle}>\n        <h6 css={titleStyle}>{appName}</h6>\n        <p css={editTimeInfo}>\n          {t(\"dashboard.app.edited_time\", {\n            time: fromNow(appActivity.modifiedAt),\n            user: appActivity.modifier,\n          })}\n        </p>\n        <div css={tagContainerStyle}>\n          {appDeployed ? (\n            <Tag colorScheme=\"green\" size=\"small\">\n              {t(\"new_dashboard.status.deployed\")}\n            </Tag>\n          ) : (\n            <Tag colorScheme=\"grayBlue\" size=\"small\">\n              {t(\"new_dashboard.status.undeploy\")}\n            </Tag>\n          )}\n          {cardType === \"app\" && appType === APP_TYPE.MOBILE ? (\n            <Tag colorScheme=\"grayBlue\" size=\"small\" icon={<MobileIcon />}>\n              {t(\"new_dashboard.type.mobile\")}\n            </Tag>\n          ) : (\n            <Tag colorScheme=\"grayBlue\" size=\"small\" icon={<DesktopIcon />}>\n              {t(\"new_dashboard.type.desktop\")}\n            </Tag>\n          )}\n          {publishedToMarketplace && (\n            <Tag size=\"small\" colorScheme=\"techPurple\">\n              {t(\"dashboard.common.marketplace\")}\n            </Tag>\n          )}\n        </div>\n      </header>\n      <p css={descContainerStyle}>\n        {description || t(\"new_dashboard.desc.no_description\")}\n      </p>\n      <footer css={cardItemFooterContainerStyle}>\n        <div css={editorInfoContainerStyle}>\n          {editorInfo?.map((editor) => (\n            <Avatar\n              size={24}\n              key={editor.userID}\n              css={editorAvatarStyle}\n              avatarUrl={editor.avatar}\n              name={editor.nickname}\n              id={editor.userID}\n            />\n          ))}\n        </div>\n        {cardType === \"app\" && (\n          <Link\n            to={`${getILLABuilderURL(\n              window.customDomain,\n            )}/${teamIdentifier}/deploy/app/${appID}?token=${getAuthToken()}`}\n            target=\"_blank\"\n            css={linkButtonStyle}\n          >\n            <Button\n              colorScheme=\"grayBlue\"\n              variant=\"outline\"\n              size=\"large\"\n              w=\"100%\"\n            >\n              {t(\"dashboard.common.launch\")}\n            </Button>\n          </Link>\n        )}\n      </footer>\n    </div>\n  )\n}\n","import { builderRequest } from \"@illa-public/illa-net\"\nimport { AppInfoShape, ComponentTreeNode } from \"@illa-public/public-types\"\nimport { getCurrentTeamInfo } from \"@illa-public/user-data\"\nimport { useSelector } from \"react-redux\"\nimport useSWR from \"swr\"\n\nexport const useAppList = (canAccessApps: boolean) => {\n  const currentTeamInfo = useSelector(getCurrentTeamInfo)\n\n  return useSWR(\n    [\"/apps\", currentTeamInfo?.id, canAccessApps],\n    ([url, teamID]) =>\n      canAccessApps\n        ? builderRequest<AppInfoShape[]>(\n            {\n              url,\n              method: \"GET\",\n            },\n            { teamID },\n          ).then((res) => res.data)\n        : [],\n  )\n}\n\nexport const fetchDeleteApp = (appID: string, teamID: string) => {\n  return builderRequest<{ appID: string }>(\n    {\n      url: `/apps/${appID}`,\n      method: \"DELETE\",\n    },\n    { teamID },\n  )\n}\n\nexport const fetchCopyApp = (appID: string, name: string, teamID: string) => {\n  return builderRequest<AppInfoShape>(\n    {\n      url: `/apps/${appID}/duplication`,\n      method: \"POST\",\n      data: {\n        appName: name,\n      },\n    },\n    {\n      teamID,\n    },\n  ).then((res) => res.data)\n}\n\nexport const fetchUpdateAppConfig = async (\n  appID: string,\n  teamID: string,\n  config: {\n    public?: boolean\n    waterMark?: boolean\n    description?: string\n    appName?: string\n  },\n) => {\n  return builderRequest<AppInfoShape>(\n    {\n      method: \"PATCH\",\n      url: `/apps/${appID}/config`,\n      data: config,\n    },\n    {\n      teamID,\n    },\n  ).then((res) => res.data)\n}\n\ninterface IAppCreateRequestData {\n  appName: string\n  initScheme: ComponentTreeNode\n}\n\nexport const fetchCreateApp = (data: IAppCreateRequestData, teamID: string) => {\n  return builderRequest<AppInfoShape>(\n    {\n      url: \"/apps\",\n      method: \"POST\",\n      data,\n    },\n    { teamID },\n  )\n}\n","import { css } from \"@emotion/react\"\n\nexport const cardContainerStyle = css`\n  display: grid;\n  grid-template-columns: 1;\n  grid-gap: 24px 24px;\n  overflow: auto;\n  padding: 0 16px;\n  width: 100%;\n  padding-bottom: 24px;\n`\n\nexport const appContainerStyle = css`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`\n","import { MobileAppCardItem, TeamContentEmpty } from \"@illa-public/dashboard\"\nimport { USER_ROLE } from \"@illa-public/public-types\"\nimport { getCurrentTeamInfo, getPlanUtils } from \"@illa-public/user-data\"\nimport {\n  ACTION_ACCESS,\n  ATTRIBUTE_GROUP,\n  canAccess,\n} from \"@illa-public/user-role-utils\"\nimport { useTranslation } from \"react-i18next\"\nimport { useSelector } from \"react-redux\"\nimport { Divider, Search } from \"@illa-design/react\"\nimport { FullSectionLoading } from \"@/components/FullSectionLoading\"\nimport { MobileDashboardHeader } from \"@/page/workspace/components/Header\"\nimport { useSearch } from \"@/page/workspace/hooks\"\nimport { useAppList } from \"@/services/swr/app\"\nimport { useDividerLine } from \"../../layout/hook\"\nimport { appContainerStyle, cardContainerStyle } from \"./style\"\n\nexport const MobileAppWorkspace = () => {\n  const currentTeamInfo = useSelector(getCurrentTeamInfo)\n  const canAccessApps = canAccess(\n    currentTeamInfo?.myRole ?? USER_ROLE.VIEWER,\n    ATTRIBUTE_GROUP.APP,\n    getPlanUtils(currentTeamInfo),\n    ACTION_ACCESS.VIEW,\n  )\n  const { data: appList = [], isLoading } = useAppList(canAccessApps)\n  const { t } = useTranslation()\n  const appListFilter = appList.filter((app) => app.deployed)\n\n  const [appListResult, handleChangeSearch] = useSearch(appListFilter ?? [], [\n    \"appName\",\n    \"config.description\",\n  ])\n\n  const [dividerShown, onContainerScroll] = useDividerLine()\n\n  return (\n    <div css={appContainerStyle}>\n      <MobileDashboardHeader\n        titleName={t(\"page.workspace.menu.apps\")}\n        actionGroupComponent={\n          <>\n            <Search\n              size=\"large\"\n              colorScheme=\"techPurple\"\n              onChange={handleChangeSearch}\n              placeholder={t(\"dashboard.search\")}\n              allowClear\n            />\n          </>\n        }\n      />\n      {isLoading ? (\n        <FullSectionLoading />\n      ) : appListResult.length > 0 ? (\n        <>\n          {dividerShown && <Divider direction=\"horizontal\" />}\n          <div css={cardContainerStyle} onScroll={onContainerScroll}>\n            {appListResult.map((appInfo) => (\n              <MobileAppCardItem\n                key={appInfo.appId}\n                appName={appInfo.appName}\n                description={appInfo.config.description}\n                appDeployed={appInfo.deployed}\n                appActivity={appInfo.appActivity}\n                appID={appInfo.appId}\n                publishedToMarketplace={appInfo.config.publishedToMarketplace}\n                editorInfo={appInfo.editedBy}\n                cardType=\"app\"\n              />\n            ))}\n          </div>\n        </>\n      ) : (\n        <TeamContentEmpty loading={false} showCreate={false} />\n      )}\n    </div>\n  )\n}\n","import { css } from \"@emotion/react\"\n\nexport const cardContainerStyle = css`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));\n  grid-gap: 24px 24px;\n  overflow: auto;\n  padding: 0 32px;\n  padding-bottom: 32px;\n`\n\nexport const appContainerStyle = css`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`\n","const APP_NAME_MAX_LENGTH = 128\nconst COPY_SUFFIX = \" Copy\"\nconst trimmedLength = APP_NAME_MAX_LENGTH - COPY_SUFFIX.length\n\nexport const generateDuplicateAppName = (appName: string = \"\") =>\n  `${(appName || \"\").slice(0, trimmedLength)}${COPY_SUFFIX}`\n","import { PCAppCard, TeamContentEmpty } from \"@illa-public/dashboard\"\nimport { AppListContextProvider } from \"@illa-public/dashboard\"\nimport { BASIC_APP_CONFIG } from \"@illa-public/public-configs\"\nimport { AppInfoShape, USER_ROLE } from \"@illa-public/public-types\"\nimport {\n  getCurrentId,\n  getCurrentTeamInfo,\n  getCurrentUser,\n  getPlanUtils,\n} from \"@illa-public/user-data\"\nimport {\n  ACTION_ACCESS,\n  ACTION_MANAGE,\n  ATTRIBUTE_GROUP,\n  canAccess,\n  canManage,\n} from \"@illa-public/user-role-utils\"\nimport {\n  getAuthToken,\n  getILLABuilderURL,\n  sendTagEvent,\n} from \"@illa-public/utils\"\nimport { useState } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { useSelector } from \"react-redux\"\nimport { useParams } from \"react-router-dom\"\nimport { mutate } from \"swr\"\nimport {\n  Button,\n  Divider,\n  PlusIcon,\n  Search,\n  useMessage,\n} from \"@illa-design/react\"\nimport { FullSectionLoading } from \"@/components/FullSectionLoading\"\nimport { DashboardHeader } from \"@/page/workspace/components/Header\"\nimport { useSearch } from \"@/page/workspace/hooks\"\nimport {\n  fetchCopyApp,\n  fetchCreateApp,\n  fetchDeleteApp,\n  fetchUpdateAppConfig,\n  useAppList,\n} from \"@/services/swr/app\"\nimport { useDividerLine } from \"../../layout/hook\"\nimport { appContainerStyle, cardContainerStyle } from \"./style\"\nimport { generateDuplicateAppName } from \"./utils\"\n\nexport const PCAppWorkspace = () => {\n  const currentTeamID = useSelector(getCurrentId)!\n  const currentTeamInfo = useSelector(getCurrentTeamInfo)\n  const userInfo = useSelector(getCurrentUser)\n\n  const canAccessApps = canAccess(\n    currentTeamInfo?.myRole ?? USER_ROLE.VIEWER,\n    ATTRIBUTE_GROUP.APP,\n    getPlanUtils(currentTeamInfo),\n    ACTION_ACCESS.VIEW,\n  )\n  const { data: appList, isLoading } = useAppList(canAccessApps)\n  const { t } = useTranslation()\n  const [createLoading, setCreateLoading] = useState(false)\n  const { teamIdentifier } = useParams()\n  const message = useMessage()\n\n  const [appListResult, handleChangeSearch] = useSearch(appList ?? [], [\n    \"appName\",\n    \"config.description\",\n  ])\n\n  const [dividerShown, onContainerScroll] = useDividerLine()\n\n  const refreshAppList = () => {\n    mutate([\"/apps\", currentTeamID])\n  }\n\n  const deleteApp = (appID: string) => {\n    const options = {\n      optimisticData: (appList?: AppInfoShape[]) =>\n        appList?.filter((item) => item.appId !== appID) ?? [],\n      rollbackOnError(error: unknown) {\n        if (error instanceof Error) {\n          return error.name !== \"AbortError\"\n        }\n        return true\n      },\n    }\n    return mutate(\n      [\"/apps\", currentTeamID, canAccessApps],\n      async (appList) => {\n        const response = await fetchDeleteApp(appID, currentTeamID)\n        if (Array.isArray(appList))\n          return appList.filter((item) => item.appId !== response.data.appID)\n        return appList\n      },\n      options,\n    )\n  }\n\n  const copyApp = (appID: string) => {\n    return mutate([\"/apps\", currentTeamID, canAccessApps], async () => {\n      if (Array.isArray(appListResult)) {\n        const targetAppInfo = appListResult?.find(\n          (item) => item.appId === appID,\n        )\n        if (!targetAppInfo) return\n        const newAppName = generateDuplicateAppName(targetAppInfo.appName)\n        const response = await fetchCopyApp(appID, newAppName, currentTeamID)\n        window.open(\n          `${getILLABuilderURL()}/${teamIdentifier}/app/${\n            response.appId\n          }?token=${getAuthToken()}`,\n          \"_blank\",\n        )\n        return [response, ...appListResult]\n      }\n      return appListResult\n    })\n  }\n\n  const updateAppConfig = (\n    appID: string,\n    config: {\n      public?: boolean\n      waterMark?: boolean\n      description?: string\n      appName?: string\n    },\n  ) => {\n    const options = {\n      optimisticData: (appList?: AppInfoShape[]) => {\n        const targetAppInfo = appList?.find((item) => item.appId === appID)\n        if (!targetAppInfo) return appList ?? []\n        const newAppList = appList?.filter((item) => item.appId !== appID) ?? []\n        return [\n          {\n            ...targetAppInfo,\n            appName: config.appName ?? targetAppInfo.appName,\n            config: {\n              ...targetAppInfo.config,\n              ...config,\n            },\n          },\n          ...newAppList,\n        ]\n      },\n      rollbackOnError(error: unknown) {\n        if (error instanceof Error) {\n          return error.name !== \"AbortError\"\n        }\n        return true\n      },\n      populateCache: (\n        updatedResult: AppInfoShape,\n        appList?: AppInfoShape[],\n      ) => {\n        const filteredAppList =\n          appList?.filter((item) => item.appId !== appID) ?? []\n        return [updatedResult, ...filteredAppList]\n      },\n      revalidate: false,\n    }\n    return mutate(\n      [\"/apps\", currentTeamID, canAccessApps],\n      fetchUpdateAppConfig(appID, currentTeamID, config),\n      options,\n    )\n  }\n\n  const handleClickCreateApp = async () => {\n    setCreateLoading(true)\n    try {\n      const resp = await fetchCreateApp(\n        {\n          appName: \"Untitled app\",\n          initScheme: BASIC_APP_CONFIG,\n        },\n        currentTeamID,\n      )\n      sendTagEvent(\"create_app\", userInfo?.userID)\n      refreshAppList()\n      window.open(\n        `${getILLABuilderURL()}/${teamIdentifier}/app/${\n          resp.data.appId\n        }?token=${getAuthToken()}`,\n        \"_blank\",\n      )\n    } catch (e) {\n      message.error({ content: t(\"create_fail\") })\n    } finally {\n      setCreateLoading(false)\n    }\n  }\n\n  return (\n    <div css={appContainerStyle}>\n      <DashboardHeader\n        titleName={t(\"page.workspace.menu.apps\")}\n        actionGroupComponent={\n          <>\n            <Search\n              w=\"200px\"\n              size=\"large\"\n              colorScheme=\"techPurple\"\n              onChange={handleChangeSearch}\n              placeholder={t(\"dashboard.search\")}\n              allowClear\n            />\n            {canManage(\n              currentTeamInfo?.myRole ?? USER_ROLE.GUEST,\n              ATTRIBUTE_GROUP.APP,\n              getPlanUtils(currentTeamInfo),\n              ACTION_MANAGE.CREATE_APP,\n            ) && (\n              <Button\n                size=\"large\"\n                colorScheme=\"techPurple\"\n                leftIcon={<PlusIcon />}\n                w=\"200px\"\n                loading={createLoading}\n                onClick={handleClickCreateApp}\n              >\n                {t(\"new_dashboard.button.blank\")}\n              </Button>\n            )}\n          </>\n        }\n      />\n      {isLoading ? (\n        <FullSectionLoading />\n      ) : appListResult.length > 0 ? (\n        <AppListContextProvider\n          deleteApp={deleteApp}\n          copyApp={copyApp}\n          updateAppConfig={updateAppConfig}\n        >\n          {dividerShown && <Divider direction=\"horizontal\" />}\n\n          <div css={cardContainerStyle} onScroll={onContainerScroll}>\n            {appListResult.map((appInfo) => (\n              <PCAppCard appInfo={appInfo} key={appInfo.appId} />\n            ))}\n          </div>\n        </AppListContextProvider>\n      ) : (\n        <TeamContentEmpty\n          loading={createLoading}\n          onClickButton={handleClickCreateApp}\n          showCreate={canManage(\n            currentTeamInfo?.myRole ?? USER_ROLE.GUEST,\n            ATTRIBUTE_GROUP.APP,\n            getPlanUtils(currentTeamInfo),\n            ACTION_MANAGE.CREATE_APP,\n          )}\n        />\n      )}\n    </div>\n  )\n}\n","import { LayoutAutoChange } from \"@illa-public/layout-auto-change\"\nimport { FC } from \"react\"\nimport { MobileAppWorkspace } from \"./mobile\"\nimport { PCAppWorkspace } from \"./pc\"\n\nexport * from \"./pc\"\n\nconst AppWorkspaceLanding: FC = () => {\n  return (\n    <LayoutAutoChange\n      desktopPage={<PCAppWorkspace />}\n      mobilePage={<MobileAppWorkspace />}\n    />\n  )\n}\n\nexport default AppWorkspaceLanding\n"],"names":["MobileAppCardItem","props","appName","appActivity","appDeployed","appID","description","publishedToMarketplace","editorInfo","appType","APP_TYPE","cardType","useTranslation","teamIdentifier","useParams","jsxs","cardItemContainerStyle","headerContainerStyle","jsx","titleStyle","editTimeInfo","fromNow","tagContainerStyle","Tag","MobileIcon","DesktopIcon","descContainerStyle","cardItemFooterContainerStyle","editorInfoContainerStyle","editor","Avatar","editorAvatarStyle","Link","getILLABuilderURL","getAuthToken","linkButtonStyle","Button","useAppList","canAccessApps","currentTeamInfo","useSelector","getCurrentTeamInfo","useSWR","url","teamID","builderRequest","res","fetchDeleteApp","fetchCopyApp","name","fetchUpdateAppConfig","config","fetchCreateApp","data","cardContainerStyle","css","appContainerStyle","MobileAppWorkspace","canAccess","USER_ROLE","ATTRIBUTE_GROUP","getPlanUtils","ACTION_ACCESS","appList","isLoading","t","appListFilter","app","appListResult","handleChangeSearch","useSearch","dividerShown","onContainerScroll","useDividerLine","MobileDashboardHeader","Fragment","Search","FullSectionLoading","Divider","appInfo","TeamContentEmpty","APP_NAME_MAX_LENGTH","COPY_SUFFIX","trimmedLength","generateDuplicateAppName","PCAppWorkspace","currentTeamID","getCurrentId","userInfo","getCurrentUser","createLoading","setCreateLoading","useState","message","useMessage","refreshAppList","mutate","deleteApp","response","item","error","copyApp","targetAppInfo","newAppName","updateAppConfig","options","newAppList","updatedResult","filteredAppList","handleClickCreateApp","resp","BASIC_APP_CONFIG","sendTagEvent","DashboardHeader","canManage","ACTION_MANAGE","PlusIcon","AppListContextProvider","PCAppCard","AppWorkspaceLanding","LayoutAutoChange"],"mappings":"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"}