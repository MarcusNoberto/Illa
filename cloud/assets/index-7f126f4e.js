import{k as a,q as u,y as g,l as f,a9 as D,B as Q,ax as j,F as A}from"./@illa-design-df878cb8.js";import{T as F}from"./index-1e58851c.js";import{F as U,a1 as q}from"./index-eddc38d4.js";import{r as y}from"./react-bc846394.js";import{u as M,c as k,C as s,o as w,d as J,g as P,l as H,b as z,h as G}from"./style-99767516.js";import{R as K,v as p,i as Z}from"./index-8a1f5a15.js";import{T as S}from"./Trans-3c835b41.js";import"./@emotion-28b7fe46.js";import"./index-6de9b86f.js";import"./hook-6ce8381a.js";import"./index-ce6bd9c8.js";import"./interface-8df5fe4c.js";import"./utils-9fb27c43.js";import"./style-56e482f1.js";import"./upstash-7245fd7f.js";import"./index-98e7bd81.js";import"./index.esm-11ba4214.js";import"./lodash-lib-cfb0e9ed.js";const L=`-----BEGIN CERTIFICATE-----
MIIFazCCA1OgAwIBAgIRAIIQz7DSQONZRGPgu2OCiwAwDQYJKoZIhvcNAQELBQAw
TzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh
cmNoIEdyb3VwMRUwEwYDVQQDEwxJU1JHIFJvb3QgWDEwHhcNMTUwNjA0MTEwNDM4
WhcNMzUwNjA0MTEwNDM4WjBPMQswCQYDVQQGEwJVUzEpMCcGA1UEChMgSW50ZXJu
ZXQgU2VjdXJpdHkgUmVzZWFyY2ggR3JvdXAxFTATBgNVBAMTDElTUkcgUm9vdCBY
MTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAK3oJHP0FDfzm54rVygc
h77ct984kIxuPOZXoHj3dcKi/vVqbvYATyjb3miGbESTtrFj/RQSa78f0uoxmyF+
0TM8ukj13Xnfs7j/EvEhmkvBioZxaUpmZmyPfjxwv60pIgbz5MDmgK7iS4+3mX6U
A5/TR5d8mUgjU+g4rk8Kb4Mu0UlXjIB0ttov0DiNewNwIRt18jA8+o+u3dpjq+sW
T8KOEUt+zwvo/7V3LvSye0rgTBIlDHCNAymg4VMk7BPZ7hm/ELNKjD+Jo2FR3qyH
B5T0Y3HsLuJvW5iB4YlcNHlsdu87kGJ55tukmi8mxdAQ4Q7e2RCOFvu396j3x+UC
B5iPNgiV5+I3lg02dZ77DnKxHZu8A/lJBdiB3QW0KtZB6awBdpUKD9jf1b0SHzUv
KBds0pjBqAlkd25HN7rOrFleaJ1/ctaJxQZBKT5ZPt0m9STJEadao0xAH0ahmbWn
OlFuhjuefXKnEgV4We0+UXgVCwOPjdAvBbI+e0ocS3MFEvzG6uBQE3xDk3SzynTn
jh8BCNAw1FtxNrQHusEwMFxIt4I7mKZ9YIqioymCzLq9gwQbooMDQaHWBfEbwrbw
qHyGO0aoSCqI3Haadr8faqU9GY/rOPNk3sgrDQoo//fb4hVC1CLQJ13hef4Y53CI
rU7m2Ys6xt0nUW7/vGT1M0NPAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIBBjAPBgNV
HRMBAf8EBTADAQH/MB0GA1UdDgQWBBR5tFnme7bl5AFzgAiIyBpY9umbbjANBgkq
hkiG9w0BAQsFAAOCAgEAVR9YqbyyqFDQDLHYGmkgJykIrGF1XIpu+ILlaS/V9lZL
ubhzEFnTIZd+50xx+7LSYK05qAvqFyFWhfFQDlnrzuBZ6brJFe+GnY+EgPbk6ZGQ
3BebYhtF8GaV0nxvwuo77x/Py9auJ/GpsMiu/X1+mvoiBOv/2X/qkSsisRcOj/KK
NFtY2PwByVS5uCbMiogziUwthDyC3+6WVwW6LLv3xLfHTjuCvjHIInNzktHCgKQ5
ORAzI4JMPJ+GslWYHb4phowim57iaztXOoJwTdwJx4nLCgdNbOhdjsnvzqvHu7Ur
TkXWStAmzOVyyghqpZXjFaH3pO3JLF+l+/+sKAIuvtd7u+Nxe5AW0wdeRlN8NwdC
jNPElpzVmbUq4JUagEiuTDkHzsxHpFKVK7q4+63SM1N95R1NbdWhscdCb+ZAJzVc
oyi3B43njTOQ5yOf+1CceWxG1bQVs5ZufpsMljq4Ui0/1lvh+wjChP4kqKOJ2qxq
4RgqsahDYVvTH9w7jXbyLeiNdd8XM2w9U/t7y0Ff/9yi0GE44Za4rF2LN9d11TPA
mRGunUHBcnWEvgJBQl9nJEiU0Zsnvgc/ubhPgXRR4Xq37Z0j4r7g1SgEEzwxA57d
emyPxgcYxn/eR44/KJ4EBs+lVDR3veyJm+kXQ99b21/+jh5Xos1AnX5iItreGCc=
-----END CERTIFICATE-----`,C=i=>{switch(i){case"hydra":case"postgresql":case"supabasedb":return"5432";case"mysql":case"mariadb":return"3306";case"tidb":return"4000";default:return"3306"}},x=i=>/^(.*):\/\/(.*):(.*)@(.*?)(?::(\d+))?\/(.*)$/.test(i);function X(i){const o=/^(.*):\/\/(.*):(.*)@(.*?)(?::(\d+))?\/(.*)$/,l=i.match(o);if(l)return{databaseUsername:l[2],databasePassword:l[3],host:l[4],port:l[5]??80,databaseName:l[6]}}const Y=i=>{const{resourceType:o,resourceID:l}=i,{t}=U(),{control:r,setValue:c,watch:m}=M(),{getResourceByID:B}=y.useContext(K),e=B(l),b=(e==null?void 0:e.content.ssl.ssl)??(o==="tidb"||o==="hydra"),T=(e==null?void 0:e.content.ssl.serverCert)??(o==="tidb"||o==="hydra"?L:""),V=y.useMemo(()=>o==="tidb"||o==="hydra"?a(S,{i18nKey:"editor.action.form.tips.tidb.ca_certificate",t,components:[a(F,{onClick:()=>{o==="tidb"?window.open("https://docs.pingcap.com/tidbcloud/tidb-cloud-tls-connect-to-dedicated-tier","_blank"):o==="hydra"&&window.open("https://docs.hydra.so/cloud-warehouse-operations/tls","_blank")}},"ca-link")]}):"",[o,t]),v=m("host"),E=Z(v??""),I=m("ssl",b);return a(A,{children:u("div",{css:k,children:[a(s,{controlledType:"input",isRequired:!0,title:t("editor.action.resource.db.label.name"),control:r,defaultValue:(e==null?void 0:e.resourceName)??"",rules:[{validate:p}],placeholders:[t("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:t("editor.action.resource.restapi.tip.name")}),a(g,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),a("div",{css:w,children:t("editor.action.resource.db.title.general_option")}),a(J,{control:r,defaultValue:"",rules:{required:!1},render:({field:{value:d,onChange:h,onBlur:N}})=>u("div",{css:P,children:[a("div",{css:H,children:a("span",{css:z(f("grayBlue","02")),children:t("editor.action.form.option.neon.connection_string")})}),u("div",{css:G,children:[a(D,{onBlur:N,onChange:h,error:!x(d)&&d!=="",value:d,colorScheme:"techPurple",placeholder:"xxxxxx://myuser:mypassword@localhost:5432/mydb"}),a(Q,{disabled:!x(d),onClick:()=>{const n=X(d);n!==void 0&&(c("host",n.host),c("port",n.port),c("databaseName",n.databaseName),c("databaseUsername",n.databaseUsername),c("databasePassword",n.databasePassword),h(""))},colorScheme:"techPurple",h:"32px",children:t("editor.action.form.option.neon.parse")})]})]}),name:"connectionString"}),a(s,{title:t("editor.action.resource.db.label.hostname_port"),defaultValue:[e==null?void 0:e.content.host,(e==null?void 0:e.content.port)??C(o)],name:["host","port"],controlledType:["input","number"],control:r,isRequired:!0,rules:[{validate:p},{required:!0}],styles:[{flex:4},{flex:1}],placeholders:[t("editor.action.resource.db.placeholder.hostname"),C(o)]}),E&&a(s,{defaultValue:"",name:"",title:"",controlledType:"none",control:r,tips:a(j,{title:t("editor.action.form.tips.connect_to_local.title.tips"),closable:!1,content:t("editor.action.form.tips.connect_to_local.selfhost")})}),a(s,{title:t("editor.action.resource.db.label.database"),defaultValue:e==null?void 0:e.content.databaseName,name:"databaseName",controlledType:"input",control:r,isRequired:!0,rules:[{validate:p}],placeholders:[t("editor.action.resource.db.placeholder.database")]}),a(s,{title:t("editor.action.resource.db.label.username_password"),defaultValue:[e==null?void 0:e.content.databaseUsername,e==null?void 0:e.content.databasePassword],name:["databaseUsername","databasePassword"],controlledType:["input","password"],control:r,isRequired:!0,rules:[{validate:p},{required:!0}],placeholders:[t("editor.action.resource.db.placeholder.username"),t("editor.action.resource.db.placeholder.password")]}),q,a(g,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),a("div",{css:w,children:t("editor.action.resource.db.title.advanced_option")}),a(s,{controlledType:["switch"],title:t("editor.action.resource.db.label.ssl_options"),control:r,defaultValue:b,name:"ssl",contentLabel:t("editor.action.resource.db.tip.ssl_options")}),I&&u(A,{children:[a(s,{controlledType:["textarea"],title:t("editor.action.resource.db.label.ca_certificate"),isRequired:!0,rules:[{validate:p}],control:r,defaultValue:T,name:"serverCert",placeholders:[t("editor.action.resource.db.placeholder.certificate")],tips:V}),a(s,{controlledType:["textarea"],title:t("editor.action.resource.db.label.client_key"),control:r,defaultValue:e==null?void 0:e.content.ssl.clientKey,name:"clientKey",placeholders:[t("editor.action.resource.db.placeholder.certificate")]}),a(s,{controlledType:["textarea"],title:t("editor.action.resource.db.label.client_certificate"),control:r,defaultValue:e==null?void 0:e.content.ssl.clientCert,name:"clientCert",placeholders:[t("editor.action.resource.db.placeholder.certificate")]})]})]})})};Y.displayName="MysqlConfigElement";export{Y as default};
//# sourceMappingURL=index-7f126f4e.js.map
