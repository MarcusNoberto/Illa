import{j as t,n as x,r as w,h as v,a6 as I,B as P,au as T,F as S}from"./@illa-design-764f0835.js";import{F as R,Z as U}from"./index-326de5a1.js";import"./index-eab177f8.js";import{r as b}from"./react-bc846394.js";import{u as q,c as E,C as n,o as y,d as N,g as A,l as B,b as D,h as F}from"./style-3f22391e.js";import{R as L,v as j,i as k}from"./index-19eb2a59.js";import"./@emotion-09d14760.js";import"./index-86435c63.js";import"./hook-ca124235.js";import"./index-61428de5.js";import"./interface-8df5fe4c.js";import"./utils-0ba2846c.js";import"./style-00a92373.js";import"./upstash-e9b235a2.js";import"./index-4370180f.js";import"./index.esm-11ba4214.js";import"./lodash-lib-cfb0e9ed.js";const z={databaseIndex:0,databasePassword:"",databaseUsername:"",host:"",port:"6379",ssl:!1};function $(i){const m=/^redis:\/\/(.*):(.*)@(.*?)(?::(\d+))?$/,l=i.match(m);if(!l||l.length!==5)return;const[,e,a,s,h]=l;return{databaseUsername:e,databasePassword:a,host:s,port:h??80}}const C=i=>/^redis:\/\/(.*):(.*)@(.*?)(?::(\d+))?$/.test(i),G=i=>{const{resourceID:m,resourceType:l}=i,{t:e}=R(),{control:a,setValue:s}=q(),{getResourceByID:h}=b.useContext(L),d=h(m);let o;d===void 0?o=z:o=d.content;const[f,g]=b.useState(!1),c=b.useMemo(()=>({title:e("editor.action.resource.db.label.username_password"),controlledType:["input","password"],name:["databaseUsername","databasePassword"],defaultValue:[o.databaseUsername,o.databasePassword],placeholders:[e("editor.action.resource.db.placeholder.username"),e("editor.action.resource.db.placeholder.password")]}),[o.databasePassword,o.databaseUsername,e]),V=b.useCallback(r=>{const p=k(r??"");return p!==f&&g(p),!0},[f]);return t(S,{children:x("div",{css:E,children:[t(n,{controlledType:"input",isRequired:!0,title:e("editor.action.resource.db.label.name"),control:a,defaultValue:(d==null?void 0:d.resourceName)??"",rules:[{validate:j}],placeholders:[e("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:e("editor.action.resource.restapi.tip.name")}),t(w,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:y,children:e("editor.action.resource.db.title.general_option")}),t(N,{control:a,defaultValue:"",rules:{required:!1},render:({field:{value:r,onChange:p,onBlur:_}})=>x("div",{css:A,children:[t("div",{css:B,children:t("span",{css:D(v("grayBlue","02")),children:e("editor.action.form.option.neon.connection_string")})}),x("div",{css:F,children:[t(I,{onBlur:_,onChange:p,error:!C(r)&&r!=="",value:r,colorScheme:"techPurple",placeholder:"redis://myuser:mypassword@localhost:6379"}),t(P,{disabled:!C(r),onClick:()=>{const u=$(r);u!==void 0&&(s("host",u.host),s("port",u.port),s("databaseUsername",u.databaseUsername),s("databasePassword",u.databasePassword),p(""))},colorScheme:"techPurple",h:"32px",children:e("editor.action.form.option.neon.parse")})]})]}),name:"connectionString"}),t(n,{defaultValue:[o.host,o.port],title:e("editor.action.resource.db.label.hostname_port"),control:a,rules:[{required:!0,validate:V},{required:!0}],isRequired:!0,controlledType:["input","number"],name:["host","port"],placeholders:[e("editor.action.resource.db.placeholder.hostname"),"6379"],styles:[{flex:4},{flex:1}]}),f&&t(n,{defaultValue:"",name:"",title:"",controlledType:"none",control:a,tips:t(T,{title:e("editor.action.form.tips.connect_to_local.title.tips"),closable:!1,content:e("editor.action.form.tips.connect_to_local.selfhost")})}),l==="redis"&&t(n,{title:e("editor.action.resource.db.label.database_index"),defaultValue:o.databaseIndex,name:"databaseIndex",placeholders:[e("editor.action.resource.db.placeholder.database_index")],controlledType:"number",control:a}),t(n,{title:c.title,controlledType:c.controlledType,control:a,defaultValue:c.defaultValue,name:c.name,placeholders:c.placeholders}),U,t(w,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:y,children:e("editor.action.resource.db.title.advanced_option")}),t(n,{title:e("editor.action.resource.db.label.ssl_options"),control:a,defaultValue:o.ssl,controlledType:"switch",name:"ssl",contentLabel:e("editor.action.resource.db.tip.ssl_options")})]})})};G.displayName="RedisConfigElement";export{G as default};
//# sourceMappingURL=index-505ee6d3.js.map
