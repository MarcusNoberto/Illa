{"version":3,"file":"index-bb27209f.js","sources":["../../../../packages/illa-public-component/publicConfig/resource/initConfig/elasticSearch.ts","../../../../packages/illa-public-component/ResourceGenerator/components/ConfigElements/ElasticSearchConfigElement/index.tsx"],"sourcesContent":["import { ElasticSearchResource } from \"@illa-public/public-types\"\n\nexport const ElasticSearchResourceInitial: ElasticSearchResource = {\n  username: \"\",\n  password: \"\",\n  host: \"\",\n  port: \"9200\",\n}\n","import { ElasticSearchResourceInitial } from \"@illa-public/public-configs\"\nimport { ElasticSearchResource, Resource } from \"@illa-public/public-types\"\nimport { isCloudVersion } from \"@illa-public/utils\"\nimport { FC, useContext, useMemo } from \"react\"\nimport { useFormContext } from \"react-hook-form\"\nimport { useTranslation } from \"react-i18next\"\nimport { Divider, WarningCircleIcon, getColor } from \"@illa-design/react\"\nimport { ResourceGeneratorContext } from \"../../../provider\"\nimport { urlValidate, validateNotEmpty } from \"../../../utils\"\nimport { ControlledElement } from \"../../ControlledElement\"\nimport { BaseConfigElementProps } from \"../interface\"\nimport {\n  applyConfigItemLabelText,\n  configItemTip,\n  connectType,\n  connectTypeStyle,\n  container,\n  errorIconStyle,\n  errorMsgStyle,\n  labelContainer,\n} from \"../style\"\n\nconst ElasticSearchConfigElement: FC<BaseConfigElementProps> = (props) => {\n  const { resourceID } = props\n\n  const { t } = useTranslation()\n\n  const { control, formState } = useFormContext()\n\n  const { getResourceByID } = useContext(ResourceGeneratorContext)\n  const findResource = getResourceByID(resourceID)\n\n  const content = useMemo(() => {\n    if (findResource === undefined) {\n      return ElasticSearchResourceInitial\n    } else {\n      return (findResource as Resource<ElasticSearchResource>).content\n    }\n  }, [findResource])\n\n  return (\n    <>\n      <div css={container}>\n        <ControlledElement\n          controlledType=\"input\"\n          isRequired\n          title={t(\"editor.action.resource.db.label.name\")}\n          control={control}\n          defaultValue={findResource?.resourceName ?? \"\"}\n          rules={[\n            {\n              validate: validateNotEmpty,\n            },\n          ]}\n          placeholders={[t(\"editor.action.resource.db.placeholder.name\")]}\n          name=\"resourceName\"\n          tips={t(\"editor.action.resource.restapi.tip.name\")}\n        />\n        <Divider\n          direction=\"horizontal\"\n          ml=\"24px\"\n          mr=\"24px\"\n          mt=\"8px\"\n          mb=\"8px\"\n          w=\"unset\"\n        />\n\n        <ControlledElement\n          controlledType=\"input\"\n          isRequired\n          title={t(\"editor.action.resource.db.label.hosturl\")}\n          control={control}\n          defaultValue={content.host}\n          rules={[\n            {\n              required: t(\"editor.action.resource.error.invalid_url\"),\n              validate: urlValidate,\n            },\n          ]}\n          name=\"host\"\n          tips={\n            formState.errors.host ? (\n              <div css={errorMsgStyle}>\n                <WarningCircleIcon css={errorIconStyle} />\n                <>{formState.errors.host.message}</>\n              </div>\n            ) : null\n          }\n        />\n\n        <ControlledElement\n          isRequired\n          title={t(\"editor.action.resource.db.label.port\")}\n          defaultValue={content.port}\n          name=\"port\"\n          controlledType=\"number\"\n          control={control}\n        />\n\n        <ControlledElement\n          title={t(\"editor.action.resource.db.label.username_password\")}\n          controlledType={[\"input\", \"password\"]}\n          defaultValue={[content.username, content.password]}\n          name={[\"username\", \"password\"]}\n          control={control}\n          isRequired\n        />\n\n        {isCloudVersion && (\n          <>\n            <div css={configItemTip}>\n              {t(\"editor.action.resource.db.tip.username_password\")}\n            </div>\n            <div css={connectType}>\n              <div css={labelContainer}>\n                <span\n                  css={applyConfigItemLabelText(getColor(\"grayBlue\", \"02\"))}\n                >\n                  {t(\"editor.action.resource.db.label.connect_type\")}\n                </span>\n              </div>\n              <span css={connectTypeStyle}>\n                {t(\"editor.action.resource.db.tip.connect_type\")}\n              </span>\n            </div>\n          </>\n        )}\n      </div>\n    </>\n  )\n}\n\nElasticSearchConfigElement.displayName = \"ElasticSearchConfigElement\"\nexport default ElasticSearchConfigElement\n"],"names":["ElasticSearchResourceInitial","ElasticSearchConfigElement","props","resourceID","t","useTranslation","control","formState","useFormContext","getResourceByID","useContext","ResourceGeneratorContext","findResource","content","useMemo","jsx","Fragment","jsxs","container","ControlledElement","validateNotEmpty","Divider","urlValidate","errorMsgStyle","WarningCircleIcon","errorIconStyle","isCloudVersion"],"mappings":"+nBAEO,MAAMA,EAAsD,CACjE,SAAU,GACV,SAAU,GACV,KAAM,GACN,KAAM,MACR,ECeMC,EAA0DC,GAAU,CAClE,KAAA,CAAE,WAAAC,CAAe,EAAAD,EAEjB,CAAE,EAAAE,GAAMC,IAER,CAAE,QAAAC,EAAS,UAAAC,CAAU,EAAIC,EAAe,EAExC,CAAE,gBAAAC,CAAA,EAAoBC,EAAA,WAAWC,CAAwB,EACzDC,EAAeH,EAAgBN,CAAU,EAEzCU,EAAUC,EAAAA,QAAQ,IAClBF,IAAiB,OACZZ,EAECY,EAAiD,QAE1D,CAACA,CAAY,CAAC,EAEjB,OAEIG,EAAAC,EAAA,CAAA,SAAAC,EAAC,MAAI,CAAA,IAAKC,EACR,SAAA,CAAAH,EAACI,EAAA,CACC,eAAe,QACf,WAAU,GACV,MAAOf,EAAE,sCAAsC,EAC/C,QAAAE,EACA,cAAcM,GAAA,YAAAA,EAAc,eAAgB,GAC5C,MAAO,CACL,CACE,SAAUQ,CACZ,CACF,EACA,aAAc,CAAChB,EAAE,4CAA4C,CAAC,EAC9D,KAAK,eACL,KAAMA,EAAE,yCAAyC,CAAA,CACnD,EACAW,EAACM,EAAA,CACC,UAAU,aACV,GAAG,OACH,GAAG,OACH,GAAG,MACH,GAAG,MACH,EAAE,OAAA,CACJ,EAEAN,EAACI,EAAA,CACC,eAAe,QACf,WAAU,GACV,MAAOf,EAAE,yCAAyC,EAClD,QAAAE,EACA,aAAcO,EAAQ,KACtB,MAAO,CACL,CACE,SAAUT,EAAE,0CAA0C,EACtD,SAAUkB,CACZ,CACF,EACA,KAAK,OACL,KACEf,EAAU,OAAO,KACdU,EAAA,MAAA,CAAI,IAAKM,EACR,SAAA,CAACR,EAAAS,EAAA,CAAkB,IAAKC,CAAgB,CAAA,EACrCV,EAAAC,EAAA,CAAA,SAAAT,EAAU,OAAO,KAAK,QAAQ,CAAA,CAAA,CACnC,EACE,IAAA,CAER,EAEAQ,EAACI,EAAA,CACC,WAAU,GACV,MAAOf,EAAE,sCAAsC,EAC/C,aAAcS,EAAQ,KACtB,KAAK,OACL,eAAe,SACf,QAAAP,CAAA,CACF,EAEAS,EAACI,EAAA,CACC,MAAOf,EAAE,mDAAmD,EAC5D,eAAgB,CAAC,QAAS,UAAU,EACpC,aAAc,CAACS,EAAQ,SAAUA,EAAQ,QAAQ,EACjD,KAAM,CAAC,WAAY,UAAU,EAC7B,QAAAP,EACA,WAAU,EAAA,CACZ,EAECoB,CAiBC,CAEJ,CAAA,CACF,CAAA,CAEJ,EAEAzB,EAA2B,YAAc"}