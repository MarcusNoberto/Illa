{"version":3,"file":"index-d2acd258.js","sources":["../../../../packages/illa-public-component/ResourceGenerator/components/ConfigElements/HuggingFaceEndpointConfigElement/index.tsx"],"sourcesContent":["import {\n  HuggingFaceEndpointResource,\n  Resource,\n} from \"@illa-public/public-types\"\nimport { TextLink } from \"@illa-public/text-link\"\nimport { FC, useContext } from \"react\"\nimport { useFormContext } from \"react-hook-form\"\nimport { Trans, useTranslation } from \"react-i18next\"\nimport { FileDefaultIcon, WarningCircleIcon } from \"@illa-design/react\"\nimport { ResourceGeneratorContext } from \"../../../provider\"\nimport { urlValidate, validateNotEmpty } from \"../../../utils\"\nimport { ControlledElement } from \"../../ControlledElement\"\nimport {\n  docContainerStyle,\n  docItemStyle,\n  docsItemContainerStyle,\n  labelStyle,\n  tipsStyle,\n} from \"../HuggingFaceConfigElement/style\"\nimport { BaseConfigElementProps } from \"../interface\"\nimport {\n  container,\n  errorIconStyle,\n  errorMsgStyle,\n  labelContainer,\n} from \"../style\"\n\nconst HuggingFaceEndpointConfigElement: FC<BaseConfigElementProps> = (\n  props,\n) => {\n  const { resourceID } = props\n  const { t } = useTranslation()\n\n  const { control, formState } = useFormContext()\n  const { getResourceByID } = useContext(ResourceGeneratorContext)\n  const findResource = getResourceByID(\n    resourceID,\n  ) as Resource<HuggingFaceEndpointResource>\n  const handleURLClick = (link: string) => window.open(link, \"_blank\")\n\n  return (\n    <>\n      <div css={container}>\n        <div css={docsItemContainerStyle}>\n          <div css={labelContainer} />\n          <div css={docContainerStyle}>\n            <span css={docItemStyle}>Learn more about Hugging Face:</span>\n            <span\n              css={docItemStyle}\n              onClick={() =>\n                handleURLClick(\n                  \"https://huggingface.co/docs/inference-endpoints/index\",\n                )\n              }\n            >\n              <FileDefaultIcon />\n              <span>Inference Endpoint</span>\n            </span>\n            <span\n              css={docItemStyle}\n              onClick={() =>\n                handleURLClick(\n                  \"https://huggingface.co/docs/api-inference/quicktour\",\n                )\n              }\n            >\n              <FileDefaultIcon />\n              <span>API Doc</span>\n            </span>\n          </div>\n        </div>\n\n        <ControlledElement\n          controlledType=\"input\"\n          isRequired\n          title={t(\"editor.action.resource.db.label.name\")}\n          control={control}\n          defaultValue={findResource?.resourceName ?? \"\"}\n          rules={[\n            {\n              validate: validateNotEmpty,\n            },\n          ]}\n          placeholders={[t(\"editor.action.resource.db.placeholder.name\")]}\n          name=\"resourceName\"\n          tips={t(\"editor.action.resource.restapi.tip.name\")}\n          labelStyle={labelStyle}\n          tipsStyle={tipsStyle}\n        />\n\n        <ControlledElement\n          title={t(\"editor.action.resource.api.label.hf_endpoint\")}\n          defaultValue={findResource?.content.endpoint ?? \"\"}\n          name=\"endpoint\"\n          controlledType=\"input\"\n          control={control}\n          placeholders={[\n            t(\"editor.action.resource.api.placeholder.hf_endpoint\"),\n          ]}\n          rules={[\n            {\n              required: t(\"editor.action.resource.error.invalid_url\"),\n              validate: urlValidate,\n            },\n          ]}\n          isRequired\n          tips={\n            formState.errors.endpoint ? (\n              <div css={errorMsgStyle}>\n                <WarningCircleIcon css={errorIconStyle} />\n                <>{formState.errors.endpoint.message}</>\n              </div>\n            ) : (\n              <Trans\n                i18nKey=\"editor.action.resource.api.tips.hf_endpoint\"\n                t={t}\n                components={[\n                  <TextLink\n                    key={\"editor.action.resource.api.tips.hf_endpoint\"}\n                    onClick={() => {\n                      handleURLClick(\n                        \"https://huggingface.co/docs/inference-endpoints/guides/create_endpoint\",\n                      )\n                    }}\n                  />,\n                ]}\n              />\n            )\n          }\n          labelStyle={labelStyle}\n          tipsStyle={tipsStyle}\n        />\n        <ControlledElement\n          title={t(\"editor.action.resource.api.label.hf_endpoint_token\")}\n          defaultValue={findResource?.content.token ?? \"\"}\n          name=\"token\"\n          controlledType=\"password\"\n          control={control}\n          isRequired\n          tips={\n            <Trans\n              i18nKey=\"editor.action.resource.api.tips.hf_endpoint_token\"\n              t={t}\n              components={[\n                <TextLink\n                  key={\"editor.action.resource.api.tips.hf_endpoint_token\"}\n                  onClick={() => {\n                    handleURLClick(\"https://huggingface.co/settings/tokens\")\n                  }}\n                />,\n              ]}\n            />\n          }\n          labelStyle={labelStyle}\n          tipsStyle={tipsStyle}\n        />\n      </div>\n    </>\n  )\n}\n\nHuggingFaceEndpointConfigElement.displayName =\n  \"HuggingFaceEndpointConfigElement\"\nexport default HuggingFaceEndpointConfigElement\n"],"names":["HuggingFaceEndpointConfigElement","props","resourceID","useTranslation","control","formState","useFormContext","getResourceByID","useContext","ResourceGeneratorContext","findResource","handleURLClick","link","jsx","Fragment","jsxs","container","docsItemContainerStyle","labelContainer","docContainerStyle","docItemStyle","FileDefaultIcon","ControlledElement","validateNotEmpty","labelStyle","tipsStyle","urlValidate","errorMsgStyle","WarningCircleIcon","errorIconStyle","Trans","TextLink"],"mappings":"uvBA2BM,MAAAA,EACJC,GACG,CACG,KAAA,CAAE,WAAAC,CAAe,EAAAD,EACjB,CAAE,GAAME,IAER,CAAE,QAAAC,EAAS,UAAAC,CAAU,EAAIC,EAAe,EACxC,CAAE,gBAAAC,CAAA,EAAoBC,EAAA,WAAWC,CAAwB,EACzDC,EAAeH,EACnBL,CAAA,EAEIS,EAAkBC,GAAiB,OAAO,KAAKA,EAAM,QAAQ,EAEnE,OAEIC,EAAAC,EAAA,CAAA,SAAAC,EAAC,MAAI,CAAA,IAAKC,EACR,SAAA,CAACD,EAAA,MAAA,CAAI,IAAKE,EACR,SAAA,CAACJ,EAAA,MAAA,CAAI,IAAKK,CAAgB,CAAA,EAC1BH,EAAC,MAAI,CAAA,IAAKI,EACR,SAAA,CAACN,EAAA,OAAA,CAAK,IAAKO,EAAc,SAA8B,iCAAA,EACvDL,EAAC,OAAA,CACC,IAAKK,EACL,QAAS,IACPT,EACE,uDACF,EAGF,SAAA,CAAAE,EAACQ,EAAgB,EAAA,EACjBR,EAAC,QAAK,SAAkB,oBAAA,CAAA,CAAA,CAAA,CAC1B,EACAE,EAAC,OAAA,CACC,IAAKK,EACL,QAAS,IACPT,EACE,qDACF,EAGF,SAAA,CAAAE,EAACQ,EAAgB,EAAA,EACjBR,EAAC,QAAK,SAAO,SAAA,CAAA,CAAA,CAAA,CACf,CAAA,EACF,CAAA,EACF,EAEAA,EAACS,EAAA,CACC,eAAe,QACf,WAAU,GACV,MAAO,EAAE,sCAAsC,EAC/C,QAAAlB,EACA,cAAcM,GAAA,YAAAA,EAAc,eAAgB,GAC5C,MAAO,CACL,CACE,SAAUa,CACZ,CACF,EACA,aAAc,CAAC,EAAE,4CAA4C,CAAC,EAC9D,KAAK,eACL,KAAM,EAAE,yCAAyC,EACjD,WAAAC,EACA,UAAAC,CAAA,CACF,EAEAZ,EAACS,EAAA,CACC,MAAO,EAAE,8CAA8C,EACvD,cAAcZ,GAAA,YAAAA,EAAc,QAAQ,WAAY,GAChD,KAAK,WACL,eAAe,QACf,QAAAN,EACA,aAAc,CACZ,EAAE,oDAAoD,CACxD,EACA,MAAO,CACL,CACE,SAAU,EAAE,0CAA0C,EACtD,SAAUsB,CACZ,CACF,EACA,WAAU,GACV,KACErB,EAAU,OAAO,SACdU,EAAA,MAAA,CAAI,IAAKY,EACR,SAAA,CAACd,EAAAe,EAAA,CAAkB,IAAKC,CAAgB,CAAA,EACrChB,EAAAC,EAAA,CAAA,SAAAT,EAAU,OAAO,SAAS,QAAQ,CAAA,CAAA,CACvC,EAEAQ,EAACiB,EAAA,CACC,QAAQ,8CACR,EACA,WAAY,CACVjB,EAACkB,EAAA,CAEC,QAAS,IAAM,CACbpB,EACE,wEAAA,CAEJ,CAAA,EALK,6CAMP,CACF,CAAA,CACF,EAGJ,WAAAa,EACA,UAAAC,CAAA,CACF,EACAZ,EAACS,EAAA,CACC,MAAO,EAAE,oDAAoD,EAC7D,cAAcZ,GAAA,YAAAA,EAAc,QAAQ,QAAS,GAC7C,KAAK,QACL,eAAe,WACf,QAAAN,EACA,WAAU,GACV,KACES,EAACiB,EAAA,CACC,QAAQ,oDACR,EACA,WAAY,CACVjB,EAACkB,EAAA,CAEC,QAAS,IAAM,CACbpB,EAAe,wCAAwC,CACzD,CAAA,EAHK,mDAIP,CACF,CAAA,CACF,EAEF,WAAAa,EACA,UAAAC,CAAA,CACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ,EAEAzB,EAAiC,YAC/B"}