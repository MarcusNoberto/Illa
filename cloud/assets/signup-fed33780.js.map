{"version":3,"file":"signup-fed33780.js","sources":["../../src/page/user/signup.tsx"],"sourcesContent":["import { FC, useState } from \"react\"\nimport { SubmitHandler, useForm } from \"react-hook-form\"\nimport { useTranslation } from \"react-i18next\"\nimport { useNavigate } from \"react-router-dom\"\nimport { Button, Input, Select, Space } from \"@illa-design/react\"\nimport { setAuthToken } from \"@illa-public/utils\"\nimport { useMessage } from \"@illa-design/react\"\nimport \"./SignUpPage.css\"\nimport { fetchSignUp } from \"@/services/auth\"\n\ninterface SignUpFields {\n  nickname: string\n  email: string\n  password: string\n  confirmPassword: string\n  role: string\n}\n\nconst SignUpPage: FC = () => {\n  const message = useMessage()\n  const { t } = useTranslation()\n  const navigate = useNavigate()\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: { errors },\n  } = useForm<SignUpFields>()\n  const [loading, setLoading] = useState(false)\n\n  const onSubmit: SubmitHandler<SignUpFields> = async (data) => {\n    setLoading(true)\n    try {\n      console.log(data)\n      const response = await fetchSignUp(data)\n      const token = response.headers[\"illa-token\"]\n      if (!token) return\n      setAuthToken(token)\n      message.success({ // FIXME isso nao esta aparecendo\n        content: t(\"page.user.sign_up.tips.success\"),\n      })\n      navigate(\"/login\") // FIXME isso nao esta ocorrendo\n    } catch (error) {\n      console.error(error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const password = watch(\"password\")\n\n  return (\n    <div className=\"signup-page-container\">\n      <h1 className=\"signup-title\">Sign Up</h1>\n      <div className=\"signup-form-container\">\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <Space direction=\"vertical\" size=\"large\">\n            <div>\n              <label>Nickname</label>\n              <Input\n                {...register(\"nickname\", {\n                  required: \"Nickname required\",\n                })}\n                onChange={(value) =>\n                  register(\"nickname\").onChange({ target: { value } })\n                }\n              />\n              {errors.nickname && (\n                <span style={{ color: \"red\" }}>{errors.nickname.message}</span>\n              )}\n            </div>\n\n            <div>\n              <label>e-mail</label>\n              <Input\n                type=\"email\"\n                {...register(\"email\", {\n                  required: \"e-mail required\",\n                  pattern: {\n                    value: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\n                    message: \"Invalid e-mail\",\n                  },\n                })}\n                onChange={(value) =>\n                  register(\"email\").onChange({ target: { value } })\n                }\n              />\n              {errors.email && (\n                <span style={{ color: \"red\" }}>{errors.email.message}</span>\n              )}\n            </div>\n\n            <div>\n              <label>Password</label>\n              <Input\n                type=\"password\"\n                {...register(\"password\", {\n                  required: \"Password required\",\n                  minLength: {\n                    value: 6,\n                    message:\n                      \"Password minimum length of six characters required\",\n                  },\n                })}\n                onChange={(value) =>\n                  register(\"password\").onChange({ target: { value } })\n                }\n              />\n              {errors.password && (\n                <span style={{ color: \"red\" }}>{errors.password.message}</span>\n              )}\n            </div>\n\n            <div>\n              <label>Password confirmation</label>\n              <Input\n                type=\"password\"\n                {...register(\"confirmPassword\", {\n                  required: \"Password confirmation required\",\n                  validate: (value) =>\n                    value === password ||\n                    \"Password and Password confirmation does not match\",\n                })}\n                onChange={(value) =>\n                  register(\"confirmPassword\").onChange({ target: { value } })\n                }\n              />\n              {errors.confirmPassword && (\n                <span style={{ color: \"red\" }}>\n                  {errors.confirmPassword.message}\n                </span>\n              )}\n            </div>\n\n            <div>\n              <label>Role</label>\n              <Select\n                options={[\n                  { label: \"OWNER\", value: \"OWNER\" },\n                  { label: \"ADMIN\", value: \"ADMIN\" },\n                  { label: \"EDITOR\", value: \"EDITOR\" },\n                  { label: \"VIEWER\", value: \"VIEWER\" },\n                  { label: \"OBSERVER\", value: \"OBSERVER\" },\n                ]}\n                {...register(\"role\", {\n                  required: \"Role required\",\n                })}\n                onChange={(value) =>\n                  register(\"role\").onChange({ target: { value } })\n                }\n              />\n              {errors.role && (\n                <span style={{ color: \"red\" }}>{errors.role.message}</span>\n              )}\n            </div>\n\n            <div className=\"button-container\">\n              <Button type=\"submit\" loading={loading}>\n                Register\n              </Button>\n            </div>\n          </Space>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default SignUpPage\n"],"names":["SignUpPage","message","useMessage","t","useTranslation","navigate","useNavigate","register","handleSubmit","watch","errors","useForm","loading","setLoading","useState","onSubmit","data","token","fetchSignUp","setAuthToken","error","password","jsxs","jsx","Space","Input","value","Select","Button"],"mappings":"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"}