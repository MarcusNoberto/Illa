import{n as b,j as t,au as w,F as f,r as x}from"./@illa-design-764f0835.js";import{F as h,Z as M}from"./index-326de5a1.js";import{r as u}from"./react-bc846394.js";import{C as i,u as V,c as I,o as F}from"./style-3f22391e.js";import{R as y,i as N,v as C}from"./index-19eb2a59.js";import"./index-eab177f8.js";import"./@emotion-09d14760.js";import"./index-86435c63.js";import"./hook-ca124235.js";import"./index-61428de5.js";import"./interface-8df5fe4c.js";import"./utils-0ba2846c.js";import"./style-00a92373.js";import"./upstash-e9b235a2.js";import"./index-4370180f.js";import"./index.esm-11ba4214.js";import"./lodash-lib-cfb0e9ed.js";const g={host:"",connectionFormat:"standard",port:"27017",databaseName:"",databaseUsername:"",databasePassword:""},S={open:!1,client:"",ca:""},T={uri:""},E={configType:"gui",configContent:g,ssl:S},D=d=>{const{control:n,resourceID:r,watch:s}=d,{t:o}=h(),{getResourceByID:l}=u.useContext(y),a=l(r);let e;if(a===void 0)e=g;else{const p=a.content;e=p.configType==="gui"?p.configContent:g}const[c,m]=u.useState(!1),R=s("connectionFormat",e.connectionFormat??"standard"),q=u.useCallback(p=>{const _=N(p??"");return _!==c&&m(_),!0},[c]);return b(f,{children:[t(i,{title:o("editor.action.resource.db.label.hostname"),defaultValue:e.host,name:"host",controlledType:"input",control:n,isRequired:!0,rules:[{required:!0,validate:q}],placeholders:[o("editor.action.resource.db.placeholder.hostname")]}),c&&t(i,{defaultValue:"",name:"",title:"",controlledType:"none",control:n,tips:t(w,{title:o("editor.action.form.tips.connect_to_local.title.tips"),closable:!1,content:o("editor.action.form.tips.connect_to_local.selfhost")})}),t(i,{title:o("editor.action.resource.db.label.connection_format"),defaultValue:e.connectionFormat,name:"connectionFormat",controlledType:"radio-group",control:n,isRequired:!0,rules:[{required:!0}],forceEqualWidth:!0,options:[{value:"standard",label:o("editor.action.resource.db.label.mongodb_connection_standard")},{value:"mongodb+srv",label:o("editor.action.resource.db.label.mongodb_connection_dns_seed_list")}]}),R==="standard"&&t(i,{title:o("editor.action.resource.db.label.port"),defaultValue:e.port,name:"port",controlledType:"number",control:n,placeholders:["27017"],isRequired:!0,rules:[{required:!0}]}),t(i,{title:o("editor.action.resource.db.label.database"),defaultValue:e.databaseName,control:n,placeholders:[o("editor.action.resource.db.placeholder.database")],name:"databaseName",controlledType:"input",isRequired:!0,rules:[{required:!0}]}),t(i,{title:o("editor.action.resource.db.label.username_password"),name:["databaseUsername","databasePassword"],controlledType:["input","password"],defaultValue:[e.databaseUsername,e.databasePassword],control:n,rules:[{required:!0},{required:!0}],isRequired:!0,placeholders:[o("editor.action.resource.db.placeholder.username"),o("editor.action.resource.db.placeholder.password")]}),M]})};D.displayName="MongoDbGuiMode";const v=d=>{const{resourceID:n,control:r}=d,{t:s}=h(),{getResourceByID:o}=u.useContext(y),l=o(n);let a;if(l===void 0)a=T;else{const e=l.content;a=e.configType==="uri"?e.configContent:T}return t(i,{title:s("editor.action.resource.db.label.connection_format"),control:r,name:"uri",defaultValue:a.uri,placeholders:["mongodb+srv://admin:password@host/mydb?retryWrites=true&w=majority"],controlledType:"input",rules:[{validate:C}],isRequired:!0})};v.displayName="MongoDbUriMode";const U=d=>{const{resourceID:n}=d,{t:r}=h(),{control:s,watch:o}=V(),{getResourceByID:l}=u.useContext(y),a=l(n);let e;a===void 0?e=E:e=a.content;const c=o("configType",e.configType),m=o("open",e.ssl.open??!1);return t(f,{children:b("div",{css:I,children:[t(i,{controlledType:"input",isRequired:!0,title:r("editor.action.resource.db.label.name"),control:s,defaultValue:(a==null?void 0:a.resourceName)??"",rules:[{validate:C}],placeholders:[r("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:r("editor.action.resource.restapi.tip.name")}),t(x,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:F,children:r("editor.action.resource.db.title.general_option")}),t(i,{title:r("editor.action.resource.db.label.config_type"),defaultValue:e.configType,name:"configType",controlledType:"radio-group",control:s,forceEqualWidth:!0,options:[{value:"gui",label:"General"},{value:"uri",label:"URI"}]}),c==="gui"&&t(D,{control:s,watch:o,resourceID:n}),c==="uri"&&t(v,{control:s,watch:o,resourceID:n}),t(i,{controlledType:["switch"],title:r("editor.action.resource.db.label.ssl_options"),control:s,defaultValue:e.ssl.open,name:"open",contentLabel:r("editor.action.resource.db.tip.ssl_options")}),m&&b(f,{children:[t(i,{controlledType:["textarea"],title:r("editor.action.resource.db.label.mongodb_ssl_client"),control:s,defaultValue:e.ssl.client,name:"client",placeholders:[r("editor.action.resource.db.placeholder.mongo_certificate")]}),t(i,{controlledType:["textarea"],title:r("editor.action.resource.db.label.mongodb_ssl_ca"),control:s,defaultValue:e.ssl.ca,name:"ca",placeholders:[r("editor.action.resource.db.placeholder.certificate")]})]})]})})};U.displayName="MongoDbConfigElement";export{U as default};
//# sourceMappingURL=index-73711a01.js.map
