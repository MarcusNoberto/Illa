import{q as y,k as a,F as h,y as q,aq as D}from"./@illa-design-df878cb8.js";import{r as f}from"./react-bc846394.js";import{C as i,u as g,c as U,o as B,e as H,a as K,d as M}from"./style-99767516.js";import{v as x,R as O,u as Y}from"./index-7237e9fd.js";import{I as F}from"./index-9f3dc2e7.js";import{F as v}from"./index-1d3dcc29.js";import"./@emotion-28b7fe46.js";import"./index-60ddec07.js";import"./hook-7c014986.js";import"./index-356d5fb7.js";import"./interface-8df5fe4c.js";import"./index-1e58851c.js";import"./utils-89abc4eb.js";import"./style-56e482f1.js";import"./upstash-7245fd7f.js";import"./index-7ce90634.js";import"./index.esm-11ba4214.js";import"./lodash-lib-cfb0e9ed.js";var b=(r=>(r.NONE="none",r.BASIC="basic",r.BEARER="bearer",r.APIKEY="API key",r))(b||{}),n=(r=>(r.NONE="none",r.BASIC="basic",r.BEARER="bearer",r.APIKEY="apiKey",r))(n||{}),R=(r=>(r.HEADER="Header",r.URLPARAMS="URL Params",r))(R||{}),d=(r=>(r.HEADER="header",r.URLPARAMS="urlParams",r))(d||{});const L=[{label:R.HEADER,value:d.HEADER},{label:R.URLPARAMS,value:d.URLPARAMS}],C=r=>{const{control:l,auth:e,watch:o}=r,{t:s}=v(),E=o("addTo",d.HEADER);return y(h,{children:[a(i,{title:s("editor.action.resource.db.label.key"),isRequired:!0,defaultValue:(e==null?void 0:e.key)??"",name:"key",rules:[{required:!0}],controlledType:["input"],control:l}),a(i,{title:s("editor.action.resource.db.label.value"),isRequired:!0,defaultValue:(e==null?void 0:e.value)??"",name:"value",rules:[{required:!0}],controlledType:["password"],control:l}),a(i,{title:s("editor.action.resource.db.label.add_to"),isRequired:!0,defaultValue:(e==null?void 0:e.addTo)??d.HEADER,name:"addTo",rules:[{required:!0}],controlledType:["select"],control:l,options:L}),E===d.HEADER&&a(i,{title:s("editor.action.resource.db.label.header_prefix"),defaultValue:(e==null?void 0:e.headerPrefix)??"Bearer",name:"headerPrefix",controlledType:["input"],control:l})]})};C.displayName="APIKeyAuthPanel";const T=r=>{const{control:l,auth:e}=r,{t:o}=v();return y(h,{children:[a(i,{title:o("editor.action.resource.restapi.label.basic_auth_username"),defaultValue:(e==null?void 0:e.username)??"",name:"username",controlledType:"input",control:l,isRequired:!0,rules:[{validate:x}]}),a(i,{title:o("editor.action.resource.restapi.label.basic_auth_password"),defaultValue:(e==null?void 0:e.password)??"",name:"password",controlledType:"password",control:l,isRequired:!0,rules:[{required:!0}]})]})};T.displayName="BasicAuthPanel";const k=r=>{const{control:l,auth:e}=r,{t:o}=v();return a(i,{title:o("editor.action.resource.restapi.label.bearerToken"),defaultValue:(e==null?void 0:e.bearerToken)??"",name:"bearerToken",controlledType:"input",control:l,isRequired:!0,rules:[{validate:x}]})};k.displayName="BearerAuthPanel";const j=[{label:b.NONE,value:n.NONE},{label:b.BASIC,value:n.BASIC},{label:b.BEARER,value:n.BEARER},{label:b.APIKEY,value:n.APIKEY}],z=r=>{const{resourceID:l}=r,{t:e}=v(),{control:o,formState:s,watch:E}=g(),{getResourceByID:S}=f.useContext(O),t=S(l),V=[{name:"urlParams",title:e("editor.action.resource.restapi.label.url_parameters"),defaultValue:t==null?void 0:t.content.urlParams},{name:"headers",defaultValue:t==null?void 0:t.content.headers,title:e("editor.action.resource.restapi.label.headers")},{name:"cookies",defaultValue:t==null?void 0:t.content.cookies,title:e("editor.action.resource.restapi.label.cookies")}],P=E("authentication",(t==null?void 0:t.content.authentication)??n.NONE);return a(h,{children:y("div",{css:U,children:[a(i,{controlledType:"input",isRequired:!0,title:e("editor.action.resource.db.label.name"),control:o,defaultValue:(t==null?void 0:t.resourceName)??"",rules:[{validate:x}],placeholders:[e("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:e("editor.action.resource.restapi.tip.name")}),a(q,{direction:"horizontal",ml:"24px",mr:"24px",mt:"16px",mb:"8px",w:"unset"}),a("div",{css:B,children:e("editor.action.resource.db.title.general_option")}),a(i,{title:e("editor.action.resource.restapi.label.base_url"),defaultValue:(t==null?void 0:t.content.baseUrl)??"",isRequired:!0,name:"baseUrl",controlledType:"input",control:o,rules:[{required:e("editor.action.resource.error.invalid_url"),validate:Y}],placeholders:[e("editor.action.resource.restapi.placeholder.base_url")],tips:s.errors.baseUrl&&y("div",{css:H,children:[a(D,{css:K}),a(h,{children:s.errors.baseUrl.message})]})}),V.map(({name:N,title:w,defaultValue:_})=>a(M,{control:o,defaultValue:_??[{key:"",value:""}],render:({field:{value:u,onChange:A}})=>a(F,{label:w,records:u,onAdd:()=>{A([...u,{key:"",value:""}])},onDelete:p=>{let c=[...u];c.splice(p,1),c.length===0&&(c=[{key:"",value:""}]),A(c)},onChangeKey:(p,c,I)=>{let m=[...u];m[p]={key:c,value:I},A(m)},onChangeValue:(p,c,I)=>{let m=[...u];m[p].value=I,A(m)}}),name:N},N)),a(i,{title:e("editor.action.resource.restapi.label.authentication"),defaultValue:(t==null?void 0:t.content.authentication)??"none",name:"authentication",controlledType:["select"],control:o,options:j}),P===n.BASIC&&a(T,{control:o,auth:t==null?void 0:t.content.authContent}),P===n.BEARER&&a(k,{control:o,auth:t==null?void 0:t.content.authContent}),P===n.APIKEY&&a(C,{watch:E,control:o,auth:t==null?void 0:t.content.authContent}),a(q,{direction:"horizontal",ml:"24px",mr:"24px",mt:"16px",mb:"8px",w:"unset"}),a("div",{css:B,children:e("editor.action.resource.db.title.graphql_introspection")}),a(i,{title:e("editor.action.resource.db.label.introspection"),contentLabel:e("editor.action.resource.db.label.disable_introspection"),defaultValue:(t==null?void 0:t.content.disableIntrospection)??!1,name:"disableIntrospection",controlledType:["switch"],control:o,tips:e("editor.action.resource.db.tip.introspection")})]})})};z.displayName="GraphQLConfigElement";export{z as default};
//# sourceMappingURL=index-60a769b1.js.map
