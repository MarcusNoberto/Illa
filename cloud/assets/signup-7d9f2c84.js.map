{"version":3,"file":"signup-7d9f2c84.js","sources":["../../src/page/user/signup.tsx"],"sourcesContent":["import { FC, useState } from \"react\";\nimport { SubmitHandler, useForm } from \"react-hook-form\";\nimport { useTranslation } from \"react-i18next\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Button, Input, Select, Space } from \"@illa-design/react\";\nimport { setAuthToken } from \"@illa-public/utils\";\nimport { useMessage } from \"@illa-design/react\";\nimport \"./SignUpPage.css\";\nimport { fetchSignUp } from \"@/services/auth\";\n\ninterface SignUpFields {\n  nickname: string;\n  email: string;\n  password: string;\n  confirmPassword: string;\n  role: string;\n}\n\nconst SignUpPage: FC = () => {\n  const message = useMessage();\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: { errors },\n  } = useForm<SignUpFields>();\n  const [loading, setLoading] = useState(false);\n\n  const roleToNumber = (role: string): number => {\n    switch (role) {\n      case \"OWNER\":\n        return 1;\n      case \"ADMIN\":\n        return 2;\n      case \"EDITOR\":\n        return 3;\n      case \"VIEWER\":\n        return 4;\n      case \"OBSERVER\":\n        return 5;\n      default:\n        return 0; // ou algum valor padrão ou erro\n    }\n  };\n\n  const onSubmit: SubmitHandler<SignUpFields> = async (data) => {\n    setLoading(true);\n    try {\n      console.log(data);\n\n      // Convertendo a role para número\n      const formattedData = {\n        ...data,\n        role: roleToNumber(data.role),\n      };\n\n      console.log(\"teste de build atualizado\");\n      const response = await fetchSignUp(formattedData);\n      const token = response.headers[\"illa-token\"];\n      if (!token) return;\n      setAuthToken(token);\n      message.success({\n        content: t(\"page.user.sign_up.tips.success\"),\n      });\n      navigate(\"/login\");\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const password = watch(\"password\");\n\n  return (\n    <div className=\"signup-page-container\">\n      <h1 className=\"signup-title\">Sign Up</h1>\n      <div className=\"signup-form-container\">\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <Space direction=\"vertical\" size=\"large\">\n            <div>\n              <label>Nickname</label>;\n              <Input\n                {...register(\"nickname\", {})}\n                onChange={(value) =>\n                  register(\"nickname\").onChange({ target: { value } })\n                }\n              />;\n            </div>;\n\n            <div>\n              <label>e-mail</label>;\n              <Input\n                type=\"email\"\n                {...register(\"email\", {})}\n                onChange={(value) =>\n                  register(\"email\").onChange({ target: { value } })\n                }\n              />;\n            </div>;\n            <div>\n              <label>Password</label>;\n              <Input\n                type=\"password\"\n                {...register(\"password\", {})}\n                onChange={(value) =>\n                  register(\"password\").onChange({ target: { value } })\n                }\n              />;\n              </div>;\n            <div>\n              <label>Password confirmation</label>;\n              <Input\n                type=\"password\"\n                {...register(\"confirmPassword\", {})}\n                onChange={(value) =>\n                  register(\"confirmPassword\").onChange({ target: { value } })\n                }\n              />;\n            </div>;\n            <div>\n              <label>Role</label>;\n              <Select\n                options={[\n                  { label: \"OWNER\", value: \"OWNER\" },\n                  { label: \"ADMIN\", value: \"ADMIN\" },\n                  { label: \"EDITOR\", value: \"EDITOR\" },\n                  { label: \"VIEWER\", value: \"VIEWER\" },\n                  { label: \"OBSERVER\", value: \"OBSERVER\" },\n                ]}\n                {...register(\"role\", {})}\n                onChange={(value) =>\n                  register(\"role\").onChange({ target: { value } })\n                }\n              />;\n            </div>;\n            <div className=\"button-container\">\n              <Button type=\"submit\" loading={loading}>\n                Register\n              </Button>;\n            </div>;\n          </Space>;\n        </form>;\n      </div>;\n    </div>\n  )\n};\n\nexport default SignUpPage;\n"],"names":["SignUpPage","message","useMessage","t","useTranslation","navigate","useNavigate","register","handleSubmit","watch","errors","useForm","loading","setLoading","useState","roleToNumber","role","onSubmit","data","formattedData","token","fetchSignUp","setAuthToken","error","jsxs","jsx","Space","Input","value","Select","Button"],"mappings":"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"}