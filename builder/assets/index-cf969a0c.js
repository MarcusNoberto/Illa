import{o as m,k as t,bc as w,F as f,D as x}from"./@illa-design-402f214a.js";import{u as h,gG as y,d7 as M,gN as V,gH as D,gF as I}from"./index-2f1869ab.js";import{r as u}from"./react-9b7e00e3.js";import{C as s,c as F,o as N}from"./style-8475474f.js";import"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";const g={host:"",connectionFormat:"standard",port:"27017",databaseName:"",databaseUsername:"",databasePassword:""},S={open:!1,client:"",ca:""},T={uri:""},E={configType:"gui",configContent:g,ssl:S},C=d=>{const{control:n,resourceID:r,watch:i}=d,{t:o}=h(),{getResourceByID:l}=u.useContext(y),a=l(r);let e;if(a===void 0)e=g;else{const p=a.content;e=p.configType==="gui"?p.configContent:g}const[c,b]=u.useState(!1),R=i("connectionFormat",e.connectionFormat??"standard"),q=u.useCallback(p=>{const _=V(p??"");return _!==c&&b(_),!0},[c]);return m(f,{children:[t(s,{title:o("editor.action.resource.db.label.hostname"),defaultValue:e.host,name:"host",controlledType:"input",control:n,isRequired:!0,rules:[{required:!0,validate:q}],placeholders:[o("editor.action.resource.db.placeholder.hostname")]}),c&&t(s,{defaultValue:"",name:"",title:"",controlledType:"none",control:n,tips:t(w,{title:o("editor.action.form.tips.connect_to_local.title.tips"),closable:!1,content:o("editor.action.form.tips.connect_to_local.selfhost")})}),t(s,{title:o("editor.action.resource.db.label.connection_format"),defaultValue:e.connectionFormat,name:"connectionFormat",controlledType:"radio-group",control:n,isRequired:!0,rules:[{required:!0}],forceEqualWidth:!0,options:[{value:"standard",label:o("editor.action.resource.db.label.mongodb_connection_standard")},{value:"mongodb+srv",label:o("editor.action.resource.db.label.mongodb_connection_dns_seed_list")}]}),R==="standard"&&t(s,{title:o("editor.action.resource.db.label.port"),defaultValue:e.port,name:"port",controlledType:"number",control:n,placeholders:["27017"],isRequired:!0,rules:[{required:!0}]}),t(s,{title:o("editor.action.resource.db.label.database"),defaultValue:e.databaseName,control:n,placeholders:[o("editor.action.resource.db.placeholder.database")],name:"databaseName",controlledType:"input",isRequired:!0,rules:[{required:!0}]}),t(s,{title:o("editor.action.resource.db.label.username_password"),name:["databaseUsername","databasePassword"],controlledType:["input","password"],defaultValue:[e.databaseUsername,e.databasePassword],control:n,rules:[{required:!0},{required:!0}],isRequired:!0,placeholders:[o("editor.action.resource.db.placeholder.username"),o("editor.action.resource.db.placeholder.password")]}),M]})};C.displayName="MongoDbGuiMode";const v=d=>{const{resourceID:n,control:r}=d,{t:i}=h(),{getResourceByID:o}=u.useContext(y),l=o(n);let a;if(l===void 0)a=T;else{const e=l.content;a=e.configType==="uri"?e.configContent:T}return t(s,{title:i("editor.action.resource.db.label.connection_format"),control:r,name:"uri",defaultValue:a.uri,placeholders:["mongodb+srv://admin:password@host/mydb?retryWrites=true&w=majority"],controlledType:"input",rules:[{validate:D}],isRequired:!0})};v.displayName="MongoDbUriMode";const U=d=>{const{resourceID:n}=d,{t:r}=h(),{control:i,watch:o}=I(),{getResourceByID:l}=u.useContext(y),a=l(n);let e;a===void 0?e=E:e=a.content;const c=o("configType",e.configType),b=o("open",e.ssl.open??!1);return t(f,{children:m("div",{css:F,children:[t(s,{controlledType:"input",isRequired:!0,title:r("editor.action.resource.db.label.name"),control:i,defaultValue:(a==null?void 0:a.resourceName)??"",rules:[{validate:D}],placeholders:[r("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:r("editor.action.resource.restapi.tip.name")}),t(x,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:N,children:r("editor.action.resource.db.title.general_option")}),t(s,{title:r("editor.action.resource.db.label.config_type"),defaultValue:e.configType,name:"configType",controlledType:"radio-group",control:i,forceEqualWidth:!0,options:[{value:"gui",label:"General"},{value:"uri",label:"URI"}]}),c==="gui"&&t(C,{control:i,watch:o,resourceID:n}),c==="uri"&&t(v,{control:i,watch:o,resourceID:n}),t(s,{controlledType:["switch"],title:r("editor.action.resource.db.label.ssl_options"),control:i,defaultValue:e.ssl.open,name:"open",contentLabel:r("editor.action.resource.db.tip.ssl_options")}),b&&m(f,{children:[t(s,{controlledType:["textarea"],title:r("editor.action.resource.db.label.mongodb_ssl_client"),control:i,defaultValue:e.ssl.client,name:"client",placeholders:[r("editor.action.resource.db.placeholder.mongo_certificate")]}),t(s,{controlledType:["textarea"],title:r("editor.action.resource.db.label.mongodb_ssl_ca"),control:i,defaultValue:e.ssl.ca,name:"ca",placeholders:[r("editor.action.resource.db.placeholder.certificate")]})]})]})})};U.displayName="MongoDbConfigElement";export{U as default};
//# sourceMappingURL=index-cf969a0c.js.map
