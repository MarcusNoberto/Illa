{"version":3,"file":"renderComponentCanvasContainer-2e4cd54a.js","sources":["../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useIsomorphicLayoutEffect.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useCollector.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useMonitorOutput.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useCollectedProps.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useOptionalFactory.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrag/connectors.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/internals/DragSourceMonitorImpl.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/internals/DropTargetMonitorImpl.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/internals/registration.js","../../../../node_modules/.pnpm/@react-dnd+shallowequal@4.0.2/node_modules/@react-dnd/shallowequal/dist/index.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/internals/isRef.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/internals/wrapConnectorHooks.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/internals/SourceConnector.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/internals/TargetConnector.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDragDropManager.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrag/useDragSourceConnector.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrag/useDragSourceMonitor.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrag/DragSourceImpl.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrag/useDragSource.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrag/useDragType.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrag/useRegisteredDragSource.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrag/useDrag.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDragLayer.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrop/connectors.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrop/useDropTargetConnector.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrop/useDropTargetMonitor.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrop/useAccept.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrop/DropTargetImpl.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrop/useDropTarget.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrop/useRegisteredDropTarget.js","../../../../node_modules/.pnpm/react-dnd@16.0.1_@types+node@18.18.13_@types+react@18.2.38_react@18.2.0/node_modules/react-dnd/dist/hooks/useDrop/useDrop.js","../../src/page/App/components/DotPanel/calc.ts","../../src/components/ErrorBoundary/fallback/widget/style.ts","../../src/components/ErrorBoundary/fallback/widget/index.tsx","../../src/components/ErrorBoundary/index.tsx","../../src/widgetLibrary/PublicSector/TransformWidgetWrapper/config.tsx","../../src/widgetLibrary/PublicSector/TransformWidgetWrapper/index.tsx","../../src/redux/currentApp/collaborators/collaboratorsSelector.ts","../../src/redux/currentApp/dragShadow/dragShadowSelector.ts","../../src/page/App/components/Actions/api.ts","../../src/page/App/components/ScaleSquare/components/DragContainer/interface.ts","../../src/page/App/components/DotPanel/context/scrollBarContext.tsx","../../src/page/App/components/DotPanel/utils/crossingHelper.ts","../../src/page/App/components/DotPanel/utils/sendBinaryMessage.ts","../../src/page/App/components/DotPanel/utils/getDragShadow.ts","../../src/utils/focusManager.ts","../../src/utils/changeDisplayNameHelper.ts","../../src/utils/componentNode/copyHelper.ts","../../src/utils/copyManager.ts","../../src/utils/shortcut/shortcutProvider.tsx","../../src/utils/userAgent/index.ts","../../src/page/App/components/DotPanel/context/mouseHoverContext.tsx","../../src/page/App/components/ScaleSquare/utils/useMouseHover.ts","../../src/utils/drag/drag.ts","../../src/page/App/components/ScaleSquare/components/DragContainer/style.ts","../../src/page/App/components/ScaleSquare/components/DragContainer/index.tsx","../../src/assets/doc.svg?react","../../src/page/App/components/ScaleSquare/components/CollaboratorsList/style.ts","../../src/redux/currentApp/collaborators/collaboratorsHandlers.ts","../../src/page/App/components/ScaleSquare/components/CollaboratorsList/index.tsx","../../src/page/App/components/ScaleSquare/constant/moveBar.ts","../../src/page/App/components/ScaleSquare/utils/useGetDisplayNameInMoveBar.ts","../../src/page/App/components/ScaleSquare/components/MoveBar/style.ts","../../src/page/App/components/ScaleSquare/components/MoveBar/moveBar.tsx","../../src/page/App/components/ScaleSquare/components/PositionContainer/style.ts","../../src/page/App/components/ScaleSquare/components/PositionContainer/index.tsx","../../src/page/App/components/ScaleSquare/components/ResizingAndDragContainer/ResizeHandler/utils.ts","../../src/page/App/components/ScaleSquare/components/ResizingAndDragContainer/ResizeHandler/hooks.ts","../../src/page/App/components/ScaleSquare/components/ResizingAndDragContainer/ResizeHandler/style.ts","../../src/page/App/components/ScaleSquare/components/ResizingAndDragContainer/ResizeHandler/index.tsx","../../src/page/App/components/ScaleSquare/components/ResizingAndDragContainer/style.ts","../../src/page/App/components/ScaleSquare/components/ResizingAndDragContainer/index.tsx","../../src/page/App/components/ScaleSquare/components/WrapperContainer/style.ts","../../src/page/App/components/ScaleSquare/components/WrapperContainer/index.tsx","../../src/page/App/components/ScaleSquare/utils/getRealShapeAndPosition.ts","../../src/page/App/components/ScaleSquare/index.tsx","../../src/page/App/components/ScaleSquare/components/ResizingAndDragContainer/utils.tsx","../../src/page/App/components/ScaleSquare/utils/useScaleStateSelector.ts","../../src/page/App/components/ScaleSquare/modalScaleSquare.tsx","../../src/page/App/components/DotPanel/components/ComponentParser/index.tsx","../../src/page/App/components/DotPanel/components/DragPreview/style.ts","../../src/page/App/components/DotPanel/components/DragPreview/index.tsx","../../src/assets/public/cursor.svg?react","../../src/page/App/components/DotPanel/components/MousePreview/Cursor/style.ts","../../src/page/App/components/DotPanel/components/MousePreview/Cursor/index.tsx","../../src/page/App/components/DotPanel/components/DragShadowPreview/Shadow/style.ts","../../src/page/App/components/DotPanel/components/DragShadowPreview/Shadow/utils.ts","../../src/page/App/components/DotPanel/components/DragShadowPreview/Shadow/index.tsx","../../src/page/App/components/DotPanel/components/DragShadowPreview/index.tsx","../../src/redux/currentApp/cursor/cursorSelector.ts","../../src/page/App/components/DotPanel/components/MousePreview/index.tsx","../../../../node_modules/.pnpm/@daybrush+utils@1.10.2/node_modules/@daybrush/utils/dist/utils.esm.js","../../../../node_modules/.pnpm/overlap-area@1.1.0/node_modules/overlap-area/dist/overlap-area.esm.js","../../../../node_modules/.pnpm/@scena+event-emitter@1.0.5/node_modules/@scena/event-emitter/dist/event-emitter.esm.js","../../../../node_modules/.pnpm/gesto@1.15.1/node_modules/gesto/dist/gesto.esm.js","../../../../node_modules/.pnpm/framework-utils@1.1.0/node_modules/framework-utils/dist/utils.esm.js","../../../../node_modules/.pnpm/@egjs+list-differ@1.0.0/node_modules/@egjs/list-differ/dist/list-differ.esm.js","../../../../node_modules/.pnpm/@egjs+children-differ@1.0.1/node_modules/@egjs/children-differ/dist/children-differ.esm.js","../../../../node_modules/.pnpm/@scena+dragscroll@1.4.0/node_modules/@scena/dragscroll/dist/dragscroll.esm.js","../../../../node_modules/.pnpm/keycon@1.4.0/node_modules/keycon/dist/keycon.esm.js","../../../../node_modules/.pnpm/@scena+matrix@1.1.1/node_modules/@scena/matrix/dist/matrix.esm.js","../../../../node_modules/.pnpm/css-to-mat@1.0.3/node_modules/css-to-mat/dist/css-to-mat.esm.js","../../../../node_modules/.pnpm/css-styled@1.0.1_@daybrush+utils@1.10.2/node_modules/css-styled/dist/styled.esm.js","../../../../node_modules/.pnpm/selecto@1.22.0/node_modules/selecto/dist/selecto.esm.js","../../../../node_modules/.pnpm/react-selecto@1.22.0/node_modules/react-selecto/dist/selecto.esm.js","../../src/page/App/components/DotPanel/components/MultiSelectCanvas/index.tsx","../../src/page/App/components/DotPanel/utils.ts","../../src/page/App/components/DotPanel/components/MultiSelectedContainer/style.ts","../../src/page/App/components/DotPanel/components/MultiSelectedContainer/index.tsx","../../src/page/App/components/DotPanel/context/mouseMoveContext.tsx","../../src/page/App/components/DotPanel/utils/calcMouse.ts","../../src/page/App/components/DotPanel/hooks/useMousePostionAsync.tsx","../../src/page/App/components/DotPanel/utils/getDropResult.ts","../../src/widgetLibrary/ContainerWidget/style.ts","../../src/widgetLibrary/ContainerWidget/emptyState.tsx","../../src/widgetLibrary/PublicSector/utils/autoUpdateHeight.ts","../../src/page/App/components/DotPanel/components/Canvas/style.ts","../../src/page/App/components/DotPanel/components/Canvas/renderComponentCanvasContainer.tsx"],"sourcesContent":["import { useEffect, useLayoutEffect } from 'react';\n// suppress the useLayoutEffect warning on server side.\nexport const useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\n//# sourceMappingURL=useIsomorphicLayoutEffect.js.map","import equal from 'fast-deep-equal';\nimport { useCallback, useState } from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js';\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */ export function useCollector(monitor, collect, onUpdate) {\n    const [collected, setCollected] = useState(()=>collect(monitor)\n    );\n    const updateCollected = useCallback(()=>{\n        const nextValue = collect(monitor);\n        // This needs to be a deep-equality check because some monitor-collected values\n        // include XYCoord objects that may be equivalent, but do not have instance equality.\n        if (!equal(collected, nextValue)) {\n            setCollected(nextValue);\n            if (onUpdate) {\n                onUpdate();\n            }\n        }\n    }, [\n        collected,\n        monitor,\n        onUpdate\n    ]);\n    // update the collected properties after react renders.\n    // Note that the \"Dustbin Stress Test\" fails if this is not\n    // done when the component updates\n    useIsomorphicLayoutEffect(updateCollected);\n    return [\n        collected,\n        updateCollected\n    ];\n}\n\n//# sourceMappingURL=useCollector.js.map","import { useCollector } from './useCollector.js';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js';\nexport function useMonitorOutput(monitor, collect, onCollect) {\n    const [collected, updateCollected] = useCollector(monitor, collect, onCollect);\n    useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n        const handlerId = monitor.getHandlerId();\n        if (handlerId == null) {\n            return;\n        }\n        return monitor.subscribeToStateChange(updateCollected, {\n            handlerIds: [\n                handlerId\n            ]\n        });\n    }, [\n        monitor,\n        updateCollected\n    ]);\n    return collected;\n}\n\n//# sourceMappingURL=useMonitorOutput.js.map","import { useMonitorOutput } from './useMonitorOutput.js';\nexport function useCollectedProps(collector, monitor, connector) {\n    return useMonitorOutput(monitor, collector || (()=>({})\n    ), ()=>connector.reconnect()\n    );\n}\n\n//# sourceMappingURL=useCollectedProps.js.map","import { useMemo } from 'react';\nexport function useOptionalFactory(arg, deps) {\n    const memoDeps = [\n        ...deps || []\n    ];\n    if (deps == null && typeof arg !== 'function') {\n        memoDeps.push(arg);\n    }\n    return useMemo(()=>{\n        return typeof arg === 'function' ? arg() : arg;\n    }, memoDeps);\n}\n\n//# sourceMappingURL=useOptionalFactory.js.map","import { useMemo } from 'react';\nexport function useConnectDragSource(connector) {\n    return useMemo(()=>connector.hooks.dragSource()\n    , [\n        connector\n    ]);\n}\nexport function useConnectDragPreview(connector) {\n    return useMemo(()=>connector.hooks.dragPreview()\n    , [\n        connector\n    ]);\n}\n\n//# sourceMappingURL=connectors.js.map","import { invariant } from '@react-dnd/invariant';\nlet isCallingCanDrag = false;\nlet isCallingIsDragging = false;\nexport class DragSourceMonitorImpl {\n    receiveHandlerId(sourceId) {\n        this.sourceId = sourceId;\n    }\n    getHandlerId() {\n        return this.sourceId;\n    }\n    canDrag() {\n        invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n        try {\n            isCallingCanDrag = true;\n            return this.internalMonitor.canDragSource(this.sourceId);\n        } finally{\n            isCallingCanDrag = false;\n        }\n    }\n    isDragging() {\n        if (!this.sourceId) {\n            return false;\n        }\n        invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n        try {\n            isCallingIsDragging = true;\n            return this.internalMonitor.isDraggingSource(this.sourceId);\n        } finally{\n            isCallingIsDragging = false;\n        }\n    }\n    subscribeToStateChange(listener, options) {\n        return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n    isDraggingSource(sourceId) {\n        return this.internalMonitor.isDraggingSource(sourceId);\n    }\n    isOverTarget(targetId, options) {\n        return this.internalMonitor.isOverTarget(targetId, options);\n    }\n    getTargetIds() {\n        return this.internalMonitor.getTargetIds();\n    }\n    isSourcePublic() {\n        return this.internalMonitor.isSourcePublic();\n    }\n    getSourceId() {\n        return this.internalMonitor.getSourceId();\n    }\n    subscribeToOffsetChange(listener) {\n        return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n    canDragSource(sourceId) {\n        return this.internalMonitor.canDragSource(sourceId);\n    }\n    canDropOnTarget(targetId) {\n        return this.internalMonitor.canDropOnTarget(targetId);\n    }\n    getItemType() {\n        return this.internalMonitor.getItemType();\n    }\n    getItem() {\n        return this.internalMonitor.getItem();\n    }\n    getDropResult() {\n        return this.internalMonitor.getDropResult();\n    }\n    didDrop() {\n        return this.internalMonitor.didDrop();\n    }\n    getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n    }\n    getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n    }\n    getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n    }\n    getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n    }\n    getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n    constructor(manager){\n        this.sourceId = null;\n        this.internalMonitor = manager.getMonitor();\n    }\n}\n\n//# sourceMappingURL=DragSourceMonitorImpl.js.map","import { invariant } from '@react-dnd/invariant';\nlet isCallingCanDrop = false;\nexport class DropTargetMonitorImpl {\n    receiveHandlerId(targetId) {\n        this.targetId = targetId;\n    }\n    getHandlerId() {\n        return this.targetId;\n    }\n    subscribeToStateChange(listener, options) {\n        return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n    canDrop() {\n        // Cut out early if the target id has not been set. This should prevent errors\n        // where the user has an older version of dnd-core like in\n        // https://github.com/react-dnd/react-dnd/issues/1310\n        if (!this.targetId) {\n            return false;\n        }\n        invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n        try {\n            isCallingCanDrop = true;\n            return this.internalMonitor.canDropOnTarget(this.targetId);\n        } finally{\n            isCallingCanDrop = false;\n        }\n    }\n    isOver(options) {\n        if (!this.targetId) {\n            return false;\n        }\n        return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n    getItemType() {\n        return this.internalMonitor.getItemType();\n    }\n    getItem() {\n        return this.internalMonitor.getItem();\n    }\n    getDropResult() {\n        return this.internalMonitor.getDropResult();\n    }\n    didDrop() {\n        return this.internalMonitor.didDrop();\n    }\n    getInitialClientOffset() {\n        return this.internalMonitor.getInitialClientOffset();\n    }\n    getInitialSourceClientOffset() {\n        return this.internalMonitor.getInitialSourceClientOffset();\n    }\n    getSourceClientOffset() {\n        return this.internalMonitor.getSourceClientOffset();\n    }\n    getClientOffset() {\n        return this.internalMonitor.getClientOffset();\n    }\n    getDifferenceFromInitialOffset() {\n        return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n    constructor(manager){\n        this.targetId = null;\n        this.internalMonitor = manager.getMonitor();\n    }\n}\n\n//# sourceMappingURL=DropTargetMonitorImpl.js.map","export function registerTarget(type, target, manager) {\n    const registry = manager.getRegistry();\n    const targetId = registry.addTarget(type, target);\n    return [\n        targetId,\n        ()=>registry.removeTarget(targetId)\n    ];\n}\nexport function registerSource(type, source, manager) {\n    const registry = manager.getRegistry();\n    const sourceId = registry.addSource(type, source);\n    return [\n        sourceId,\n        ()=>registry.removeSource(sourceId)\n    ];\n}\n\n//# sourceMappingURL=registration.js.map","export function shallowEqual(objA, objB, compare, compareContext) {\n    let compareResult = compare ? compare.call(compareContext, objA, objB) : void 0;\n    if (compareResult !== void 0) {\n        return !!compareResult;\n    }\n    if (objA === objB) {\n        return true;\n    }\n    if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n        return false;\n    }\n    const keysA = Object.keys(objA);\n    const keysB = Object.keys(objB);\n    if (keysA.length !== keysB.length) {\n        return false;\n    }\n    const bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n    // Test for A's keys different from B.\n    for(let idx = 0; idx < keysA.length; idx++){\n        const key = keysA[idx];\n        if (!bHasOwnProperty(key)) {\n            return false;\n        }\n        const valueA = objA[key];\n        const valueB = objB[key];\n        compareResult = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n        if (compareResult === false || compareResult === void 0 && valueA !== valueB) {\n            return false;\n        }\n    }\n    return true;\n}\n\n//# sourceMappingURL=index.js.map","export function isRef(obj) {\n    return(// eslint-disable-next-line no-prototype-builtins\n    obj !== null && typeof obj === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current'));\n}\n\n//# sourceMappingURL=isRef.js.map","import { invariant } from '@react-dnd/invariant';\nimport { cloneElement, isValidElement } from 'react';\nfunction throwIfCompositeComponentElement(element) {\n    // Custom components can no longer be wrapped directly in React DnD 2.0\n    // so that we don't need to depend on findDOMNode() from react-dom.\n    if (typeof element.type === 'string') {\n        return;\n    }\n    const displayName = element.type.displayName || element.type.name || 'the component';\n    throw new Error('Only native element nodes can now be passed to React DnD connectors.' + `You can either wrap ${displayName} into a <div>, or turn it into a ` + 'drag source or a drop target itself.');\n}\nfunction wrapHookToRecognizeElement(hook) {\n    return (elementOrNode = null, options = null)=>{\n        // When passed a node, call the hook straight away.\n        if (!isValidElement(elementOrNode)) {\n            const node = elementOrNode;\n            hook(node, options);\n            // return the node so it can be chained (e.g. when within callback refs\n            // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n            return node;\n        }\n        // If passed a ReactElement, clone it and attach this function as a ref.\n        // This helps us achieve a neat API where user doesn't even know that refs\n        // are being used under the hood.\n        const element = elementOrNode;\n        throwIfCompositeComponentElement(element);\n        // When no options are passed, use the hook directly\n        const ref = options ? (node)=>hook(node, options)\n         : hook;\n        return cloneWithRef(element, ref);\n    };\n}\nexport function wrapConnectorHooks(hooks) {\n    const wrappedHooks = {};\n    Object.keys(hooks).forEach((key)=>{\n        const hook = hooks[key];\n        // ref objects should be passed straight through without wrapping\n        if (key.endsWith('Ref')) {\n            wrappedHooks[key] = hooks[key];\n        } else {\n            const wrappedHook = wrapHookToRecognizeElement(hook);\n            wrappedHooks[key] = ()=>wrappedHook\n            ;\n        }\n    });\n    return wrappedHooks;\n}\nfunction setRef(ref, node) {\n    if (typeof ref === 'function') {\n        ref(node);\n    } else {\n        ref.current = node;\n    }\n}\nfunction cloneWithRef(element, newRef) {\n    const previousRef = element.ref;\n    invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs');\n    if (!previousRef) {\n        // When there is no ref on the element, use the new ref directly\n        return cloneElement(element, {\n            ref: newRef\n        });\n    } else {\n        return cloneElement(element, {\n            ref: (node)=>{\n                setRef(previousRef, node);\n                setRef(newRef, node);\n            }\n        });\n    }\n}\n\n//# sourceMappingURL=wrapConnectorHooks.js.map","import { shallowEqual } from '@react-dnd/shallowequal';\nimport { isRef } from './isRef.js';\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js';\nexport class SourceConnector {\n    receiveHandlerId(newHandlerId) {\n        if (this.handlerId === newHandlerId) {\n            return;\n        }\n        this.handlerId = newHandlerId;\n        this.reconnect();\n    }\n    get connectTarget() {\n        return this.dragSource;\n    }\n    get dragSourceOptions() {\n        return this.dragSourceOptionsInternal;\n    }\n    set dragSourceOptions(options) {\n        this.dragSourceOptionsInternal = options;\n    }\n    get dragPreviewOptions() {\n        return this.dragPreviewOptionsInternal;\n    }\n    set dragPreviewOptions(options) {\n        this.dragPreviewOptionsInternal = options;\n    }\n    reconnect() {\n        const didChange = this.reconnectDragSource();\n        this.reconnectDragPreview(didChange);\n    }\n    reconnectDragSource() {\n        const dragSource = this.dragSource;\n        // if nothing has changed then don't resubscribe\n        const didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n        if (didChange) {\n            this.disconnectDragSource();\n        }\n        if (!this.handlerId) {\n            return didChange;\n        }\n        if (!dragSource) {\n            this.lastConnectedDragSource = dragSource;\n            return didChange;\n        }\n        if (didChange) {\n            this.lastConnectedHandlerId = this.handlerId;\n            this.lastConnectedDragSource = dragSource;\n            this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n            this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n        }\n        return didChange;\n    }\n    reconnectDragPreview(forceDidChange = false) {\n        const dragPreview = this.dragPreview;\n        // if nothing has changed then don't resubscribe\n        const didChange = forceDidChange || this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n        if (didChange) {\n            this.disconnectDragPreview();\n        }\n        if (!this.handlerId) {\n            return;\n        }\n        if (!dragPreview) {\n            this.lastConnectedDragPreview = dragPreview;\n            return;\n        }\n        if (didChange) {\n            this.lastConnectedHandlerId = this.handlerId;\n            this.lastConnectedDragPreview = dragPreview;\n            this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n            this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n        }\n    }\n    didHandlerIdChange() {\n        return this.lastConnectedHandlerId !== this.handlerId;\n    }\n    didConnectedDragSourceChange() {\n        return this.lastConnectedDragSource !== this.dragSource;\n    }\n    didConnectedDragPreviewChange() {\n        return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n    didDragSourceOptionsChange() {\n        return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n    didDragPreviewOptionsChange() {\n        return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n    disconnectDragSource() {\n        if (this.dragSourceUnsubscribe) {\n            this.dragSourceUnsubscribe();\n            this.dragSourceUnsubscribe = undefined;\n        }\n    }\n    disconnectDragPreview() {\n        if (this.dragPreviewUnsubscribe) {\n            this.dragPreviewUnsubscribe();\n            this.dragPreviewUnsubscribe = undefined;\n            this.dragPreviewNode = null;\n            this.dragPreviewRef = null;\n        }\n    }\n    get dragSource() {\n        return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n    get dragPreview() {\n        return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n    clearDragSource() {\n        this.dragSourceNode = null;\n        this.dragSourceRef = null;\n    }\n    clearDragPreview() {\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n    }\n    constructor(backend){\n        this.hooks = wrapConnectorHooks({\n            dragSource: (node, options)=>{\n                this.clearDragSource();\n                this.dragSourceOptions = options || null;\n                if (isRef(node)) {\n                    this.dragSourceRef = node;\n                } else {\n                    this.dragSourceNode = node;\n                }\n                this.reconnectDragSource();\n            },\n            dragPreview: (node, options)=>{\n                this.clearDragPreview();\n                this.dragPreviewOptions = options || null;\n                if (isRef(node)) {\n                    this.dragPreviewRef = node;\n                } else {\n                    this.dragPreviewNode = node;\n                }\n                this.reconnectDragPreview();\n            }\n        });\n        this.handlerId = null;\n        // The drop target may either be attached via ref or connect function\n        this.dragSourceRef = null;\n        this.dragSourceOptionsInternal = null;\n        // The drag preview may either be attached via ref or connect function\n        this.dragPreviewRef = null;\n        this.dragPreviewOptionsInternal = null;\n        this.lastConnectedHandlerId = null;\n        this.lastConnectedDragSource = null;\n        this.lastConnectedDragSourceOptions = null;\n        this.lastConnectedDragPreview = null;\n        this.lastConnectedDragPreviewOptions = null;\n        this.backend = backend;\n    }\n}\n\n//# sourceMappingURL=SourceConnector.js.map","import { shallowEqual } from '@react-dnd/shallowequal';\nimport { isRef } from './isRef.js';\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js';\nexport class TargetConnector {\n    get connectTarget() {\n        return this.dropTarget;\n    }\n    reconnect() {\n        // if nothing has changed then don't resubscribe\n        const didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n        if (didChange) {\n            this.disconnectDropTarget();\n        }\n        const dropTarget = this.dropTarget;\n        if (!this.handlerId) {\n            return;\n        }\n        if (!dropTarget) {\n            this.lastConnectedDropTarget = dropTarget;\n            return;\n        }\n        if (didChange) {\n            this.lastConnectedHandlerId = this.handlerId;\n            this.lastConnectedDropTarget = dropTarget;\n            this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n            this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n        }\n    }\n    receiveHandlerId(newHandlerId) {\n        if (newHandlerId === this.handlerId) {\n            return;\n        }\n        this.handlerId = newHandlerId;\n        this.reconnect();\n    }\n    get dropTargetOptions() {\n        return this.dropTargetOptionsInternal;\n    }\n    set dropTargetOptions(options) {\n        this.dropTargetOptionsInternal = options;\n    }\n    didHandlerIdChange() {\n        return this.lastConnectedHandlerId !== this.handlerId;\n    }\n    didDropTargetChange() {\n        return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n    didOptionsChange() {\n        return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n    disconnectDropTarget() {\n        if (this.unsubscribeDropTarget) {\n            this.unsubscribeDropTarget();\n            this.unsubscribeDropTarget = undefined;\n        }\n    }\n    get dropTarget() {\n        return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n    clearDropTarget() {\n        this.dropTargetRef = null;\n        this.dropTargetNode = null;\n    }\n    constructor(backend){\n        this.hooks = wrapConnectorHooks({\n            dropTarget: (node, options)=>{\n                this.clearDropTarget();\n                this.dropTargetOptions = options;\n                if (isRef(node)) {\n                    this.dropTargetRef = node;\n                } else {\n                    this.dropTargetNode = node;\n                }\n                this.reconnect();\n            }\n        });\n        this.handlerId = null;\n        // The drop target may either be attached via ref or connect function\n        this.dropTargetRef = null;\n        this.dropTargetOptionsInternal = null;\n        this.lastConnectedHandlerId = null;\n        this.lastConnectedDropTarget = null;\n        this.lastConnectedDropTargetOptions = null;\n        this.backend = backend;\n    }\n}\n\n//# sourceMappingURL=TargetConnector.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useContext } from 'react';\nimport { DndContext } from '../core/index.js';\n/**\n * A hook to retrieve the DragDropManager from Context\n */ export function useDragDropManager() {\n    const { dragDropManager  } = useContext(DndContext);\n    invariant(dragDropManager != null, 'Expected drag drop context');\n    return dragDropManager;\n}\n\n//# sourceMappingURL=useDragDropManager.js.map","import { useMemo } from 'react';\nimport { SourceConnector } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nexport function useDragSourceConnector(dragSourceOptions, dragPreviewOptions) {\n    const manager = useDragDropManager();\n    const connector = useMemo(()=>new SourceConnector(manager.getBackend())\n    , [\n        manager\n    ]);\n    useIsomorphicLayoutEffect(()=>{\n        connector.dragSourceOptions = dragSourceOptions || null;\n        connector.reconnect();\n        return ()=>connector.disconnectDragSource()\n        ;\n    }, [\n        connector,\n        dragSourceOptions\n    ]);\n    useIsomorphicLayoutEffect(()=>{\n        connector.dragPreviewOptions = dragPreviewOptions || null;\n        connector.reconnect();\n        return ()=>connector.disconnectDragPreview()\n        ;\n    }, [\n        connector,\n        dragPreviewOptions\n    ]);\n    return connector;\n}\n\n//# sourceMappingURL=useDragSourceConnector.js.map","import { useMemo } from 'react';\nimport { DragSourceMonitorImpl } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nexport function useDragSourceMonitor() {\n    const manager = useDragDropManager();\n    return useMemo(()=>new DragSourceMonitorImpl(manager)\n    , [\n        manager\n    ]);\n}\n\n//# sourceMappingURL=useDragSourceMonitor.js.map","export class DragSourceImpl {\n    beginDrag() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        let result = null;\n        if (typeof spec.item === 'object') {\n            result = spec.item;\n        } else if (typeof spec.item === 'function') {\n            result = spec.item(monitor);\n        } else {\n            result = {};\n        }\n        return result !== null && result !== void 0 ? result : null;\n    }\n    canDrag() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        if (typeof spec.canDrag === 'boolean') {\n            return spec.canDrag;\n        } else if (typeof spec.canDrag === 'function') {\n            return spec.canDrag(monitor);\n        } else {\n            return true;\n        }\n    }\n    isDragging(globalMonitor, target) {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        const { isDragging  } = spec;\n        return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n    }\n    endDrag() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        const connector = this.connector;\n        const { end  } = spec;\n        if (end) {\n            end(monitor.getItem(), monitor);\n        }\n        connector.reconnect();\n    }\n    constructor(spec, monitor, connector){\n        this.spec = spec;\n        this.monitor = monitor;\n        this.connector = connector;\n    }\n}\n\n//# sourceMappingURL=DragSourceImpl.js.map","import { useEffect, useMemo } from 'react';\nimport { DragSourceImpl } from './DragSourceImpl.js';\nexport function useDragSource(spec, monitor, connector) {\n    const handler = useMemo(()=>new DragSourceImpl(spec, monitor, connector)\n    , [\n        monitor,\n        connector\n    ]);\n    useEffect(()=>{\n        handler.spec = spec;\n    }, [\n        spec\n    ]);\n    return handler;\n}\n\n//# sourceMappingURL=useDragSource.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useMemo } from 'react';\nexport function useDragType(spec) {\n    return useMemo(()=>{\n        const result = spec.type;\n        invariant(result != null, 'spec.type must be defined');\n        return result;\n    }, [\n        spec\n    ]);\n}\n\n//# sourceMappingURL=useDragType.js.map","import { registerSource } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nimport { useDragSource } from './useDragSource.js';\nimport { useDragType } from './useDragType.js';\nexport function useRegisteredDragSource(spec, monitor, connector) {\n    const manager = useDragDropManager();\n    const handler = useDragSource(spec, monitor, connector);\n    const itemType = useDragType(spec);\n    useIsomorphicLayoutEffect(function registerDragSource() {\n        if (itemType != null) {\n            const [handlerId, unregister] = registerSource(itemType, handler, manager);\n            monitor.receiveHandlerId(handlerId);\n            connector.receiveHandlerId(handlerId);\n            return unregister;\n        }\n        return;\n    }, [\n        manager,\n        monitor,\n        connector,\n        handler,\n        itemType\n    ]);\n}\n\n//# sourceMappingURL=useRegisteredDragSource.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useCollectedProps } from '../useCollectedProps.js';\nimport { useOptionalFactory } from '../useOptionalFactory.js';\nimport { useConnectDragPreview, useConnectDragSource } from './connectors.js';\nimport { useDragSourceConnector } from './useDragSourceConnector.js';\nimport { useDragSourceMonitor } from './useDragSourceMonitor.js';\nimport { useRegisteredDragSource } from './useRegisteredDragSource.js';\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */ export function useDrag(specArg, deps) {\n    const spec = useOptionalFactory(specArg, deps);\n    invariant(!spec.begin, `useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)`);\n    const monitor = useDragSourceMonitor();\n    const connector = useDragSourceConnector(spec.options, spec.previewOptions);\n    useRegisteredDragSource(spec, monitor, connector);\n    return [\n        useCollectedProps(spec.collect, monitor, connector),\n        useConnectDragSource(connector),\n        useConnectDragPreview(connector), \n    ];\n}\n\n//# sourceMappingURL=useDrag.js.map","import { useEffect } from 'react';\nimport { useCollector } from './useCollector.js';\nimport { useDragDropManager } from './useDragDropManager.js';\n/**\n * useDragLayer Hook\n * @param collector The property collector\n */ export function useDragLayer(collect) {\n    const dragDropManager = useDragDropManager();\n    const monitor = dragDropManager.getMonitor();\n    const [collected, updateCollected] = useCollector(monitor, collect);\n    useEffect(()=>monitor.subscribeToOffsetChange(updateCollected)\n    );\n    useEffect(()=>monitor.subscribeToStateChange(updateCollected)\n    );\n    return collected;\n}\n\n//# sourceMappingURL=useDragLayer.js.map","import { useMemo } from 'react';\nexport function useConnectDropTarget(connector) {\n    return useMemo(()=>connector.hooks.dropTarget()\n    , [\n        connector\n    ]);\n}\n\n//# sourceMappingURL=connectors.js.map","import { useMemo } from 'react';\nimport { TargetConnector } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nexport function useDropTargetConnector(options) {\n    const manager = useDragDropManager();\n    const connector = useMemo(()=>new TargetConnector(manager.getBackend())\n    , [\n        manager\n    ]);\n    useIsomorphicLayoutEffect(()=>{\n        connector.dropTargetOptions = options || null;\n        connector.reconnect();\n        return ()=>connector.disconnectDropTarget()\n        ;\n    }, [\n        options\n    ]);\n    return connector;\n}\n\n//# sourceMappingURL=useDropTargetConnector.js.map","import { useMemo } from 'react';\nimport { DropTargetMonitorImpl } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nexport function useDropTargetMonitor() {\n    const manager = useDragDropManager();\n    return useMemo(()=>new DropTargetMonitorImpl(manager)\n    , [\n        manager\n    ]);\n}\n\n//# sourceMappingURL=useDropTargetMonitor.js.map","import { invariant } from '@react-dnd/invariant';\nimport { useMemo } from 'react';\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */ export function useAccept(spec) {\n    const { accept  } = spec;\n    return useMemo(()=>{\n        invariant(spec.accept != null, 'accept must be defined');\n        return Array.isArray(accept) ? accept : [\n            accept\n        ];\n    }, [\n        accept\n    ]);\n}\n\n//# sourceMappingURL=useAccept.js.map","export class DropTargetImpl {\n    canDrop() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        return spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true;\n    }\n    hover() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        if (spec.hover) {\n            spec.hover(monitor.getItem(), monitor);\n        }\n    }\n    drop() {\n        const spec = this.spec;\n        const monitor = this.monitor;\n        if (spec.drop) {\n            return spec.drop(monitor.getItem(), monitor);\n        }\n        return;\n    }\n    constructor(spec, monitor){\n        this.spec = spec;\n        this.monitor = monitor;\n    }\n}\n\n//# sourceMappingURL=DropTargetImpl.js.map","import { useEffect, useMemo } from 'react';\nimport { DropTargetImpl } from './DropTargetImpl.js';\nexport function useDropTarget(spec, monitor) {\n    const dropTarget = useMemo(()=>new DropTargetImpl(spec, monitor)\n    , [\n        monitor\n    ]);\n    useEffect(()=>{\n        dropTarget.spec = spec;\n    }, [\n        spec\n    ]);\n    return dropTarget;\n}\n\n//# sourceMappingURL=useDropTarget.js.map","import { registerTarget } from '../../internals/index.js';\nimport { useDragDropManager } from '../useDragDropManager.js';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js';\nimport { useAccept } from './useAccept.js';\nimport { useDropTarget } from './useDropTarget.js';\nexport function useRegisteredDropTarget(spec, monitor, connector) {\n    const manager = useDragDropManager();\n    const dropTarget = useDropTarget(spec, monitor);\n    const accept = useAccept(spec);\n    useIsomorphicLayoutEffect(function registerDropTarget() {\n        const [handlerId, unregister] = registerTarget(accept, dropTarget, manager);\n        monitor.receiveHandlerId(handlerId);\n        connector.receiveHandlerId(handlerId);\n        return unregister;\n    }, [\n        manager,\n        monitor,\n        dropTarget,\n        connector,\n        accept.map((a)=>a.toString()\n        ).join('|'), \n    ]);\n}\n\n//# sourceMappingURL=useRegisteredDropTarget.js.map","import { useCollectedProps } from '../useCollectedProps.js';\nimport { useOptionalFactory } from '../useOptionalFactory.js';\nimport { useConnectDropTarget } from './connectors.js';\nimport { useDropTargetConnector } from './useDropTargetConnector.js';\nimport { useDropTargetMonitor } from './useDropTargetMonitor.js';\nimport { useRegisteredDropTarget } from './useRegisteredDropTarget.js';\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */ export function useDrop(specArg, deps) {\n    const spec = useOptionalFactory(specArg, deps);\n    const monitor = useDropTargetMonitor();\n    const connector = useDropTargetConnector(spec.options);\n    useRegisteredDropTarget(spec, monitor, connector);\n    return [\n        useCollectedProps(spec.collect, monitor, connector),\n        useConnectDropTarget(connector), \n    ];\n}\n\n//# sourceMappingURL=useDrop.js.map","import { ComponentMapNode } from \"@illa-public/public-types\"\n\ninterface ItemPosition {\n  x: number\n  y: number\n}\n\nexport interface CanvasPosition {\n  x: number\n  y: number\n}\n\ninterface NodeWidthAndHeight {\n  w: number\n  h: number\n}\n\ninterface CenterPointPosition {\n  x: number\n  y: number\n}\n\nexport function calcRectCenterPointPosition(\n  itemPosition: ItemPosition,\n  canvasPosition: CanvasPosition,\n  nodeWidthAndHeight: NodeWidthAndHeight,\n): CenterPointPosition {\n  const { x: itemX, y: itemY } = itemPosition\n  const { x: canvasX, y: canvasY } = canvasPosition\n  const { w: nodeW, h: nodeH } = nodeWidthAndHeight\n  const pointX = itemX - canvasX\n  const pointY = itemY - canvasY\n  const centerX = pointX - nodeW / 2\n  const centerY = pointY - nodeH / 2\n  return {\n    x: centerX,\n    y: centerY,\n  }\n}\n\ninterface RectShape {\n  rectTop: number\n  rectRight: number\n  rectBottom: number\n  rectLeft: number\n}\n\nexport function calcRectShapeByCenterPoint(\n  centerPointPosition: CenterPointPosition,\n  nodeWidthAndHeight: NodeWidthAndHeight,\n): RectShape {\n  const rectTop = centerPointPosition.y\n  const rectLeft = centerPointPosition.x\n  const rectRight = rectLeft + nodeWidthAndHeight.w\n  const rectBottom = rectTop + nodeWidthAndHeight.h\n  return {\n    rectTop,\n    rectLeft,\n    rectRight,\n    rectBottom,\n  }\n}\n\nexport interface LandingPosition {\n  isOverstep: boolean\n  landingX: number\n  landingY: number\n  relativeLandingX: number\n  relativeLandingY: number\n}\n\nexport function calcLadingPosition(\n  rectPosition: RectShape,\n  unitWidth: number,\n  unitHeight: number,\n  canvasWidth: number,\n  canvasHeight: number,\n  canResizeY: boolean,\n): LandingPosition {\n  const { rectLeft, rectTop, rectRight, rectBottom } = rectPosition\n  const relativeLandingX = Math.round(rectLeft / unitWidth)\n  const relativeLandingY = Math.round(rectTop / unitHeight)\n  let landingX = relativeLandingX * unitWidth\n  let landingY = relativeLandingY * unitHeight\n  let isOverstep = true\n  if (rectTop < 0) {\n    landingY = 0\n    isOverstep = false\n  }\n  if (rectLeft < 0) {\n    landingX = 0\n    isOverstep = false\n  }\n  if (rectRight > canvasWidth) {\n    const overRight =\n      Math.round(rectRight / unitWidth) * unitWidth - canvasWidth\n    landingX = landingX - overRight\n    isOverstep = false\n  }\n  if (rectBottom > canvasHeight && !canResizeY) {\n    const overBottom =\n      Math.round(rectBottom / unitHeight) * unitHeight - canvasHeight\n    landingY = landingY - overBottom\n    isOverstep = false\n  }\n  return {\n    isOverstep,\n    landingX,\n    landingY,\n    relativeLandingX,\n    relativeLandingY,\n  }\n}\n\nexport type RectangleType = {\n  left: number\n  right: number\n  top: number\n  bottom: number\n}\n\nconst sortComponentNodesOnlyY = (componentNodes: ComponentMapNode[]) => {\n  return componentNodes.sort((node1, node2) => {\n    if (node1.y < node2.y) {\n      return -1\n    }\n    if (node1.y > node2.y) {\n      return 1\n    }\n    return 0\n  })\n}\n\nexport const sortComponentNodes = (componentNodes: ComponentMapNode[]) => {\n  return componentNodes.sort((node1, node2) => {\n    if (node1.y < node2.y) {\n      return -1\n    }\n    if (node1.y > node2.y) {\n      return 1\n    }\n    if (node1.y === node2.y) {\n      if (node1.x > node2.x) {\n        return 1\n      }\n      if (node1.x < node2.x) {\n        return -1\n      }\n    }\n    return 0\n  })\n}\n\nconst getComponentRect = (component: ComponentMapNode): RectangleType => {\n  const { x, y, w, h } = component\n  return {\n    left: x,\n    right: x + w,\n    top: y,\n    bottom: y + h,\n  }\n}\n\nexport const isCrossing = (\n  otherNode: ComponentMapNode,\n  mainNode: ComponentMapNode,\n) => {\n  const otherRect = getComponentRect(otherNode)\n  const mainRect = getComponentRect(mainNode)\n  return !(\n    mainRect.left >= otherRect.right ||\n    mainRect.right <= otherRect.left ||\n    mainRect.top >= otherRect.bottom ||\n    mainRect.bottom <= otherRect.top\n  )\n}\n\nexport const isNearingAtY = (\n  otherNode: ComponentMapNode,\n  mainNode: ComponentMapNode,\n) => {\n  const otherRect = getComponentRect(otherNode)\n  const mainRect = getComponentRect(mainNode)\n  return (\n    (mainRect.left <= otherRect.right || mainRect.right >= otherRect.left) &&\n    mainRect.bottom === otherRect.top\n  )\n}\n\nexport const getCrossingNodeNewPosition = (\n  currentNode: ComponentMapNode,\n  allComponentNode: ComponentMapNode[],\n) => {\n  let otherComponents = allComponentNode.filter(\n    (curNode) => curNode.displayName !== currentNode.displayName,\n  )\n\n  let res: Map<string, ComponentMapNode> = new Map(),\n    queue: ComponentMapNode[] = []\n\n  queue.push(currentNode)\n  while (queue.length !== 0) {\n    let length = queue.length\n    otherComponents = otherComponents.filter(\n      (curNode) => curNode.displayName !== queue[0].displayName,\n    )\n    const walkedSet = new Set()\n    for (let i = 0; i < length; i++) {\n      let node = queue.shift() as ComponentMapNode\n      for (let i = 0; i < otherComponents.length; i++) {\n        if (otherComponents[i].displayName === node.displayName) {\n          continue\n        }\n        if (isCrossing(otherComponents[i], node)) {\n          otherComponents[i] = {\n            ...otherComponents[i],\n            y: node.y + node.h,\n          }\n          walkedSet.add(otherComponents[i].displayName)\n          res.set(otherComponents[i].displayName, otherComponents[i])\n          const index = queue.findIndex(\n            (node) => node.displayName === otherComponents[i].displayName,\n          )\n          if (index > -1) {\n            queue.splice(index, 1, otherComponents[i])\n          } else {\n            queue.push(otherComponents[i])\n          }\n        }\n      }\n    }\n  }\n  return res\n}\n\nexport const getNearingNodes = (\n  currentNode: ComponentMapNode,\n  allComponentNode: ComponentMapNode[],\n) => {\n  let otherComponents = allComponentNode.filter(\n    (cur) => cur.displayName !== currentNode.displayName,\n  )\n\n  let res: Map<string, ComponentMapNode> = new Map(),\n    queue: ComponentMapNode[] = []\n\n  queue.push(currentNode)\n  while (queue.length !== 0) {\n    let length = queue.length\n\n    otherComponents = otherComponents.filter(\n      (cur) => cur.displayName !== queue[0].displayName,\n    )\n\n    const walkedSet = new Set()\n    for (let i = 0; i < length; i++) {\n      let node = queue.shift() as ComponentMapNode\n      for (let i = 0; i < otherComponents.length; i++) {\n        if (otherComponents[i].displayName === node.displayName) {\n          continue\n        }\n        if (isNearingAtY(otherComponents[i], node)) {\n          walkedSet.add(otherComponents[i].displayName)\n          res.set(otherComponents[i].displayName, otherComponents[i])\n          const index = queue.findIndex(\n            (node) => node.displayName === otherComponents[i].displayName,\n          )\n          if (index > -1) {\n            queue.splice(index, 1, otherComponents[i])\n          } else {\n            queue.push(otherComponents[i])\n          }\n        }\n      }\n    }\n  }\n  return res\n}\n\nexport const applyEffectMapToComponentNodes = (\n  effectMap: Map<string, ComponentMapNode>,\n  componentNodes: ComponentMapNode[],\n) => {\n  return componentNodes.map((node) => {\n    if (effectMap.has(node.displayName)) {\n      return effectMap.get(node.displayName) as ComponentMapNode\n    }\n    return node\n  })\n}\n\nexport const getReflowResult = (\n  currentNode: ComponentMapNode,\n  allComponentNodes: ComponentMapNode[],\n  exceptSelf: boolean = true,\n) => {\n  const sortedComponentNodes = sortComponentNodes(allComponentNodes)\n  const effectResultMap = getCrossingNodeNewPosition(\n    currentNode,\n    sortedComponentNodes,\n  )\n  let finalState = applyEffectMapToComponentNodes(\n    effectResultMap,\n    sortedComponentNodes,\n  )\n\n  if (exceptSelf) {\n    finalState = finalState.filter(\n      (node) => node.displayName !== currentNode.displayName,\n    )\n  }\n  return {\n    effectResultMap,\n    finalState,\n  }\n}\n\nexport const getNearComponentNodes = (\n  currentNode: ComponentMapNode,\n  allComponentNodes: ComponentMapNode[],\n) => {\n  const sortedComponentNodes = sortComponentNodesOnlyY(allComponentNodes)\n  return getNearingNodes(currentNode, sortedComponentNodes)\n}\n\nexport const isAddAction = (\n  x: number,\n  y: number,\n  oldParentDisplayName: string | null,\n  currentParentDisplayName: string,\n) => {\n  return (\n    (x === -1 && y === -1) || oldParentDisplayName !== currentParentDisplayName\n  )\n}\n\nexport function getMousePointerPosition(\n  mouseOffsetX: number,\n  mouseOffsetY: number,\n  unitWidth: number,\n  unitHeight: number,\n  containerMaxWidthDotNumber: number,\n): number[] {\n  let preX = Math.floor(mouseOffsetX / unitWidth)\n  preX = Math.min(preX, containerMaxWidthDotNumber)\n  let preY = Math.floor(mouseOffsetY / unitHeight)\n  return [preX, preY]\n}\n","import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\n\nexport const widgetBoundaryWrapperStyle = css`\n  width: 100%;\n  height: 100%;\n  background-color: ${getColor(\"red\", \"08\")};\n  overflow: auto;\n`\n\nexport const titleWrapperStyle = css`\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  color: ${getColor(\"red\", \"03\")};\n  font-size: 14px;\n  font-weight: 600;\n`\n\nexport const contentWrapperStyle = css`\n  color: ${getColor(\"red\", \"03\")};\n  font-size: 12px;\n  line-height: 16px;\n`\n","import { FC } from \"react\"\nimport { ErrorIcon } from \"@illa-design/react\"\nimport {\n  contentWrapperStyle,\n  titleWrapperStyle,\n  widgetBoundaryWrapperStyle,\n} from \"./style\"\n\nexport const WidgetErrorBoundary: FC = () => {\n  return (\n    <div css={widgetBoundaryWrapperStyle}>\n      <div css={titleWrapperStyle}>\n        <ErrorIcon size=\"12px\" />\n        <span>Error</span>\n      </div>\n      <div css={contentWrapperStyle}>Configuration error, please modify</div>\n    </div>\n  )\n}\n","import { Component } from \"react\"\nimport { WidgetErrorBoundary } from \"./fallback/widget\"\nimport { ErrorBoundaryProps, ErrorBoundaryState } from \"./interface\"\n\nclass ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static defaultProps = {\n    fallback: <WidgetErrorBoundary />,\n  }\n\n  static getDerivedStateFromError() {\n    return { hasError: true }\n  }\n\n  componentDidCatch(): void {\n    this.setState({ hasError: true })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return this.props.fallback\n    }\n    return this.props.children\n  }\n}\n\nexport default ErrorBoundary\n","export const MIN_HEIGHT = 3\nexport const MIN_WIDTH = 2\n","import { convertPathToString } from \"@illa-public/dynamic-string\"\nimport { klona } from \"klona\"\nimport { get, isFunction, isNumber, set, toPath } from \"lodash-es\"\nimport { FC, Suspense, memo, useCallback, useMemo } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Skeleton } from \"@illa-design/react\"\nimport ErrorBoundary from \"@/components/ErrorBoundary\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport {\n  WIDGET_PADDING,\n  WIDGET_SCALE_SQUARE_BORDER_WIDTH,\n} from \"@/page/App/components/ScaleSquare/constant/widget\"\nimport { LayoutInfo } from \"@/redux/currentApp/components/componentsPayload\"\nimport {\n  getContainerListDisplayNameMappedChildrenNodeDisplayName,\n  searchDSLByDisplayName,\n} from \"@/redux/currentApp/components/componentsSelector\"\nimport { componentsActions } from \"@/redux/currentApp/components/componentsSlice\"\nimport {\n  getExecutionResult,\n  getIsDragging,\n} from \"@/redux/currentApp/executionTree/executionSelector\"\nimport { executionActions } from \"@/redux/currentApp/executionTree/executionSlice\"\nimport { RootState } from \"@/store\"\nimport store from \"@/store\"\nimport { evaluateDynamicString } from \"@/utils/evaluateDynamicString\"\nimport { runEventHandler } from \"@/utils/eventHandlerHelper\"\nimport { ILLAEditorRuntimePropsCollectorInstance } from \"@/utils/executionTreeHelper/runtimePropsCollector\"\nimport { isObject } from \"@/utils/typeHelper\"\nimport { TransformWidgetProps } from \"@/widgetLibrary/PublicSector/TransformWidgetWrapper/interface\"\nimport { applyWrapperStylesStyle } from \"@/widgetLibrary/PublicSector/TransformWidgetWrapper/style\"\nimport { widgetBuilder } from \"@/widgetLibrary/widgetBuilder\"\nimport { getClientWidgetLayoutInfo } from \"../../../redux/currentApp/layoutInfo/layoutInfoSelector\"\nimport { layoutInfoActions } from \"../../../redux/currentApp/layoutInfo/layoutInfoSlice\"\nimport { MIN_HEIGHT } from \"./config\"\n\nexport const TransformWidgetWrapper: FC<TransformWidgetProps> = memo(\n  (props: TransformWidgetProps) => {\n    const { columnNumber, displayName, widgetType, parentNodeDisplayName } =\n      props\n\n    const displayNameMapProps = useSelector(getExecutionResult)\n    const layoutInfo = useSelector<RootState, LayoutInfo>((rootState) => {\n      const layoutInfos = getClientWidgetLayoutInfo(rootState)\n      return layoutInfos[displayName].layoutInfo\n    })\n    const originComponentNode = searchDSLByDisplayName(displayName)\n\n    const realProps = useMemo(\n      () => displayNameMapProps[displayName] ?? {},\n      [displayName, displayNameMapProps],\n    )\n\n    const dispatch = useDispatch()\n\n    const containerListMapChildName = useSelector(\n      getContainerListDisplayNameMappedChildrenNodeDisplayName,\n    )\n\n    const isDraggingInGlobal = useSelector(getIsDragging)\n\n    const listContainerDisplayName = useMemo(() => {\n      const listWidgetDisplayNames = Object.keys(containerListMapChildName)\n      let currentListDisplayName = \"\"\n      for (let i = 0; i < listWidgetDisplayNames.length; i++) {\n        if (\n          containerListMapChildName[listWidgetDisplayNames[i]].includes(\n            displayName,\n          )\n        ) {\n          currentListDisplayName = listWidgetDisplayNames[i]\n          break\n        }\n      }\n      return currentListDisplayName\n    }, [containerListMapChildName, displayName])\n\n    const listContainerDisabled = useMemo(() => {\n      const currentListDisplayName = listContainerDisplayName\n      const listWidgetProps = displayNameMapProps[currentListDisplayName]\n      if (\n        isObject(listWidgetProps) &&\n        listWidgetProps.hasOwnProperty(\"disabled\") &&\n        listWidgetProps.disabled != undefined\n      )\n        return listWidgetProps.disabled\n      return realProps?.disabled\n    }, [displayNameMapProps, listContainerDisplayName, realProps?.disabled])\n\n    const updateComponentRuntimeProps = useCallback(\n      (runtimeProp: unknown) => {\n        ILLAEditorRuntimePropsCollectorInstance.addRuntimeProp(\n          displayName,\n          runtimeProp,\n        )\n      },\n      [displayName],\n    )\n\n    const deleteComponentRuntimeProps = useCallback(() => {\n      ILLAEditorRuntimePropsCollectorInstance.deleteRuntimeProp(displayName)\n    }, [displayName])\n\n    const {\n      dynamicHeight = \"fixed\",\n      dynamicMinHeight,\n      dynamicMaxHeight,\n    } = realProps\n\n    const updateComponentHeight = useCallback(\n      (newHeight: number) => {\n        if (isDraggingInGlobal) return\n        const rootState = store.getState()\n        const widgetLayoutInfos = getClientWidgetLayoutInfo(rootState)\n        const oldH = widgetLayoutInfos[displayName]?.layoutInfo.h ?? 0\n\n        if (dynamicHeight !== \"fixed\") {\n          if (\n            dynamicMaxHeight &&\n            newHeight >\n              dynamicMaxHeight -\n                (WIDGET_PADDING + WIDGET_SCALE_SQUARE_BORDER_WIDTH) * 2\n          ) {\n            newHeight =\n              dynamicMaxHeight -\n              (WIDGET_PADDING + WIDGET_SCALE_SQUARE_BORDER_WIDTH) * 2\n          }\n\n          if (\n            dynamicMinHeight &&\n            newHeight <=\n              dynamicMinHeight -\n                (WIDGET_PADDING + WIDGET_SCALE_SQUARE_BORDER_WIDTH) * 2\n          ) {\n            newHeight =\n              dynamicMinHeight -\n              (WIDGET_PADDING + WIDGET_SCALE_SQUARE_BORDER_WIDTH) * 2\n          }\n        }\n\n        const newH = Math.max(\n          Math.ceil(\n            (newHeight +\n              (WIDGET_PADDING + WIDGET_SCALE_SQUARE_BORDER_WIDTH) * 2) /\n              UNIT_HEIGHT,\n          ),\n          MIN_HEIGHT,\n        )\n\n        if (newH === oldH) return\n\n        dispatch(\n          layoutInfoActions.updateWidgetLayoutInfoReducer({\n            displayName,\n            layoutInfo: {\n              h: newH,\n            },\n            parentNode: parentNodeDisplayName,\n            effectRows: newH - oldH,\n          }),\n        )\n      },\n      [\n        dispatch,\n        displayName,\n        dynamicHeight,\n        dynamicMaxHeight,\n        dynamicMinHeight,\n        isDraggingInGlobal,\n        parentNodeDisplayName,\n      ],\n    )\n\n    const handleUpdateDsl = useCallback(\n      (value: Record<string, any>) => {\n        dispatch(\n          executionActions.updateExecutionByDisplayNameReducer({\n            displayName,\n            value,\n          }),\n        )\n      },\n      [dispatch, displayName],\n    )\n\n    const handleUpdateMultiExecutionResult = useCallback(\n      (allUpdate: { displayName: string; value: Record<string, any> }[]) => {\n        dispatch(\n          executionActions.updateExecutionByMultiDisplayNameReducer(allUpdate),\n        )\n      },\n      [dispatch],\n    )\n\n    const handleUpdateOriginalDSLMultiAttr = useCallback(\n      (updateSlice: Record<string, any>, notUseUndoRedo?: boolean) => {\n        if (!isObject(updateSlice)) return\n        dispatch(\n          componentsActions.updateComponentPropsReducer({\n            displayName: displayName,\n            updateSlice,\n            notUseUndoRedo,\n          }),\n        )\n      },\n      [dispatch, displayName],\n    )\n\n    const handleUpdateOriginalDSLOtherMultiAttr = useCallback(\n      (\n        displayName: string,\n        updateSlice: Record<string, any>,\n        notUseUndoRedo?: boolean,\n      ) => {\n        if (!displayName || !isObject(updateSlice)) return\n        dispatch(\n          componentsActions.updateComponentPropsReducer({\n            displayName,\n            updateSlice,\n            notUseUndoRedo,\n          }),\n        )\n      },\n      [dispatch],\n    )\n\n    const getRunEvents = useCallback(\n      (\n        eventType: string,\n        path: string,\n        otherCalcContext?: Record<string, any>,\n      ) => {\n        const originEvents = get(originComponentNode.props, path, []) as any[]\n        const dynamicPaths = get(\n          originComponentNode.props,\n          \"$dynamicAttrPaths\",\n          [],\n        )\n\n        const needRunEvents = klona(originEvents)\n          .filter((originEvent) => {\n            return originEvent.eventType === eventType\n          })\n          .map((originEvent) => {\n            return {\n              ...originEvent,\n              originEnable: originEvent.enabled,\n            }\n          })\n        const finalContext =\n          ILLAEditorRuntimePropsCollectorInstance.getCurrentPageCalcContext(\n            otherCalcContext,\n          )\n        return {\n          dynamicPaths,\n          needRunEvents,\n          finalContext,\n        }\n      },\n      [originComponentNode?.props],\n    )\n\n    const triggerEventHandler = useCallback(\n      (\n        eventType: string,\n        path: string = \"events\",\n        otherCalcContext?: Record<string, any>,\n        formatPath?: (path: string) => string,\n      ) => {\n        const { dynamicPaths, needRunEvents, finalContext } = getRunEvents(\n          eventType,\n          path,\n          otherCalcContext,\n        )\n\n        dynamicPaths?.forEach((path: string) => {\n          const realPath = isFunction(formatPath)\n            ? formatPath(path)\n            : convertPathToString(toPath(path).slice(1))\n          const dynamicString = get(needRunEvents, realPath, \"\")\n          if (dynamicString) {\n            try {\n              const calcValue = evaluateDynamicString(\n                `events${realPath}`,\n                dynamicString,\n                finalContext,\n              )\n              if (listContainerDisplayName) {\n                set(\n                  needRunEvents,\n                  realPath,\n                  Array.isArray(calcValue) ? calcValue[0] : calcValue,\n                )\n              } else {\n                set(needRunEvents, realPath, calcValue)\n              }\n            } catch {\n              set(needRunEvents, realPath, undefined)\n            }\n          }\n        })\n\n        needRunEvents.forEach((scriptObj: any) => {\n          runEventHandler(scriptObj, finalContext)\n        })\n      },\n      [getRunEvents, listContainerDisplayName],\n    )\n\n    const triggerMappedEventHandler = useCallback(\n      (\n        eventType: string,\n        path: string = \"events\",\n        index?: number,\n        formatPath?: (path: string) => string,\n        isMapped?: (dynamicString: string, calcValue: unknown) => boolean,\n      ) => {\n        const { dynamicPaths, needRunEvents, finalContext } = getRunEvents(\n          eventType,\n          path,\n        )\n        dynamicPaths?.forEach((path: string) => {\n          const realPath = isFunction(formatPath)\n            ? formatPath(path)\n            : convertPathToString(toPath(path).slice(2))\n\n          const dynamicString = get(needRunEvents, realPath, \"\")\n\n          if (dynamicString) {\n            try {\n              const calcValue = evaluateDynamicString(\n                `events${realPath}`,\n                dynamicString,\n                finalContext,\n              )\n              let valueToSet = calcValue\n\n              if (listContainerDisplayName) {\n                valueToSet = Array.isArray(calcValue) ? calcValue[0] : calcValue\n              }\n\n              if (Array.isArray(calcValue) && isNumber(index)) {\n                if (\n                  !isFunction(isMapped) ||\n                  isMapped(dynamicString, calcValue)\n                ) {\n                  valueToSet = calcValue[index]\n                }\n              }\n              set(needRunEvents, realPath, valueToSet)\n            } catch {\n              set(needRunEvents, realPath, undefined)\n            }\n          }\n        })\n        needRunEvents.forEach((scriptObj: any) => {\n          runEventHandler(scriptObj, finalContext)\n        })\n      },\n      [getRunEvents, listContainerDisplayName],\n    )\n\n    const widgetConfig = widgetBuilder(widgetType)\n    if (!widgetConfig) return null\n    const Component = widgetConfig.widget\n    const {\n      hidden,\n      borderColor,\n      backgroundColor,\n      radius,\n      borderWidth,\n      shadow,\n    } = realProps\n\n    const _radius = !isNaN(Number(radius)) ? radius + \"px\" : radius?.toString()\n    const _borderWidth = !isNaN(Number(borderWidth))\n      ? borderWidth + \"px\"\n      : borderWidth?.toString()\n\n    return (\n      <ErrorBoundary>\n        {hidden ? null : (\n          <div\n            css={applyWrapperStylesStyle(\n              borderColor,\n              _borderWidth,\n              _radius,\n              backgroundColor,\n              shadow,\n              widgetType,\n            )}\n            id={displayName}\n          >\n            <Suspense\n              fallback={\n                <Skeleton\n                  animation\n                  text={false}\n                  image={{\n                    shape: \"square\",\n                    w: \"100%\",\n                    h: \"100%\",\n                    mr: \"0 !important\",\n                  }}\n                  h=\"100%\"\n                  w=\"100%\"\n                />\n              }\n            >\n              <Component\n                {...realProps}\n                h={layoutInfo.h}\n                w={layoutInfo.w}\n                columnNumber={columnNumber}\n                handleUpdateOriginalDSLMultiAttr={\n                  handleUpdateOriginalDSLMultiAttr\n                }\n                handleUpdateOriginalDSLOtherMultiAttr={\n                  handleUpdateOriginalDSLOtherMultiAttr\n                }\n                handleUpdateDsl={handleUpdateDsl}\n                updateComponentHeight={updateComponentHeight}\n                handleUpdateMultiExecutionResult={\n                  handleUpdateMultiExecutionResult\n                }\n                displayName={displayName}\n                childrenNode={originComponentNode.childrenNode}\n                componentNode={originComponentNode}\n                disabled={listContainerDisabled}\n                triggerEventHandler={triggerEventHandler}\n                triggerMappedEventHandler={triggerMappedEventHandler}\n                updateComponentRuntimeProps={updateComponentRuntimeProps}\n                deleteComponentRuntimeProps={deleteComponentRuntimeProps}\n              />\n            </Suspense>\n          </div>\n        )}\n      </ErrorBoundary>\n    )\n  },\n)\n\nTransformWidgetWrapper.displayName = \"TransformWidgetWrapper\"\n","import { RootState } from \"@/store\"\nimport { CollaboratorsInfo } from \"./collaboratorsState\"\n\nexport const getComponentAttachUsers = (state: RootState) => {\n  return state.currentApp.collaborators.components\n}\n\nexport const getCurrentAppAttachUsers = (state: RootState) => {\n  return state.currentApp.collaborators.inRoomUsers\n}\n\nexport const getTargetCurrentUsersExpendMe = (\n  attachUsers: Record<string, CollaboratorsInfo[]>,\n  targetComponentDisplayName: string,\n  currentUserId: string,\n): CollaboratorsInfo[] => {\n  const targetComponentAttachUsers = attachUsers[targetComponentDisplayName]\n  if (!targetComponentAttachUsers) return []\n  return targetComponentAttachUsers.filter((user) => user.id !== currentUserId)\n}\n","import { createSelector } from \"@reduxjs/toolkit\"\nimport { RootState } from \"@/store\"\n\nexport const getDragShadowInfo = (state: RootState) => {\n  return state.currentApp.dragShadow\n}\n\nexport const getDragShadowInfoArray = createSelector(\n  [getDragShadowInfo],\n  (cursor) => Object.values(cursor),\n)\n\nexport const getFirstDragShadowInfo = createSelector(\n  [getDragShadowInfo],\n  (dragShadows) => {\n    return Object.keys(dragShadows).map((userID) => {\n      if (dragShadows[userID].length > 0) {\n        return dragShadows[userID][0]\n      }\n    })\n  },\n)\n","import { isILLAAPiError } from \"@illa-public/illa-net\"\nimport {\n  ActionContent,\n  ActionItem,\n  GlobalDataActionContent,\n} from \"@illa-public/public-types\"\nimport { v4 } from \"uuid\"\nimport { createMessage, omit } from \"@illa-design/react\"\nimport i18n from \"@/i18n/config\"\nimport { getIsILLAGuideMode } from \"@/redux/config/configSelector\"\nimport { configActions } from \"@/redux/config/configSlice\"\nimport { actionActions } from \"@/redux/currentApp/action/actionSlice\"\nimport { componentsActions } from \"@/redux/currentApp/components/componentsSlice\"\nimport { fetchCreateAction, fetchDeleteAction } from \"@/services/action\"\nimport store from \"@/store\"\nimport { DisplayNameGenerator } from \"@/utils/generators/generateDisplayName\"\n\nconst message = createMessage()\n\nexport async function onCopyActionItem(action: ActionItem<ActionContent>) {\n  const isGuideMode = getIsILLAGuideMode(store.getState())\n  const newAction = omit(action, [\"displayName\", \"actionID\"])\n  const displayName = DisplayNameGenerator.generateDisplayName(\n    action.actionType === \"globalData\" ? \"state\" : action.actionType,\n  )\n  const data: Omit<ActionItem<ActionContent>, \"actionID\"> = {\n    ...newAction,\n    displayName,\n  }\n  if (action.actionType === \"globalData\") {\n    store.dispatch(\n      componentsActions.setGlobalStateReducer({\n        key: data.displayName,\n        value: (data.content as GlobalDataActionContent).initialValue,\n        oldKey: \"\",\n      }),\n    )\n    return\n  }\n  if (isGuideMode) {\n    const createActionData: ActionItem<ActionContent> = {\n      ...data,\n      actionID: v4(),\n    }\n    store.dispatch(actionActions.addActionItemReducer(createActionData))\n    message.success({\n      content: i18n.t(\"editor.action.action_list.message.success_created\"),\n    })\n    return\n  }\n  try {\n    const response = await fetchCreateAction(data)\n    message.success({\n      content: i18n.t(\"editor.action.action_list.message.success_created\"),\n    })\n    store.dispatch(actionActions.addActionItemReducer(response.data))\n  } catch (e) {\n    if (isILLAAPiError(e)) {\n      message.error({\n        content: i18n.t(\"editor.action.action_list.message.failed\"),\n      })\n      DisplayNameGenerator.removeDisplayName(displayName)\n    } else {\n      DisplayNameGenerator.removeDisplayName(displayName)\n    }\n  }\n}\n\nexport async function onDeleteActionItem(action: ActionItem<ActionContent>) {\n  const isGuideMode = getIsILLAGuideMode(store.getState())\n  const { actionID, displayName } = action\n  if (isGuideMode) {\n    store.dispatch(configActions.resetSelectedActionReducer(displayName))\n\n    store.dispatch(\n      actionActions.removeActionItemReducer({\n        actionID: actionID,\n        displayName,\n      }),\n    )\n    message.success({\n      content: i18n.t(\"editor.action.action_list.message.success_deleted\"),\n    })\n    return\n  }\n  try {\n    await fetchDeleteAction(actionID)\n    store.dispatch(configActions.resetSelectedActionReducer(displayName))\n\n    store.dispatch(\n      actionActions.removeActionItemReducer({\n        actionID: actionID,\n        displayName,\n      }),\n    )\n    message.success({\n      content: i18n.t(\"editor.action.action_list.message.success_deleted\"),\n    })\n  } catch (e) {\n    if (isILLAAPiError(e)) {\n      message.error({\n        content: i18n.t(\"editor.action.action_list.message.failed\"),\n      })\n    }\n  }\n}\n","import { ReactNode } from \"react\"\nimport { WidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoState\"\n\nexport interface DragContainerProps {\n  children: ReactNode\n  displayName: string\n  parentNodeDisplayName: string\n  canDrag: boolean\n  unitWidth: number\n  columnNumber: number\n}\n\nexport enum DRAG_EFFECT {\n  ADD = \"ADD\",\n  UPDATE = \"UPDATE\",\n}\n\nexport interface DragInfo {\n  draggedComponents: WidgetLayoutInfo[]\n  dragEffect: DRAG_EFFECT\n  draggedDisplayName: string\n  alignTop?: boolean\n  dropResult?: {\n    shape?: {\n      x: number\n      y: number\n      w: number\n      previewH: number\n    }\n    canDrop: boolean\n    columnNumberWhenDrag: number\n    columnNumberWhenDrop: number\n  }\n  columnNumberWhenDragged: number\n  unitWWhenDragged: number\n}\n","import { RefObject } from \"react\"\n\nconst scrollBarContainerController = new Map<\n  string,\n  RefObject<HTMLDivElement>\n>()\n\nexport const setScrollBarContainerController = (\n  displayName: string,\n  ref: RefObject<HTMLDivElement>,\n) => {\n  scrollBarContainerController.set(displayName, ref)\n}\n\nexport const removeScrollBarContainerControllerByDisplayName = (\n  displayName: string,\n) => {\n  scrollBarContainerController.delete(displayName)\n}\n\nexport const clearScrollBarContainerController = () => {\n  scrollBarContainerController.clear()\n}\n\nexport const getScrollBarContainerByDisplayName = (displayName: string) => {\n  return scrollBarContainerController.get(displayName)\n}\n","import { WidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoState\"\nimport { illaSnapshot } from \"../constant/snapshotNew\"\n\nexport interface NodeShape {\n  x: number\n  y: number\n  w: number\n  h: number\n}\n\nexport const isNewCrossing = (mainNode: NodeShape, otherNode: NodeShape) => {\n  return (\n    mainNode.y < otherNode.y + otherNode.h &&\n    mainNode.y + mainNode.h > otherNode.y &&\n    mainNode.x < otherNode.x + otherNode.w &&\n    mainNode.x + mainNode.w > otherNode.x\n  )\n}\n\nexport const isOnlyCrossingY = (mainNode: NodeShape, otherNode: NodeShape) => {\n  return (\n    mainNode.y < otherNode.y + otherNode.h &&\n    mainNode.y + mainNode.h > otherNode.y\n  )\n}\n\nexport const getCrossingWidget = (\n  parentNodeDisplayName: string,\n  mainNode: NodeShape,\n  draggedDisplayNames: string[],\n) => {\n  const widgetLayoutArray = illaSnapshot.getSnapShotArrayByParentDisplayName(\n    parentNodeDisplayName,\n  )\n  const filteredWidgetLayoutArray = widgetLayoutArray.filter((item) => {\n    return !draggedDisplayNames.includes(item.displayName)\n  })\n  return filteredWidgetLayoutArray.filter((item) => {\n    return isNewCrossing(mainNode, item.layoutInfo)\n  })\n}\n\nexport const sortedRuleByYAndX = (\n  node1: WidgetLayoutInfo,\n  node2: WidgetLayoutInfo,\n) => {\n  if (node1.layoutInfo.y < node2.layoutInfo.y) {\n    return -1\n  }\n  if (node1.layoutInfo.y > node2.layoutInfo.y) {\n    return 1\n  }\n  if (node1.layoutInfo.y === node2.layoutInfo.y) {\n    if (node1.layoutInfo.x > node2.layoutInfo.x) {\n      return 1\n    }\n    if (node1.layoutInfo.x < node2.layoutInfo.x) {\n      return -1\n    }\n  }\n  return 0\n}\n\nexport const getNewPositionWithCrossing = (\n  mainSquare: NodeShape,\n  parentDisplayName: string,\n  effectedDisplayNames: string[],\n  realTimeLayout?: WidgetLayoutInfo[],\n) => {\n  const widgetLayoutArray = realTimeLayout\n    ? realTimeLayout\n    : illaSnapshot.getSnapShotArrayByParentDisplayName(parentDisplayName)\n  const filterWidgetLayoutArray = widgetLayoutArray.filter((item) => {\n    return !effectedDisplayNames.includes(item.displayName)\n  })\n\n  const newEffectedDisplayNames = [...effectedDisplayNames]\n\n  const sortedLayoutInfos = filterWidgetLayoutArray.sort(sortedRuleByYAndX)\n\n  const crossingWidgetInfos = sortedLayoutInfos.filter((item) => {\n    return isNewCrossing(mainSquare, item.layoutInfo)\n  })\n\n  if (crossingWidgetInfos.length > 0) {\n    const compareInfos = [\n      {\n        compareNode: {\n          displayName: \"root\",\n          ...mainSquare,\n        },\n        crossingWidgetInfos,\n      },\n    ]\n    const effectMap: Map<String, WidgetLayoutInfo> = new Map()\n    while (compareInfos.length > 0) {\n      const firstCompareInfo = compareInfos.shift()\n      if (firstCompareInfo) {\n        const { compareNode, crossingWidgetInfos } = firstCompareInfo\n\n        newEffectedDisplayNames.push(compareNode.displayName)\n        if (effectMap.get(compareNode.displayName)) {\n          compareNode.y =\n            effectMap.get(compareNode.displayName)?.layoutInfo.y ?? 0\n        }\n        crossingWidgetInfos.forEach((crossingItem) => {\n          if (isNewCrossing(compareNode, crossingItem.layoutInfo)) {\n            const newWidgetInfo = {\n              ...crossingItem,\n              layoutInfo: {\n                ...crossingItem.layoutInfo,\n                y: compareNode.y + compareNode.h,\n              },\n            }\n            effectMap.set(crossingItem.displayName, newWidgetInfo)\n          }\n        })\n\n        crossingWidgetInfos.forEach((crossingItem) => {\n          const newWidgetInfo = effectMap.get(crossingItem.displayName)!\n\n          const filterWidgetLayoutArray = widgetLayoutArray.filter((item) => {\n            return ![\n              ...newEffectedDisplayNames,\n              newWidgetInfo.displayName,\n            ].includes(item.displayName)\n          })\n          const crossingWidgetInfos = filterWidgetLayoutArray\n            .filter((item) => {\n              const newItemWidgetInfo = {\n                ...item.layoutInfo,\n              }\n\n              if (effectMap.get(item.displayName)) {\n                newItemWidgetInfo.y =\n                  effectMap.get(item.displayName)?.layoutInfo.y ?? 0\n              }\n              return isNewCrossing(newWidgetInfo.layoutInfo, newItemWidgetInfo)\n            })\n            .map((item) => {\n              const newItemWidgetInfo = {\n                ...item.layoutInfo,\n              }\n\n              if (effectMap.get(item.displayName)) {\n                newItemWidgetInfo.y =\n                  effectMap.get(item.displayName)?.layoutInfo.y ?? 0\n              }\n              return {\n                ...item,\n                layoutInfo: newItemWidgetInfo,\n              }\n            })\n            .sort(sortedRuleByYAndX)\n          if (crossingWidgetInfos.length > 0) {\n            const oldIndex = compareInfos.findIndex((item) => {\n              return item.compareNode.displayName === newWidgetInfo.displayName\n            })\n            if (oldIndex !== -1) {\n              compareInfos.splice(oldIndex, 1)\n            }\n            compareInfos.push({\n              compareNode: {\n                displayName: newWidgetInfo.displayName,\n                x: newWidgetInfo.layoutInfo.x,\n                y: newWidgetInfo.layoutInfo.y,\n                w: newWidgetInfo.layoutInfo.w,\n                h: newWidgetInfo.layoutInfo.h,\n              },\n              crossingWidgetInfos,\n            })\n          }\n        })\n      }\n    }\n    return effectMap\n  }\n}\n","import { getCurrentUser } from \"@illa-public/user-data\"\nimport { throttle } from \"lodash-es\"\nimport { Connection, getBinaryMessagePayload } from \"@/api/ws\"\nimport { Signal, Target } from \"@/api/ws/ILLA_PROTO\"\nimport { ILLARoute } from \"@/router\"\nimport store from \"@/store\"\n\nexport const sendMousePosition = (\n  parentDisplayName: string,\n  cursorXInteger: number,\n  cursorYInteger: number,\n  cursorXMod: number,\n  cursorYMod: number,\n  isLeave: boolean = false,\n) => {\n  if (cursorXInteger < 0 || cursorYInteger < 0) return\n  const appID = ILLARoute.state.matches[0].params.appId\n  const currentUserInfo = getCurrentUser(store.getState())\n  if (!appID || !currentUserInfo.userID) return\n  const ws = Connection.getBinaryRoom(\"app\", appID)\n  const binMessage = getBinaryMessagePayload(\n    Signal.MOVE_CURSOR,\n    Target.CURSOR,\n    true,\n    currentUserInfo.userID,\n    currentUserInfo.nickname,\n    isLeave ? -1 : 1,\n    parentDisplayName,\n    \"\",\n    cursorXInteger,\n    cursorYInteger,\n    cursorXMod,\n    cursorYMod,\n    0,\n    0,\n    0,\n    0,\n  )\n  ws?.send(binMessage)\n}\n\nexport const sendMousePositionHandler = throttle(sendMousePosition, 50, {\n  leading: true,\n  trailing: true,\n})\n\nexport const sendShadowPosition = (\n  status: number,\n  parentDisplayName: string,\n  displayNames: string[],\n  cursorXInteger: number,\n  cursorYInteger: number,\n  cursorXMod: number,\n  cursorYMod: number,\n  widgetX: number,\n  widgetY: number,\n  widgetW: number,\n  widgetH: number,\n) => {\n  if (\n    cursorXInteger < 0 ||\n    cursorYInteger < 0 ||\n    widgetX < 0 ||\n    widgetY < 0 ||\n    widgetW < 0 ||\n    widgetH < 0\n  )\n    return\n  const appID = ILLARoute.state.matches[0].params.appId\n  const currentUserInfo = getCurrentUser(store.getState())\n  if (!appID || !currentUserInfo.userID) return\n  const ws = Connection.getBinaryRoom(\"app\", appID)\n  const binMessage = getBinaryMessagePayload(\n    Signal.MOVE_STATE,\n    Target.COMPONENTS,\n    true,\n    currentUserInfo.userID,\n    currentUserInfo.nickname,\n    status,\n    parentDisplayName,\n    displayNames.join(\",\"),\n    cursorXInteger,\n    cursorYInteger,\n    cursorXMod,\n    cursorYMod,\n    widgetX,\n    widgetY,\n    widgetW,\n    widgetH,\n  )\n  ws?.send(binMessage)\n}\n\nexport const sendShadowMessageHandler = throttle(sendShadowPosition, 50, {\n  leading: true,\n  trailing: true,\n})\n","import { clamp } from \"lodash-es\"\nimport { XYCoord } from \"react-dnd\"\nimport { DRAG_EFFECT } from \"@/page/App/components/ScaleSquare/components/DragContainer/interface\"\nimport { DEFAULT_MIN_COLUMN } from \"@/page/App/components/ScaleSquare/constant/widget\"\nimport { WidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoState\"\nimport { DragCollectedProps } from \"../components/DragPreview/interface\"\nimport { DEFAULT_BODY_COLUMNS_NUMBER, UNIT_HEIGHT } from \"../constant/canvas\"\nimport { getScrollBarContainerByDisplayName } from \"../context/scrollBarContext\"\nimport { NodeShape, getCrossingWidget, isOnlyCrossingY } from \"./crossingHelper\"\nimport { sendShadowMessageHandler } from \"./sendBinaryMessage\"\n\nexport const getRatio = (\n  initialClientOffSet: XYCoord | null,\n  initialSourceClientOffset: XYCoord | null,\n  unitWidth: number,\n) => {\n  const initOffSet = initialClientOffSet ?? { x: 0, y: 0 }\n  const initSourceOffSet = initialSourceClientOffset ?? { x: 0, y: 0 }\n  const xRatio = (initSourceOffSet.x - initOffSet.x) / unitWidth\n  const yRatio = (initSourceOffSet.y - initOffSet.y) / UNIT_HEIGHT\n  return {\n    xRatio,\n    yRatio,\n  }\n}\n\nexport const combineWidgetInfos = (layoutInfos: NodeShape[]) => {\n  const widgetXs = layoutInfos.map((info) => info.x)\n  const widgetYs = layoutInfos.map((info) => info.y)\n  const widgetRights = layoutInfos.map((info) => info.x + info.w)\n  const widgetBottoms = layoutInfos.map((info) => info.y + info.h)\n  const widgetX = Math.min(...widgetXs)\n  const widgetY = Math.min(...widgetYs)\n  const widgetRight = Math.max(...widgetRights)\n  const widgetBottom = Math.max(...widgetBottoms)\n  const widgetW = widgetRight - widgetX\n  const widgetH = widgetBottom - widgetY\n  return {\n    x: widgetX,\n    y: widgetY,\n    w: widgetW,\n    h: widgetH,\n  }\n}\n\nexport const getScrollTop = (displayName: string) => {\n  let scrollTop = 0\n  const ref = getScrollBarContainerByDisplayName(displayName)\n  if (ref && ref.current) {\n    return ref.current.scrollTop\n  }\n\n  return scrollTop\n}\n\nexport const getContainerTop = (displayName: string) => {\n  const ref = getScrollBarContainerByDisplayName(displayName)\n  if (ref && ref.current) {\n    return ref.current!.getBoundingClientRect().top\n  }\n\n  return 0\n}\n\nexport const getMousePositionInfo = (\n  initialClientOffSet: XYCoord | null,\n  initialSourceClientOffset: XYCoord | null,\n  mousePositionInViewport: XYCoord | null,\n  unitWidth: number,\n  containerTop: number,\n  containerLeft: number,\n  containerScrollTop: number,\n  yOffset: number = 0,\n  xOffset: number = 0,\n  wRatio: number = 1,\n  columnNumber: number = DEFAULT_BODY_COLUMNS_NUMBER,\n) => {\n  const { xRatio, yRatio } = getRatio(\n    initialClientOffSet,\n    initialSourceClientOffset,\n    unitWidth,\n  )\n\n  const mousePosition = mousePositionInViewport ?? {\n    x: 0,\n    y: 0,\n  }\n  const realRelativeMouseLeft = mousePosition.x - containerLeft\n  const realRelativeMouseTop =\n    mousePosition.y + containerScrollTop - containerTop\n  const realRelativeMouseX = realRelativeMouseLeft / unitWidth\n  const realRelativeMouseY = realRelativeMouseTop / UNIT_HEIGHT\n  const ratioRelativeMouseLeft =\n    xRatio * wRatio * unitWidth + mousePosition.x - containerLeft\n  const ratioRelativeMouseTop =\n    yRatio * UNIT_HEIGHT + mousePosition.y + containerScrollTop - containerTop\n  const ratioRelativeMouseY = ratioRelativeMouseTop / UNIT_HEIGHT\n  const ratioRelativeMouseX = ratioRelativeMouseLeft / unitWidth\n  const widgetX =\n    Math.min(Math.round(ratioRelativeMouseX), columnNumber - 1) - xOffset\n  const widgetY = Math.round(ratioRelativeMouseY) - yOffset\n  const mouseHoveredTopHalf = ratioRelativeMouseY % 1 >= 0.5\n\n  const mouseRealX = clamp(Math.floor(realRelativeMouseX), 0, columnNumber - 1)\n  const mouseRealY = Math.round(realRelativeMouseY)\n  const mouseRealTopHalf = realRelativeMouseY % 1 >= 0.5\n  return {\n    widgetY,\n    widgetX,\n    mouseHoveredTopHalf,\n    mouseRealY,\n    mouseRealX,\n    mouseRealTopHalf,\n  }\n}\n\nconst getLeftAndRightLimit = (\n  crossingWidgets: WidgetLayoutInfo[],\n  defaultLeft: number,\n  defaultRight: number,\n  mouseRealX = defaultLeft,\n) => {\n  let initDefaultLeft = defaultLeft,\n    initDefaultRight = defaultRight\n\n  crossingWidgets.forEach((widgetLayoutInfo) => {\n    const left = widgetLayoutInfo.layoutInfo.x,\n      right = widgetLayoutInfo.layoutInfo.x + widgetLayoutInfo.layoutInfo.w\n    if (left <= mouseRealX) {\n      initDefaultLeft = Math.max(initDefaultLeft, right)\n    }\n    if (right > mouseRealX) {\n      initDefaultRight = Math.min(initDefaultRight, left)\n    }\n  })\n  return {\n    leftLimit: initDefaultLeft,\n    rightLimit: initDefaultRight,\n  }\n}\n\nconst getDragResult = (\n  parentDisplayName: string,\n  relativeMainNode: NodeShape,\n  draggedDisplayNames: string[],\n  mouseRealY = relativeMainNode.y,\n  mouseRealX = relativeMainNode.x,\n  mouseHoveredTopHalf: boolean = true,\n  minWidth = DEFAULT_MIN_COLUMN,\n) => {\n  const { h, w, x, y } = relativeMainNode\n  let finalY = y\n  const unitWShape = {\n    ...relativeMainNode,\n    h: mouseRealY - finalY,\n    x: mouseRealX,\n    w: 1,\n  }\n\n  const crossingWidgetBottoms = getCrossingWidget(\n    parentDisplayName,\n    unitWShape,\n    draggedDisplayNames,\n  )\n    .filter((widgetLayout) => widgetLayout.layoutInfo.y <= mouseRealY)\n    .map(\n      (widgetLayout) => widgetLayout.layoutInfo.y + widgetLayout.layoutInfo.h,\n    )\n  if (crossingWidgetBottoms.length > 0) {\n    const maxBottomWithCrossingWidget = Math.max(...crossingWidgetBottoms)\n    if (maxBottomWithCrossingWidget) {\n      finalY = Math.min(maxBottomWithCrossingWidget, mouseRealY)\n      mouseHoveredTopHalf = false\n    }\n  }\n\n  let unitHeightShape = {\n    ...relativeMainNode,\n    y: finalY,\n    h: 1,\n  }\n\n  if (minWidth === 1) {\n    unitHeightShape = {\n      ...unitHeightShape,\n      w: 1,\n      x: mouseRealX,\n    }\n  }\n\n  const crossWithCursorLeftWidget = getCrossingWidget(\n    parentDisplayName,\n    unitHeightShape,\n    draggedDisplayNames,\n  )\n\n  const { leftLimit, rightLimit } = getLeftAndRightLimit(\n    crossWithCursorLeftWidget,\n    relativeMainNode.x,\n    relativeMainNode.x + relativeMainNode.w,\n    mouseRealX,\n  )\n\n  if (rightLimit - leftLimit < minWidth) {\n    mouseHoveredTopHalf = true\n    const minCrossingY = crossWithCursorLeftWidget.reduce((prev, current) => {\n        return (current?.layoutInfo?.y ?? 0) < prev?.layoutInfo?.y\n          ? current\n          : prev\n      }).layoutInfo.y,\n      maxCrossingBottom = Math.max(\n        ...crossWithCursorLeftWidget.map(\n          (widgetLayout) =>\n            widgetLayout.layoutInfo.y + widgetLayout.layoutInfo.h,\n        ),\n      )\n    if (minCrossingY != undefined && maxCrossingBottom != undefined) {\n      finalY =\n        mouseRealY - minCrossingY < maxCrossingBottom - mouseRealY\n          ? minCrossingY\n          : maxCrossingBottom\n    }\n  }\n\n  const tempH = mouseHoveredTopHalf ? 0 : 1\n  const finalYShape = {\n    ...relativeMainNode,\n    h: tempH,\n    y: finalY,\n  }\n\n  const crossingWidgetWithFinalYShape = getCrossingWidget(\n    parentDisplayName,\n    finalYShape,\n    draggedDisplayNames,\n  )\n\n  let finalX = x,\n    finalW = w\n  if (crossingWidgetWithFinalYShape.length > 0) {\n    const { leftLimit, rightLimit } = getLeftAndRightLimit(\n      crossingWidgetWithFinalYShape,\n      relativeMainNode.x,\n      relativeMainNode.x + relativeMainNode.w,\n      mouseRealX,\n    )\n    if (rightLimit - leftLimit < minWidth) return null\n    if (leftLimit !== relativeMainNode.x && leftLimit > x) {\n      finalX = leftLimit\n      finalW -= leftLimit - x\n    }\n    if (\n      rightLimit !== relativeMainNode.x + relativeMainNode.w &&\n      rightLimit < finalX + finalW\n    ) {\n      finalW = rightLimit - finalX\n    }\n  }\n  const finalShape = {\n      ...relativeMainNode,\n      x: finalX,\n      w: finalW,\n      y: finalY,\n    },\n    crossingWidgetWithFinalShape = getCrossingWidget(\n      parentDisplayName,\n      finalShape,\n      draggedDisplayNames,\n    )\n  let minY = h\n  if (crossingWidgetWithFinalShape.length > 0) {\n    minY = crossingWidgetWithFinalShape.reduce((prev, current) => {\n      return current?.layoutInfo?.y < prev?.layoutInfo?.y ? current : prev\n    })?.layoutInfo?.y\n  }\n\n  return {\n    y: finalY,\n    x: finalX,\n    w: finalW,\n    previewH:\n      crossingWidgetWithFinalShape.length > 0\n        ? minY - finalY > 0\n          ? h\n          : 0\n        : minY,\n  }\n}\n\nexport const clamWidgetShape = (\n  dragPreview: NodeShape,\n  columnNumber: number,\n  isMultiDrag: boolean,\n) => {\n  const { x, w, y, h } = dragPreview\n  if (isMultiDrag) {\n    const newW = clamp(w, 1, columnNumber)\n    const newX = clamp(x, 0, columnNumber - newW)\n    const newY = Math.max(y, 0)\n\n    return {\n      x: newX,\n      w: newW,\n      y: newY,\n      previewH: h,\n    }\n  }\n  const newX = clamp(x, 0, columnNumber)\n  const newW = clamp(w, 1, columnNumber - newX)\n  const newY = Math.max(y, 0)\n  return {\n    x: newX,\n    w: newW,\n    y: newY,\n    previewH: h,\n  }\n}\n\nconst transWidgetW = (\n  originWidth: number,\n  originUnitW: number,\n  newUnitW: number,\n  newColumnNumber: number,\n  minW: number = 1,\n) => {\n  const newW = Math.round((originWidth * originUnitW) / newUnitW)\n  return clamp(newW, minW, newColumnNumber)\n}\n\nexport const canCrossDifferenceColumnNumber = (draggedShapes: NodeShape[]) => {\n  if (draggedShapes.length <= 1) {\n    return true\n  }\n\n  const sortedLayoutInfoByY = draggedShapes.sort((node1, node2) => {\n    if (node1.y < node2.y) {\n      return -1\n    }\n    if (node1.y > node2.y) {\n      return 1\n    }\n    return 0\n  })\n\n  for (let i = 0; i < sortedLayoutInfoByY.length; i++) {\n    for (let j = i + 1; j < sortedLayoutInfoByY.length; j++) {\n      if (isOnlyCrossingY(sortedLayoutInfoByY[i], sortedLayoutInfoByY[j])) {\n        return false\n      }\n    }\n  }\n\n  return true\n}\n\nexport const getDragPreview = (\n  parentNodeDisplayName: string,\n  unitW: number,\n  dragCollectedProps: DragCollectedProps,\n  columnNumber: number,\n) => {\n  const { initialClientOffset, initialSourceClientOffset, clientOffset, item } =\n    dragCollectedProps\n\n  if (!item) return null\n\n  const outerContainerElement = document.querySelector(\n    `[data-outer-canvas-container=\"${parentNodeDisplayName}\"]`,\n  ) as HTMLDivElement\n\n  const outerContainerStyle = window.getComputedStyle(outerContainerElement!)\n  const outerContainerLeft = parseFloat(\n    outerContainerStyle.getPropertyValue(\"padding-left\"),\n  )\n\n  const containerLeft =\n    outerContainerElement!.getBoundingClientRect().left + outerContainerLeft\n\n  const containerTop = getContainerTop(parentNodeDisplayName)\n  const {\n    draggedComponents,\n    draggedDisplayName,\n    alignTop,\n    dragEffect,\n    unitWWhenDragged,\n    columnNumberWhenDragged,\n  } = item\n\n  const totalScrollTop = getScrollTop(parentNodeDisplayName)\n\n  const canDrop = canCrossDifferenceColumnNumber(\n    draggedComponents.map((item) => item.layoutInfo),\n  )\n\n  const draggedDisplayNames = draggedComponents.map((item) => item.displayName)\n  const combineWidget = combineWidgetInfos(\n    draggedComponents.map((item) => item.layoutInfo),\n  )\n  const currentWidgetLayoutInfo = draggedComponents.find(\n    (item) => item.displayName === draggedDisplayName,\n  )\n  if (!currentWidgetLayoutInfo) {\n    return null\n  }\n\n  let finalEffect =\n    parentNodeDisplayName !== draggedComponents[0].parentNode\n      ? DRAG_EFFECT.ADD\n      : dragEffect\n\n  const yOffset = currentWidgetLayoutInfo.layoutInfo.y - combineWidget.y\n  const xOffset = currentWidgetLayoutInfo.layoutInfo.x - combineWidget.x\n\n  const newW =\n    dragEffect === DRAG_EFFECT.ADD || draggedDisplayNames.length > 1\n      ? combineWidget.w\n      : transWidgetW(combineWidget.w, unitWWhenDragged, unitW, columnNumber)\n\n  const mousePositionInfo = getMousePositionInfo(\n    initialClientOffset,\n    initialSourceClientOffset,\n    clientOffset,\n    unitW,\n    containerTop,\n    containerLeft,\n    totalScrollTop,\n    yOffset,\n    xOffset,\n    1,\n    columnNumber,\n  )\n\n  const moveEffect = {\n    y:\n      alignTop || finalEffect === DRAG_EFFECT.ADD\n        ? mousePositionInfo.mouseRealY - combineWidget.y\n        : mousePositionInfo.widgetY - combineWidget.y,\n    x:\n      finalEffect === DRAG_EFFECT.ADD\n        ? mousePositionInfo.mouseRealX - combineWidget.x\n        : mousePositionInfo.widgetX - combineWidget.x,\n  }\n\n  const topHalf =\n    alignTop || finalEffect === DRAG_EFFECT.ADD\n      ? mousePositionInfo.mouseRealTopHalf\n      : mousePositionInfo.mouseHoveredTopHalf\n\n  const currentLayoutInfo = {\n    ...combineWidget,\n    x: combineWidget.x + moveEffect.x,\n    y: combineWidget.y + moveEffect.y,\n    w: newW,\n  }\n\n  const result = getDragResult(\n    parentNodeDisplayName,\n    currentLayoutInfo,\n    draggedDisplayNames,\n    mousePositionInfo.mouseRealY,\n    mousePositionInfo.mouseRealX,\n    topHalf,\n    draggedDisplayNames.length > 1 ? currentLayoutInfo.w : 1,\n  )\n\n  const moveEffect2 = {\n    y: (result?.y ?? 0) - combineWidget.y,\n    x: (result?.x ?? 0) - combineWidget.x,\n  }\n\n  if (\n    draggedComponents.length === 1 &&\n    mousePositionInfo.mouseRealY <= combineWidget.y + moveEffect2.y\n  ) {\n    item.alignTop = true\n  }\n\n  if (draggedComponents.length > 1) {\n    item.alignTop =\n      item.alignTop ||\n      mousePositionInfo.mouseRealY <= moveEffect2.y + combineWidget.y\n  }\n\n  if (result) {\n    sendShadowMessageHandler(\n      1,\n      parentNodeDisplayName,\n      draggedDisplayNames,\n      Math.floor(result.w / 2 / unitW),\n      Math.floor(result.previewH / 2 / UNIT_HEIGHT),\n      result.w / 2 / unitW - Math.floor(result.w / 2 / unitW),\n      result.previewH / 2 / UNIT_HEIGHT -\n        Math.floor(result.previewH / 2 / UNIT_HEIGHT),\n      result.x,\n      result.y,\n      result.w,\n      result.previewH,\n    )\n\n    const clamWidgetResult = clamWidgetShape(\n      {\n        ...result,\n        h: result.previewH,\n      },\n      columnNumber,\n      draggedComponents.length > 1,\n    )\n    if (\n      draggedComponents.length > 1 &&\n      columnNumber !== columnNumberWhenDragged &&\n      !canDrop\n    ) {\n      item.dropResult = {\n        shape: undefined,\n        canDrop: false,\n        columnNumberWhenDrag: columnNumberWhenDragged,\n        columnNumberWhenDrop: columnNumber,\n      }\n      return {\n        shape: clamWidgetResult,\n        canDrop: false,\n      }\n    }\n    item.dropResult = {\n      shape: clamWidgetResult,\n      canDrop: true,\n      columnNumberWhenDrag: columnNumberWhenDragged,\n      columnNumberWhenDrop: columnNumber,\n    }\n    return {\n      shape: clamWidgetResult,\n      canDrop: true,\n    }\n  } else {\n    return null\n  }\n}\n","export type ILLAPanelType =\n  | \"none\"\n  | \"data_component\"\n  | \"data_action\"\n  | \"data_page\"\n  | \"data_global_state\"\n  | \"action\"\n  | \"canvas\"\n  | \"widget_picker\"\n  | \"components_config\"\n  | \"page_config\"\nexport interface ClickPosition {\n  displayName: string\n  type: \"inner_container\" | \"component\" | \"group\"\n  clickPosition: number[]\n}\n\nexport class FocusManager {\n  private static currentFocus: ILLAPanelType = \"none\"\n  private static currentClickPosition?: ClickPosition\n\n  static switchFocus(\n    illaPanelType: ILLAPanelType,\n    clickPosition?: ClickPosition,\n  ) {\n    this.currentFocus = illaPanelType\n    this.currentClickPosition = clickPosition\n  }\n\n  static getClickPosition(): ClickPosition | undefined {\n    return this.currentClickPosition\n  }\n\n  static getFocus(): ILLAPanelType {\n    return this.currentFocus\n  }\n}\n","import {\n  convertPathToString,\n  hasDynamicStringSnippet,\n} from \"@illa-public/dynamic-string\"\nimport {\n  ActionContent,\n  ActionItem,\n  ComponentMapNode,\n} from \"@illa-public/public-types\"\nimport { get, toPath } from \"lodash-es\"\nimport { getActionList } from \"@/redux/currentApp/action/actionSelector\"\nimport { actionActions } from \"@/redux/currentApp/action/actionSlice\"\nimport {\n  Events,\n  UpdateActionSlicePropsPayload,\n} from \"@/redux/currentApp/action/actionState\"\nimport { UpdateComponentSlicePropsPayload } from \"@/redux/currentApp/components/componentsPayload\"\nimport { getComponentMap } from \"@/redux/currentApp/components/componentsSelector\"\nimport { componentsActions } from \"@/redux/currentApp/components/componentsSlice\"\nimport {\n  getInDependenciesMap,\n  getRawTree,\n} from \"@/redux/currentApp/executionTree/executionSelector\"\nimport store, { AppListenerEffectAPI } from \"@/store\"\nimport { EVENT_ACTION_TYPE } from \"./eventHandlerHelper\"\nimport { isAction, isWidget } from \"./executionTreeHelper/utils\"\n\nconst changeDisplayNameHelper = (\n  independenciesMap: Record<string, string[]>,\n  seeds: Record<string, any>,\n  oldDisplayName: string,\n  newDisplayName: string,\n  type: \"displayName\" | \"globalDataKey\" = \"displayName\",\n) => {\n  const updateWidgetSlice: UpdateComponentSlicePropsPayload[] = []\n  const updateActionSlice: UpdateActionSlicePropsPayload[] = []\n  Object.keys(independenciesMap).forEach((inDepPath) => {\n    const paths = toPath(inDepPath)\n    if (\n      (type === \"displayName\" && oldDisplayName === paths[0]) ||\n      (type === \"globalDataKey\" && oldDisplayName === paths[1])\n    ) {\n      const usedPaths = independenciesMap[inDepPath]\n      usedPaths.forEach((usedPath) => {\n        const usedPathArray = toPath(usedPath)\n        const displayName =\n          usedPathArray[0] === oldDisplayName\n            ? newDisplayName\n            : usedPathArray[0]\n        const finalUsedPathArray = [...usedPathArray]\n        finalUsedPathArray.splice(0, 1, displayName)\n        const finalUsedPath = convertPathToString(finalUsedPathArray)\n        const maybeDynamicStringValue = get(seeds, finalUsedPath)\n        if (hasDynamicStringSnippet(maybeDynamicStringValue)) {\n          const newDynamicStringValue = maybeDynamicStringValue.replace(\n            oldDisplayName,\n            newDisplayName,\n          )\n          const propsPath = convertPathToString(usedPathArray.slice(1))\n          const seed = seeds[displayName]\n          if (isAction(seed)) {\n            updateActionSlice.push({\n              displayName: displayName,\n              actionID: seed.$actionID,\n              propsSlice: {\n                [propsPath]: newDynamicStringValue,\n              },\n            })\n          }\n          if (isWidget(seed)) {\n            updateWidgetSlice.push({\n              displayName: displayName,\n              propsSlice: {\n                [propsPath]: newDynamicStringValue,\n              },\n            })\n          }\n        }\n      })\n    }\n  })\n\n  return { updateWidgetSlice, updateActionSlice }\n}\n\nconst changeEventUsedDisplayNameHelper = (\n  events: Record<string, unknown>[],\n  oldDisplayName: string,\n  newDisplayName: string,\n  prefix: string,\n) => {\n  const propsSlice: {\n    [x: string]: unknown\n  } = {}\n  events.forEach((event, index) => {\n    if (event.widgetID === oldDisplayName) {\n      const path = convertPathToString([prefix, index, \"widgetID\"])\n      propsSlice[path] = newDisplayName\n    }\n\n    if (event.queryID === oldDisplayName) {\n      const path = convertPathToString([prefix, index, \"queryID\"])\n      propsSlice[path] = newDisplayName\n    }\n\n    if (event.stateDisplayName === oldDisplayName) {\n      const path = convertPathToString([prefix, index, \"stateDisplayName\"])\n      propsSlice[path] = newDisplayName\n    }\n\n    if (event.actionType === EVENT_ACTION_TYPE.SET_ROUTER) {\n      if (event.pagePath === oldDisplayName) {\n        const path = convertPathToString([prefix, index, \"pagePath\"])\n        propsSlice[path] = newDisplayName\n      }\n      if (event.viewPath === oldDisplayName) {\n        const path = convertPathToString([prefix, index, \"viewPath\"])\n        propsSlice[path] = newDisplayName\n      }\n    }\n  })\n  return propsSlice\n}\n\nconst changeEventHandlerReferenceHelper = (\n  oldDisplayName: string,\n  newDisplayName: string,\n  actionLists: ActionItem<ActionContent>[],\n  componentMaps: Record<string, ComponentMapNode>,\n) => {\n  const updateWidgetSlice: UpdateComponentSlicePropsPayload[] = []\n  const updateActionSlice: UpdateActionSlicePropsPayload[] = []\n\n  actionLists.forEach((action) => {\n    const { content } = action\n    const { successEvent, failedEvent } = content as ActionContent & Events\n    if (Array.isArray(successEvent)) {\n      const prefix = \"content.successEvent\"\n      const propsSlice = changeEventUsedDisplayNameHelper(\n        successEvent,\n        oldDisplayName,\n        newDisplayName,\n        prefix,\n      )\n      updateActionSlice.push({\n        displayName: action.displayName,\n        actionID: action.actionID,\n        propsSlice: propsSlice,\n      })\n    }\n\n    if (Array.isArray(failedEvent)) {\n      const prefix = \"content.failedEvent\"\n\n      const propsSlice = changeEventUsedDisplayNameHelper(\n        failedEvent,\n        oldDisplayName,\n        newDisplayName,\n        prefix,\n      )\n      updateActionSlice.push({\n        displayName: action.displayName,\n        actionID: action.actionID,\n        propsSlice: propsSlice,\n      })\n    }\n  })\n\n  Object.values(componentMaps).forEach((componentMap) => {\n    const { props } = componentMap\n    if (Array.isArray(props?.events)) {\n      const prefix = \"events\"\n      const propsSlice = changeEventUsedDisplayNameHelper(\n        props.events,\n        oldDisplayName,\n        newDisplayName,\n        prefix,\n      )\n      updateWidgetSlice.push({\n        displayName: componentMap.displayName,\n        propsSlice: propsSlice,\n      })\n    }\n  })\n  return { updateWidgetSlice, updateActionSlice }\n}\n\nconst mergeUpdateSlice = (\n  updateWidgetSlice: UpdateComponentSlicePropsPayload[],\n  updateActionSlice: UpdateActionSlicePropsPayload[],\n) => {\n  const updateWidgetSliceMap: Record<string, UpdateComponentSlicePropsPayload> =\n    {}\n\n  updateWidgetSlice.forEach((item) => {\n    const { displayName } = item\n    if (updateWidgetSliceMap[displayName]) {\n      updateWidgetSliceMap[displayName].propsSlice = {\n        ...updateWidgetSliceMap[displayName].propsSlice,\n        ...item.propsSlice,\n      }\n    } else {\n      updateWidgetSliceMap[displayName] = item\n    }\n  })\n\n  const updateActionSliceMap: Record<string, UpdateActionSlicePropsPayload> = {}\n\n  updateActionSlice.forEach((item) => {\n    const { displayName } = item\n    if (updateActionSliceMap[displayName]) {\n      updateActionSliceMap[displayName].propsSlice = {\n        ...updateActionSliceMap[displayName].propsSlice,\n        ...item.propsSlice,\n      }\n    } else {\n      updateActionSliceMap[displayName] = item\n    }\n  })\n\n  return {\n    updateWidgetSlice: Object.values(updateWidgetSliceMap),\n    updateActionSlice: Object.values(updateActionSliceMap),\n  }\n}\n\nexport const mixedChangeDisplayNameHelper = (\n  listenerApi: AppListenerEffectAPI,\n  oldDisplayName: string,\n  newDisplayName: string,\n  type: \"displayName\" | \"globalDataKey\" = \"displayName\",\n) => {\n  const rootState = listenerApi.getState()\n  const independenciesMap = getInDependenciesMap(rootState)\n  const seeds = getRawTree(rootState)\n  const { updateActionSlice, updateWidgetSlice } = changeDisplayNameHelper(\n    independenciesMap,\n    seeds,\n    oldDisplayName,\n    newDisplayName,\n    type,\n  )\n  const {\n    updateActionSlice: updateActionEventSlice,\n    updateWidgetSlice: updateWidgetEventSlice,\n  } = changeEventHandlerReferenceHelper(\n    oldDisplayName,\n    newDisplayName,\n    getActionList(rootState),\n    getComponentMap(rootState),\n  )\n\n  const contactedUpdateActionSlices = updateActionSlice.concat(\n    ...updateActionEventSlice,\n  )\n  const contactedUpdateWidgetSlice = updateWidgetSlice.concat(\n    ...updateWidgetEventSlice,\n  )\n\n  const {\n    updateActionSlice: mergedActionSlice,\n    updateWidgetSlice: mergedWidgetSlice,\n  } = mergeUpdateSlice(contactedUpdateWidgetSlice, contactedUpdateActionSlices)\n  listenerApi.dispatch(\n    componentsActions.batchUpdateMultiComponentSlicePropsReducer(\n      mergedWidgetSlice,\n    ),\n  )\n  listenerApi.dispatch(\n    actionActions.batchUpdateMultiActionSlicePropsReducer(mergedActionSlice),\n  )\n}\n\nexport const copyWidgetDisplayNameHelper = (\n  oldDisplayName: string,\n  newDisplayName: string,\n) => {\n  const rootState = store.getState()\n  const independenciesMap = getInDependenciesMap(rootState)\n  const seeds = getRawTree(rootState)\n  const updatePathsMapValue: Record<string, unknown> = {}\n  Object.keys(independenciesMap).forEach((inDepPath) => {\n    const usedPaths = independenciesMap[inDepPath]\n    usedPaths.forEach((usedPath) => {\n      const usedPathArray = toPath(usedPath)\n      const displayName = usedPathArray[0]\n      if (displayName !== oldDisplayName) {\n        return\n      }\n      const finalUsedPathArray = [...usedPathArray]\n      const finalUsedPath = convertPathToString(finalUsedPathArray)\n      const maybeDynamicStringValue = get(seeds, finalUsedPath)\n      if (hasDynamicStringSnippet(maybeDynamicStringValue)) {\n        const newDynamicStringValue = maybeDynamicStringValue.replace(\n          oldDisplayName,\n          newDisplayName,\n        )\n        const propsPath = convertPathToString(usedPathArray.slice(1))\n        updatePathsMapValue[propsPath] = newDynamicStringValue\n      }\n    })\n  })\n\n  return updatePathsMapValue\n}\n","import { ComponentTreeNode } from \"@illa-public/public-types\"\nimport {\n  clamWidgetShape,\n  combineWidgetInfos,\n} from \"@/page/App/components/DotPanel/utils/getDragShadow\"\n\nexport const getComponentLayoutInfosWithRelativeCombineShape = (\n  componentNodes: ComponentTreeNode[],\n) => {\n  const combineShape = combineWidgetInfos(componentNodes)\n\n  return componentNodes.map((node) => {\n    return {\n      ...node,\n      x: node.x - combineShape.x,\n      y: node.y - combineShape.y,\n    }\n  })\n}\n\nexport const getComponentNodeResultByRelativeCombineShape = (\n  componentNodes: ComponentTreeNode[],\n  columnNumber: number,\n) => {\n  const relativeInfos =\n    getComponentLayoutInfosWithRelativeCombineShape(componentNodes)\n\n  const square = combineWidgetInfos(componentNodes)\n\n  const clamSquare = clamWidgetShape(\n    square,\n    columnNumber,\n    componentNodes.length > 1,\n  )\n\n  const canUsedClamSSquareW = componentNodes.length <= 1\n\n  return relativeInfos\n    .map((info) => ({\n      ...info,\n      x: info.x + clamSquare.x,\n      y: info.y + clamSquare.y,\n      w: canUsedClamSSquareW ? clamSquare.w : info.w,\n    }))\n    .map((node) => {\n      const clamSquareShape = clamWidgetShape(\n        node,\n        columnNumber,\n        componentNodes.length > 1,\n      )\n      return {\n        ...node,\n        x: clamSquareShape.x,\n        y: clamSquareShape.y,\n        w: clamSquareShape.w,\n      }\n    })\n}\n","import { ILLA_MIXPANEL_EVENT_TYPE } from \"@illa-public/mixpanel-utils\"\nimport {\n  ActionContent,\n  ComponentMapNode,\n  ComponentTreeNode,\n} from \"@illa-public/public-types\"\nimport { ActionItem } from \"@illa-public/public-types\"\nimport i18n from \"i18next\"\nimport { klona } from \"klona\"\nimport { set } from \"lodash-es\"\nimport { createMessage } from \"@illa-design/react\"\nimport { onCopyActionItem } from \"@/page/App/components/Actions/api\"\nimport { DEFAULT_BODY_COLUMNS_NUMBER } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { illaSnapshot } from \"@/page/App/components/DotPanel/constant/snapshotNew\"\nimport { canCrossDifferenceColumnNumber } from \"@/page/App/components/DotPanel/utils/getDragShadow\"\nimport { searchDSLByDisplayName } from \"@/redux/currentApp/components/componentsSelector\"\nimport { componentsActions } from \"@/redux/currentApp/components/componentsSlice\"\nimport { getExecution } from \"@/redux/currentApp/executionTree/executionSelector\"\nimport store from \"@/store\"\nimport { FocusManager } from \"@/utils/focusManager\"\nimport { DisplayNameGenerator } from \"@/utils/generators/generateDisplayName\"\nimport { getActionMixedList } from \"../redux/currentApp/action/actionSelector\"\nimport { getClientWidgetLayoutInfo } from \"../redux/currentApp/layoutInfo/layoutInfoSelector\"\nimport { copyWidgetDisplayNameHelper } from \"./changeDisplayNameHelper\"\nimport { getComponentNodeResultByRelativeCombineShape } from \"./componentNode/copyHelper\"\nimport { buildTreeByMapNode } from \"./componentNode/flatTree\"\nimport { getCurrentSectionColumnNumberByChildDisplayName } from \"./componentNode/search\"\nimport { trackInEditor } from \"./mixpanelHelper\"\n\nconst message = createMessage()\n\nconst doPaste = (\n  originCopyComponents: ComponentTreeNode[],\n  oldColumnNumber: number = DEFAULT_BODY_COLUMNS_NUMBER,\n  newColumnNumber: number = DEFAULT_BODY_COLUMNS_NUMBER,\n  sources: \"keyboard\" | \"duplicate\",\n) => {\n  if (\n    newColumnNumber !== oldColumnNumber &&\n    !canCrossDifferenceColumnNumber(originCopyComponents)\n  ) {\n    message.error({\n      content: i18n.t(\"frame.message.session.error\"),\n    })\n    return\n  }\n\n  const newComponents = getComponentNodeResultByRelativeCombineShape(\n    originCopyComponents,\n    newColumnNumber,\n  )\n\n  const types = newComponents.map((component) => component.type)\n\n  trackInEditor(ILLA_MIXPANEL_EVENT_TYPE.DUPLICATE, {\n    element: \"component\",\n    parameter1: types,\n    parameter3: sources,\n  })\n  store.dispatch(componentsActions.addComponentReducer(newComponents))\n}\n\nexport class CopyManager {\n  static currentCopyComponentNodes: ComponentMapNode[] | null = null\n  static copiedColumnNumber: number = DEFAULT_BODY_COLUMNS_NUMBER\n\n  static currentCopyAction: ActionItem<ActionContent> | null = null\n\n  static copyActionByActionID(actionID: string) {\n    const actionList = getActionMixedList(store.getState())\n    const targetAction = actionList.find((item) => {\n      return item.actionID === actionID\n    })\n    if (targetAction) {\n      this.currentCopyAction = targetAction\n    } else {\n      this.currentCopyAction = null\n    }\n  }\n\n  static copyComponentNodeByDisplayName(displayNames: string[]) {\n    if (displayNames.length > 0) {\n      const widgetLayoutInfos = getClientWidgetLayoutInfo(store.getState())\n      illaSnapshot.setSnapshot(widgetLayoutInfos)\n      const copiedColumnNumber =\n        getCurrentSectionColumnNumberByChildDisplayName(displayNames[0])\n      this.currentCopyComponentNodes = displayNames.map((displayName) => {\n        return searchDSLByDisplayName(displayName)\n      })\n      this.copiedColumnNumber = copiedColumnNumber\n    }\n  }\n\n  static paste(sources: \"keyboard\" | \"duplicate\") {\n    const widgetLayoutInfos = getClientWidgetLayoutInfo(store.getState())\n    illaSnapshot.setSnapshot(widgetLayoutInfos)\n    switch (FocusManager.getFocus()) {\n      case \"data_action\":\n      case \"action\":\n        if (this.currentCopyAction != null) {\n          onCopyActionItem(this.currentCopyAction)\n        }\n        break\n      case \"data_component\":\n      case \"canvas\":\n        if (this.currentCopyComponentNodes != null) {\n          const clickPosition = FocusManager.getClickPosition()\n          const needCopyModalComponents = this.currentCopyComponentNodes\n            .filter((item) => item.type === \"MODAL_WIDGET\")\n            .map((needCopyComponent) => {\n              const targetNodeParentNode = searchDSLByDisplayName(\n                needCopyComponent.parentNode!,\n              )\n\n              return this.copyComponent(\n                buildTreeByMapNode(needCopyComponent.displayName),\n                targetNodeParentNode.displayName,\n                needCopyComponent.x,\n                needCopyComponent.y,\n              )\n            })\n          const needCopyOtherComponents = this.currentCopyComponentNodes\n            .filter((item) => item.type !== \"MODAL_WIDGET\")\n            .map((node) => {\n              const layoutInfo = widgetLayoutInfos[node.displayName]\n              return {\n                ...node,\n                x: layoutInfo.layoutInfo.x,\n                y: layoutInfo.layoutInfo.y,\n                w: layoutInfo.layoutInfo.w,\n                h: layoutInfo.layoutInfo.h,\n              }\n            })\n          const copyResult = [...needCopyModalComponents]\n          if (clickPosition) {\n            switch (clickPosition.type) {\n              case \"component\":\n                let targetNode = searchDSLByDisplayName(\n                  clickPosition.displayName,\n                )\n                if (targetNode) {\n                  const targetLayoutInfo =\n                    widgetLayoutInfos[targetNode.displayName]\n                  targetNode = {\n                    ...targetNode,\n                    x: targetLayoutInfo.layoutInfo.x,\n                    y: targetLayoutInfo.layoutInfo.y,\n                    w: targetLayoutInfo.layoutInfo.w,\n                    h: targetLayoutInfo.layoutInfo.h,\n                  }\n                }\n                if (targetNode && targetNode.parentNode) {\n                  const columnNumber =\n                    getCurrentSectionColumnNumberByChildDisplayName(\n                      targetNode.displayName,\n                    )\n                  switch (targetNode.type) {\n                    case \"FORM_WIDGET\":\n                    case \"MODAL_WIDGET\": {\n                      const targetParentNode = searchDSLByDisplayName(\n                        targetNode.childrenNode[1],\n                      )\n                      if (targetParentNode) {\n                        let prevY = 0\n                        copyResult.push(\n                          ...needCopyOtherComponents.map((node) => {\n                            const newNode = this.copyComponent(\n                              buildTreeByMapNode(node.displayName),\n                              targetParentNode.displayName,\n                              0,\n                              prevY,\n                            )\n                            prevY += node.h\n                            return newNode\n                          }),\n                        )\n                      }\n                      break\n                    }\n                    case \"CONTAINER_WIDGET\": {\n                      const executionTree = getExecution(\n                        store.getState(),\n                      ).result\n                      const { currentIndex } =\n                        executionTree[targetNode.displayName]\n                      const targetParentNode = searchDSLByDisplayName(\n                        targetNode.childrenNode[currentIndex],\n                      )\n                      if (targetParentNode) {\n                        let prevY = 0\n                        copyResult.push(\n                          ...needCopyOtherComponents.map((node) => {\n                            const newNode = this.copyComponent(\n                              buildTreeByMapNode(node.displayName),\n                              targetParentNode.displayName,\n                              0,\n                              prevY,\n                            )\n                            prevY += node.h\n                            return newNode\n                          }),\n                        )\n                      }\n                      break\n                    }\n                    case \"LIST_WIDGET\":\n                    case \"GRID_LIST_WIDGET\": {\n                      const targetParentNode = searchDSLByDisplayName(\n                        targetNode.childrenNode[0],\n                      )\n                      if (targetParentNode) {\n                        let prevY = 0\n                        copyResult.push(\n                          ...needCopyOtherComponents.map((node) => {\n                            const newNode = this.copyComponent(\n                              buildTreeByMapNode(node.displayName),\n                              targetParentNode.displayName,\n                              0,\n                              prevY,\n                            )\n                            prevY += node.h\n                            return newNode\n                          }),\n                        )\n                      }\n                      break\n                    }\n                    default: {\n                      const targetParentNode = searchDSLByDisplayName(\n                        targetNode.parentNode,\n                      )\n                      if (targetParentNode) {\n                        let leftTopX = Number.MAX_SAFE_INTEGER\n                        let leftTopY = Number.MAX_SAFE_INTEGER\n                        needCopyOtherComponents.forEach((node) => {\n                          leftTopX = Math.min(leftTopX, node.x)\n                          leftTopY = Math.min(leftTopY, node.y)\n                        })\n                        copyResult.push(\n                          ...needCopyOtherComponents.map((node) => {\n                            return this.copyComponent(\n                              buildTreeByMapNode(node.displayName),\n                              targetParentNode.displayName,\n                              targetNode!.x + node.x - leftTopX,\n                              targetNode!.y + targetNode!.h + node.y - leftTopY,\n                            )\n                          }),\n                        )\n                      }\n                    }\n                  }\n                  doPaste(\n                    copyResult,\n                    this.copiedColumnNumber,\n                    columnNumber,\n                    sources,\n                  )\n                } else {\n                  message.normal({\n                    content: i18n.t(\"frame.paste_no_aimed\"),\n                  })\n                }\n                break\n              case \"inner_container\":\n                if (clickPosition.clickPosition.length !== 2) {\n                  message.normal({\n                    content: i18n.t(\"frame.paste_no_aimed\"),\n                  })\n                  return\n                }\n                const containerNode = searchDSLByDisplayName(\n                  clickPosition.displayName,\n                )\n                if (containerNode) {\n                  const columnNumber =\n                    getCurrentSectionColumnNumberByChildDisplayName(\n                      containerNode.displayName,\n                    )\n                  let leftTopX = Number.MAX_SAFE_INTEGER\n                  let leftTopY = Number.MAX_SAFE_INTEGER\n\n                  this.currentCopyComponentNodes.forEach((node) => {\n                    leftTopX = Math.min(leftTopX, node.x)\n                    leftTopY = Math.min(leftTopY, node.y)\n                  })\n\n                  const originCopyComponents =\n                    this.currentCopyComponentNodes.map((node) => {\n                      const layoutInfo = widgetLayoutInfos[node.displayName]\n                      const needCopyComponent = {\n                        ...node,\n                        x: layoutInfo.layoutInfo.x,\n                        y: layoutInfo.layoutInfo.y,\n                        w: layoutInfo.layoutInfo.w,\n                        h: layoutInfo.layoutInfo.h,\n                      }\n                      if (needCopyComponent.type === \"MODAL_WIDGET\") {\n                        const targetNodeParentNode = searchDSLByDisplayName(\n                          needCopyComponent.parentNode!,\n                        )\n                        return this.copyComponent(\n                          buildTreeByMapNode(needCopyComponent.displayName),\n                          targetNodeParentNode.displayName,\n                          needCopyComponent.x,\n                          needCopyComponent.y,\n                        )\n                      }\n                      return this.copyComponent(\n                        buildTreeByMapNode(needCopyComponent.displayName),\n                        containerNode.displayName,\n                        clickPosition.clickPosition[0] +\n                          needCopyComponent.x -\n                          leftTopX,\n                        clickPosition.clickPosition[1] +\n                          needCopyComponent.y -\n                          leftTopY,\n                      )\n                    })\n\n                  doPaste(\n                    originCopyComponents,\n                    this.copiedColumnNumber,\n                    columnNumber,\n                    sources,\n                  )\n                } else {\n                  message.normal({\n                    content: i18n.t(\"frame.paste_no_aimed\"),\n                  })\n                }\n                break\n              case \"group\":\n                const targetParentNode = searchDSLByDisplayName(\n                  clickPosition.displayName,\n                )\n                if (targetParentNode) {\n                  const columnNumber =\n                    getCurrentSectionColumnNumberByChildDisplayName(\n                      targetParentNode.displayName,\n                    )\n                  let leftTopX = Number.MAX_SAFE_INTEGER\n                  let leftTopY = Number.MAX_SAFE_INTEGER\n                  this.currentCopyComponentNodes.forEach((node) => {\n                    leftTopX = Math.min(leftTopX, node.x)\n                    leftTopY = Math.min(leftTopY, node.y)\n                  })\n\n                  const originCopyComponents =\n                    this.currentCopyComponentNodes.map((node) => {\n                      const layoutInfo = widgetLayoutInfos[node.displayName]\n                      const needCopyComponent = {\n                        ...node,\n                        x: layoutInfo.layoutInfo.x,\n                        y: layoutInfo.layoutInfo.y,\n                        w: layoutInfo.layoutInfo.w,\n                        h: layoutInfo.layoutInfo.h,\n                      }\n                      if (needCopyComponent.type === \"MODAL_WIDGET\") {\n                        const targetNodeParentNode = searchDSLByDisplayName(\n                          needCopyComponent.parentNode!,\n                        )\n                        return this.copyComponent(\n                          buildTreeByMapNode(needCopyComponent.displayName),\n                          targetNodeParentNode.displayName,\n                          needCopyComponent.x,\n                          needCopyComponent.y,\n                        )\n                      }\n                      return this.copyComponent(\n                        buildTreeByMapNode(needCopyComponent.displayName),\n                        targetParentNode.displayName,\n                        clickPosition.clickPosition[0] +\n                          needCopyComponent.x -\n                          leftTopX,\n                        clickPosition.clickPosition[1] +\n                          clickPosition.clickPosition[3] +\n                          needCopyComponent.y -\n                          leftTopY,\n                      )\n                    })\n\n                  doPaste(\n                    originCopyComponents,\n                    this.copiedColumnNumber,\n                    columnNumber,\n                    sources,\n                  )\n                }\n            }\n          }\n        }\n        break\n      case \"none\":\n        break\n      case \"components_config\":\n        break\n      case \"page_config\":\n        break\n      case \"data_page\":\n        break\n      case \"data_global_state\":\n        break\n      case \"widget_picker\":\n        break\n    }\n  }\n\n  static copyComponent(\n    node: ComponentTreeNode,\n    newParentNodeDisplayName: string,\n    rawX: number,\n    rawY: number,\n  ): ComponentTreeNode {\n    const newDisplayName = DisplayNameGenerator.generateDisplayName(\n      node.type,\n      node.showName,\n    )\n\n    const updatePathsMapValue = copyWidgetDisplayNameHelper(\n      node.displayName,\n      newDisplayName,\n    )\n\n    const newNode = klona({\n      ...node,\n      props: node.props ?? {},\n      displayName: newDisplayName,\n      x: rawX,\n      y: rawY,\n      w: node.w,\n      h: node.h,\n      parentNode: newParentNodeDisplayName,\n    } as ComponentTreeNode)\n\n    Object.keys(updatePathsMapValue).forEach((key) => {\n      set(newNode, `props.${key}`, updatePathsMapValue[key])\n    })\n\n    if (Array.isArray(node.childrenNode)) {\n      newNode.childrenNode = node.childrenNode.map((n) =>\n        this.copyComponent(n, newNode.displayName, n.x, n.y),\n      )\n    }\n    return newNode\n  }\n}\n","import { createContext } from \"react\"\nimport { ShortcutContextProp } from \"./interface\"\n\nexport const ShortCutContext = createContext<ShortcutContextProp>(\n  {} as ShortcutContextProp,\n)\n\nShortCutContext.displayName = \"ShortCutContext\"\n","export const getUserPlatform = () => {\n  const platform =\n    \"userAgentData\" in navigator\n      ? // @ts-ignore\n        (navigator.userAgentData.platform as string)\n      : navigator.platform\n\n  const localStringForPlatform = platform.toLocaleLowerCase()\n  if (/(mac|iphone|ipod|ipad)/i.test(localStringForPlatform)) {\n    return \"macOS\"\n  }\n  if (/(win)/i.test(localStringForPlatform)) {\n    return \"Windows\"\n  }\n  if (/(linux)/i.test(localStringForPlatform)) {\n    return \"Linux\"\n  }\n}\n\nexport const isMAC = () => {\n  return getUserPlatform() === \"macOS\"\n}\n\nexport const isWindows = () => {\n  return getUserPlatform() === \"Windows\"\n}\n\nexport const isLinux = () => {\n  return getUserPlatform() === \"Linux\"\n}\n","import { FC, ReactNode, createContext, useRef } from \"react\"\nimport { useDispatch } from \"react-redux\"\nimport { configActions } from \"@/redux/config/configSlice\"\n\ninterface MouseHoverContextInjected {\n  hoveredWidgets: string[]\n  addHoverWidget: (widgetDisplayName: string) => void\n  deleteHoverWidget: (widgetDisplayName: string) => void\n  resetHoverWidget: () => void\n}\n\nexport const MouseHoverContext = createContext<MouseHoverContextInjected>(\n  {} as MouseHoverContextInjected,\n)\n\ninterface MouseHoverProviderProps {\n  children: ReactNode\n}\n\nexport const MouseHoverProvider: FC<MouseHoverProviderProps> = (props) => {\n  const { children } = props\n  const hoverWidgetsRef = useRef<string[]>([])\n  const dispatch = useDispatch()\n\n  const addHoverWidget = (widgetDisplayName: string) => {\n    hoverWidgetsRef.current.push(widgetDisplayName)\n    hoverWidgetsRef.current = Array.from(new Set(hoverWidgetsRef.current))\n    const currentHoverWidgets = [...hoverWidgetsRef.current]\n    dispatch(configActions.updateHoveredComponent(currentHoverWidgets))\n  }\n\n  const deleteHoverWidget = (widgetDisplayName: string) => {\n    const index = hoverWidgetsRef.current.indexOf(widgetDisplayName)\n    if (index === -1) return\n    hoverWidgetsRef.current.splice(index, 1)\n    const currentHoverWidgets = [...hoverWidgetsRef.current]\n    dispatch(configActions.updateHoveredComponent(currentHoverWidgets))\n  }\n  const resetHoverWidget = () => {\n    hoverWidgetsRef.current = []\n    dispatch(configActions.updateHoveredComponent([]))\n  }\n  const value = {\n    hoveredWidgets: hoverWidgetsRef.current,\n    addHoverWidget,\n    deleteHoverWidget,\n    resetHoverWidget,\n  }\n\n  return (\n    <MouseHoverContext.Provider value={value}>\n      {children}\n    </MouseHoverContext.Provider>\n  )\n}\n","import { MouseEvent, useCallback, useContext, useEffect } from \"react\"\nimport { useDragDropManager } from \"react-dnd\"\nimport { useDispatch } from \"react-redux\"\nimport { MouseHoverContext } from \"@/page/App/components/DotPanel/context/mouseHoverContext\"\nimport { configActions } from \"@/redux/config/configSlice\"\n\nexport const useMouseHover = () => {\n  const dragDropManager = useDragDropManager()\n  const isDragging = dragDropManager.getMonitor().isDragging()\n  const dispatch = useDispatch()\n  const hoverContext = useContext(MouseHoverContext)\n\n  useEffect(() => {\n    if (isDragging) {\n      hoverContext.hoveredWidgets.length > 0 &&\n        dispatch(configActions.updateHoveredComponent([]))\n    }\n  }, [dispatch, hoverContext.hoveredWidgets.length, isDragging])\n\n  const handleMouseEnter = useCallback(\n    (e: MouseEvent<HTMLDivElement>) => {\n      if (isDragging) return\n      const currentDisplayName =\n        e.currentTarget.getAttribute(\"data-displayname\")\n      if (!currentDisplayName) return\n      hoverContext.addHoverWidget(currentDisplayName)\n    },\n    [hoverContext, isDragging],\n  )\n\n  const handleMouseLeave = useCallback(\n    (e: MouseEvent<HTMLDivElement>) => {\n      const currentDisplayName =\n        e.currentTarget.getAttribute(\"data-displayname\")\n      if (!currentDisplayName) return\n      hoverContext.deleteHoverWidget(currentDisplayName)\n    },\n    [hoverContext],\n  )\n\n  return {\n    handleMouseEnter,\n    handleMouseLeave,\n  }\n}\n","import { configActions } from \"@/redux/config/configSlice\"\nimport { WidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoState\"\nimport store from \"@/store\"\nimport { DisplayNameGenerator } from \"@/utils/generators/generateDisplayName\"\nimport { FocusManager } from \"../focusManager\"\n\nexport function startDragMultiNodes(dragWidgetInfos: WidgetLayoutInfo[]) {\n  store.dispatch(configActions.updateShowDot(true))\n  const displayNames = dragWidgetInfos.map((node) => node.displayName)\n  store.dispatch(configActions.setDraggingNodeIDsReducer(displayNames))\n}\n\nexport function endDragMultiNodes(\n  dragWidgetInfos: WidgetLayoutInfo[],\n  isDropOnCanvas: boolean,\n  isAddAction: boolean = false,\n) {\n  store.dispatch(configActions.updateShowDot(false))\n  const displayNames = dragWidgetInfos.map((node) => node.displayName)\n  store.dispatch(configActions.setDraggingNodeIDsReducer([]))\n\n  if (isDropOnCanvas) {\n    FocusManager.switchFocus(\"canvas\", {\n      displayName: displayNames[0],\n      type: \"component\",\n      clickPosition: [],\n    })\n    store.dispatch(configActions.updateSelectedComponent(displayNames))\n  }\n\n  if (isAddAction && !isDropOnCanvas) {\n    DisplayNameGenerator.removeDisplayName(dragWidgetInfos[0].displayName)\n  }\n}\n","import { css } from \"@emotion/react\"\n\nexport const dragContainerStyle = css`\n  width: 100%;\n  height: 100%;\n`\n","import { ILLA_MIXPANEL_EVENT_TYPE } from \"@illa-public/mixpanel-utils\"\nimport { FC } from \"react\"\nimport { useDrag } from \"react-dnd\"\nimport { useSelector } from \"react-redux\"\nimport { DropResultInfo } from \"@/page/App/components/DotPanel/components/Canvas/interface\"\nimport { illaSnapshot } from \"@/page/App/components/DotPanel/constant/snapshotNew\"\nimport {\n  sendMousePositionHandler,\n  sendShadowMessageHandler,\n} from \"@/page/App/components/DotPanel/utils/sendBinaryMessage\"\nimport {\n  getIsILLAEditMode,\n  getSelectedComponentDisplayNames,\n} from \"@/redux/config/configSelector\"\nimport { getIsResizing } from \"@/redux/currentApp/executionTree/executionSelector\"\nimport { getClientWidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoSelector\"\nimport { WidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoState\"\nimport store from \"@/store\"\nimport { endDragMultiNodes, startDragMultiNodes } from \"@/utils/drag/drag\"\nimport { trackInEditor } from \"@/utils/mixpanelHelper\"\nimport { DRAG_EFFECT, DragContainerProps, DragInfo } from \"./interface\"\nimport { dragContainerStyle } from \"./style\"\n\nexport const DragContainer: FC<DragContainerProps> = (props) => {\n  const {\n    children,\n    displayName,\n    canDrag = true,\n    columnNumber,\n    unitWidth,\n    parentNodeDisplayName,\n  } = props\n  const isEditMode = useSelector(getIsILLAEditMode)\n  const isResizingStateInGlobal = useSelector(getIsResizing)\n  const selectedComponents = useSelector(getSelectedComponentDisplayNames)\n\n  const [, dragRef] = useDrag<DragInfo, DropResultInfo>(\n    () => ({\n      type: \"components\",\n      canDrag: isEditMode && canDrag && !isResizingStateInGlobal,\n      end: (draggedItem, monitor) => {\n        const dropResult = monitor.getDropResult()\n        sendShadowMessageHandler(-1, \"\", [], 0, 0, 0, 0, 0, 0, 0, 0)\n        const { draggedComponents } = draggedItem\n        const widgetTypes = draggedComponents.map((node) => node.widgetType)\n        trackInEditor(ILLA_MIXPANEL_EVENT_TYPE.DRAG, {\n          element: \"component\",\n          parameter1: widgetTypes,\n        })\n        endDragMultiNodes(\n          draggedComponents,\n          !!dropResult?.isDropOnCanvas,\n          false,\n        )\n      },\n      item: () => {\n        const rootState = store.getState()\n        let allWidgetLayoutInfo = getClientWidgetLayoutInfo(rootState)\n        illaSnapshot.setSnapshot(allWidgetLayoutInfo)\n        let draggedSelectedComponents: WidgetLayoutInfo[] = []\n        let currentSelectedComponents = selectedComponents\n        if (!currentSelectedComponents.includes(displayName)) {\n          currentSelectedComponents = [displayName]\n        }\n        draggedSelectedComponents = Object.values(allWidgetLayoutInfo).filter(\n          (node) =>\n            currentSelectedComponents.includes(node.displayName) ||\n            node.displayName === displayName,\n        )\n        startDragMultiNodes(draggedSelectedComponents)\n        sendMousePositionHandler(parentNodeDisplayName, 0, 0, 0, 0, true)\n        return {\n          draggedComponents: draggedSelectedComponents,\n          dragEffect: DRAG_EFFECT.UPDATE,\n          draggedDisplayName: displayName,\n          columnNumberWhenDragged: columnNumber,\n          unitWWhenDragged: unitWidth,\n        }\n      },\n    }),\n    [\n      isEditMode,\n      isResizingStateInGlobal,\n      selectedComponents,\n      displayName,\n      unitWidth,\n      columnNumber,\n      canDrag,\n      parentNodeDisplayName,\n    ],\n  )\n\n  return (\n    <div css={dragContainerStyle} ref={dragRef}>\n      {children}\n    </div>\n  )\n}\n","import * as React from \"react\";\nconst SvgDoc = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 12, height: 12, viewBox: \"0 0 12 12\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M6.5 5C6.22386 5 6 4.77614 6 4.5L6 2L3 2L3 10L9 10L9 5L6.5 5ZM10 4.5V5L10 10.5C10 10.7761 9.77614 11 9.5 11L2.5 11C2.22386 11 2 10.7761 2 10.5L2 1.5C2 1.22386 2.22386 1 2.5 1L6 1L6.5 1L7 1.5L9.5 4L10 4.5ZM8.08579 4L7 2.91421L7 4H8.08579ZM4 7V6L8 6V7L4 7ZM4 9H7V8L4 8V9Z\", fill: \"white\" }));\nexport default SvgDoc;\n","import { SerializedStyles, css } from \"@emotion/react\"\nimport { globalColor, illaPrefix } from \"@illa-design/react\"\n\nexport function applyUserAvatarStyle(\n  background: string,\n  type?: string,\n): SerializedStyles {\n  const basicStyle = css`\n    display: inline-block;\n    background: #${background};\n    color: ${globalColor(`--${illaPrefix}-white-01`)};\n    text-align: center;\n    border-radius: 50%;\n    flex-shrink: 0;\n  `\n  if (type === \"list\") {\n    return css`\n      ${basicStyle};\n      width: 24px;\n      height: 24px;\n      line-height: 24px;\n    `\n  }\n  return css`\n    ${basicStyle};\n    width: 14px;\n    height: 14px;\n    line-height: 14px;\n  `\n}\n\nexport const getComponentUsersListContainerStyle = (\n  length: number,\n  disableMargin: boolean,\n) => {\n  const minWidth = length >= 3 ? 32 : 14 * length + 4 * (length - 1)\n  let marginStyle = css`\n    margin-left: 8px;\n  `\n  if (disableMargin) {\n    marginStyle = css``\n  }\n  return css`\n    display: flex;\n    ${marginStyle};\n    gap: 4px;\n    height: 16px;\n    max-width: 50px;\n    flex-shrink: 0;\n    flex-grow: 1;\n    justify-content: flex-start;\n    align-self: center;\n    overflow: hidden;\n    align-items: center;\n    min-width: ${minWidth}px;\n  `\n}\n\nexport const moreIconStyle = css`\n  width: 14px;\n  height: 14px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 50%;\n  background-color: ${globalColor(`--${illaPrefix}-white-06`)};\n  color: ${globalColor(`--${illaPrefix}-white-01`)};\n  display: flex;\n  flex-grow: 0;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  & > svg {\n    width: 8px;\n    height: 8px;\n  }\n`\n\nexport const listContainerStyle = css`\n  width: 154px;\n  padding: 16px;\n  left: 14px;\n  top: -1px;\n  max-height: 234px;\n  overflow: scroll;\n  position: absolute;\n  border-radius: 8px;\n  box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.08);\n  background-color: ${globalColor(`--${illaPrefix}-white-01`)};\n`\n\nexport const listItemStyle = css`\n  height: 24px;\n  display: flex;\n  color: ${globalColor(`--${illaPrefix}-grayBlue-02`)};\n  align-items: center;\n  padding: 0;\n  font-weight: 500;\n  font-size: 12px;\n  gap: 8px;\n  flex: none;\n  width: 100%;\n  &:not(:last-child) {\n    margin-bottom: 12px;\n  }\n`\n\nexport const listItemContentStyle = css`\n  height: 22px;\n  line-height: 22px;\n  color: ${globalColor(`--${illaPrefix}-grayBlue-02`)};\n  margin-bottom: 12px;\n  padding: 0;\n  font-weight: 500;\n  font-family: \"PingFang SC\";\n  font-style: normal;\n  font-size: 14px;\n  width: 100%;\n`\n\nexport const listItemNicknameStyle = css`\n  height: 20px;\n  line-height: 20px;\n  font-size: 12px;\n  font-family: \"Inter\";\n  font-style: normal;\n  flex-grow: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`\n","import { getCurrentTeamInfo } from \"@illa-public/user-data\"\nimport { Connection, getTextMessagePayload } from \"@/api/ws\"\nimport { TextSignal, TextTarget } from \"@/api/ws/textSignal\"\nimport { configActions } from \"@/redux/config/configSlice\"\nimport { CollaboratorsInfo } from \"@/redux/currentApp/collaborators/collaboratorsState\"\nimport { componentsActions } from \"@/redux/currentApp/components/componentsSlice\"\nimport store, { AppListenerEffectAPI } from \"@/store\"\n\nexport const getDisattachedComponents = (\n  currentAttached: Record<string, CollaboratorsInfo[]>,\n  currentSelected: string[],\n) => {\n  const preciousAttached = Object.keys(currentAttached) || []\n  return preciousAttached.filter(\n    (displayName) => !currentSelected.includes(displayName),\n  )\n}\n\nexport const updateSelectedComponentUsersHandler = (payload: string[]) => {\n  const currentAppID = store.getState().currentApp.appInfo.appId ?? \"\"\n  const { id: teamID = \"\", uid = \"\" } =\n    getCurrentTeamInfo(store.getState()) ?? {}\n  Connection.getTextRoom(\"app\", currentAppID)?.send(\n    getTextMessagePayload(\n      TextSignal.COOPERATE_ATTACH,\n      TextTarget.COMPONENTS,\n      true,\n      {\n        type: \"attachComponent\",\n        payload: [],\n      },\n      teamID,\n      uid,\n      payload,\n    ),\n  )\n}\n\nexport const clearComponentAttachedUsersHandler = (payload: string[]) => {\n  const currentAppID = store.getState().currentApp.appInfo.appId ?? \"\"\n  const { id: teamID = \"\", uid = \"\" } =\n    getCurrentTeamInfo(store.getState()) ?? {}\n  Connection.getTextRoom(\"app\", currentAppID)?.send(\n    getTextMessagePayload(\n      TextSignal.COOPERATE_DISATTACH,\n      TextTarget.COMPONENTS,\n      true,\n      {\n        type: \"attachComponent\",\n        payload: [],\n      },\n      teamID,\n      uid,\n      payload,\n    ),\n  )\n}\n\nexport const updateCurrentAllComponentsAttachedUsers = (\n  displayName: string[],\n  currentComponentsAttachedUsers: Record<string, CollaboratorsInfo[]>,\n) => {\n  updateSelectedComponentUsersHandler(displayName)\n  const disattachedComponents = getDisattachedComponents(\n    currentComponentsAttachedUsers,\n    displayName,\n  )\n  if (!!disattachedComponents.length) {\n    clearComponentAttachedUsersHandler(disattachedComponents)\n  }\n}\n\nexport const handleClearSelectedComponentExecution = (\n  action: ReturnType<typeof componentsActions.deleteComponentNodeReducer>,\n  listenerApi: AppListenerEffectAPI,\n) => {\n  let currentSelected = listenerApi.getState().config.selectedComponents\n  if (Array.isArray(currentSelected) && currentSelected.length > 0) {\n    currentSelected = currentSelected.filter(\n      (item) => !action.payload.displayNames.includes(item),\n    )\n  }\n  listenerApi.dispatch(configActions.updateSelectedComponent(currentSelected))\n  clearComponentAttachedUsersHandler(action.payload.displayNames)\n}\n\nexport const AVATAR_WIDTH = 14\nexport const AVATAR_GAP = 4\n\nexport const MIN_DISABLE_MARGIN_WIDTH = 34\n\nexport const MIN_THREE_AVATAR_WIDTH = 50\n\nexport const MIN_THREE_AVATAR_MOVE_BAR_WIDTH = 70\n","import { FC, useMemo, useState } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport useMeasure from \"react-use-measure\"\nimport { MoreIcon, Trigger } from \"@illa-design/react\"\nimport { Avatar } from \"@/page/App/components/Avatar\"\nimport {\n  getComponentUsersListContainerStyle,\n  listContainerStyle,\n  listItemContentStyle,\n  listItemNicknameStyle,\n  listItemStyle,\n  moreIconStyle,\n} from \"@/page/App/components/ScaleSquare/components/CollaboratorsList/style\"\nimport {\n  MIN_THREE_AVATAR_MOVE_BAR_WIDTH,\n  MIN_THREE_AVATAR_WIDTH,\n} from \"@/redux/currentApp/collaborators/collaboratorsHandlers\"\nimport { CollaboratorsInfo } from \"@/redux/currentApp/collaborators/collaboratorsState\"\n\nexport const CollaboratorsList: FC<{\n  users: CollaboratorsInfo[]\n  disableMargin: boolean\n  currentState: string\n  containerWidth: number\n  nameChanging?: boolean\n}> = ({ users, disableMargin, currentState, containerWidth }) => {\n  const [listShow, setListShow] = useState(false)\n  const [listContainerRef, bounds] = useMeasure()\n  const { t } = useTranslation()\n  const length = users.length\n\n  const { showMoreIcon, displayDataList } = useMemo(() => {\n    let showMoreIcon = false\n    let displayDataList: CollaboratorsInfo[] = []\n\n    const listLength = users.length\n    if (listLength < 3) {\n      return {\n        showMoreIcon: false,\n        displayDataList: users,\n      }\n    }\n    if (currentState === \"right\") {\n      return containerWidth > MIN_THREE_AVATAR_MOVE_BAR_WIDTH\n        ? {\n            showMoreIcon: listLength !== 3,\n            displayDataList: listLength === 3 ? users : users.slice(0, 2),\n          }\n        : {\n            showMoreIcon: true,\n            displayDataList: users.slice(0, 1),\n          }\n    }\n    if (\n      (currentState === \"left\" && bounds.width <= MIN_THREE_AVATAR_WIDTH) ||\n      disableMargin\n    ) {\n      return {\n        showMoreIcon: true,\n        displayDataList: users.slice(0, 1),\n      }\n    }\n    return {\n      showMoreIcon,\n      displayDataList,\n    }\n  }, [bounds.width, containerWidth, currentState, disableMargin, users])\n\n  const renderListItem = useMemo(\n    () => (\n      <>\n        {displayDataList.map(({ avatar, id, nickname }, index) => (\n          <Avatar\n            userID={id}\n            nickname={nickname}\n            avatar={avatar}\n            showType=\"components\"\n            key={index}\n            showTooltips={true}\n          />\n        ))}\n        {showMoreIcon && (\n          <Trigger\n            trigger=\"hover\"\n            content={\n              <div css={listContainerStyle}>\n                <div css={listItemContentStyle}>\n                  {t(\"editor.component.editor_list\")}\n                </div>\n                {users.map(({ avatar, id, nickname }, index) => (\n                  <div key={index} css={listItemStyle}>\n                    <Avatar\n                      userID={id}\n                      nickname={nickname}\n                      avatar={avatar}\n                      showType=\"components\"\n                      type=\"list\"\n                      key={index}\n                    />\n                    <span css={listItemNicknameStyle}>{nickname || \"\"}</span>\n                  </div>\n                ))}\n              </div>\n            }\n            popupVisible={listShow}\n            onVisibleChange={setListShow}\n            position=\"bottom-start\"\n            showArrow={false}\n            withoutPadding\n            colorScheme=\"white\"\n          >\n            <div css={moreIconStyle}>\n              <MoreIcon />\n            </div>\n          </Trigger>\n        )}\n      </>\n    ),\n    [displayDataList, listShow, showMoreIcon, t, users],\n  )\n\n  if (!length) {\n    return null\n  }\n\n  return (\n    <div\n      css={getComponentUsersListContainerStyle(length, disableMargin)}\n      ref={listContainerRef}\n    >\n      {renderListItem}\n    </div>\n  )\n}\n\nCollaboratorsList.displayName = \"CollaboratorsList\"\n","export const MOVE_BAR_HEIGHT = 18\nexport const MIN_MOVE_BAR_WIDTH = 48\nexport const MOVE_BAR_SVG_WIDTH = 12\n","import { get } from \"lodash-es\"\nimport { useMemo } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { getExecutionResult } from \"@/redux/currentApp/executionTree/executionSelector\"\n\nexport const useDisplayNameInMoveBarSelector = (\n  displayName: string,\n  widgetType: string,\n) => {\n  const executionResult = useSelector(\n    getExecutionResult,\n    (prev, next) => prev === next,\n  )\n  const realProps: Record<string, any> = get(executionResult, displayName, {})\n\n  const displayNameInMoveBar = useMemo(() => {\n    if (\n      widgetType === \"CONTAINER_WIDGET\" &&\n      realProps.hasOwnProperty(\"currentIndex\") &&\n      realProps.hasOwnProperty(\"viewList\")\n    ) {\n      const { currentIndex, viewList } = realProps\n      if (!Array.isArray(viewList) || currentIndex >= viewList.length)\n        return displayName + \" / \" + \"View 1\"\n      const labelName = viewList[currentIndex]\n        ? viewList[currentIndex].label\n        : currentIndex\n      return displayName + \" / \" + labelName\n    }\n    return displayName\n  }, [displayName, realProps, widgetType])\n\n  return displayNameInMoveBar\n}\n","import { css } from \"@emotion/react\"\nimport { getColor, globalColor, illaPrefix } from \"@illa-design/react\"\nimport { MOVE_BAR_HEIGHT } from \"@/page/App/components/ScaleSquare/constant/moveBar\"\n\nexport const warningStyle = css`\n  margin-left: 4px;\n`\n\nexport const applyMoveBarWrapperStyle = (\n  maxWidth: number,\n  minWidth: number,\n  isError: boolean,\n  isLikeProductionMode: boolean,\n  topPosition: number,\n) => {\n  let borderRadiusStyle = css`\n    border-radius: 4px 4px 0 0;\n  `\n\n  const backgroundColorStyle = isError\n    ? globalColor(`--${illaPrefix}-red-03`)\n    : globalColor(`--${illaPrefix}-techPurple-03`)\n  return css`\n    height: ${MOVE_BAR_HEIGHT}px;\n    padding: 1px 4px 1px 0;\n    background-color: ${backgroundColorStyle};\n    ${borderRadiusStyle};\n    display: flex;\n    position: absolute;\n    top: ${topPosition}px;\n    left: 0;\n    align-items: center;\n    font-size: 12px;\n    color: #fff;\n    max-width: ${maxWidth}px;\n    min-width: ${minWidth}px;\n    visibility: ${!isLikeProductionMode ? \"visible\" : \"hidden\"};\n    z-index: 100;\n    cursor: move;\n  `\n}\n\nexport const displayNameContainerStyle = css`\n  display: flex;\n  min-width: 12px;\n  flex-grow: 1;\n  align-items: center;\n`\n\nexport const dragPointIconWrapperStyle = css`\n  width: 12px;\n  height: 12px;\n  flex: none;\n`\n\nexport const moveBarDisplayNameStyle = css`\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 16px;\n`\n\nexport const docIconStyle = css`\n  height: 100%;\n  margin-left: 4px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nexport const docTipsWrapperStyle = css`\n  width: 320px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  font-size: 14px;\n  color: ${getColor(\"grayBlue\", \"02\")};\n  word-break: break-all;\n`\n","import { FC, useEffect, useRef, useState } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { useSelector } from \"react-redux\"\nimport useMeasure from \"react-use-measure\"\nimport {\n  DragPointIcon,\n  Trigger,\n  WarningCircleIcon,\n  globalColor,\n  illaPrefix,\n} from \"@illa-design/react\"\nimport DocIcon from \"@/assets/doc.svg?react\"\nimport { SCROLL_CONTAINER_PADDING } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { CollaboratorsList } from \"@/page/App/components/ScaleSquare/components/CollaboratorsList\"\nimport {\n  MIN_MOVE_BAR_WIDTH,\n  MOVE_BAR_HEIGHT,\n  MOVE_BAR_SVG_WIDTH,\n} from \"@/page/App/components/ScaleSquare/constant/moveBar\"\nimport { useDisplayNameInMoveBarSelector } from \"@/page/App/components/ScaleSquare/utils/useGetDisplayNameInMoveBar\"\nimport { getIsLikeProductMode } from \"@/redux/config/configSelector\"\nimport {\n  AVATAR_GAP,\n  AVATAR_WIDTH,\n  MIN_DISABLE_MARGIN_WIDTH,\n} from \"@/redux/currentApp/collaborators/collaboratorsHandlers\"\nimport { MoveBarProps } from \"./interface\"\nimport {\n  applyMoveBarWrapperStyle,\n  displayNameContainerStyle,\n  docIconStyle,\n  docTipsWrapperStyle,\n  dragPointIconWrapperStyle,\n  moveBarDisplayNameStyle,\n  warningStyle,\n} from \"./style\"\n\ninterface WidgetDocProps {\n  widgetType: string\n}\n\nexport const WidgetDoc: FC<WidgetDocProps> = (props) => {\n  const { t } = useTranslation()\n  switch (props.widgetType) {\n    case \"LIST_WIDGET\":\n      return (\n        <Trigger\n          content={\n            <div css={docTipsWrapperStyle}>\n              <span>{t(\"widget.list.doc1\")}</span>\n              <span>{t(\"widget.list.doc2\")}</span>\n            </div>\n          }\n          trigger=\"hover\"\n          colorScheme=\"white\"\n          position=\"right-start\"\n        >\n          <span css={docIconStyle}>\n            <DocIcon />\n          </span>\n        </Trigger>\n      )\n\n    default:\n      return null\n  }\n}\n\nexport const MoveBar: FC<MoveBarProps> = (props) => {\n  const { displayName, isError, maxWidth, widgetTop, widgetType, userList } =\n    props\n\n  const [currentState, setCurrentState] = useState<string>(\"right\")\n  const [containerRef, bounds] = useMeasure()\n  const containerWidthRef = useRef(0)\n  const isLikeProductionMode = useSelector(getIsLikeProductMode)\n  const displayNameInMoveBar = useDisplayNameInMoveBarSelector(\n    displayName,\n    widgetType,\n  )\n\n  useEffect(() => {\n    if (bounds.width > containerWidthRef.current) {\n      currentState !== \"right\" && setCurrentState(\"right\")\n    }\n    if (bounds.width < containerWidthRef.current) {\n      currentState !== \"left\" && setCurrentState(\"left\")\n    }\n    containerWidthRef.current = bounds.width\n  }, [bounds.width, currentState])\n\n  const topPosition =\n    widgetTop + SCROLL_CONTAINER_PADDING >= MOVE_BAR_HEIGHT\n      ? -MOVE_BAR_HEIGHT\n      : 0\n\n  const minWidth =\n    userList.length >= 3\n      ? MIN_MOVE_BAR_WIDTH\n      : userList.length * AVATAR_WIDTH +\n          (userList.length || 1 - 1) * AVATAR_GAP +\n          MOVE_BAR_SVG_WIDTH || MOVE_BAR_SVG_WIDTH\n\n  const disableMargin =\n    bounds.width <=\n    (userList.length >= 2 ? MIN_MOVE_BAR_WIDTH : MIN_DISABLE_MARGIN_WIDTH)\n\n  return (\n    <div\n      css={applyMoveBarWrapperStyle(\n        maxWidth,\n        minWidth,\n        isError,\n        isLikeProductionMode,\n        topPosition,\n      )}\n      id=\"moveBar\"\n      ref={containerRef}\n    >\n      <>\n        <div css={displayNameContainerStyle}>\n          <DragPointIcon css={dragPointIconWrapperStyle} />\n          <span css={moveBarDisplayNameStyle}>{displayNameInMoveBar}</span>\n        </div>\n        <CollaboratorsList\n          users={userList}\n          disableMargin={disableMargin}\n          currentState={currentState}\n          containerWidth={bounds.width}\n        />\n      </>\n      {isError && (\n        <WarningCircleIcon\n          color={globalColor(`--${illaPrefix}-white-05`)}\n          css={warningStyle}\n        />\n      )}\n      <WidgetDoc widgetType={widgetType} />\n    </div>\n  )\n}\n","import { css } from \"@emotion/react\"\n\nexport const positionContainerStyle = (\n  x: number,\n  y: number,\n  isDragging: boolean,\n  isSelected: boolean,\n) => css`\n  position: absolute;\n  top: 0;\n  left: 0;\n  transform: translate(${x}px, ${y}px);\n  pointer-events: ${isDragging ? \"none\" : \"auto\"};\n  display: ${isDragging ? \"none\" : \"block\"};\n  z-index: ${isSelected ? 5 : 0};\n`\n","import { FC, useMemo } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { getSelectedComponentDisplayNames } from \"@/redux/config/configSelector\"\nimport { getDraggingComponentIDs } from \"@/redux/currentApp/executionTree/executionSelector\"\nimport { PositionContainerProps } from \"./interface\"\nimport { positionContainerStyle } from \"./style\"\n\nexport const PositionContainer: FC<PositionContainerProps> = (props) => {\n  const { x, y, children, displayName } = props\n  const selectedComponents = useSelector(getSelectedComponentDisplayNames)\n\n  const draggingComponentNodes = useSelector(getDraggingComponentIDs)\n  const isDragging = draggingComponentNodes.includes(displayName)\n  const isSelected = useMemo(() => {\n    return selectedComponents.some((currentDisplayName) => {\n      return displayName === currentDisplayName\n    })\n  }, [displayName, selectedComponents])\n  return (\n    <div css={positionContainerStyle(x, y, isDragging, isSelected)}>\n      {children}\n    </div>\n  )\n}\n","import { clamp } from \"lodash-es\"\nimport { NodeShape } from \"@/page/App/components/DotPanel/utils/crossingHelper\"\nimport { DEFAULT_MIN_COLUMN } from \"@/page/App/components/ScaleSquare/constant/widget\"\n\nexport const fixWidgetPosition = (\n  nodeShape: NodeShape,\n  minH: number,\n  columnNumber: number,\n) => {\n  const y = clamp(nodeShape.y, 0, Infinity)\n  const h = clamp(nodeShape.h, minH, Infinity)\n  const w = clamp(nodeShape.w, DEFAULT_MIN_COLUMN, columnNumber)\n  const x = clamp(nodeShape.x, 0, columnNumber - w)\n  return {\n    x,\n    y,\n    w,\n    h,\n  }\n}\n","import { ILLA_MIXPANEL_EVENT_TYPE } from \"@illa-public/mixpanel-utils\"\nimport { throttle } from \"lodash-es\"\nimport { useCallback, useMemo, useRef } from \"react\"\nimport { XYCoord, useDrag, useDragLayer, useDrop } from \"react-dnd\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { illaSnapshot } from \"@/page/App/components/DotPanel/constant/snapshotNew\"\nimport {\n  NodeShape,\n  getNewPositionWithCrossing,\n} from \"@/page/App/components/DotPanel/utils/crossingHelper\"\nimport { sendShadowMessageHandler } from \"@/page/App/components/DotPanel/utils/sendBinaryMessage\"\nimport { getIsILLAEditMode } from \"@/redux/config/configSelector\"\nimport { configActions } from \"@/redux/config/configSlice\"\nimport { componentsActions } from \"@/redux/currentApp/components/componentsSlice\"\nimport { getClientWidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoSelector\"\nimport { layoutInfoActions } from \"@/redux/currentApp/layoutInfo/layoutInfoSlice\"\nimport {\n  BatchUpdateWidgetLayoutInfoPayload,\n  WidgetLayoutInfo,\n} from \"@/redux/currentApp/layoutInfo/layoutInfoState\"\nimport store from \"@/store\"\nimport { trackInEditor } from \"@/utils/mixpanelHelper\"\nimport { BarPosition } from \"./interface\"\nimport { fixWidgetPosition } from \"./utils\"\n\nexport interface DragResizeHandlerInfo {\n  barPosition: BarPosition\n  displayName: string\n  dragResult?: NodeShape\n}\n\nexport const useResizeStart = (\n  barPosition: BarPosition,\n  displayName: string,\n) => {\n  const dispatch = useDispatch()\n  const useDragReturnValue = useDrag<DragResizeHandlerInfo>(\n    () => ({\n      type: \"resizeHandler\",\n      end: () => {\n        dispatch(configActions.updateShowDot(false))\n      },\n      item: () => {\n        const rootState = store.getState()\n        let allWidgetLayoutInfo = getClientWidgetLayoutInfo(rootState)\n        illaSnapshot.setSnapshot(allWidgetLayoutInfo)\n        dispatch(configActions.updateShowDot(true))\n        dispatch(configActions.setResizingNodeIDsReducer([displayName]))\n\n        return {\n          barPosition,\n          displayName,\n        }\n      },\n    }),\n    [barPosition, displayName],\n  )\n\n  return useDragReturnValue\n}\n\nexport const useResize = () => {\n  const isEditMode = useSelector(getIsILLAEditMode)\n\n  const dispatch = useDispatch()\n  const prevEffectedDisplayNamesRef = useRef<string[]>([])\n\n  const useDropReturnValue = useDrop<DragResizeHandlerInfo>(\n    () => ({\n      accept: [\"resizeHandler\"],\n      canDrop: () => {\n        return isEditMode\n      },\n      hover: (dragHandlerInfo) => {\n        const { displayName } = dragHandlerInfo\n\n        const snapShot = illaSnapshot.getSnapshot()\n        const currentWidgetSnapShot = snapShot[displayName]\n        const scrollContainerDOM = document.querySelector(\n          `[data-scroll-container=\"${currentWidgetSnapShot.parentNode}\"]`,\n        ) as HTMLElement\n        if (!scrollContainerDOM) return\n        scrollContainerDOM.dataset.isDraggingOver = \"true\"\n      },\n\n      drop: (dragHandlerInfo) => {\n        const { displayName, dragResult } = dragHandlerInfo\n        if (!dragResult) return\n\n        const snapShot = illaSnapshot.getSnapshot()\n        const currentWidgetSnapShot = snapShot[displayName]\n        dispatch(\n          componentsActions.updateComponentLayoutInfoReducer({\n            displayName: displayName,\n            layoutInfo: {\n              x: dragResult.x,\n              y: dragResult.y,\n              w: dragResult.w,\n              h:\n                dragResult.h === currentWidgetSnapShot.layoutInfo.h\n                  ? undefined\n                  : dragResult.h,\n            },\n            parentNode: currentWidgetSnapShot.parentNode,\n          }),\n        )\n        dispatch(configActions.setResizingNodeIDsReducer([]))\n\n        sendShadowMessageHandler(-1, \"\", [], 0, 0, 0, 0, 0, 0, 0, 0)\n        trackInEditor(ILLA_MIXPANEL_EVENT_TYPE.DRAG, {\n          element: \"component\",\n          parameter1: currentWidgetSnapShot.widgetType,\n        })\n        prevEffectedDisplayNamesRef.current = []\n        const scrollContainerDOM = document.querySelector(\n          `[data-scroll-container=\"${currentWidgetSnapShot.parentNode}\"]`,\n        ) as HTMLElement\n        if (!scrollContainerDOM) return\n        scrollContainerDOM.dataset.isDraggingOver = \"false\"\n      },\n    }),\n    [isEditMode],\n  )\n\n  return useDropReturnValue\n}\n\ninterface ResizingCollectedProps {\n  isDragging: boolean\n  item: DragResizeHandlerInfo\n  clientOffset: XYCoord | null\n}\n\nexport const useResizingUpdateRealTime = (isActive: boolean) => {\n  const prevEffectedDisplayNamesRef = useRef<string[]>([])\n  const dispatch = useDispatch()\n\n  const collectedProps = useDragLayer<\n    ResizingCollectedProps,\n    DragResizeHandlerInfo\n  >((monitor) => {\n    return {\n      isDragging: monitor.isDragging(),\n      item: monitor.getItem(),\n      clientOffset: monitor.getClientOffset(),\n    }\n  })\n\n  const throttleUpdateComponentPositionByReflow = useMemo(() => {\n    return throttle((newItem: WidgetLayoutInfo) => {\n      const snapshotMap = illaSnapshot.getSnapshot()\n      const snapShotShape = snapshotMap[newItem.displayName]\n      const effectMap = getNewPositionWithCrossing(\n        {\n          x: newItem.layoutInfo.x,\n          y: newItem.layoutInfo.y,\n          w: newItem.layoutInfo.w,\n          h: newItem.layoutInfo.h,\n        },\n        newItem.parentNode,\n        [newItem.displayName],\n      )\n\n      const updateSlice: BatchUpdateWidgetLayoutInfoPayload[] = [\n        {\n          displayName: newItem.displayName,\n          layoutInfo:\n            newItem.layoutInfo.h === snapShotShape.layoutInfo.h\n              ? {\n                  x: newItem.layoutInfo.x,\n                  y: newItem.layoutInfo.y,\n                  w: newItem.layoutInfo.w,\n                }\n              : {\n                  x: newItem.layoutInfo.x,\n                  y: newItem.layoutInfo.y,\n                  w: newItem.layoutInfo.w,\n                  h: newItem.layoutInfo.h,\n                },\n        },\n      ]\n\n      for (let i = 0; i < prevEffectedDisplayNamesRef.current.length; i++) {\n        const effectName = prevEffectedDisplayNamesRef.current[i]\n        if (effectMap && effectMap.has(effectName)) {\n          continue\n        }\n        const layoutInfo = snapshotMap[effectName]\n        if (layoutInfo) {\n          updateSlice.push({\n            displayName: effectName,\n            layoutInfo: {\n              x: layoutInfo.layoutInfo.x,\n              y: layoutInfo.layoutInfo.y,\n              w: layoutInfo.layoutInfo.w,\n              h: layoutInfo.layoutInfo.h,\n            },\n          })\n        }\n      }\n      prevEffectedDisplayNamesRef.current = []\n\n      if (effectMap && effectMap.size > 0) {\n        effectMap.forEach((widgetLayoutInfo) => {\n          updateSlice.push({\n            displayName: widgetLayoutInfo.displayName,\n            layoutInfo: {\n              x: widgetLayoutInfo.layoutInfo.x,\n              y: widgetLayoutInfo.layoutInfo.y,\n              w: widgetLayoutInfo.layoutInfo.w,\n              h: widgetLayoutInfo.layoutInfo.h,\n            },\n          })\n          prevEffectedDisplayNamesRef.current = Array.from(\n            new Set([\n              ...prevEffectedDisplayNamesRef.current,\n              widgetLayoutInfo.displayName,\n            ]),\n          )\n        })\n      }\n      dispatch(\n        layoutInfoActions.batchUpdateWidgetLayoutInfoReducer(updateSlice),\n      )\n    }, 16)\n  }, [dispatch])\n\n  const updateComponentResizeInfo = useCallback(\n    (\n      mousePositionInViewport: XYCoord,\n      dragHandlerInfo: DragResizeHandlerInfo,\n    ) => {\n      const { barPosition, displayName } = dragHandlerInfo\n      const snapShot = illaSnapshot.getSnapshot()\n      const currentWidgetSnapShot = snapShot[displayName]\n      if (!mousePositionInViewport || !currentWidgetSnapShot) return\n      const parentNodeDisplayName = currentWidgetSnapShot.parentNode\n      if (!parentNodeDisplayName) return\n      const parentNodeDOM = document.querySelector(\n        `[data-canvas-container=\"${parentNodeDisplayName}\"]`,\n      ) as HTMLElement\n      const scrollContainerDOM = document.querySelector(\n        `[data-scroll-container=\"${parentNodeDisplayName}\"]`,\n      ) as HTMLElement\n      if (!parentNodeDOM || !scrollContainerDOM) return\n      scrollContainerDOM.dataset.isDraggingOver = \"true\"\n      const unitW = Number(parentNodeDOM.dataset.unitWidth)\n      if (isNaN(unitW)) return\n      const columnNumber = Number(parentNodeDOM.dataset.columnNumber)\n      if (isNaN(columnNumber)) return\n      const canvasRect = parentNodeDOM.getBoundingClientRect()\n      const canvasTop = canvasRect.top\n      const canvasLeft = canvasRect.left\n      const mouseRelativeY = Math.round(\n        (mousePositionInViewport.y - canvasTop) / UNIT_HEIGHT,\n      )\n      const mouseRelativeX = Math.round(\n        (mousePositionInViewport.x - canvasLeft) / unitW,\n      )\n\n      const currentLayoutInfo = currentWidgetSnapShot.layoutInfo\n\n      const deltaX =\n        mouseRelativeX -\n        (barPosition.includes(\"l\")\n          ? currentLayoutInfo.x\n          : currentLayoutInfo.x + currentLayoutInfo.w)\n      const deltaY =\n        mouseRelativeY -\n        (barPosition.includes(\"t\")\n          ? currentLayoutInfo.y\n          : currentLayoutInfo.y + currentLayoutInfo.h)\n\n      let widgetDeltaTop = 0\n      let widgetDeltaHeight = 0\n\n      if (barPosition.includes(\"t\")) {\n        widgetDeltaTop = deltaY\n        widgetDeltaHeight = -deltaY\n      }\n      if (!barPosition.includes(\"t\") && barPosition.includes(\"b\")) {\n        widgetDeltaHeight = deltaY\n      }\n\n      let widgetDeltaLeft = 0\n      let widgetDeltaWidth = 0\n      if (barPosition.includes(\"l\")) {\n        widgetDeltaLeft = deltaX\n        widgetDeltaWidth = -deltaX\n      }\n\n      if (!barPosition.includes(\"l\") && barPosition.includes(\"r\")) {\n        widgetDeltaWidth = deltaX\n      }\n\n      const resizeEffect = {\n        x: widgetDeltaLeft,\n        y: widgetDeltaTop,\n        w: widgetDeltaWidth,\n        h: widgetDeltaHeight,\n      }\n\n      const layoutInfoResult = {\n        ...currentLayoutInfo,\n        x: currentLayoutInfo.x + resizeEffect.x,\n        y: currentLayoutInfo.y + resizeEffect.y,\n        w: currentLayoutInfo.w + resizeEffect.w,\n        h: currentLayoutInfo.h + resizeEffect.h,\n      }\n\n      const fixedLayoutInfoResult = fixWidgetPosition(\n        layoutInfoResult,\n        layoutInfoResult.minH,\n        columnNumber,\n      )\n\n      const resizeDiff = {\n        x: fixedLayoutInfoResult.x - currentLayoutInfo.x,\n        y: fixedLayoutInfoResult.y - currentLayoutInfo.y,\n        w: fixedLayoutInfoResult.w - currentLayoutInfo.w,\n        h: fixedLayoutInfoResult.h - currentLayoutInfo.h,\n      }\n\n      if (resizeEffect.h && resizeEffect.h === -1 * resizeEffect.y) {\n        if (Math.abs(resizeDiff.y) < Math.abs(resizeDiff.h)) {\n          resizeDiff.h = -1 * resizeDiff.y\n        } else {\n          resizeDiff.y = -1 * resizeDiff.h\n        }\n      }\n\n      if (resizeEffect.w) {\n        if (resizeEffect.w === -1 * resizeEffect.x) {\n          if (Math.abs(resizeDiff.x) < Math.abs(resizeDiff.w)) {\n            resizeDiff.w = -1 * resizeDiff.x\n          } else {\n            resizeDiff.x = -1 * resizeDiff.w\n          }\n        } else {\n          if (!resizeEffect.x) {\n            resizeDiff.w += resizeDiff.x\n            resizeDiff.x = 0\n          }\n        }\n      }\n\n      const dragResult = {\n        x: currentLayoutInfo.x + resizeDiff.x,\n        y: currentLayoutInfo.y + resizeDiff.y,\n        w: currentLayoutInfo.w + resizeDiff.w,\n        h: currentLayoutInfo.h + resizeDiff.h,\n      }\n      const resizeResult = {\n        ...currentWidgetSnapShot,\n        layoutInfo: {\n          ...currentLayoutInfo,\n          ...dragResult,\n        },\n      }\n\n      dragHandlerInfo.dragResult = dragResult\n\n      sendShadowMessageHandler(\n        2,\n        parentNodeDisplayName,\n        [displayName],\n        0,\n        0,\n        0,\n        0,\n        dragResult.x,\n        dragResult.y,\n        dragResult.w,\n        dragResult.h,\n      )\n\n      throttleUpdateComponentPositionByReflow(resizeResult)\n    },\n    [throttleUpdateComponentPositionByReflow],\n  )\n\n  if (isActive && collectedProps.isDragging) {\n    updateComponentResizeInfo(\n      collectedProps.clientOffset ?? { x: 0, y: 0 },\n      collectedProps.item,\n    )\n  }\n}\n","import { SerializedStyles, css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\nimport { BarPosition } from \"./interface\"\n\nexport const applyBarPointerShapeStyle = (barPosition: BarPosition) => {\n  let barPositionStyle: SerializedStyles\n\n  switch (barPosition) {\n    case \"t\":\n      barPositionStyle = css`\n        left: 0;\n        right: 0;\n        margin: auto;\n        height: 5px;\n        width: 24px;\n      `\n      break\n    case \"b\":\n      barPositionStyle = css`\n        left: 0;\n        right: 0;\n        margin: auto;\n        height: 5px;\n        width: 24px;\n      `\n      break\n    case \"l\":\n      barPositionStyle = css`\n        bottom: 0;\n        top: 0;\n        margin: auto;\n        width: 5px;\n        height: 24px;\n      `\n      break\n    case \"r\":\n      barPositionStyle = css`\n        bottom: 0;\n        top: 0;\n        margin: auto;\n        width: 5px;\n        height: 24px;\n      `\n      break\n    default:\n      barPositionStyle = css``\n  }\n  return css`\n    ${barPositionStyle};\n    box-sizing: border-box;\n    position: absolute;\n    border-radius: 2.5px;\n    background-color: ${getColor(\"white\", \"01\")};\n  `\n}\n\nexport function applyBarHandlerStyle(\n  barPosition: BarPosition,\n): SerializedStyles {\n  let barPositionStyle: SerializedStyles\n  switch (barPosition) {\n    case \"t\":\n      barPositionStyle = css`\n        top: -3px;\n        left: 0;\n        right: 0;\n        height: 5px;\n        cursor: row-resize;\n      `\n      break\n    case \"b\":\n      barPositionStyle = css`\n        bottom: -3px;\n        left: 0;\n        right: 0;\n        height: 5px;\n        cursor: row-resize;\n      `\n      break\n    case \"l\":\n      barPositionStyle = css`\n        bottom: 0;\n        left: -3px;\n        top: 0;\n        width: 5px;\n        cursor: col-resize;\n      `\n      break\n    case \"r\":\n      barPositionStyle = css`\n        bottom: 0;\n        right: -3px;\n        top: 0;\n        cursor: col-resize;\n        width: 5px;\n      `\n      break\n    default:\n      barPositionStyle = css``\n  }\n\n  return css`\n    ${barPositionStyle};\n    position: absolute;\n  `\n}\n\nexport function applyBarPointerStyle(\n  barPosition: BarPosition,\n  isLimitedMode: boolean = false,\n): SerializedStyles {\n  let barPositionStyle: SerializedStyles =\n    applyBarPointerShapeStyle(barPosition)\n\n  const baseColor = isLimitedMode\n    ? getColor(\"techPink\", \"03\")\n    : getColor(\"techPurple\", \"03\")\n  return css`\n    ${barPositionStyle};\n    border: 1px solid ${baseColor};\n    :hover {\n      background-color: ${isLimitedMode\n        ? getColor(\"techPink\", \"03\")\n        : getColor(\"techPurple\", \"03\")};\n    }\n    :active {\n      background-color: ${isLimitedMode\n        ? getColor(\"techPink\", \"03\")\n        : getColor(\"techPurple\", \"03\")};\n    }\n  `\n}\n\nexport function applySquarePointerStyle(\n  pointerPosition: BarPosition,\n): SerializedStyles {\n  let positionStyle: SerializedStyles\n  switch (pointerPosition) {\n    case \"tl\":\n      positionStyle = css`\n        top: -3px;\n        left: -3px;\n        cursor: nwse-resize;\n      `\n      break\n    case \"tr\":\n      positionStyle = css`\n        cursor: nesw-resize;\n        top: -3px;\n        right: -3px;\n      `\n      break\n    case \"bl\":\n      positionStyle = css`\n        cursor: nesw-resize;\n        bottom: -3px;\n        left: -3px;\n      `\n      break\n    case \"br\":\n      positionStyle = css`\n        cursor: nwse-resize;\n        bottom: -3px;\n        right: -3px;\n      `\n      break\n    default:\n      positionStyle = css``\n      break\n  }\n\n  return css`\n    ${positionStyle};\n    box-sizing: border-box;\n    border: 1px solid ${getColor(\"techPurple\", \"03\")};\n    height: 5px;\n    width: 5px;\n    position: absolute;\n    background: ${getColor(\"white\", \"01\")};\n    z-index: 150;\n    &:active {\n      background: ${getColor(\"techPurple\", \"03\")};\n    }\n\n    &:hover {\n      background: ${getColor(\"techPurple\", \"03\")};\n    }\n  `\n}\n","import { FC, memo } from \"react\"\nimport { RESIZE_DIRECTION } from \"@/widgetLibrary/interface\"\nimport { useResizeStart } from \"./hooks\"\nimport { PartResizeHandlerProps, ResizeHandlerProps } from \"./interface\"\nimport {\n  applyBarHandlerStyle,\n  applyBarPointerStyle,\n  applySquarePointerStyle,\n} from \"./style\"\n\nconst TopLeftResizeHandler = memo<PartResizeHandlerProps>(\n  (props: PartResizeHandlerProps) => {\n    const { displayName } = props\n    const [, dragRef] = useResizeStart(\"tl\", displayName)\n    return <div css={applySquarePointerStyle(\"tl\")} ref={dragRef} />\n  },\n)\nTopLeftResizeHandler.displayName = \"TopLeftResizeHandler\"\n\nconst TopRightResizeHandler = memo<PartResizeHandlerProps>(\n  (props: PartResizeHandlerProps) => {\n    const { displayName } = props\n    const [, dragRef] = useResizeStart(\"tr\", displayName)\n\n    return <div css={applySquarePointerStyle(\"tr\")} ref={dragRef} />\n  },\n)\nTopRightResizeHandler.displayName = \"TopRightResizeHandler\"\n\nconst BottomLeftResizeHandler = memo<PartResizeHandlerProps>(\n  (props: PartResizeHandlerProps) => {\n    const { displayName } = props\n    const [, dragRef] = useResizeStart(\"bl\", displayName)\n\n    return <div css={applySquarePointerStyle(\"bl\")} ref={dragRef} />\n  },\n)\nBottomLeftResizeHandler.displayName = \"BottomLeftResizeHandler\"\n\nconst BottomRightResizeHandler = memo<PartResizeHandlerProps>(\n  (props: PartResizeHandlerProps) => {\n    const { displayName } = props\n    const [, dragRef] = useResizeStart(\"br\", displayName)\n\n    return <div css={applySquarePointerStyle(\"br\")} ref={dragRef} />\n  },\n)\nBottomRightResizeHandler.displayName = \"BottomRightResizeHandler\"\n\nconst TopResizeHandler = memo<PartResizeHandlerProps>(\n  (props: PartResizeHandlerProps) => {\n    const { displayName } = props\n    const [, dragRef] = useResizeStart(\"t\", displayName)\n\n    return (\n      <div css={applyBarHandlerStyle(\"t\")} ref={dragRef}>\n        <div className=\"handler\" css={applyBarPointerStyle(\"t\")} />\n      </div>\n    )\n  },\n)\nTopResizeHandler.displayName = \"TopResizeHandler\"\n\nconst BottomResizeHandler = memo<PartResizeHandlerProps>(\n  (props: PartResizeHandlerProps) => {\n    const { displayName } = props\n    const [, dragRef] = useResizeStart(\"b\", displayName)\n\n    return (\n      <div css={applyBarHandlerStyle(\"b\")} ref={dragRef}>\n        <div className=\"handler\" css={applyBarPointerStyle(\"b\")} />\n      </div>\n    )\n  },\n)\nBottomResizeHandler.displayName = \"BottomResizeHandler\"\n\nconst LeftResizeHandler = memo<PartResizeHandlerProps>(\n  (props: PartResizeHandlerProps) => {\n    const { displayName } = props\n    const [, dragRef] = useResizeStart(\"l\", displayName)\n\n    return (\n      <div css={applyBarHandlerStyle(\"l\")} ref={dragRef}>\n        <div className=\"handler\" css={applyBarPointerStyle(\"l\")} />\n      </div>\n    )\n  },\n)\nLeftResizeHandler.displayName = \"LeftResizeHandler\"\n\nconst RightResizeHandler = memo<PartResizeHandlerProps>(\n  (props: PartResizeHandlerProps) => {\n    const { displayName } = props\n    const [, dragRef] = useResizeStart(\"r\", displayName)\n\n    return (\n      <div css={applyBarHandlerStyle(\"r\")} ref={dragRef}>\n        <div className=\"handler\" css={applyBarPointerStyle(\"r\")} />\n      </div>\n    )\n  },\n)\nRightResizeHandler.displayName = \"RightResizeHandler\"\n\nconst ResizeHandler: FC<ResizeHandlerProps> = (props) => {\n  const { resizeDirection, displayName } = props\n\n  return (\n    <div className=\"resize-handler-container\">\n      {resizeDirection === RESIZE_DIRECTION.ALL && (\n        <TopLeftResizeHandler displayName={displayName} />\n      )}\n      {resizeDirection !== RESIZE_DIRECTION.HORIZONTAL && (\n        <TopResizeHandler displayName={displayName} />\n      )}\n      {resizeDirection === RESIZE_DIRECTION.ALL && (\n        <TopRightResizeHandler displayName={displayName} />\n      )}\n      {resizeDirection !== RESIZE_DIRECTION.VERTICAL && (\n        <LeftResizeHandler displayName={displayName} />\n      )}\n      {resizeDirection !== RESIZE_DIRECTION.VERTICAL && (\n        <RightResizeHandler displayName={displayName} />\n      )}\n      {resizeDirection === RESIZE_DIRECTION.ALL && (\n        <BottomLeftResizeHandler displayName={displayName} />\n      )}\n      {resizeDirection !== RESIZE_DIRECTION.HORIZONTAL && (\n        <BottomResizeHandler displayName={displayName} />\n      )}\n      {resizeDirection === RESIZE_DIRECTION.ALL && (\n        <BottomRightResizeHandler displayName={displayName} />\n      )}\n    </div>\n  )\n}\n\nResizeHandler.displayName = \"ResizeHandler\"\n\nexport default memo(ResizeHandler)\n","import { css } from \"@emotion/react\"\nimport { getWrapperBorder } from \"../../style\"\n\nexport const resizingContainerStyle = (\n  shapeInfo: {\n    width: number\n    height: number\n    minWidth: number\n    minHeight: number\n  },\n  borderInfo: {\n    isLikeProductionMode: boolean\n    isSelected: boolean\n    hasEditors: boolean\n    isHover: boolean\n    isDragging: boolean\n    shownDot: boolean\n  },\n) => {\n  const { width, height, minHeight, minWidth } = shapeInfo\n  const {\n    isLikeProductionMode: isLikProductionMode,\n    isSelected,\n    hasEditors,\n    isHover,\n    isDragging,\n    shownDot,\n  } = borderInfo\n  return css`\n    width: ${width}px;\n    height: ${height}px;\n    min-width: ${minWidth}px;\n    min-height: ${minHeight}px;\n    position: relative;\n    ${getWrapperBorder(\n      isLikProductionMode,\n      isSelected,\n      hasEditors,\n      isHover,\n      isDragging,\n      shownDot,\n    )}\n  `\n}\n\nexport const resizingPlaceholderStyle = css`\n  background-color: rgba(101, 74, 236, 0.1);\n  width: 100%;\n  height: 100%;\n`\n","import { ILLA_MIXPANEL_EVENT_TYPE } from \"@illa-public/mixpanel-utils\"\nimport { getCurrentUserId } from \"@illa-public/user-data\"\nimport { klona } from \"klona\"\nimport { get } from \"lodash-es\"\nimport { FC, MouseEvent, useCallback, useContext, useMemo } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { DropList, DropListItem, Dropdown } from \"@illa-design/react\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { AutoHeightWithLimitedContainer } from \"@/page/App/components/ScaleSquare/components/AutoHeightWithLimitedContainer\"\nimport { DEFAULT_MIN_COLUMN } from \"@/page/App/components/ScaleSquare/constant/widget\"\nimport {\n  getHoveredComponents,\n  getIsILLAEditMode,\n  getIsLikeProductMode,\n  getSelectedComponentDisplayNames,\n  isShowDot,\n} from \"@/redux/config/configSelector\"\nimport { configActions } from \"@/redux/config/configSlice\"\nimport {\n  getComponentAttachUsers,\n  getTargetCurrentUsersExpendMe,\n} from \"@/redux/currentApp/collaborators/collaboratorsSelector\"\nimport { getComponentDisplayNameMapDepth } from \"@/redux/currentApp/components/componentsSelector\"\nimport { getFirstDragShadowInfo } from \"@/redux/currentApp/dragShadow/dragShadowSelector\"\nimport {\n  getExecutionError,\n  getExecutionResult,\n  getIsDragging,\n  getResizingComponentIDs,\n} from \"@/redux/currentApp/executionTree/executionSelector\"\nimport { getClientWidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoSelector\"\nimport store from \"@/store\"\nimport { CopyManager } from \"@/utils/copyManager\"\nimport { FocusManager } from \"@/utils/focusManager\"\nimport { trackInEditor } from \"@/utils/mixpanelHelper\"\nimport { ShortCutContext } from \"@/utils/shortcut/shortcutProvider\"\nimport { isMAC } from \"@/utils/userAgent\"\nimport { RESIZE_DIRECTION } from \"@/widgetLibrary/interface\"\nimport { widgetBuilder } from \"@/widgetLibrary/widgetBuilder\"\nimport { useMouseHover } from \"../../utils/useMouseHover\"\nimport { DragContainer } from \"../DragContainer\"\nimport { MoveBar } from \"../MoveBar/moveBar\"\nimport { PositionContainer } from \"../PositionContainer\"\nimport ResizeHandler from \"./ResizeHandler\"\nimport { ResizingAndDragContainerProps } from \"./interface\"\nimport { resizingContainerStyle, resizingPlaceholderStyle } from \"./style\"\n\nexport const ResizingAndDragContainer: FC<ResizingAndDragContainerProps> = (\n  props,\n) => {\n  const {\n    unitW,\n    displayName,\n    children,\n    widgetHeight,\n    widgetTop,\n    widgetLeft,\n    widgetWidth,\n    widgetType,\n    columnNumber,\n    parentNodeDisplayName,\n  } = props\n\n  const { t } = useTranslation()\n  const shortcut = useContext(ShortCutContext)\n  const firstDragShadow = useSelector(getFirstDragShadowInfo)\n\n  const isResizingWithOthers = firstDragShadow.some((dragShadow) => {\n    return dragShadow?.displayNames?.includes(displayName)\n  })\n\n  const isEditMode = useSelector(getIsILLAEditMode)\n  const selectedComponents = useSelector(getSelectedComponentDisplayNames)\n  const executionResult = useSelector(getExecutionResult)\n  const layoutInfoResult = useSelector(getClientWidgetLayoutInfo)\n  const currentWidgetLayoutInfo = layoutInfoResult[displayName]\n  const currentWidgetProps = get(executionResult, displayName, {})\n  const isShownDot = useSelector(isShowDot)\n  const isDraggingStateInGlobal = useSelector(getIsDragging)\n\n  const isAutoLimitedMode =\n    get(currentWidgetProps, `dynamicHeight`, \"fixed\") === \"limited\"\n\n  const isSelected = useMemo(() => {\n    return selectedComponents.some((currentDisplayName) => {\n      return displayName === currentDisplayName\n    })\n  }, [displayName, selectedComponents])\n\n  const { handleMouseEnter, handleMouseLeave } = useMouseHover()\n  const dispatch = useDispatch()\n  const currentUserID = useSelector(getCurrentUserId)\n  const errors = useSelector(getExecutionError)\n  const hasError = useMemo(() => {\n    const keys = Object.keys(errors)\n    return (\n      keys.length > 0 &&\n      keys.some((key) => {\n        return (\n          Array.isArray(errors[key]) &&\n          errors[key].length > 0 &&\n          key.startsWith(displayName)\n        )\n      })\n    )\n  }, [displayName, errors])\n  const resizingIDs = useSelector(getResizingComponentIDs)\n  const isResizingCurrent = resizingIDs.includes(displayName)\n  const isGlobalResizing = resizingIDs.length > 0\n  const canDrag = widgetType !== \"MODAL_WIDGET\"\n\n  const resizeDirection = useMemo(() => {\n    const direction =\n      currentWidgetProps.resizeDirection ??\n      widgetBuilder(currentWidgetProps.$widgetType)?.config?.resizeDirection\n    return direction || RESIZE_DIRECTION.ALL\n  }, [currentWidgetProps.$widgetType, currentWidgetProps.resizeDirection])\n\n  const hoveredComponents = useSelector(getHoveredComponents)\n  const isMouseOver =\n    hoveredComponents[hoveredComponents.length - 1] === displayName\n\n  const isLikeProductionMode = useSelector(getIsLikeProductMode)\n  const attachedUsers = useSelector(getComponentAttachUsers)\n\n  const componentsAttachedUsers = useMemo(() => {\n    return getTargetCurrentUsersExpendMe(\n      attachedUsers,\n      displayName,\n      currentUserID,\n    )\n  }, [attachedUsers, currentUserID, displayName])\n\n  const handleOnSelection = (e: MouseEvent<HTMLDivElement>) => {\n    const rootState = store.getState()\n    const isEditMode = getIsILLAEditMode(rootState)\n    if (isGlobalResizing || !isEditMode) return\n    const displayNameMapDepth = getComponentDisplayNameMapDepth(rootState)\n    const widgetExecutionLayoutInfo = getClientWidgetLayoutInfo(rootState)\n    FocusManager.switchFocus(\"canvas\", {\n      displayName: displayName,\n      type: \"component\",\n      clickPosition: [],\n    })\n\n    e.stopPropagation()\n\n    trackInEditor(ILLA_MIXPANEL_EVENT_TYPE.SELECT, {\n      element: \"component\",\n      parameter1: \"click\",\n    })\n\n    if ((isMAC() && e.metaKey) || e.shiftKey || (!isMAC() && e.ctrlKey)) {\n      let currentSelectedDisplayName = klona(selectedComponents)\n      const index = currentSelectedDisplayName.findIndex(\n        (currentDisplayName) => displayName === currentDisplayName,\n      )\n      if (index !== -1) {\n        currentSelectedDisplayName.splice(index, 1)\n      } else {\n        currentSelectedDisplayName.push(displayName)\n      }\n\n      const depths = currentSelectedDisplayName.map((displayName) => {\n        return displayNameMapDepth[displayName]\n      })\n      let isEqual = depths.every((depth) => depth === depths[0])\n      if (!isEqual) {\n        return\n      }\n      if (currentSelectedDisplayName.length > 1) {\n        const firstParentNode =\n          widgetExecutionLayoutInfo[currentSelectedDisplayName[0]].parentNode\n        const isSameParentNode = currentSelectedDisplayName.every(\n          (displayName) => {\n            const parentNode = widgetExecutionLayoutInfo[displayName].parentNode\n            return parentNode === firstParentNode\n          },\n        )\n        if (!isSameParentNode) {\n          const lastParentNode =\n            widgetExecutionLayoutInfo[\n              currentSelectedDisplayName[currentSelectedDisplayName.length - 1]\n            ].parentNode\n          currentSelectedDisplayName = currentSelectedDisplayName.filter(\n            (displayName) => {\n              const currentParentNode =\n                widgetExecutionLayoutInfo[displayName].parentNode\n              return lastParentNode === currentParentNode\n            },\n          )\n        }\n      }\n      currentSelectedDisplayName = Array.from(\n        new Set(currentSelectedDisplayName),\n      )\n      dispatch(\n        configActions.updateSelectedComponent(currentSelectedDisplayName),\n      )\n      return\n    }\n\n    dispatch(configActions.updateSelectedComponent([displayName]))\n  }\n\n  const handleContextMenu = useCallback(\n    (e: MouseEvent<HTMLDivElement>) => {\n      FocusManager.switchFocus(\"canvas\", {\n        displayName: displayName,\n        type: \"component\",\n        clickPosition: [],\n      })\n      e.stopPropagation()\n      dispatch(configActions.updateSelectedComponent([displayName]))\n    },\n    [displayName, dispatch],\n  )\n\n  return !isResizingWithOthers ? (\n    <>\n      <PositionContainer x={widgetLeft} y={widgetTop} displayName={displayName}>\n        <Dropdown\n          disabled={!isEditMode}\n          position=\"right-start\"\n          trigger=\"contextmenu\"\n          dropList={\n            <DropList w=\"184px\">\n              <DropListItem\n                value=\"duplicate\"\n                title={t(\"editor.context_menu.duplicate\")}\n                onClick={() => {\n                  CopyManager.copyComponentNodeByDisplayName([displayName])\n                  CopyManager.paste(\"duplicate\")\n                }}\n              />\n              <DropListItem\n                deleted\n                value=\"delete\"\n                title={t(\"editor.context_menu.delete\")}\n                onClick={() => {\n                  shortcut.showDeleteDialog([displayName], \"widget\", {\n                    source: \"manage_delete\",\n                  })\n                }}\n              />\n            </DropList>\n          }\n          onVisibleChange={(visible) => {\n            if (visible) {\n              trackInEditor(ILLA_MIXPANEL_EVENT_TYPE.SHOW, {\n                element: \"component_management_canvas\",\n                parameter1: widgetType,\n              })\n            }\n          }}\n        >\n          <div\n            data-displayname={displayName}\n            data-parentnode={parentNodeDisplayName}\n            onMouseEnter={handleMouseEnter}\n            onMouseLeave={handleMouseLeave}\n            onClick={handleOnSelection}\n            onContextMenu={handleContextMenu}\n            css={resizingContainerStyle(\n              {\n                width: widgetWidth,\n                height: widgetHeight,\n                minWidth: DEFAULT_MIN_COLUMN * unitW,\n                minHeight:\n                  (currentWidgetLayoutInfo?.layoutInfo.minH ?? 3) * UNIT_HEIGHT,\n              },\n              {\n                isLikeProductionMode,\n                isSelected,\n                hasEditors: componentsAttachedUsers.length > 0,\n                isHover: isMouseOver,\n                isDragging: false,\n                shownDot: isShownDot,\n              },\n            )}\n          >\n            <DragContainer\n              displayName={displayName}\n              parentNodeDisplayName={parentNodeDisplayName}\n              canDrag={canDrag}\n              unitWidth={unitW}\n              columnNumber={columnNumber}\n            >\n              {!isLikeProductionMode &&\n                (isSelected ||\n                  isMouseOver ||\n                  componentsAttachedUsers.length > 0 ||\n                  isShownDot) && (\n                  <MoveBar\n                    isError={hasError}\n                    displayName={displayName}\n                    maxWidth={widgetWidth}\n                    widgetTop={widgetTop}\n                    widgetType={widgetType}\n                    userList={componentsAttachedUsers}\n                    columnNumber={columnNumber}\n                  />\n                )}\n              {isResizingCurrent ? (\n                <div css={resizingPlaceholderStyle} />\n              ) : (\n                <>\n                  {children}\n                  {isEditMode &&\n                    isSelected &&\n                    !isDraggingStateInGlobal &&\n                    isAutoLimitedMode && (\n                      <AutoHeightWithLimitedContainer\n                        containerHeight={widgetHeight}\n                        displayName={displayName}\n                      />\n                    )}\n                </>\n              )}\n            </DragContainer>\n            {isSelected && !isLikeProductionMode && (\n              <ResizeHandler\n                resizeDirection={resizeDirection}\n                displayName={displayName}\n              />\n            )}\n          </div>\n        </Dropdown>\n      </PositionContainer>\n    </>\n  ) : null\n}\n","import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\nimport { WIDGET_PADDING } from \"@/page/App/components/ScaleSquare/constant/widget\"\n\nexport const hoverHotSpotStyle = css`\n  width: 100%;\n  height: 100%;\n`\n\nexport const applyWrapperPendingStyle = ({\n  isSelected,\n  hasError,\n  isEditor,\n  isLimitedModeAndOverLap = false,\n}: {\n  isSelected: boolean\n  hasError: boolean\n  isEditor: boolean\n  isLimitedModeAndOverLap: boolean\n}) => css`\n  width: 100%;\n  height: 100%;\n  padding: ${WIDGET_PADDING}px;\n  background-color: ${isEditor && hasError && !isSelected\n    ? getColor(\"red\", \"08\")\n    : \"transparent\"};\n  ${isLimitedModeAndOverLap && isSelected\n    ? `border-bottom:unset !important`\n    : \"\"}\n  ${isEditor && \"cursor: move\"}\n`\n","import { get } from \"lodash-es\"\nimport { FC, memo, useMemo } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport {\n  getIsILLAEditMode,\n  getSelectedComponentDisplayNames,\n} from \"@/redux/config/configSelector\"\nimport {\n  getExecutionError,\n  getExecutionResult,\n} from \"@/redux/currentApp/executionTree/executionSelector\"\nimport { WrapperContainerProps } from \"./interface\"\nimport { applyWrapperPendingStyle, hoverHotSpotStyle } from \"./style\"\n\nconst WrapperContainer: FC<WrapperContainerProps> = (props) => {\n  const { displayName, widgetHeight, children } = props\n  const executionResult = useSelector(getExecutionResult)\n\n  const selectedComponents = useSelector(getSelectedComponentDisplayNames)\n  const isEditMode = useSelector(getIsILLAEditMode)\n  const errors = useSelector(getExecutionError)\n\n  const isSelected = useMemo(() => {\n    return selectedComponents.some((currentDisplayName) => {\n      return displayName === currentDisplayName\n    })\n  }, [displayName, selectedComponents])\n\n  const realProps: Record<string, any> = get(executionResult, displayName, {})\n  const hasError = useMemo(() => {\n    const keys = Object.keys(errors)\n    return (\n      keys.length > 0 &&\n      keys.some((key) => {\n        return (\n          Array.isArray(errors[key]) &&\n          errors[key].length > 0 &&\n          key.startsWith(displayName)\n        )\n      })\n    )\n  }, [displayName, errors])\n\n  const isAutoLimitedMode = realProps?.dynamicHeight === \"limited\"\n  const isOverLap =\n    isAutoLimitedMode &&\n    (realProps?.dynamicMaxHeight === widgetHeight ||\n      realProps?.dynamicMinHeight === widgetHeight)\n\n  return (\n    <div css={hoverHotSpotStyle}>\n      <div\n        css={applyWrapperPendingStyle({\n          hasError,\n          isSelected,\n          isEditor: isEditMode,\n          isLimitedModeAndOverLap: isOverLap,\n        })}\n      >\n        {children}\n      </div>\n    </div>\n  )\n}\n\nWrapperContainer.displayName = \"WrapperContainer\"\n\nexport default memo(WrapperContainer)\n","import { ComponentTreeNode } from \"@illa-public/public-types\"\nimport { get } from \"lodash-es\"\nimport { useMemo } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { getClientWidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoSelector\"\nimport store from \"@/store\"\n\nexport const getRealShapeAndPosition = (\n  componentNode: ComponentTreeNode,\n  unitW: number,\n  displayNamePrefix?: string,\n) => {\n  const rootState = store.getState()\n  const executionResult = getClientWidgetLayoutInfo(rootState)\n  let realDisplayName = componentNode.displayName\n  if (displayNamePrefix) {\n    realDisplayName = realDisplayName.replace(displayNamePrefix, \"\")\n  }\n  const widgetLayoutInfo = get(executionResult, realDisplayName, undefined)\n  if (!widgetLayoutInfo) {\n    return {\n      x: -1,\n      y: -1,\n      w: -1,\n      h: -1,\n    }\n  }\n  const layoutInfo = widgetLayoutInfo.layoutInfo\n  const {\n    x: propsPositionX,\n    y: propsPositionY,\n    w: sharpeW,\n    h: sharpeH,\n  } = layoutInfo\n  const x = (propsPositionX || componentNode.x) * unitW\n  const y = (propsPositionY || componentNode.y) * UNIT_HEIGHT\n  const w = (sharpeW || componentNode.w) * unitW\n  const h = (sharpeH || componentNode.h) * UNIT_HEIGHT\n  return {\n    x,\n    y,\n    w,\n    h,\n  }\n}\n\nexport const useGetRealShapeAndPosition = (\n  displayName: string,\n  unitW: number,\n  displayNamePrefix?: string,\n) => {\n  const layoutInfos = useSelector(getClientWidgetLayoutInfo)\n\n  const result = useMemo(() => {\n    let realDisplayName = displayName\n    if (displayNamePrefix) {\n      realDisplayName = realDisplayName.replace(displayNamePrefix, \"\")\n    }\n    const widgetLayoutInfo = get(layoutInfos, realDisplayName, undefined)\n    if (!widgetLayoutInfo) {\n      return {\n        left: -1,\n        top: -1,\n        width: -1,\n        height: -1,\n      }\n    }\n    const layoutInfo = widgetLayoutInfo.layoutInfo\n    const {\n      x: propsPositionX,\n      y: propsPositionY,\n      w: sharpeW,\n      h: sharpeH,\n    } = layoutInfo\n    return {\n      left: propsPositionX * unitW,\n      top: propsPositionY * UNIT_HEIGHT,\n      width: sharpeW * unitW,\n      height: sharpeH * UNIT_HEIGHT,\n    }\n  }, [displayName, displayNamePrefix, layoutInfos, unitW])\n\n  return result\n}\n","import { FC, memo, useMemo } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport {\n  getIsILLAEditMode,\n  getSelectedComponentDisplayNames,\n} from \"@/redux/config/configSelector\"\nimport { TransformWidgetWrapper } from \"@/widgetLibrary/PublicSector/TransformWidgetWrapper\"\nimport { AutoHeightWithLimitedContainer } from \"./components/AutoHeightWithLimitedContainer\"\nimport { ResizingAndDragContainer } from \"./components/ResizingAndDragContainer\"\nimport WrapperContainer from \"./components/WrapperContainer\"\nimport { ScaleSquareProps } from \"./interface\"\nimport { useGetRealShapeAndPosition } from \"./utils/getRealShapeAndPosition\"\n\nconst ScaleSquare: FC<ScaleSquareProps> = (props) => {\n  const {\n    unitW,\n    displayName,\n    parentNodeDisplayName,\n    widgetType,\n    columnNumber,\n  } = props\n  const { width, height, left, top } = useGetRealShapeAndPosition(\n    displayName,\n    unitW,\n  )\n\n  const canDrag = widgetType !== \"MODAL_WIDGET\"\n\n  const isEditMode = useSelector(getIsILLAEditMode)\n  const selectedComponents = useSelector(getSelectedComponentDisplayNames)\n  const isSelected = useMemo(() => {\n    return selectedComponents.some((currentDisplayName) => {\n      return displayName === currentDisplayName\n    })\n  }, [displayName, selectedComponents])\n\n  return (\n    <ResizingAndDragContainer\n      displayName={displayName}\n      unitW={unitW}\n      widgetHeight={height}\n      widgetWidth={width}\n      widgetTop={canDrag ? top : 0}\n      widgetLeft={canDrag ? left : 0}\n      parentNodeDisplayName={parentNodeDisplayName}\n      widgetType={widgetType}\n      columnNumber={columnNumber}\n    >\n      <WrapperContainer displayName={displayName} widgetHeight={height}>\n        <TransformWidgetWrapper\n          displayName={displayName}\n          widgetType={widgetType}\n          parentNodeDisplayName={parentNodeDisplayName}\n          columnNumber={columnNumber}\n        />\n      </WrapperContainer>\n      {isEditMode && selectedComponents?.length === 1 && isSelected && (\n        <AutoHeightWithLimitedContainer\n          containerHeight={width}\n          displayName={displayName}\n        />\n      )}\n    </ResizingAndDragContainer>\n  )\n}\n\nexport default memo(ScaleSquare)\n\nScaleSquare.displayName = \"NewScaleSquare\"\n","import { ScaleSquareType } from \"@/page/App/components/ScaleSquare/interface\"\nimport {\n  applyBarHandlerStyle,\n  applyBarPointerStyle,\n  applySquarePointerStyle,\n} from \"@/page/App/components/ScaleSquare/style\"\nimport { RESIZE_DIRECTION } from \"@/widgetLibrary/interface\"\n\nexport const getScaleSquareState = (hasError: boolean, isEditMode: boolean) => {\n  if (isEditMode) {\n    return hasError ? \"error\" : \"normal\"\n  }\n  return \"production\"\n}\n\nexport const getResizeHandler = (\n  resizeDirection: RESIZE_DIRECTION,\n  isSelected: boolean,\n  scaleSquareState: ScaleSquareType,\n) => {\n  switch (resizeDirection) {\n    case RESIZE_DIRECTION.HORIZONTAL: {\n      return {\n        right: (\n          <div css={applyBarHandlerStyle(isSelected, scaleSquareState, \"r\")}>\n            <div\n              className=\"handler\"\n              css={applyBarPointerStyle(isSelected, scaleSquareState, \"r\")}\n            />\n          </div>\n        ),\n        left: (\n          <div css={applyBarHandlerStyle(isSelected, scaleSquareState, \"l\")}>\n            <div\n              className=\"handler\"\n              css={applyBarPointerStyle(isSelected, scaleSquareState, \"l\")}\n            />\n          </div>\n        ),\n      }\n    }\n    case RESIZE_DIRECTION.VERTICAL: {\n      return {\n        top: (\n          <div css={applyBarHandlerStyle(isSelected, scaleSquareState, \"t\")}>\n            <div\n              className=\"handler\"\n              css={applyBarPointerStyle(isSelected, scaleSquareState, \"t\")}\n            />\n          </div>\n        ),\n        bottom: (\n          <div css={applyBarHandlerStyle(isSelected, scaleSquareState, \"b\")}>\n            <div\n              className=\"handler\"\n              css={applyBarPointerStyle(isSelected, scaleSquareState, \"b\")}\n            />\n          </div>\n        ),\n      }\n    }\n    case RESIZE_DIRECTION.ALL:\n    default: {\n      return {\n        topLeft: (\n          <div\n            css={applySquarePointerStyle(isSelected, scaleSquareState, \"tl\")}\n          />\n        ),\n        top: (\n          <div css={applyBarHandlerStyle(isSelected, scaleSquareState, \"t\")}>\n            <div\n              className=\"handler\"\n              css={applyBarPointerStyle(isSelected, scaleSquareState, \"t\")}\n            />\n          </div>\n        ),\n        topRight: (\n          <div\n            css={applySquarePointerStyle(isSelected, scaleSquareState, \"tr\")}\n          />\n        ),\n        right: (\n          <div css={applyBarHandlerStyle(isSelected, scaleSquareState, \"r\")}>\n            <div\n              className=\"handler\"\n              css={applyBarPointerStyle(isSelected, scaleSquareState, \"r\")}\n            />\n          </div>\n        ),\n        bottomRight: (\n          <div\n            css={applySquarePointerStyle(isSelected, scaleSquareState, \"br\")}\n          />\n        ),\n        bottom: (\n          <div css={applyBarHandlerStyle(isSelected, scaleSquareState, \"b\")}>\n            <div\n              className=\"handler\"\n              css={applyBarPointerStyle(isSelected, scaleSquareState, \"b\")}\n            />\n          </div>\n        ),\n        bottomLeft: (\n          <div\n            css={applySquarePointerStyle(isSelected, scaleSquareState, \"bl\")}\n          />\n        ),\n        left: (\n          <div css={applyBarHandlerStyle(isSelected, scaleSquareState, \"l\")}>\n            <div\n              className=\"handler\"\n              css={applyBarPointerStyle(isSelected, scaleSquareState, \"l\")}\n            />\n          </div>\n        ),\n      }\n    }\n  }\n}\n","import { useMemo } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { getIsILLAEditMode } from \"@/redux/config/configSelector\"\nimport { getExecutionError } from \"@/redux/currentApp/executionTree/executionSelector\"\nimport { getScaleSquareState } from \"../components/ResizingAndDragContainer/utils\"\n\nexport const useScaleStateSelector = (displayName: string) => {\n  const errors = useSelector(getExecutionError)\n  const hasError = useMemo(() => {\n    const keys = Object.keys(errors)\n    return (\n      keys.length > 0 &&\n      keys.some((key) => {\n        return (\n          Array.isArray(errors[key]) &&\n          errors[key].length > 0 &&\n          key.startsWith(displayName)\n        )\n      })\n    )\n  }, [displayName, errors])\n\n  const isEditMode = useSelector(getIsILLAEditMode)\n\n  return getScaleSquareState(hasError, isEditMode)\n}\n","import { Resizable, ResizeCallback, ResizeStartCallback } from \"re-resizable\"\nimport { FC, useCallback, useMemo } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport {\n  getIsILLAEditMode,\n  getSelectedComponentDisplayNames,\n} from \"@/redux/config/configSelector\"\nimport { configActions } from \"@/redux/config/configSlice\"\nimport { componentsActions } from \"@/redux/currentApp/components/componentsSlice\"\nimport { getClientWidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoSelector\"\nimport { TransformWidgetWrapper } from \"@/widgetLibrary/PublicSector/TransformWidgetWrapper\"\nimport { RESIZE_DIRECTION } from \"@/widgetLibrary/interface\"\nimport { AutoHeightWithLimitedContainer } from \"./components/AutoHeightWithLimitedContainer\"\nimport { DragContainer } from \"./components/DragContainer\"\nimport { getResizeHandler } from \"./components/ResizingAndDragContainer/utils\"\nimport WrapperContainer from \"./components/WrapperContainer\"\nimport { DEFAULT_MIN_COLUMN } from \"./constant/widget\"\nimport { ScaleSquareProps } from \"./interface\"\nimport { modalstopPropagationContainerStyle } from \"./style\"\nimport { useGetRealShapeAndPosition } from \"./utils/getRealShapeAndPosition\"\nimport { useScaleStateSelector } from \"./utils/useScaleStateSelector\"\n\nexport const ModalScaleSquare: FC<ScaleSquareProps> = (props) => {\n  const {\n    unitW,\n    displayName,\n    parentNodeDisplayName,\n    widgetType,\n    columnNumber,\n  } = props\n  const { width, height } = useGetRealShapeAndPosition(displayName, unitW)\n\n  const dispatch = useDispatch()\n\n  const layoutInfoResult = useSelector(getClientWidgetLayoutInfo)\n  const currentWidgetLayoutInfo = layoutInfoResult[displayName]\n\n  const layoutInfo = currentWidgetLayoutInfo?.layoutInfo ?? {}\n\n  const canDrag = widgetType !== \"MODAL_WIDGET\"\n\n  const isEditMode = useSelector(getIsILLAEditMode)\n  const selectedComponents = useSelector(getSelectedComponentDisplayNames)\n  const isSelected = useMemo(() => {\n    return selectedComponents.some((currentDisplayName) => {\n      return displayName === currentDisplayName\n    })\n  }, [displayName, selectedComponents])\n\n  const scaleState = useScaleStateSelector(displayName)\n\n  const handleOnResizeStop: ResizeCallback = useCallback(\n    (e, dir, ref, delta) => {\n      let finalWidth = Math.round((width + delta.width) / unitW)\n      let finalHeight = Math.round((height + delta.height) / UNIT_HEIGHT)\n      finalWidth =\n        finalWidth < DEFAULT_MIN_COLUMN ? DEFAULT_MIN_COLUMN : finalWidth\n      finalHeight =\n        finalHeight < layoutInfo.minH ? layoutInfo.minH : finalHeight\n\n      dispatch(\n        componentsActions.updateComponentLayoutInfoReducer({\n          displayName,\n          layoutInfo: {\n            x: 0,\n            y: 0,\n            w: finalWidth,\n            h: finalHeight,\n          },\n          parentNode: parentNodeDisplayName,\n        }),\n      )\n      dispatch(configActions.setDraggingNodeIDsReducer([]))\n\n      dispatch(configActions.updateShowDot(false))\n    },\n    [\n      dispatch,\n      displayName,\n      height,\n      layoutInfo.minH,\n      parentNodeDisplayName,\n      unitW,\n      width,\n    ],\n  )\n\n  const handleResizeStart: ResizeStartCallback = useCallback(\n    (e) => {\n      e.preventDefault()\n      e.stopPropagation()\n      dispatch(configActions.setDraggingNodeIDsReducer([displayName]))\n\n      dispatch(configActions.updateShowDot(true))\n    },\n    [dispatch, displayName],\n  )\n\n  return (\n    <Resizable\n      bounds=\"parent\"\n      size={{\n        width,\n        height,\n      }}\n      minWidth={DEFAULT_MIN_COLUMN * unitW}\n      minHeight={currentWidgetLayoutInfo.layoutInfo.minH * UNIT_HEIGHT}\n      handleComponent={getResizeHandler(\n        RESIZE_DIRECTION.ALL,\n        isSelected,\n        scaleState,\n      )}\n      onResizeStart={handleResizeStart}\n      onResizeStop={handleOnResizeStop}\n    >\n      <div\n        css={modalstopPropagationContainerStyle}\n        onClick={(e) => e.stopPropagation()}\n      >\n        <DragContainer\n          displayName={displayName}\n          parentNodeDisplayName={parentNodeDisplayName}\n          canDrag={canDrag}\n          columnNumber={columnNumber}\n          unitWidth={unitW}\n        >\n          <WrapperContainer displayName={displayName} widgetHeight={height}>\n            <TransformWidgetWrapper\n              displayName={displayName}\n              widgetType={widgetType}\n              parentNodeDisplayName={parentNodeDisplayName}\n            />\n          </WrapperContainer>\n        </DragContainer>\n        {isEditMode && selectedComponents?.length === 1 && isSelected && (\n          <AutoHeightWithLimitedContainer\n            containerHeight={width}\n            displayName={displayName}\n          />\n        )}\n      </div>\n    </Resizable>\n  )\n}\n","import { FC, memo } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport ScaleSquare from \"@/page/App/components/ScaleSquare\"\nimport { ModalScaleSquare } from \"@/page/App/components/ScaleSquare/modalScaleSquare\"\nimport { getClientWidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoSelector\"\nimport { ComponentParserProps } from \"./interface\"\n\nconst ComponentParser: FC<ComponentParserProps> = (props) => {\n  const { displayName, unitW, parentNodeDisplayName, columnNumber } = props\n\n  const widgetLayoutInfo = useSelector(getClientWidgetLayoutInfo)\n  const currentWidgetLayoutInfo = widgetLayoutInfo[displayName]\n  const containerType = currentWidgetLayoutInfo.containerType\n  const widgetType = currentWidgetLayoutInfo.widgetType\n\n  switch (containerType) {\n    case \"EDITOR_SCALE_SQUARE\":\n      if (widgetType === \"MODAL_WIDGET\") {\n        return (\n          <ModalScaleSquare\n            displayName={displayName}\n            widgetType={widgetType}\n            unitW={unitW}\n            parentNodeDisplayName={parentNodeDisplayName}\n            columnNumber={columnNumber}\n          />\n        )\n      }\n\n      return (\n        <ScaleSquare\n          displayName={displayName}\n          widgetType={widgetType}\n          unitW={unitW}\n          parentNodeDisplayName={parentNodeDisplayName}\n          columnNumber={columnNumber}\n        />\n      )\n\n    default:\n      return null\n  }\n}\n\nComponentParser.displayName = \"ComponentParser\"\n\nexport default memo(ComponentParser)\n","import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\n\nexport const dragPreviewStyle = (\n  top: number,\n  left: number,\n  width: number,\n  height: number,\n  canDrop: boolean,\n) => css`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: ${width}px;\n  height: ${height}px;\n  transform: translate(${left}px, ${top - 1}px);\n  background-color: ${canDrop\n    ? `rgba(101, 74, 236, 0.1)`\n    : `rgba(255, 71, 71, 0.1)`};\n  border-top: 3px solid\n    ${canDrop ? getColor(\"techPurple\", \"03\") : getColor(\"red\", \"03\")};\n  z-index: 10;\n`\n","import { FC, memo } from \"react\"\nimport { useDragLayer } from \"react-dnd\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { getDragPreview } from \"@/page/App/components/DotPanel/utils/getDragShadow\"\nimport { DragInfo } from \"@/page/App/components/ScaleSquare/components/DragContainer/interface\"\nimport { DragCollectedProps, DragPreviewProps } from \"./interface\"\nimport { dragPreviewStyle } from \"./style\"\n\nconst DragPreview: FC<DragPreviewProps> = (props) => {\n  const { unitW, parentNodeDisplayName, columnNumber } = props\n\n  const collectedProps = useDragLayer<DragCollectedProps, DragInfo>(\n    (monitor) => {\n      return {\n        isDragging: monitor.isDragging(),\n        item: monitor.getItem(),\n        clientOffset: monitor.getClientOffset(),\n        differenceFromInitialOffset: monitor.getDifferenceFromInitialOffset(),\n        initialClientOffset: monitor.getInitialClientOffset(),\n        initialSourceClientOffset: monitor.getInitialSourceClientOffset(),\n      }\n    },\n  )\n\n  const mousePositionInfo = getDragPreview(\n    parentNodeDisplayName,\n    unitW,\n    collectedProps,\n    columnNumber,\n  )\n\n  if (!mousePositionInfo) return null\n  const { shape, canDrop } = mousePositionInfo\n  return (\n    <div\n      css={dragPreviewStyle(\n        shape.y * UNIT_HEIGHT,\n        shape.x * unitW,\n        shape.w * unitW,\n        shape.previewH * UNIT_HEIGHT,\n        canDrop,\n      )}\n    />\n  )\n}\n\nexport default memo(DragPreview)\n","import * as React from \"react\";\nconst SvgCursor = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 18, height: 22, viewBox: \"0 0 18 22\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"g\", { filter: \"url(#filter0_d_9287_1752)\" }, /* @__PURE__ */ React.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M3 18.7435V3L14.4141 14.422H7.48054L7.33185 14.5439L3 18.7435Z\", fill: \"white\" })), /* @__PURE__ */ React.createElement(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M3.98425 5.2627V16.2832L6.90566 13.4601L7.0631 13.3232L12.0184 13.3313L3.98425 5.2627Z\", fill: \"currentColor\" }), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"filter\", { id: \"filter0_d_9287_1752\", x: 1, y: 2, width: 15.4141, height: 19.7432, filterUnits: \"userSpaceOnUse\", colorInterpolationFilters: \"sRGB\" }, /* @__PURE__ */ React.createElement(\"feFlood\", { floodOpacity: 0, result: \"BackgroundImageFix\" }), /* @__PURE__ */ React.createElement(\"feColorMatrix\", { in: \"SourceAlpha\", type: \"matrix\", values: \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\", result: \"hardAlpha\" }), /* @__PURE__ */ React.createElement(\"feOffset\", { dy: 1 }), /* @__PURE__ */ React.createElement(\"feGaussianBlur\", { stdDeviation: 1 }), /* @__PURE__ */ React.createElement(\"feComposite\", { in2: \"hardAlpha\", operator: \"out\" }), /* @__PURE__ */ React.createElement(\"feColorMatrix\", { type: \"matrix\", values: \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0\" }), /* @__PURE__ */ React.createElement(\"feBlend\", { mode: \"normal\", in2: \"BackgroundImageFix\", result: \"effect1_dropShadow_9287_1752\" }), /* @__PURE__ */ React.createElement(\"feBlend\", { mode: \"normal\", in: \"SourceGraphic\", in2: \"effect1_dropShadow_9287_1752\", result: \"shape\" }))));\nexport default SvgCursor;\n","import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\n\nexport const nickNameContainerStyle = (bgColor: string) => css`\n  min-width: 32px;\n  max-width: 102px;\n  padding: 4px 8px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  background-color: ${bgColor};\n  border: 1px solid ${getColor(\"white\", \"01\")};\n  border-radius: 4px;\n  color: ${getColor(\"white\", \"01\")};\n  font-size: 12px;\n  font-weight: 500;\n`\n\nexport const applyCursorContainerStyle = (color: string) => css`\n  color: ${color};\n  z-index: 10;\n  position: absolute;\n  user-select: none;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n`\n","import { getColorByString } from \"@illa-public/utils\"\nimport { AnimatePresence, motion } from \"framer-motion\"\nimport { FC, useCallback, useEffect } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { useDispatch } from \"react-redux\"\nimport CursorIcon from \"@/assets/public/cursor.svg?react\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { cursorActions } from \"@/redux/currentApp/cursor/cursorSlice\"\nimport { CursorProps, NickNameContainerProps } from \"./interface\"\nimport { applyCursorContainerStyle, nickNameContainerStyle } from \"./style\"\n\nexport const Cursor: FC<CursorProps> = (props) => {\n  const {\n    userID,\n    nickName,\n    integerPartX,\n    integerPartY,\n    decimalPartX,\n    decimalPartY,\n    unitW,\n    status,\n  } = props\n\n  const realX = (integerPartX + decimalPartX) * unitW\n  const realY = integerPartY + decimalPartY\n  const color = getColorByString(userID)\n  const dispatch = useDispatch()\n  const { t } = useTranslation()\n\n  const onAnimationComplete = useCallback(() => {\n    dispatch(cursorActions.removeAnimationEndCursorInfo(userID))\n  }, [dispatch, userID])\n  const isLeave = status === -1\n\n  useEffect(() => {\n    if (isLeave) {\n      dispatch(cursorActions.leaveContainerReducer(userID))\n    }\n  }, [dispatch, isLeave, userID])\n\n  return (\n    <AnimatePresence>\n      <motion.span\n        css={applyCursorContainerStyle(color)}\n        initial={{ x: realX - 6, y: realY - 8.5 }}\n        animate={{ x: realX - 6, y: realY - 8.5 }}\n        transition={{ duration: 0.16 }}\n        onAnimationComplete={onAnimationComplete}\n      >\n        <CursorIcon />\n        <NickNameContainer\n          nickName={\n            nickName?.trim() !== \"\"\n              ? nickName\n              : t(\"widget.collaborative.no_name\")\n          }\n          bgColor={color}\n        />\n      </motion.span>\n    </AnimatePresence>\n  )\n}\n\nexport const NickNameContainer: FC<NickNameContainerProps> = (props) => {\n  const { nickName, bgColor } = props\n  return <div css={nickNameContainerStyle(bgColor)}>{nickName}</div>\n}\n\nexport const FixedCursor: FC<CursorProps> = (props) => {\n  const {\n    userID,\n    nickName,\n    integerPartX,\n    integerPartY,\n    decimalPartX,\n    decimalPartY,\n    unitW,\n  } = props\n\n  const realX = (integerPartX + decimalPartX) * unitW\n  const realY = (integerPartY + decimalPartY) * UNIT_HEIGHT\n  const color = getColorByString(userID)\n  const { t } = useTranslation()\n\n  return (\n    <AnimatePresence>\n      <motion.span\n        css={applyCursorContainerStyle(color)}\n        initial={{ x: realX, y: realY }}\n        animate={{ x: realX, y: realY }}\n        transition={{ duration: 0.16 }}\n      >\n        <CursorIcon />\n        <NickNameContainer\n          nickName={\n            nickName?.trim() !== \"\"\n              ? nickName\n              : t(\"widget.collaborative.no_name\")\n          }\n          bgColor={color}\n        />\n      </motion.span>\n    </AnimatePresence>\n  )\n}\n","import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\n\nexport const dotLintRectangleStyle = css`\n  border: 1px dashed ${getColor(\"techPurple\", \"03\")};\n  position: absolute;\n  z-index: 6;\n  pointer-events: none;\n`\n\nexport const applyResizingDotLintRectangleStyle = (\n  w: number,\n  h: number,\n  x: number,\n  y: number,\n) => {\n  return css`\n    width: ${w}px;\n    height: ${h}px;\n    top: 0;\n    left: 0;\n    transform: translate(${x}px, ${y}px);\n    border: 1px dashed ${getColor(\"techPurple\", \"03\")};\n    position: absolute;\n    z-index: 6;\n    pointer-events: none;\n  `\n}\n\nexport const rectangleStyle = css`\n  width: 100%;\n  height: 100%;\n  background-color: ${getColor(\"techPurple\", \"03\")};\n  opacity: 0.16;\n  pointer-events: none;\n`\n","export const fixedPosition = (\n  x: number,\n  y: number,\n  width: number,\n  columns: number,\n) => {\n  return {\n    x: x < 0 ? 0 : x + width > columns ? columns - width : x,\n    y: y < 0 ? 0 : y,\n  }\n}\n","import { motion } from \"framer-motion\"\nimport { FC, useCallback } from \"react\"\nimport { useDispatch } from \"react-redux\"\nimport { FixedCursor } from \"@/page/App/components/DotPanel/components/MousePreview/Cursor\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { dragShadowActions } from \"@/redux/currentApp/dragShadow/dragShadowSlice\"\nimport { dotLintRectangleStyle, rectangleStyle } from \"./style\"\nimport { fixedPosition } from \"./utils\"\n\ninterface DragShadowPreviewProps {\n  x: number\n  y: number\n  landingX: number\n  landingY: number\n  unitW: number\n  status: number\n  parentDisplayName: string\n  displayNames: string\n  userID: string\n  columns: number\n  nickname: string\n  integerPartX: number\n  integerPartY: number\n  decimalPartX: number\n  decimalPartY: number\n}\n\nexport const ShadowPreview: FC<DragShadowPreviewProps> = (props) => {\n  const {\n    x,\n    y,\n    landingX,\n    landingY,\n    status,\n    userID,\n    unitW,\n    columns,\n    nickname,\n    integerPartX,\n    integerPartY,\n    decimalPartX,\n    decimalPartY,\n  } = props\n\n  const dispatch = useDispatch()\n\n  const onAnimationComplete = useCallback(() => {\n    if (status === -1) {\n      dispatch(dragShadowActions.deleteDragShadowInfoReducer(userID))\n    } else {\n      dispatch(\n        dragShadowActions.removeAnimationEndDragShadowInfoReducer(userID),\n      )\n    }\n  }, [dispatch, status, userID])\n\n  const fixedXAndY = fixedPosition(x, y, landingX, columns)\n\n  return (\n    <>\n      <motion.div\n        css={dotLintRectangleStyle}\n        initial={{\n          x: fixedXAndY.x * unitW,\n          y: fixedXAndY.y * UNIT_HEIGHT,\n          width: landingX * unitW,\n          height: landingY * UNIT_HEIGHT,\n        }}\n        animate={{\n          x: fixedXAndY.x * unitW,\n          y: fixedXAndY.y * UNIT_HEIGHT,\n          width: landingX * unitW,\n          height: landingY * UNIT_HEIGHT,\n        }}\n        transition={{ duration: 0.16 }}\n        onAnimationComplete={onAnimationComplete}\n      >\n        <div css={rectangleStyle} />\n        {status !== 2 && (\n          <FixedCursor\n            userID={userID}\n            nickName={nickname}\n            integerPartX={integerPartX}\n            integerPartY={integerPartY}\n            decimalPartX={decimalPartX}\n            decimalPartY={decimalPartY}\n            status={status}\n            unitW={unitW}\n          />\n        )}\n      </motion.div>\n    </>\n  )\n}\n","import { FC } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { getDragShadowInfoArray } from \"@/redux/currentApp/dragShadow/dragShadowSelector\"\nimport { ShadowPreview } from \"./Shadow\"\nimport { DragShadowPreviewProps } from \"./interface\"\n\nexport const DragShadowPreview: FC<DragShadowPreviewProps> = (props) => {\n  const { unitW, parentDisplayName, columns } = props\n\n  const dragShadowInfoArray = useSelector(getDragShadowInfoArray)\n\n  return (\n    <>\n      {dragShadowInfoArray.map((item) => {\n        const currentItem = item[0]\n        return (\n          currentItem?.parentDisplayName === parentDisplayName && (\n            <ShadowPreview\n              key={currentItem.userID}\n              x={currentItem.rectX}\n              y={currentItem.rectY}\n              landingX={currentItem.rectW}\n              landingY={currentItem.rectH}\n              unitW={unitW}\n              displayNames={currentItem.displayNames}\n              userID={currentItem.userID}\n              status={currentItem.status}\n              parentDisplayName={currentItem.parentDisplayName}\n              columns={columns}\n              integerPartX={currentItem.xInteger}\n              integerPartY={currentItem.yInteger}\n              decimalPartX={currentItem.xMod}\n              decimalPartY={currentItem.yMod}\n              nickname={currentItem.nickname}\n            />\n          )\n        )\n      })}\n    </>\n  )\n}\n","import { createSelector } from \"@reduxjs/toolkit\"\nimport { RootState } from \"@/store\"\n\nexport const getCursor = (state: RootState) => {\n  return state.currentApp.cursor\n}\n\nexport const getCursorArray = createSelector([getCursor], (cursor) =>\n  Object.values(cursor),\n)\n","import { FC } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { getCursorArray } from \"@/redux/currentApp/cursor/cursorSelector\"\nimport { Cursor } from \"./Cursor\"\nimport { MousePreviewProps } from \"./interface\"\n\nexport const MousePreview: FC<MousePreviewProps> = (props) => {\n  const { unitW, displayName } = props\n\n  const cursorArray = useSelector(getCursorArray)\n\n  return (\n    <>\n      {cursorArray.map((item) => {\n        const currentItem = item[0]\n        return (\n          currentItem?.parentDisplayName === displayName && (\n            <Cursor\n              key={currentItem.userID}\n              nickName={currentItem.nickname}\n              userID={currentItem.userID}\n              decimalPartX={currentItem.xMod}\n              decimalPartY={currentItem.yMod}\n              integerPartX={currentItem.xInteger}\n              integerPartY={currentItem.yInteger}\n              status={currentItem.status}\n              unitW={unitW}\n            />\n          )\n        )\n      })}\n    </>\n  )\n}\n","/*\nCopyright (c) 2018 Daybrush\n@name: @daybrush/utils\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/utils\n@version 1.10.2\n*/\n/**\n* @namespace\n* @name Consts\n*/\n/**\n* get string \"rgb\"\n* @memberof Color\n* @example\nimport {RGB} from \"@daybrush/utils\";\n\nconsole.log(RGB); // \"rgb\"\n*/\nvar RGB = \"rgb\";\n/**\n* get string \"rgba\"\n* @memberof Color\n* @example\nimport {RGBA} from \"@daybrush/utils\";\n\nconsole.log(RGBA); // \"rgba\"\n*/\nvar RGBA = \"rgba\";\n/**\n* get string \"hsl\"\n* @memberof Color\n* @example\nimport {HSL} from \"@daybrush/utils\";\n\nconsole.log(HSL); // \"hsl\"\n*/\nvar HSL = \"hsl\";\n/**\n* get string \"hsla\"\n* @memberof Color\n* @example\nimport {HSLA} from \"@daybrush/utils\";\n\nconsole.log(HSLA); // \"hsla\"\n*/\nvar HSLA = \"hsla\";\n/**\n* gets an array of color models.\n* @memberof Color\n* @example\nimport {COLOR_MODELS} from \"@daybrush/utils\";\n\nconsole.log(COLOR_MODELS); // [\"rgb\", \"rgba\", \"hsl\", \"hsla\"];\n*/\nvar COLOR_MODELS = [RGB, RGBA, HSL, HSLA];\n/**\n* get string \"function\"\n* @memberof Consts\n* @example\nimport {FUNCTION} from \"@daybrush/utils\";\n\nconsole.log(FUNCTION); // \"function\"\n*/\nvar FUNCTION = \"function\";\n/**\n* get string \"property\"\n* @memberof Consts\n* @example\nimport {PROPERTY} from \"@daybrush/utils\";\n\nconsole.log(PROPERTY); // \"property\"\n*/\nvar PROPERTY = \"property\";\n/**\n* get string \"array\"\n* @memberof Consts\n* @example\nimport {ARRAY} from \"@daybrush/utils\";\n\nconsole.log(ARRAY); // \"array\"\n*/\nvar ARRAY = \"array\";\n/**\n* get string \"object\"\n* @memberof Consts\n* @example\nimport {OBJECT} from \"@daybrush/utils\";\n\nconsole.log(OBJECT); // \"object\"\n*/\nvar OBJECT = \"object\";\n/**\n* get string \"string\"\n* @memberof Consts\n* @example\nimport {STRING} from \"@daybrush/utils\";\n\nconsole.log(STRING); // \"string\"\n*/\nvar STRING = \"string\";\n/**\n* get string \"number\"\n* @memberof Consts\n* @example\nimport {NUMBER} from \"@daybrush/utils\";\n\nconsole.log(NUMBER); // \"number\"\n*/\nvar NUMBER = \"number\";\n/**\n* get string \"undefined\"\n* @memberof Consts\n* @example\nimport {UNDEFINED} from \"@daybrush/utils\";\n\nconsole.log(UNDEFINED); // \"undefined\"\n*/\nvar UNDEFINED = \"undefined\";\n/**\n* Check whether the environment is window or node.js.\n* @memberof Consts\n* @example\nimport {IS_WINDOW} from \"@daybrush/utils\";\n\nconsole.log(IS_WINDOW); // false in node.js\nconsole.log(IS_WINDOW); // true in browser\n*/\nvar IS_WINDOW = typeof window !== UNDEFINED;\n/**\n* Check whether the environment is window or node.js.\n* @memberof Consts\n* @name document\n* @example\nimport {IS_WINDOW} from \"@daybrush/utils\";\n\nconsole.log(IS_WINDOW); // false in node.js\nconsole.log(IS_WINDOW); // true in browser\n*/\nvar doc = typeof document !== UNDEFINED && document; // FIXME: this type maybe false\nvar prefixes = [\"webkit\", \"ms\", \"moz\", \"o\"];\n/**\n * @namespace CrossBrowser\n */\n/**\n* Get a CSS property with a vendor prefix that supports cross browser.\n* @function\n* @param {string} property - A CSS property\n* @return {string} CSS property with cross-browser vendor prefix\n* @memberof CrossBrowser\n* @example\nimport {getCrossBrowserProperty} from \"@daybrush/utils\";\n\nconsole.log(getCrossBrowserProperty(\"transform\")); // \"transform\", \"-ms-transform\", \"-webkit-transform\"\nconsole.log(getCrossBrowserProperty(\"filter\")); // \"filter\", \"-webkit-filter\"\n*/\nvar getCrossBrowserProperty = /*#__PURE__*/function (property) {\n  if (!doc) {\n    return \"\";\n  }\n  var styles = (doc.body || doc.documentElement).style;\n  var length = prefixes.length;\n  if (typeof styles[property] !== UNDEFINED) {\n    return property;\n  }\n  for (var i = 0; i < length; ++i) {\n    var name = \"-\" + prefixes[i] + \"-\" + property;\n    if (typeof styles[name] !== UNDEFINED) {\n      return name;\n    }\n  }\n  return \"\";\n};\n/**\n* get string \"transfrom\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {TRANSFORM} from \"@daybrush/utils\";\n\nconsole.log(TRANSFORM); // \"transform\", \"-ms-transform\", \"-webkit-transform\"\n*/\nvar TRANSFORM = /*#__PURE__*/getCrossBrowserProperty(\"transform\");\n/**\n* get string \"filter\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {FILTER} from \"@daybrush/utils\";\n\nconsole.log(FILTER); // \"filter\", \"-ms-filter\", \"-webkit-filter\"\n*/\nvar FILTER = /*#__PURE__*/getCrossBrowserProperty(\"filter\");\n/**\n* get string \"animation\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {ANIMATION} from \"@daybrush/utils\";\n\nconsole.log(ANIMATION); // \"animation\", \"-ms-animation\", \"-webkit-animation\"\n*/\nvar ANIMATION = /*#__PURE__*/getCrossBrowserProperty(\"animation\");\n/**\n* get string \"keyframes\" with the vendor prefix.\n* @memberof CrossBrowser\n* @example\nimport {KEYFRAMES} from \"@daybrush/utils\";\n\nconsole.log(KEYFRAMES); // \"keyframes\", \"-ms-keyframes\", \"-webkit-keyframes\"\n*/\nvar KEYFRAMES = /*#__PURE__*/ANIMATION.replace(\"animation\", \"keyframes\");\nvar OPEN_CLOSED_CHARACTERS = [{\n  open: \"(\",\n  close: \")\"\n}, {\n  open: \"\\\"\",\n  close: \"\\\"\"\n}, {\n  open: \"'\",\n  close: \"'\"\n}, {\n  open: \"\\\\\\\"\",\n  close: \"\\\\\\\"\"\n}, {\n  open: \"\\\\'\",\n  close: \"\\\\'\"\n}];\nvar TINY_NUM = 0.0000001;\nvar REVERSE_TINY_NUM = 1 / TINY_NUM;\nvar DEFAULT_UNIT_PRESETS = {\n  \"cm\": function (pos) {\n    return pos * 96 / 2.54;\n  },\n  \"mm\": function (pos) {\n    return pos * 96 / 254;\n  },\n  \"in\": function (pos) {\n    return pos * 96;\n  },\n  \"pt\": function (pos) {\n    return pos * 96 / 72;\n  },\n  \"pc\": function (pos) {\n    return pos * 96 / 6;\n  },\n  \"%\": function (pos, size) {\n    return pos * size / 100;\n  },\n  \"vw\": function (pos, size) {\n    if (size === void 0) {\n      size = window.innerWidth;\n    }\n    return pos / 100 * size;\n  },\n  \"vh\": function (pos, size) {\n    if (size === void 0) {\n      size = window.innerHeight;\n    }\n    return pos / 100 * size;\n  },\n  \"vmax\": function (pos, size) {\n    if (size === void 0) {\n      size = Math.max(window.innerWidth, window.innerHeight);\n    }\n    return pos / 100 * size;\n  },\n  \"vmin\": function (pos, size) {\n    if (size === void 0) {\n      size = Math.min(window.innerWidth, window.innerHeight);\n    }\n    return pos / 100 * size;\n  }\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n  return r;\n}\n\n/**\n* @namespace\n* @name Utils\n*/\n/**\n * Returns the inner product of two numbers(`a1`, `a2`) by two criteria(`b1`, `b2`).\n * @memberof Utils\n * @param - The first number\n * @param - The second number\n * @param - The first number to base on the inner product\n * @param - The second number to base on the inner product\n * @return - Returns the inner product\nimport { dot } from \"@daybrush/utils\";\n\nconsole.log(dot(0, 15, 2, 3)); // 6\nconsole.log(dot(5, 15, 2, 3)); // 9\nconsole.log(dot(5, 15, 1, 1)); // 10\n */\nfunction dot(a1, a2, b1, b2) {\n  return (a1 * b2 + a2 * b1) / (b1 + b2);\n}\n/**\n* Check the type that the value is undefined.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {boolean} true if the type is correct, false otherwise\n* @example\nimport {isUndefined} from \"@daybrush/utils\";\n\nconsole.log(isUndefined(undefined)); // true\nconsole.log(isUndefined(\"\")); // false\nconsole.log(isUndefined(1)); // false\nconsole.log(isUndefined(null)); // false\n*/\nfunction isUndefined(value) {\n  return typeof value === UNDEFINED;\n}\n/**\n* Check the type that the value is object.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isObject} from \"@daybrush/utils\";\n\nconsole.log(isObject({})); // true\nconsole.log(isObject(undefined)); // false\nconsole.log(isObject(\"\")); // false\nconsole.log(isObject(null)); // false\n*/\nfunction isObject(value) {\n  return value && typeof value === OBJECT;\n}\n/**\n* Check the type that the value is isArray.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isArray} from \"@daybrush/utils\";\n\nconsole.log(isArray([])); // true\nconsole.log(isArray({})); // false\nconsole.log(isArray(undefined)); // false\nconsole.log(isArray(null)); // false\n*/\nfunction isArray(value) {\n  return Array.isArray(value);\n}\n/**\n* Check the type that the value is string.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isString} from \"@daybrush/utils\";\n\nconsole.log(isString(\"1234\")); // true\nconsole.log(isString(undefined)); // false\nconsole.log(isString(1)); // false\nconsole.log(isString(null)); // false\n*/\nfunction isString(value) {\n  return typeof value === STRING;\n}\nfunction isNumber(value) {\n  return typeof value === NUMBER;\n}\n/**\n* Check the type that the value is function.\n* @memberof Utils\n* @param {string} value - Value to check the type\n* @return {} true if the type is correct, false otherwise\n* @example\nimport {isFunction} from \"@daybrush/utils\";\n\nconsole.log(isFunction(function a() {})); // true\nconsole.log(isFunction(() => {})); // true\nconsole.log(isFunction(\"1234\")); // false\nconsole.log(isFunction(1)); // false\nconsole.log(isFunction(null)); // false\n*/\nfunction isFunction(value) {\n  return typeof value === FUNCTION;\n}\nfunction isEqualSeparator(character, separator) {\n  var isCharacterSpace = character === \"\" || character == \" \";\n  var isSeparatorSpace = separator === \"\" || separator == \" \";\n  return isSeparatorSpace && isCharacterSpace || character === separator;\n}\nfunction findOpen(openCharacter, texts, index, length, openCloseCharacters) {\n  var isIgnore = findIgnore(openCharacter, texts, index);\n  if (!isIgnore) {\n    return findClose(openCharacter, texts, index + 1, length, openCloseCharacters);\n  }\n  return index;\n}\nfunction findIgnore(character, texts, index) {\n  if (!character.ignore) {\n    return null;\n  }\n  var otherText = texts.slice(Math.max(index - 3, 0), index + 3).join(\"\");\n  return new RegExp(character.ignore).exec(otherText);\n}\nfunction findClose(closeCharacter, texts, index, length, openCloseCharacters) {\n  var _loop_1 = function (i) {\n    var character = texts[i].trim();\n    if (character === closeCharacter.close && !findIgnore(closeCharacter, texts, i)) {\n      return {\n        value: i\n      };\n    }\n    var nextIndex = i;\n    // re open\n    var openCharacter = find(openCloseCharacters, function (_a) {\n      var open = _a.open;\n      return open === character;\n    });\n    if (openCharacter) {\n      nextIndex = findOpen(openCharacter, texts, i, length, openCloseCharacters);\n    }\n    if (nextIndex === -1) {\n      return out_i_1 = i, \"break\";\n    }\n    i = nextIndex;\n    out_i_1 = i;\n  };\n  var out_i_1;\n  for (var i = index; i < length; ++i) {\n    var state_1 = _loop_1(i);\n    i = out_i_1;\n    if (typeof state_1 === \"object\") return state_1.value;\n    if (state_1 === \"break\") break;\n  }\n  return -1;\n}\nfunction splitText(text, splitOptions) {\n  var _a = isString(splitOptions) ? {\n      separator: splitOptions\n    } : splitOptions,\n    _b = _a.separator,\n    separator = _b === void 0 ? \",\" : _b,\n    isSeparateFirst = _a.isSeparateFirst,\n    isSeparateOnlyOpenClose = _a.isSeparateOnlyOpenClose,\n    _c = _a.isSeparateOpenClose,\n    isSeparateOpenClose = _c === void 0 ? isSeparateOnlyOpenClose : _c,\n    _d = _a.openCloseCharacters,\n    openCloseCharacters = _d === void 0 ? OPEN_CLOSED_CHARACTERS : _d;\n  var openClosedText = openCloseCharacters.map(function (_a) {\n    var open = _a.open,\n      close = _a.close;\n    if (open === close) {\n      return open;\n    }\n    return open + \"|\" + close;\n  }).join(\"|\");\n  var regexText = \"(\\\\s*\" + separator + \"\\\\s*|\" + openClosedText + \"|\\\\s+)\";\n  var regex = new RegExp(regexText, \"g\");\n  var texts = text.split(regex).filter(Boolean);\n  var length = texts.length;\n  var values = [];\n  var tempValues = [];\n  function resetTemp() {\n    if (tempValues.length) {\n      values.push(tempValues.join(\"\"));\n      tempValues = [];\n      return true;\n    }\n    return false;\n  }\n  var _loop_2 = function (i) {\n    var character = texts[i].trim();\n    var nextIndex = i;\n    var openCharacter = find(openCloseCharacters, function (_a) {\n      var open = _a.open;\n      return open === character;\n    });\n    var closeCharacter = find(openCloseCharacters, function (_a) {\n      var close = _a.close;\n      return close === character;\n    });\n    if (openCharacter) {\n      nextIndex = findOpen(openCharacter, texts, i, length, openCloseCharacters);\n      if (nextIndex !== -1 && isSeparateOpenClose) {\n        if (resetTemp() && isSeparateFirst) {\n          return out_i_2 = i, \"break\";\n        }\n        values.push(texts.slice(i, nextIndex + 1).join(\"\"));\n        i = nextIndex;\n        if (isSeparateFirst) {\n          return out_i_2 = i, \"break\";\n        }\n        return out_i_2 = i, \"continue\";\n      }\n    } else if (closeCharacter && !findIgnore(closeCharacter, texts, i)) {\n      var nextOpenCloseCharacters = __spreadArrays(openCloseCharacters);\n      nextOpenCloseCharacters.splice(openCloseCharacters.indexOf(closeCharacter), 1);\n      return {\n        value: splitText(text, {\n          separator: separator,\n          isSeparateFirst: isSeparateFirst,\n          isSeparateOnlyOpenClose: isSeparateOnlyOpenClose,\n          isSeparateOpenClose: isSeparateOpenClose,\n          openCloseCharacters: nextOpenCloseCharacters\n        })\n      };\n    } else if (isEqualSeparator(character, separator) && !isSeparateOnlyOpenClose) {\n      resetTemp();\n      if (isSeparateFirst) {\n        return out_i_2 = i, \"break\";\n      }\n      return out_i_2 = i, \"continue\";\n    }\n    if (nextIndex === -1) {\n      nextIndex = length - 1;\n    }\n    tempValues.push(texts.slice(i, nextIndex + 1).join(\"\"));\n    i = nextIndex;\n    out_i_2 = i;\n  };\n  var out_i_2;\n  for (var i = 0; i < length; ++i) {\n    var state_2 = _loop_2(i);\n    i = out_i_2;\n    if (typeof state_2 === \"object\") return state_2.value;\n    if (state_2 === \"break\") break;\n  }\n  if (tempValues.length) {\n    values.push(tempValues.join(\"\"));\n  }\n  return values;\n}\n/**\n* divide text by space.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {Array} divided texts\n* @example\nimport {spliceSpace} from \"@daybrush/utils\";\n\nconsole.log(splitSpace(\"a b c d e f g\"));\n// [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nconsole.log(splitSpace(\"'a,b' c 'd,e' f g\"));\n// [\"'a,b'\", \"c\", \"'d,e'\", \"f\", \"g\"]\n*/\nfunction splitSpace(text) {\n  // divide comma(space)\n  return splitText(text, \"\");\n}\n/**\n* divide text by comma.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {Array} divided texts\n* @example\nimport {splitComma} from \"@daybrush/utils\";\n\nconsole.log(splitComma(\"a,b,c,d,e,f,g\"));\n// [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\"]\nconsole.log(splitComma(\"'a,b',c,'d,e',f,g\"));\n// [\"'a,b'\", \"c\", \"'d,e'\", \"f\", \"g\"]\n*/\nfunction splitComma(text) {\n  // divide comma(,)\n  // \"[^\"]*\"|'[^']*'\n  return splitText(text, \",\");\n}\n/**\n* divide text by bracket \"(\", \")\".\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {object} divided texts\n* @example\nimport {splitBracket} from \"@daybrush/utils\";\n\nconsole.log(splitBracket(\"a(1, 2)\"));\n// {prefix: \"a\", value: \"1, 2\", suffix: \"\"}\nconsole.log(splitBracket(\"a(1, 2)b\"));\n// {prefix: \"a\", value: \"1, 2\", suffix: \"b\"}\n*/\nfunction splitBracket(text) {\n  var matches = /([^(]*)\\(([\\s\\S]*)\\)([\\s\\S]*)/g.exec(text);\n  if (!matches || matches.length < 4) {\n    return {};\n  } else {\n    return {\n      prefix: matches[1],\n      value: matches[2],\n      suffix: matches[3]\n    };\n  }\n}\n/**\n* divide text by number and unit.\n* @memberof Utils\n* @param {string} text - text to divide\n* @return {} divided texts\n* @example\nimport {splitUnit} from \"@daybrush/utils\";\n\nconsole.log(splitUnit(\"10px\"));\n// {prefix: \"\", value: 10, unit: \"px\"}\nconsole.log(splitUnit(\"-10px\"));\n// {prefix: \"\", value: -10, unit: \"px\"}\nconsole.log(splitUnit(\"a10%\"));\n// {prefix: \"a\", value: 10, unit: \"%\"}\n*/\nfunction splitUnit(text) {\n  var matches = /^([^\\d|e|\\-|\\+]*)((?:\\d|\\.|-|e-|e\\+)+)(\\S*)$/g.exec(text);\n  if (!matches) {\n    return {\n      prefix: \"\",\n      unit: \"\",\n      value: NaN\n    };\n  }\n  var prefix = matches[1];\n  var value = matches[2];\n  var unit = matches[3];\n  return {\n    prefix: prefix,\n    unit: unit,\n    value: parseFloat(value)\n  };\n}\n/**\n* transform strings to camel-case\n* @memberof Utils\n* @param {String} text - string\n* @return {String} camel-case string\n* @example\nimport {camelize} from \"@daybrush/utils\";\n\nconsole.log(camelize(\"transform-origin\")); // transformOrigin\nconsole.log(camelize(\"abcd_efg\")); // abcdEfg\nconsole.log(camelize(\"abcd efg\")); // abcdEfg\n*/\nfunction camelize(str) {\n  return str.replace(/[\\s-_]([a-z])/g, function (all, letter) {\n    return letter.toUpperCase();\n  });\n}\n/**\n* transform a camelized string into a lowercased string.\n* @memberof Utils\n* @param {string} text - a camel-cased string\n* @param {string} [separator=\"-\"] - a separator\n* @return {string}  a lowercased string\n* @example\nimport {decamelize} from \"@daybrush/utils\";\n\nconsole.log(decamelize(\"transformOrigin\")); // transform-origin\nconsole.log(decamelize(\"abcdEfg\", \"_\")); // abcd_efg\n*/\nfunction decamelize(str, separator) {\n  if (separator === void 0) {\n    separator = \"-\";\n  }\n  return str.replace(/([a-z])([A-Z])/g, function (all, letter, letter2) {\n    return \"\" + letter + separator + letter2.toLowerCase();\n  });\n}\n/**\n* transforms something in an array into an array.\n* @memberof Utils\n* @param - Array form\n* @return an array\n* @example\nimport {toArray} from \"@daybrush/utils\";\n\nconst arr1 = toArray(document.querySelectorAll(\".a\")); // Element[]\nconst arr2 = toArray(document.querySelectorAll<HTMLElement>(\".a\")); // HTMLElement[]\n*/\nfunction toArray(value) {\n  return [].slice.call(value);\n}\n/**\n* Date.now() method\n* @memberof CrossBrowser\n* @return {number} milliseconds\n* @example\nimport {now} from \"@daybrush/utils\";\n\nconsole.log(now()); // 12121324241(milliseconds)\n*/\nfunction now() {\n  return Date.now ? Date.now() : new Date().getTime();\n}\n/**\n* Returns the index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findIndex } from \"@daybrush/utils\";\n\nfindIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\nfunction findIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n  var length = arr.length;\n  for (var i = 0; i < length; ++i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return defaultIndex;\n}\n/**\n* Returns the reverse direction index of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findLastIndex` was called upon.\n* @param - A function to execute on each value in the array until the function returns true, indicating that the satisfying element was found.\n* @param - Returns defaultIndex if not found by the function.\n* @example\nimport { findLastIndex } from \"@daybrush/utils\";\n\nfindLastIndex([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // 1\n*/\nfunction findLastIndex(arr, callback, defaultIndex) {\n  if (defaultIndex === void 0) {\n    defaultIndex = -1;\n  }\n  var length = arr.length;\n  for (var i = length - 1; i >= 0; --i) {\n    if (callback(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return defaultIndex;\n}\n/**\n* Returns the value of the reverse direction element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `findLast` was called upon.\n* @param - A function to execute on each value in the array,\n* @param - Returns defalutValue if not found by the function.\n* @example\nimport { find } from \"@daybrush/utils\";\n\nfind([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // {a: 2}\n*/\nfunction findLast(arr, callback, defalutValue) {\n  var index = findLastIndex(arr, callback);\n  return index > -1 ? arr[index] : defalutValue;\n}\n/**\n* Returns the value of the first element in the array that satisfies the provided testing function.\n* @function\n* @memberof CrossBrowser\n* @param - The array `find` was called upon.\n* @param - A function to execute on each value in the array,\n* @param - Returns defalutValue if not found by the function.\n* @example\nimport { find } from \"@daybrush/utils\";\n\nfind([{a: 1}, {a: 2}, {a: 3}, {a: 4}], ({ a }) => a === 2); // {a: 2}\n*/\nfunction find(arr, callback, defalutValue) {\n  var index = findIndex(arr, callback);\n  return index > -1 ? arr[index] : defalutValue;\n}\n/**\n* window.requestAnimationFrame() method with cross browser.\n* @function\n* @memberof CrossBrowser\n* @param {FrameRequestCallback} callback - The function to call when it's time to update your animation for the next repaint.\n* @return {number} id\n* @example\nimport {requestAnimationFrame} from \"@daybrush/utils\";\n\nrequestAnimationFrame((timestamp) => {\n  console.log(timestamp);\n});\n*/\nvar requestAnimationFrame = /*#__PURE__*/function () {\n  var firstTime = now();\n  var raf = IS_WINDOW && (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame);\n  return raf ? raf.bind(window) : function (callback) {\n    var currTime = now();\n    var id = setTimeout(function () {\n      callback(currTime - firstTime);\n    }, 1000 / 60);\n    return id;\n  };\n}();\n/**\n* window.cancelAnimationFrame() method with cross browser.\n* @function\n* @memberof CrossBrowser\n* @param {number} handle - the id obtained through requestAnimationFrame method\n* @return {void}\n* @example\nimport { requestAnimationFrame, cancelAnimationFrame } from \"@daybrush/utils\";\n\nconst id = requestAnimationFrame((timestamp) => {\n  console.log(timestamp);\n});\n\ncancelAnimationFrame(id);\n*/\nvar cancelAnimationFrame = /*#__PURE__*/function () {\n  var caf = IS_WINDOW && (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame);\n  return caf ? caf.bind(window) : function (handle) {\n    clearTimeout(handle);\n  };\n}();\n/**\n* @function\n* @memberof Utils\n*/\nfunction getKeys(obj) {\n  return Object.keys(obj);\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction getValues(obj) {\n  var keys = getKeys(obj);\n  return keys.map(function (key) {\n    return obj[key];\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction getEntries(obj) {\n  var keys = getKeys(obj);\n  return keys.map(function (key) {\n    return [key, obj[key]];\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction sortOrders(keys, orders) {\n  if (orders === void 0) {\n    orders = [];\n  }\n  keys.sort(function (a, b) {\n    var index1 = orders.indexOf(a);\n    var index2 = orders.indexOf(b);\n    if (index2 === -1 && index1 === -1) {\n      return 0;\n    }\n    if (index1 === -1) {\n      return 1;\n    }\n    if (index2 === -1) {\n      return -1;\n    }\n    return index1 - index2;\n  });\n}\n/**\n* convert unit size to px size\n* @function\n* @memberof Utils\n*/\nfunction convertUnitSize(pos, size) {\n  var _a = splitUnit(pos),\n    value = _a.value,\n    unit = _a.unit;\n  if (isObject(size)) {\n    var sizeFunction = size[unit];\n    if (sizeFunction) {\n      if (isFunction(sizeFunction)) {\n        return sizeFunction(value);\n      } else if (DEFAULT_UNIT_PRESETS[unit]) {\n        return DEFAULT_UNIT_PRESETS[unit](value, sizeFunction);\n      }\n    }\n  } else if (unit === \"%\") {\n    return value * size / 100;\n  }\n  if (DEFAULT_UNIT_PRESETS[unit]) {\n    return DEFAULT_UNIT_PRESETS[unit](value);\n  }\n  return value;\n}\n/**\n* calculate between min, max\n* @function\n* @memberof Utils\n*/\nfunction between(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n}\nfunction checkBoundSize(targetSize, compareSize, isMax, ratio) {\n  if (ratio === void 0) {\n    ratio = targetSize[0] / targetSize[1];\n  }\n  return [[throttle(compareSize[0], TINY_NUM), throttle(compareSize[0] / ratio, TINY_NUM)], [throttle(compareSize[1] * ratio, TINY_NUM), throttle(compareSize[1], TINY_NUM)]].filter(function (size) {\n    return size.every(function (value, i) {\n      var defaultSize = compareSize[i];\n      var throttledSize = throttle(defaultSize, TINY_NUM);\n      return isMax ? value <= defaultSize || value <= throttledSize : value >= defaultSize || value >= throttledSize;\n    });\n  })[0] || targetSize;\n}\n/**\n* calculate bound size\n* @function\n* @memberof Utils\n*/\nfunction calculateBoundSize(size, minSize, maxSize, keepRatio) {\n  if (!keepRatio) {\n    return size.map(function (value, i) {\n      return between(value, minSize[i], maxSize[i]);\n    });\n  }\n  var width = size[0],\n    height = size[1];\n  var ratio = keepRatio === true ? width / height : keepRatio;\n  // width : height = minWidth : minHeight;\n  var _a = checkBoundSize(size, minSize, false, ratio),\n    minWidth = _a[0],\n    minHeight = _a[1];\n  var _b = checkBoundSize(size, maxSize, true, ratio),\n    maxWidth = _b[0],\n    maxHeight = _b[1];\n  if (width < minWidth || height < minHeight) {\n    width = minWidth;\n    height = minHeight;\n  } else if (width > maxWidth || height > maxHeight) {\n    width = maxWidth;\n    height = maxHeight;\n  }\n  return [width, height];\n}\n/**\n* Add all the numbers.\n* @function\n* @memberof Utils\n*/\nfunction sum(nums) {\n  var length = nums.length;\n  var total = 0;\n  for (var i = length - 1; i >= 0; --i) {\n    total += nums[i];\n  }\n  return total;\n}\n/**\n* Average all numbers.\n* @function\n* @memberof Utils\n*/\nfunction average(nums) {\n  var length = nums.length;\n  var total = 0;\n  for (var i = length - 1; i >= 0; --i) {\n    total += nums[i];\n  }\n  return length ? total / length : 0;\n}\n/**\n* Get the angle of two points. (0 <= rad < 359)\n* @function\n* @memberof Utils\n*/\nfunction getRad(pos1, pos2) {\n  var distX = pos2[0] - pos1[0];\n  var distY = pos2[1] - pos1[1];\n  var rad = Math.atan2(distY, distX);\n  return rad >= 0 ? rad : rad + Math.PI * 2;\n}\n/**\n* Get the average point of all points.\n* @function\n* @memberof Utils\n*/\nfunction getCenterPoint(points) {\n  return [0, 1].map(function (i) {\n    return average(points.map(function (pos) {\n      return pos[i];\n    }));\n  });\n}\n/**\n* Gets the direction of the shape.\n* @function\n* @memberof Utils\n*/\nfunction getShapeDirection(points) {\n  var center = getCenterPoint(points);\n  var pos1Rad = getRad(center, points[0]);\n  var pos2Rad = getRad(center, points[1]);\n  return pos1Rad < pos2Rad && pos2Rad - pos1Rad < Math.PI || pos1Rad > pos2Rad && pos2Rad - pos1Rad < -Math.PI ? 1 : -1;\n}\n/**\n* Get the distance between two points.\n* @function\n* @memberof Utils\n*/\nfunction getDist(a, b) {\n  return Math.sqrt(Math.pow((b ? b[0] : 0) - a[0], 2) + Math.pow((b ? b[1] : 0) - a[1], 2));\n}\n/**\n* throttle number depending on the unit.\n* @function\n* @memberof Utils\n*/\nfunction throttle(num, unit) {\n  if (!unit) {\n    return num;\n  }\n  var reverseUnit = 1 / unit;\n  return Math.round(num / unit) / reverseUnit;\n}\n/**\n* throttle number array depending on the unit.\n* @function\n* @memberof Utils\n*/\nfunction throttleArray(nums, unit) {\n  nums.forEach(function (_, i) {\n    nums[i] = throttle(nums[i], unit);\n  });\n  return nums;\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction counter(num) {\n  var nums = [];\n  for (var i = 0; i < num; ++i) {\n    nums.push(i);\n  }\n  return nums;\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction replaceOnce(text, fromText, toText) {\n  var isOnce = false;\n  return text.replace(fromText, function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (isOnce) {\n      return args[0];\n    }\n    isOnce = true;\n    return isString(toText) ? toText : toText.apply(void 0, args);\n  });\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction flat(arr) {\n  return arr.reduce(function (prev, cur) {\n    return prev.concat(cur);\n  }, []);\n}\n/**\n* @function\n* @memberof Utils\n*/\nfunction deepFlat(arr) {\n  return arr.reduce(function (prev, cur) {\n    if (isArray(cur)) {\n      prev.push.apply(prev, deepFlat(cur));\n    } else {\n      prev.push(cur);\n    }\n    return prev;\n  }, []);\n}\n\n/**\n* @namespace\n* @name Color\n*/\n/**\n* Remove the # from the hex color.\n* @memberof Color\n* @param {} hex - hex color\n* @return {} hex color\n* @example\nimport {cutHex} from \"@daybrush/utils\";\n\nconsole.log(cutHex(\"#000000\")) // \"000000\"\n*/\nfunction cutHex(hex) {\n  return hex.replace(\"#\", \"\");\n}\n/**\n* convert hex color to rgb color.\n* @memberof Color\n* @param {} hex - hex color\n* @return {} rgb color\n* @example\nimport {hexToRGBA} from \"@daybrush/utils\";\n\nconsole.log(hexToRGBA(\"#00000005\"));\n// [0, 0, 0, 1]\nconsole.log(hexToRGBA(\"#201045\"));\n// [32, 16, 69, 1]\n*/\nfunction hexToRGBA(hex) {\n  var h = cutHex(hex);\n  var r = parseInt(h.substring(0, 2), 16);\n  var g = parseInt(h.substring(2, 4), 16);\n  var b = parseInt(h.substring(4, 6), 16);\n  var a = parseInt(h.substring(6, 8), 16) / 255;\n  if (isNaN(a)) {\n    a = 1;\n  }\n  return [r, g, b, a];\n}\n/**\n* convert 3(or 4)-digit hex color to 6(or 8)-digit hex color.\n* @memberof Color\n* @param {} hex - 3(or 4)-digit hex color\n* @return {} 6(or 8)-digit hex color\n* @example\nimport {toFullHex} from \"@daybrush/utils\";\n\nconsole.log(toFullHex(\"#123\")); // \"#112233\"\nconsole.log(toFullHex(\"#123a\")); // \"#112233aa\"\n*/\nfunction toFullHex(h) {\n  var r = h.charAt(1);\n  var g = h.charAt(2);\n  var b = h.charAt(3);\n  var a = h.charAt(4);\n  var arr = [\"#\", r, r, g, g, b, b, a, a];\n  return arr.join(\"\");\n}\n/**\n* convert hsl color to rgba color.\n* @memberof Color\n* @param {} hsl - hsl color(hue: 0 ~ 360, saturation: 0 ~ 1, lightness: 0 ~ 1, alpha: 0 ~ 1)\n* @return {} rgba color\n* @example\nimport {hslToRGBA} from \"@daybrush/utils\";\n\nconsole.log(hslToRGBA([150, 0.5, 0.4]));\n// [51, 153, 102, 1]\n*/\nfunction hslToRGBA(hsl) {\n  var _a;\n  var h = hsl[0];\n  var s = hsl[1];\n  var l = hsl[2];\n  if (h < 0) {\n    h += Math.floor((Math.abs(h) + 360) / 360) * 360;\n  }\n  h %= 360;\n  var c = (1 - Math.abs(2 * l - 1)) * s;\n  var x = c * (1 - Math.abs(h / 60 % 2 - 1));\n  var m = l - c / 2;\n  var rgb;\n  if (h < 60) {\n    rgb = [c, x, 0];\n  } else if (h < 120) {\n    rgb = [x, c, 0];\n  } else if (h < 180) {\n    rgb = [0, c, x];\n  } else if (h < 240) {\n    rgb = [0, x, c];\n  } else if (h < 300) {\n    rgb = [x, 0, c];\n  } else if (h < 360) {\n    rgb = [c, 0, x];\n  } else {\n    rgb = [0, 0, 0];\n  }\n  return [Math.round((rgb[0] + m) * 255), Math.round((rgb[1] + m) * 255), Math.round((rgb[2] + m) * 255), (_a = hsl[3]) !== null && _a !== void 0 ? _a : 1];\n}\n/**\n* convert string to rgba color.\n* @memberof Color\n* @param {} - 3-hex(#000), 4-hex(#0000) 6-hex(#000000), 8-hex(#00000000) or RGB(A), or HSL(A)\n* @return {} rgba color\n* @example\nimport {stringToRGBA} from \"@daybrush/utils\";\n\nconsole.log(stringToRGBA(\"#000000\")); // [0, 0, 0, 1]\nconsole.log(stringToRGBA(\"rgb(100, 100, 100)\")); // [100, 100, 100, 1]\nconsole.log(stringToRGBA(\"hsl(150, 0.5, 0.4)\")); // [51, 153, 102, 1]\n*/\nfunction stringToRGBA(color) {\n  if (color.charAt(0) === \"#\") {\n    if (color.length === 4 || color.length === 5) {\n      return hexToRGBA(toFullHex(color));\n    } else {\n      return hexToRGBA(color);\n    }\n  } else if (color.indexOf(\"(\") !== -1) {\n    // in bracket.\n    var _a = splitBracket(color),\n      prefix = _a.prefix,\n      value = _a.value;\n    if (!prefix || !value) {\n      return undefined;\n    }\n    var arr = splitComma(value);\n    var colorArr = [0, 0, 0, 1];\n    var length = arr.length;\n    switch (prefix) {\n      case RGB:\n      case RGBA:\n        for (var i = 0; i < length; ++i) {\n          colorArr[i] = parseFloat(arr[i]);\n        }\n        return colorArr;\n      case HSL:\n      case HSLA:\n        for (var i = 0; i < length; ++i) {\n          if (arr[i].indexOf(\"%\") !== -1) {\n            colorArr[i] = parseFloat(arr[i]) / 100;\n          } else {\n            colorArr[i] = parseFloat(arr[i]);\n          }\n        }\n        // hsl, hsla to rgba\n        return hslToRGBA(colorArr);\n    }\n  }\n  return undefined;\n}\n\n/**\n * Returns all element descendants of node that\n * match selectors.\n */\n/**\n * Checks if the specified class value exists in the element's class attribute.\n * @memberof DOM\n * @param - A DOMString containing one or more selectors to match\n * @param - If multi is true, a DOMString containing one or more selectors to match against.\n * @example\nimport {$} from \"@daybrush/utils\";\n\nconsole.log($(\"div\")); // div element\nconsole.log($(\"div\", true)); // [div, div] elements\n*/\nfunction $(selectors, multi) {\n  if (!doc) {\n    return multi ? [] : null;\n  }\n  return multi ? doc.querySelectorAll(selectors) : doc.querySelector(selectors);\n}\n/**\n* Checks if the specified class value exists in the element's class attribute.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to search\n* @return {boolean} return false if the class is not found.\n* @example\nimport {hasClass} from \"@daybrush/utils\";\n\nconsole.log(hasClass(element, \"start\")); // true or false\n*/\nfunction hasClass(element, className) {\n  if (element.classList) {\n    return element.classList.contains(className);\n  }\n  return !!element.className.match(new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\"));\n}\n/**\n* Add the specified class value. If these classe already exist in the element's class attribute they are ignored.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to add\n* @example\nimport {addClass} from \"@daybrush/utils\";\n\naddClass(element, \"start\");\n*/\nfunction addClass(element, className) {\n  if (element.classList) {\n    element.classList.add(className);\n  } else {\n    element.className += \" \" + className;\n  }\n}\n/**\n* Removes the specified class value.\n* @memberof DOM\n* @param element - target\n* @param className - the class name to remove\n* @example\nimport {removeClass} from \"@daybrush/utils\";\n\nremoveClass(element, \"start\");\n*/\nfunction removeClass(element, className) {\n  if (element.classList) {\n    element.classList.remove(className);\n  } else {\n    var reg = new RegExp(\"(\\\\s|^)\" + className + \"(\\\\s|$)\");\n    element.className = element.className.replace(reg, \" \");\n  }\n}\n/**\n* Gets the CSS properties from the element.\n* @memberof DOM\n* @param elements - elements\n* @param properites - the CSS properties\n* @return returns CSS properties and values.\n* @example\nimport {fromCSS} from \"@daybrush/utils\";\n\nconsole.log(fromCSS(element, [\"left\", \"opacity\", \"top\"])); // {\"left\": \"10px\", \"opacity\": 1, \"top\": \"10px\"}\n*/\nfunction fromCSS(elements, properties) {\n  if (!elements || !properties || !properties.length) {\n    return {};\n  }\n  var element;\n  if (elements instanceof Element) {\n    element = elements;\n  } else if (elements.length) {\n    element = elements[0];\n  } else {\n    return {};\n  }\n  var cssObject = {};\n  var styles = window.getComputedStyle(element);\n  var length = properties.length;\n  for (var i = 0; i < length; ++i) {\n    cssObject[properties[i]] = styles[properties[i]];\n  }\n  return cssObject;\n}\n/**\n* Sets up a function that will be called whenever the specified event is delivered to the target\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The object which receives a notification (an object that implements the Event interface) when an event of the specified type occurs\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent} from \"@daybrush/utils\";\n\naddEvent(el, \"click\", e => {\n  console.log(e);\n});\n*/\nfunction addEvent(el, type, listener, options) {\n  el.addEventListener(type, listener, options);\n}\n/**\n* removes from the EventTarget an event listener previously registered with EventTarget.addEventListener()\n* @memberof DOM\n* @param - event target\n* @param - A case-sensitive string representing the event type to listen for.\n* @param - The EventListener function of the event handler to remove from the event target.\n* @param - An options object that specifies characteristics about the event listener.\n* @example\nimport {addEvent, removeEvent} from \"@daybrush/utils\";\nconst listener = e => {\n  console.log(e);\n};\naddEvent(el, \"click\", listener);\nremoveEvent(el, \"click\", listener);\n*/\nfunction removeEvent(el, type, listener, options) {\n  el.removeEventListener(type, listener, options);\n}\n\nexport { RGB, RGBA, HSL, HSLA, COLOR_MODELS, FUNCTION, PROPERTY, ARRAY, OBJECT, STRING, NUMBER, UNDEFINED, IS_WINDOW, doc as document, getCrossBrowserProperty, TRANSFORM, FILTER, ANIMATION, KEYFRAMES, OPEN_CLOSED_CHARACTERS, TINY_NUM, REVERSE_TINY_NUM, DEFAULT_UNIT_PRESETS, cutHex, hexToRGBA, toFullHex, hslToRGBA, stringToRGBA, dot, isUndefined, isObject, isArray, isString, isNumber, isFunction, splitText, splitSpace, splitComma, splitBracket, splitUnit, camelize, decamelize, toArray, now, findIndex, findLastIndex, findLast, find, requestAnimationFrame, cancelAnimationFrame, getKeys, getValues, getEntries, sortOrders, convertUnitSize, between, checkBoundSize, calculateBoundSize, sum, average, getRad, getCenterPoint, getShapeDirection, getDist, throttle, throttleArray, counter, replaceOnce, flat, deepFlat, $, hasClass, addClass, removeClass, fromCSS, addEvent, removeEvent };\n//# sourceMappingURL=utils.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: overlap-area\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/overlap-area.git\nversion: 1.1.0\n*/\nimport { throttle, TINY_NUM, sum, find, getDist, getShapeDirection, findIndex } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\nfunction tinyThrottle(num) {\n  return throttle(num, TINY_NUM);\n}\nfunction isSameConstants(linearConstants1, linearConstants2) {\n  return linearConstants1.every(function (v, i) {\n    return tinyThrottle(v - linearConstants2[i]) === 0;\n  });\n}\nfunction isSamePoint(point1, point2) {\n  return !tinyThrottle(point1[0] - point2[0]) && !tinyThrottle(point1[1] - point2[1]);\n}\nfunction flat(arr) {\n  return arr.reduce(function (prev, current) {\n    prev.push.apply(prev, current);\n    return prev;\n  }, []);\n}\n\n/**\n * @namespace OverlapArea\n */\n\n/**\n * Gets the size of a shape (polygon) made of points.\n * @memberof OverlapArea\n */\n\nfunction getAreaSize(points) {\n  if (points.length < 3) {\n    return 0;\n  }\n\n  return Math.abs(sum(points.map(function (point, i) {\n    var nextPoint = points[i + 1] || points[0];\n    return point[0] * nextPoint[1] - nextPoint[0] * point[1];\n  }))) / 2;\n}\n/**\n * Get points that fit the rect,\n * @memberof OverlapArea\n */\n\nfunction fitPoints(points, rect) {\n  var width = rect.width,\n      height = rect.height,\n      left = rect.left,\n      top = rect.top;\n\n  var _a = getMinMaxs(points),\n      minX = _a.minX,\n      minY = _a.minY,\n      maxX = _a.maxX,\n      maxY = _a.maxY;\n\n  var ratioX = width / (maxX - minX);\n  var ratioY = height / (maxY - minY);\n  return points.map(function (point) {\n    return [left + (point[0] - minX) * ratioX, top + (point[1] - minY) * ratioY];\n  });\n}\n/**\n * Get the minimum and maximum points of the points.\n * @memberof OverlapArea\n */\n\nfunction getMinMaxs(points) {\n  var xs = points.map(function (point) {\n    return point[0];\n  });\n  var ys = points.map(function (point) {\n    return point[1];\n  });\n  return {\n    minX: Math.min.apply(Math, xs),\n    minY: Math.min.apply(Math, ys),\n    maxX: Math.max.apply(Math, xs),\n    maxY: Math.max.apply(Math, ys)\n  };\n}\n/**\n * Whether the point is in shape\n * @param - point pos\n * @param - shape points\n * @param - whether to check except line\n * @memberof OverlapArea\n */\n\nfunction isInside(pos, points, excludeLine) {\n  var x = pos[0],\n      y = pos[1];\n\n  var _a = getMinMaxs(points),\n      minX = _a.minX,\n      maxX = _a.maxX;\n\n  var xLine = [[minX, y], [maxX, y]];\n  var xLinearConstants = getLinearConstants(xLine[0], xLine[1]);\n  var lines = convertLines(points);\n  var intersectionPosInfos = [];\n  lines.forEach(function (line) {\n    var linearConstants = getLinearConstants(line[0], line[1]);\n    var standardPoint = line[0];\n\n    if (isSameConstants(xLinearConstants, linearConstants)) {\n      intersectionPosInfos.push({\n        pos: pos,\n        line: line,\n        type: \"line\"\n      });\n    } else {\n      var xPoints = getPointsOnLines(getIntersectionPointsByConstants(xLinearConstants, linearConstants), [xLine, line]);\n      xPoints.forEach(function (point) {\n        if (line.some(function (linePoint) {\n          return isSamePoint(linePoint, point);\n        })) {\n          intersectionPosInfos.push({\n            pos: point,\n            line: line,\n            type: \"point\"\n          });\n        } else if (tinyThrottle(standardPoint[1] - y) !== 0) {\n          intersectionPosInfos.push({\n            pos: point,\n            line: line,\n            type: \"intersection\"\n          });\n        }\n      });\n    }\n  });\n\n  if (!excludeLine) {\n    // on line\n    if (find(intersectionPosInfos, function (p) {\n      return p[0] === x;\n    })) {\n      return true;\n    }\n  }\n\n  var intersectionCount = 0;\n  var xMap = {};\n  intersectionPosInfos.forEach(function (_a) {\n    var pos = _a.pos,\n        type = _a.type,\n        line = _a.line;\n\n    if (pos[0] > x) {\n      return;\n    }\n\n    if (type === \"intersection\") {\n      ++intersectionCount;\n    } else if (type === \"line\") {\n      return;\n    } else if (type === \"point\") {\n      var point = find(line, function (linePoint) {\n        return linePoint[1] !== y;\n      });\n      var prevValue = xMap[pos[0]];\n      var nextValue = point[1] > y ? 1 : -1;\n\n      if (!prevValue) {\n        xMap[pos[0]] = nextValue;\n      } else if (prevValue !== nextValue) {\n        ++intersectionCount;\n      }\n    }\n  });\n  return intersectionCount % 2 === 1;\n}\n/**\n * Get distance from point to constants. [a, b, c] (ax + by + c = 0)\n * @return [a, b, c]\n * @memberof OverlapArea\n */\n\nfunction getDistanceFromPointToConstants(_a, pos) {\n  var a = _a[0],\n      b = _a[1],\n      c = _a[2];\n  return (a * pos[0] + b * pos[1] + c) / (a * a + b * b);\n}\n/**\n * Get the coefficient of the linear function. [a, b, c] (ax + by + c = 0)\n * @return [a, b, c]\n * @memberof OverlapArea\n */\n\nfunction getLinearConstants(point1, point2) {\n  var x1 = point1[0],\n      y1 = point1[1];\n  var x2 = point2[0],\n      y2 = point2[1]; // ax + by + c = 0\n  // [a, b, c]\n\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n\n  if (Math.abs(dx) < TINY_NUM) {\n    dx = 0;\n  }\n\n  if (Math.abs(dy) < TINY_NUM) {\n    dy = 0;\n  } // b > 0\n  // ax + by + c = 0\n\n\n  var a = 0;\n  var b = 0;\n  var c = 0;\n\n  if (!dx) {\n    if (dy) {\n      // -x + 1 = 0\n      a = -1;\n      c = x1;\n    }\n  } else if (!dy) {\n    // y - 1 = 0\n    b = 1;\n    c = -y1;\n  } else {\n    // y = -a(x - x1) + y1\n    // ax + y + a * x1 - y1 = 0\n    a = -dy / dx;\n    b = 1;\n    c = -a * x1 - y1;\n  }\n\n  return [a, b, c];\n}\n/**\n * Get intersection points with linear functions.\n * @memberof OverlapArea\n */\n\nfunction getIntersectionPointsByConstants(linearConstants1, linearConstants2) {\n  var a1 = linearConstants1[0],\n      b1 = linearConstants1[1],\n      c1 = linearConstants1[2];\n  var a2 = linearConstants2[0],\n      b2 = linearConstants2[1],\n      c2 = linearConstants2[2];\n  var isZeroA = a1 === 0 && a2 === 0;\n  var isZeroB = b1 === 0 && b2 === 0;\n  var results = [];\n\n  if (isZeroA && isZeroB) {\n    return [];\n  } else if (isZeroA) {\n    // b1 * y + c1 = 0\n    // b2 * y + c2 = 0\n    var y1 = -c1 / b1;\n    var y2 = -c2 / b2;\n\n    if (y1 !== y2) {\n      return [];\n    } else {\n      return [[-Infinity, y1], [Infinity, y1]];\n    }\n  } else if (isZeroB) {\n    // a1 * x + c1 = 0\n    // a2 * x + c2 = 0\n    var x1 = -c1 / a1;\n    var x2 = -c2 / a2;\n\n    if (x1 !== x2) {\n      return [];\n    } else {\n      return [[x1, -Infinity], [x1, Infinity]];\n    }\n  } else if (a1 === 0) {\n    // b1 * y + c1 = 0\n    // y = - c1 / b1;\n    // a2 * x + b2 * y + c2 = 0\n    var y = -c1 / b1;\n    var x = -(b2 * y + c2) / a2;\n    results = [[x, y]];\n  } else if (a2 === 0) {\n    // b2 * y + c2 = 0\n    // y = - c2 / b2;\n    // a1 * x + b1 * y + c1 = 0\n    var y = -c2 / b2;\n    var x = -(b1 * y + c1) / a1;\n    results = [[x, y]];\n  } else if (b1 === 0) {\n    // a1 * x + c1 = 0\n    // x = - c1 / a1;\n    // a2 * x + b2 * y + c2 = 0\n    var x = -c1 / a1;\n    var y = -(a2 * x + c2) / b2;\n    results = [[x, y]];\n  } else if (b2 === 0) {\n    // a2 * x + c2 = 0\n    // x = - c2 / a2;\n    // a1 * x + b1 * y + c1 = 0\n    var x = -c2 / a2;\n    var y = -(a1 * x + c1) / b1;\n    results = [[x, y]];\n  } else {\n    // a1 * x + b1 * y + c1 = 0\n    // a2 * x + b2 * y + c2 = 0\n    // b2 * a1 * x + b2 * b1 * y + b2 * c1 = 0\n    // b1 * a2 * x + b1 * b2 * y + b1 * c2 = 0\n    // (b2 * a1 - b1 * a2)  * x = (b1 * c2 - b2 * c1)\n    var x = (b1 * c2 - b2 * c1) / (b2 * a1 - b1 * a2);\n    var y = -(a1 * x + c1) / b1;\n    results = [[x, y]];\n  }\n\n  return results.map(function (result) {\n    return [result[0], result[1]];\n  });\n}\n/**\n * Get intersection points to the two lines.\n * @memberof OverlapArea\n */\n\nfunction getIntersectionPoints(line1, line2, isLimit) {\n  var points = getIntersectionPointsByConstants(getLinearConstants(line1[0], line1[1]), getLinearConstants(line2[0], line2[1]));\n\n  if (isLimit) {\n    return getPointsOnLines(points, [line1, line2]);\n  }\n\n  return points;\n}\nfunction isPointOnLine(pos, line) {\n  var linearConstants = getLinearConstants(line[0], line[1]);\n  return tinyThrottle(getDistanceFromPointToConstants(linearConstants, pos)) === 0;\n}\n/**\n * Get the points on the lines (between two points).\n * @memberof OverlapArea\n */\n\nfunction getPointsOnLines(points, lines) {\n  var minMaxs = lines.map(function (line) {\n    return [0, 1].map(function (order) {\n      return [Math.min(line[0][order], line[1][order]), Math.max(line[0][order], line[1][order])];\n    });\n  });\n  var results = [];\n\n  if (points.length === 2) {\n    var _a = points[0],\n        x = _a[0],\n        y = _a[1];\n\n    if (!tinyThrottle(x - points[1][0])) {\n      /// Math.max(minY1, minY2)\n      var top = Math.max.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[1][0];\n      })); /// Math.min(maxY1, miax2)\n\n      var bottom = Math.min.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[1][1];\n      }));\n\n      if (tinyThrottle(top - bottom) > 0) {\n        return [];\n      }\n\n      results = [[x, top], [x, bottom]];\n    } else if (!tinyThrottle(y - points[1][1])) {\n      /// Math.max(minY1, minY2)\n      var left = Math.max.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[0][0];\n      })); /// Math.min(maxY1, miax2)\n\n      var right = Math.min.apply(Math, minMaxs.map(function (minMax) {\n        return minMax[0][1];\n      }));\n\n      if (tinyThrottle(left - right) > 0) {\n        return [];\n      }\n\n      results = [[left, y], [right, y]];\n    }\n  }\n\n  if (!results.length) {\n    results = points.filter(function (point) {\n      var pointX = point[0],\n          pointY = point[1];\n      return minMaxs.every(function (minMax) {\n        return 0 <= tinyThrottle(pointX - minMax[0][0]) && 0 <= tinyThrottle(minMax[0][1] - pointX) && 0 <= tinyThrottle(pointY - minMax[1][0]) && 0 <= tinyThrottle(minMax[1][1] - pointY);\n      });\n    });\n  }\n\n  return results.map(function (result) {\n    return [tinyThrottle(result[0]), tinyThrottle(result[1])];\n  });\n}\n/**\n* Convert two points into lines.\n* @function\n* @memberof OverlapArea\n*/\n\nfunction convertLines(points) {\n  return __spreadArrays(points.slice(1), [points[0]]).map(function (point, i) {\n    return [points[i], point];\n  });\n}\n\nfunction getOverlapPointInfos(points1, points2) {\n  var targetPoints1 = points1.slice();\n  var targetPoints2 = points2.slice();\n\n  if (getShapeDirection(targetPoints1) === -1) {\n    targetPoints1.reverse();\n  }\n\n  if (getShapeDirection(targetPoints2) === -1) {\n    targetPoints2.reverse();\n  }\n\n  var lines1 = convertLines(targetPoints1);\n  var lines2 = convertLines(targetPoints2);\n  var linearConstantsList1 = lines1.map(function (line1) {\n    return getLinearConstants(line1[0], line1[1]);\n  });\n  var linearConstantsList2 = lines2.map(function (line2) {\n    return getLinearConstants(line2[0], line2[1]);\n  });\n  var overlapInfos = [];\n  linearConstantsList1.forEach(function (linearConstants1, i) {\n    var line1 = lines1[i];\n    var linePointInfos = [];\n    linearConstantsList2.forEach(function (linearConstants2, j) {\n      var intersectionPoints = getIntersectionPointsByConstants(linearConstants1, linearConstants2);\n      var points = getPointsOnLines(intersectionPoints, [line1, lines2[j]]);\n      linePointInfos.push.apply(linePointInfos, points.map(function (pos) {\n        return {\n          index1: i,\n          index2: j,\n          pos: pos,\n          type: \"intersection\"\n        };\n      }));\n    });\n    linePointInfos.sort(function (a, b) {\n      return getDist(line1[0], a.pos) - getDist(line1[0], b.pos);\n    });\n    overlapInfos.push.apply(overlapInfos, linePointInfos);\n\n    if (isInside(line1[1], targetPoints2)) {\n      overlapInfos.push({\n        index1: i,\n        index2: -1,\n        pos: line1[1],\n        type: \"inside\"\n      });\n    }\n  });\n  lines2.forEach(function (line2, i) {\n    if (!isInside(line2[1], targetPoints1)) {\n      return;\n    }\n\n    var isNext = false;\n    var index = findIndex(overlapInfos, function (_a) {\n      var index2 = _a.index2;\n\n      if (index2 === i) {\n        isNext = true;\n        return false;\n      }\n\n      if (isNext) {\n        return true;\n      }\n\n      return false;\n    });\n\n    if (index === -1) {\n      isNext = false;\n      index = findIndex(overlapInfos, function (_a) {\n        var index1 = _a.index1,\n            index2 = _a.index2;\n\n        if (index1 === -1 && index2 + 1 === i) {\n          isNext = true;\n          return false;\n        }\n\n        if (isNext) {\n          return true;\n        }\n\n        return false;\n      });\n    }\n\n    if (index === -1) {\n      overlapInfos.push({\n        index1: -1,\n        index2: i,\n        pos: line2[1],\n        type: \"inside\"\n      });\n    } else {\n      overlapInfos.splice(index, 0, {\n        index1: -1,\n        index2: i,\n        pos: line2[1],\n        type: \"inside\"\n      });\n    }\n  });\n  var pointMap = {};\n  return overlapInfos.filter(function (_a) {\n    var pos = _a.pos;\n    var key = pos[0] + \"x\" + pos[1];\n\n    if (pointMap[key]) {\n      return false;\n    }\n\n    pointMap[key] = true;\n    return true;\n  });\n}\n/**\n* Get the points of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\n\nfunction getOverlapPoints(points1, points2) {\n  var infos = getOverlapPointInfos(points1, points2);\n  return infos.map(function (_a) {\n    var pos = _a.pos;\n    return pos;\n  });\n}\n\nfunction isConnectedLine(line) {\n  var _a = line[0],\n      prevIndex1 = _a.index1,\n      prevIndex2 = _a.index2,\n      _b = line[1],\n      nextIndex1 = _b.index1,\n      nextIndex2 = _b.index2;\n\n  if (prevIndex1 !== -1) {\n    // same line\n    if (prevIndex1 === nextIndex1) {\n      return true;\n    }\n\n    if (prevIndex1 + 1 === nextIndex1) {\n      return true;\n    }\n  }\n\n  if (prevIndex2 !== -1) {\n    // same line\n    if (prevIndex2 === nextIndex2) {\n      return true;\n    }\n\n    if (prevIndex2 + 1 === nextIndex2) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/**\n* Get the areas of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\n\nfunction getOverlapAreas(points1, points2) {\n  var infos = getOverlapPointInfos(points1, points2);\n  var areas = [];\n  var area;\n  getOverlapPointInfos(points1, points2).forEach(function (info, i, arr) {\n    if (i === 0 || !isConnectedLine([arr[i - 1], info])) {\n      area = [info];\n      areas.push(area);\n    } else {\n      area.push(info);\n    }\n  });\n  return areas.map(function (area) {\n    return area.map(function (_a) {\n      var pos = _a.pos;\n      return pos;\n    });\n  });\n}\n\nfunction findReversedAreas(points1, points2, index, areas) {\n  if (index === void 0) {\n    index = 0;\n  }\n\n  if (areas === void 0) {\n    areas = [];\n  }\n\n  var isFirst = areas.length === 0;\n  var length = points1.length;\n  var nextIndex = points1[index] ? index : 0;\n\n  var nextPoints1 = __spreadArrays(points1.slice(nextIndex), points1.slice(0, nextIndex));\n\n  var _loop_1 = function (i) {\n    var point1 = nextPoints1[i];\n\n    if (find(points2, function (point2) {\n      return point2[0] === point1[0] && point2[1] === point1[1];\n    })) {\n      return \"continue\";\n    }\n\n    if (areas.some(function (nextArea) {\n      return find(nextArea, function (areaPoint) {\n        return areaPoint[0] === point1[0] && areaPoint[1] === point1[1];\n      });\n    })) {\n      if (isFirst) {\n        return \"continue\";\n      } else {\n        return \"break\";\n      }\n    }\n\n    var nextArea = void 0;\n\n    if (isFirst) {\n      nextArea = [];\n      areas.push(nextArea);\n    } else {\n      nextArea = areas[areas.length - 1];\n    }\n\n    nextArea.push(point1);\n    var line = [point1, points1[index + 1] || points1[0]];\n    var nextPoint2 = points2.filter(function (point2) {\n      return isPointOnLine(point2, line);\n    }).sort(function (a, b) {\n      return getDist(point1, a) - getDist(point1, b);\n    })[0];\n\n    if (!nextPoint2) {\n      findReversedAreas(nextPoints1, points2, i + 1, areas);\n      return \"break\";\n    } else {\n      var point2Index = points2.indexOf(nextPoint2);\n      findReversedAreas(points2, points1, point2Index, areas);\n\n      if (!isFirst) {\n        return \"break\";\n      }\n    }\n  };\n\n  for (var i = 0; i < length; ++i) {\n    var state_1 = _loop_1(i);\n\n    if (state_1 === \"break\") break;\n  }\n\n  return areas;\n}\n\nfunction findConnectedAreas(points1, points2) {\n  return findReversedAreas(points1, __spreadArrays(points2).reverse());\n}\n/**\n* Get non-overlapping areas of two shapes based on points1.\n* @memberof OverlapArea\n*/\n\nfunction getUnoverlapAreas(points1, points2) {\n  if (!points2.length) {\n    return [__spreadArrays(points1)];\n  }\n\n  var overlapAreas = getOverlapAreas(points1, points2);\n  var unoverlapAreas = [points1];\n  overlapAreas.forEach(function (overlapArea) {\n    var nextOverlapArea = __spreadArrays(overlapArea).reverse();\n\n    unoverlapAreas = flat(unoverlapAreas.map(function (area) {\n      var connectedAreas = findReversedAreas(area, nextOverlapArea);\n      var firstConnectedArea = connectedAreas[0];\n\n      if (connectedAreas.length === 1 && nextOverlapArea.every(function (point) {\n        return firstConnectedArea.indexOf(point) === -1;\n      })) {\n        var lastPoint_1 = firstConnectedArea[firstConnectedArea.length - 1];\n\n        var firstPoint = __spreadArrays(nextOverlapArea).sort(function (a, b) {\n          return getDist(lastPoint_1, a) - getDist(lastPoint_1, b);\n        })[0];\n\n        var firstIndex = nextOverlapArea.indexOf(firstPoint);\n        firstConnectedArea.push.apply(firstConnectedArea, __spreadArrays(nextOverlapArea.slice(firstIndex), nextOverlapArea.slice(0, firstIndex), [nextOverlapArea[firstIndex], lastPoint_1]));\n      }\n\n      return connectedAreas;\n    }));\n  });\n  return unoverlapAreas;\n}\n/**\n* Gets the size of the overlapped part of two shapes.\n* @function\n* @memberof OverlapArea\n*/\n\nfunction getOverlapSize(points1, points2) {\n  var points = getOverlapPoints(points1, points2);\n  return getAreaSize(points);\n}\n\nexport { convertLines, findConnectedAreas, fitPoints, getAreaSize, getDistanceFromPointToConstants, getIntersectionPoints, getIntersectionPointsByConstants, getLinearConstants, getMinMaxs, getOverlapAreas, getOverlapPoints, getOverlapSize, getPointsOnLines, getUnoverlapAreas, isInside, isPointOnLine };\n//# sourceMappingURL=overlap-area.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: @scena/event-emitter\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesture.git\nversion: 1.0.5\n*/\nimport { isObject, findIndex } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n}\n\n/**\n * Implement EventEmitter on object or component.\n */\n\nvar EventEmitter =\n/*#__PURE__*/\nfunction () {\n  function EventEmitter() {\n    this._events = {};\n  }\n  /**\n   * Add a listener to the registered event.\n   * @param - Name of the event to be added\n   * @param - listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add listener in \"a\" event\n   * emitter.on(\"a\", () => {\n   * });\n   * // Add listeners\n   * emitter.on({\n   *  a: () => {},\n   *  b: () => {},\n   * });\n   */\n\n\n  var __proto = EventEmitter.prototype;\n\n  __proto.on = function (eventName, listener) {\n    if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.on(name, eventName[name]);\n      }\n    } else {\n      this._addEvent(eventName, listener, {});\n    }\n\n    return this;\n  };\n  /**\n   * Remove listeners registered in the event target.\n   * @param - Name of the event to be removed\n   * @param - listener function of the event to be removed\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Remove all listeners.\n   * emitter.off();\n   *\n   * // Remove all listeners in \"A\" event.\n   * emitter.off(\"a\");\n   *\n   *\n   * // Remove \"listener\" listener in \"a\" event.\n   * emitter.off(\"a\", listener);\n   */\n\n\n  __proto.off = function (eventName, listener) {\n    if (!eventName) {\n      this._events = {};\n    } else if (isObject(eventName)) {\n      for (var name in eventName) {\n        this.off(name);\n      }\n    } else if (!listener) {\n      this._events[eventName] = [];\n    } else {\n      var events = this._events[eventName];\n\n      if (events) {\n        var index = findIndex(events, function (e) {\n          return e.listener === listener;\n        });\n\n        if (index > -1) {\n          events.splice(index, 1);\n        }\n      }\n    }\n\n    return this;\n  };\n  /**\n   * Add a disposable listener and Use promise to the registered event.\n   * @param - Name of the event to be added\n   * @param - disposable listener function of the event to be added\n   * @example\n   * import EventEmitter from \"@scena/event-emitter\";\n   * cosnt emitter = new EventEmitter();\n   *\n   * // Add a disposable listener in \"a\" event\n   * emitter.once(\"a\", () => {\n   * });\n   *\n   * // Use Promise\n   * emitter.once(\"a\").then(e => {\n   * });\n   */\n\n\n  __proto.once = function (eventName, listener) {\n    var _this = this;\n\n    if (listener) {\n      this._addEvent(eventName, listener, {\n        once: true\n      });\n    }\n\n    return new Promise(function (resolve) {\n      _this._addEvent(eventName, resolve, {\n        once: true\n      });\n    });\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n\n  __proto.emit = function (eventName, param) {\n    var _this = this;\n\n    if (param === void 0) {\n      param = {};\n    }\n\n    var events = this._events[eventName];\n\n    if (!eventName || !events) {\n      return true;\n    }\n\n    var isStop = false;\n    param.eventType = eventName;\n\n    param.stop = function () {\n      isStop = true;\n    };\n\n    param.currentTarget = this;\n\n    __spreadArrays(events).forEach(function (info) {\n      info.listener(param);\n\n      if (info.once) {\n        _this.off(eventName, info.listener);\n      }\n    });\n\n    return !isStop;\n  };\n  /**\n   * Fires an event to call listeners.\n   * @param - Event name\n   * @param - Event parameter\n   * @return If false, stop the event.\n   * @example\n   *\n   * import EventEmitter from \"@scena/event-emitter\";\n   *\n   *\n   * const emitter = new EventEmitter();\n   *\n   * emitter.on(\"a\", e => {\n   * });\n   *\n   *\n   * emitter.emit(\"a\", {\n   *   a: 1,\n   * });\n   */\n\n  /**\n  * Fires an event to call listeners.\n  * @param - Event name\n  * @param - Event parameter\n  * @return If false, stop the event.\n  * @example\n  *\n  * import EventEmitter from \"@scena/event-emitter\";\n  *\n  *\n  * const emitter = new EventEmitter();\n  *\n  * emitter.on(\"a\", e => {\n  * });\n  *\n  * // emit\n  * emitter.trigger(\"a\", {\n  *   a: 1,\n  * });\n  */\n\n\n  __proto.trigger = function (eventName, param) {\n    if (param === void 0) {\n      param = {};\n    }\n\n    return this.emit(eventName, param);\n  };\n\n  __proto._addEvent = function (eventName, listener, options) {\n    var events = this._events;\n    events[eventName] = events[eventName] || [];\n    var listeners = events[eventName];\n    listeners.push(__assign({\n      listener: listener\n    }, options));\n  };\n\n  return EventEmitter;\n}();\n\nexport default EventEmitter;\n//# sourceMappingURL=event-emitter.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: gesto\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesto.git\nversion: 1.15.1\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { removeEvent, addEvent, now } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nfunction getRad(pos1, pos2) {\n    var distX = pos2[0] - pos1[0];\n    var distY = pos2[1] - pos1[1];\n    var rad = Math.atan2(distY, distX);\n    return rad >= 0 ? rad : rad + Math.PI * 2;\n}\nfunction getRotatiion(touches) {\n    return getRad([\n        touches[0].clientX,\n        touches[0].clientY,\n    ], [\n        touches[1].clientX,\n        touches[1].clientY,\n    ]) / Math.PI * 180;\n}\nfunction isMultiTouch(e) {\n    return e.touches && e.touches.length >= 2;\n}\nfunction getEventClients(e) {\n    if (!e) {\n        return [];\n    }\n    if (e.touches) {\n        return getClients(e.touches);\n    }\n    else {\n        return [getClient(e)];\n    }\n}\nfunction isMouseEvent(e) {\n    return e && (e.type.indexOf(\"mouse\") > -1 || \"button\" in e);\n}\nfunction getPosition(clients, prevClients, startClients) {\n    var length = startClients.length;\n    var _a = getAverageClient(clients, length), clientX = _a.clientX, clientY = _a.clientY, originalClientX = _a.originalClientX, originalClientY = _a.originalClientY;\n    var _b = getAverageClient(prevClients, length), prevX = _b.clientX, prevY = _b.clientY;\n    var _c = getAverageClient(startClients, length), startX = _c.clientX, startY = _c.clientY;\n    var deltaX = clientX - prevX;\n    var deltaY = clientY - prevY;\n    var distX = clientX - startX;\n    var distY = clientY - startY;\n    return {\n        clientX: originalClientX,\n        clientY: originalClientY,\n        deltaX: deltaX,\n        deltaY: deltaY,\n        distX: distX,\n        distY: distY,\n    };\n}\nfunction getDist(clients) {\n    return Math.sqrt(Math.pow(clients[0].clientX - clients[1].clientX, 2)\n        + Math.pow(clients[0].clientY - clients[1].clientY, 2));\n}\nfunction getClients(touches) {\n    var length = Math.min(touches.length, 2);\n    var clients = [];\n    for (var i = 0; i < length; ++i) {\n        clients.push(getClient(touches[i]));\n    }\n    return clients;\n}\nfunction getClient(e) {\n    return {\n        clientX: e.clientX,\n        clientY: e.clientY,\n    };\n}\nfunction getAverageClient(clients, length) {\n    if (length === void 0) { length = clients.length; }\n    var sumClient = {\n        clientX: 0,\n        clientY: 0,\n        originalClientX: 0,\n        originalClientY: 0,\n    };\n    for (var i = 0; i < length; ++i) {\n        var client = clients[i];\n        sumClient.originalClientX += \"originalClientX\" in client ? client.originalClientX : client.clientX;\n        sumClient.originalClientY += \"originalClientY\" in client ? client.originalClientY : client.clientY;\n        sumClient.clientX += client.clientX;\n        sumClient.clientY += client.clientY;\n    }\n    if (!length) {\n        return sumClient;\n    }\n    return {\n        clientX: sumClient.clientX / length,\n        clientY: sumClient.clientY / length,\n        originalClientX: sumClient.originalClientX / length,\n        originalClientY: sumClient.originalClientY / length,\n    };\n}\n\nvar ClientStore = /*#__PURE__*/ (function () {\n    function ClientStore(clients) {\n        this.prevClients = [];\n        this.startClients = [];\n        this.movement = 0;\n        this.length = 0;\n        this.startClients = clients;\n        this.prevClients = clients;\n        this.length = clients.length;\n    }\n    ClientStore.prototype.getAngle = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getRotatiion(clients);\n    };\n    ClientStore.prototype.getRotation = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getRotatiion(clients) - getRotatiion(this.startClients);\n    };\n    ClientStore.prototype.getPosition = function (clients, isAdd) {\n        if (clients === void 0) { clients = this.prevClients; }\n        var position = getPosition(clients || this.prevClients, this.prevClients, this.startClients);\n        var deltaX = position.deltaX, deltaY = position.deltaY;\n        this.movement += Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n        this.prevClients = clients;\n        return position;\n    };\n    ClientStore.prototype.getPositions = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        var prevClients = this.prevClients;\n        return this.startClients.map(function (startClient, i) { return getPosition([clients[i]], [prevClients[i]], [startClient]); });\n    };\n    ClientStore.prototype.getMovement = function (clients) {\n        var movement = this.movement;\n        if (!clients) {\n            return movement;\n        }\n        var currentClient = getAverageClient(clients, this.length);\n        var prevClient = getAverageClient(this.prevClients, this.length);\n        var deltaX = currentClient.clientX - prevClient.clientX;\n        var deltaY = currentClient.clientY - prevClient.clientY;\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY) + movement;\n    };\n    ClientStore.prototype.getDistance = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getDist(clients);\n    };\n    ClientStore.prototype.getScale = function (clients) {\n        if (clients === void 0) { clients = this.prevClients; }\n        return getDist(clients) / getDist(this.startClients);\n    };\n    ClientStore.prototype.move = function (deltaX, deltaY) {\n        this.startClients.forEach(function (client) {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n        this.prevClients.forEach(function (client) {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n    };\n    return ClientStore;\n}());\n\nvar INPUT_TAGNAMES = [\"textarea\", \"input\"];\n/**\n * You can set up drag, pinch events in any browser.\n */\nvar Gesto = /*#__PURE__*/ (function (_super) {\n    __extends(Gesto, _super);\n    /**\n     *\n     */\n    function Gesto(targets, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this) || this;\n        _this.options = {};\n        _this.flag = false;\n        _this.pinchFlag = false;\n        _this.data = {};\n        _this.isDrag = false;\n        _this.isPinch = false;\n        _this.isMouse = false;\n        _this.isTouch = false;\n        _this.clientStores = [];\n        _this.targets = [];\n        _this.prevTime = 0;\n        _this.doubleFlag = false;\n        _this._dragFlag = false;\n        _this._isTrusted = false;\n        _this._isMouseEvent = false;\n        _this._isSecondaryButton = false;\n        _this._preventMouseEvent = false;\n        _this._prevInputEvent = null;\n        _this.onDragStart = function (e, isTrusted) {\n            if (isTrusted === void 0) { isTrusted = true; }\n            if (!_this.flag && e.cancelable === false) {\n                return;\n            }\n            var _a = _this.options, container = _a.container, pinchOutside = _a.pinchOutside, preventWheelClick = _a.preventWheelClick, preventRightClick = _a.preventRightClick, preventDefault = _a.preventDefault, checkInput = _a.checkInput, preventClickEventOnDragStart = _a.preventClickEventOnDragStart, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickEventByCondition = _a.preventClickEventByCondition;\n            var isTouch = _this.isTouch;\n            var isDragStart = !_this.flag;\n            _this._isSecondaryButton = e.which === 3 || e.button === 2;\n            if ((preventWheelClick && (e.which === 2 || e.button === 1))\n                || (preventRightClick && (e.which === 3 || e.button === 2))) {\n                _this.stop();\n                return false;\n            }\n            if (isDragStart) {\n                var activeElement = document.activeElement;\n                var target = e.target;\n                if (target) {\n                    var tagName = target.tagName.toLowerCase();\n                    var hasInput = INPUT_TAGNAMES.indexOf(tagName) > -1;\n                    var hasContentEditable = target.isContentEditable;\n                    if (hasInput || hasContentEditable) {\n                        if (checkInput || activeElement === target) {\n                            // force false or already focused.\n                            return false;\n                        }\n                        // no focus\n                        if (activeElement\n                            && hasContentEditable\n                            && activeElement.isContentEditable\n                            && activeElement.contains(target)) {\n                            return false;\n                        }\n                    }\n                    else if ((preventDefault || e.type === \"touchstart\") && activeElement) {\n                        var activeTagName = activeElement.tagName.toLowerCase();\n                        if (activeElement.isContentEditable || INPUT_TAGNAMES.indexOf(activeTagName) > -1) {\n                            activeElement.blur();\n                        }\n                    }\n                    if (preventClickEventOnDragStart || preventClickEventOnDrag || preventClickEventByCondition) {\n                        addEvent(window, \"click\", _this._onClick, true);\n                    }\n                }\n                _this.clientStores = [new ClientStore(getEventClients(e))];\n                _this.flag = true;\n                _this.isDrag = false;\n                _this._isTrusted = isTrusted;\n                _this._dragFlag = true;\n                _this._prevInputEvent = e;\n                _this.data = {};\n                _this.doubleFlag = now() - _this.prevTime < 200;\n                _this._isMouseEvent = isMouseEvent(e);\n                if (!_this._isMouseEvent && _this._preventMouseEvent) {\n                    _this._preventMouseEvent = false;\n                }\n                var result = _this._preventMouseEvent || _this.emit(\"dragStart\", __assign(__assign({ data: _this.data, datas: _this.data, inputEvent: e, isMouseEvent: _this._isMouseEvent, isSecondaryButton: _this._isSecondaryButton, isTrusted: isTrusted, isDouble: _this.doubleFlag }, _this.getCurrentStore().getPosition()), { preventDefault: function () {\n                        e.preventDefault();\n                    }, preventDrag: function () {\n                        _this._dragFlag = false;\n                    } }));\n                if (result === false) {\n                    _this.stop();\n                }\n                if (_this._isMouseEvent && _this.flag && preventDefault) {\n                    e.preventDefault();\n                }\n            }\n            if (!_this.flag) {\n                return false;\n            }\n            var timer = 0;\n            if (isDragStart) {\n                _this._attchDragEvent();\n                // wait pinch\n                if (isTouch && pinchOutside) {\n                    timer = setTimeout(function () {\n                        addEvent(container, \"touchstart\", _this.onDragStart, {\n                            passive: false\n                        });\n                    });\n                }\n            }\n            else if (isTouch && pinchOutside) {\n                // pinch is occured\n                removeEvent(container, \"touchstart\", _this.onDragStart);\n            }\n            if (_this.flag && isMultiTouch(e)) {\n                clearTimeout(timer);\n                if (isDragStart && (e.touches.length !== e.changedTouches.length)) {\n                    return;\n                }\n                if (!_this.pinchFlag) {\n                    _this.onPinchStart(e);\n                }\n            }\n        };\n        _this.onDrag = function (e, isScroll) {\n            if (!_this.flag) {\n                return;\n            }\n            var preventDefault = _this.options.preventDefault;\n            if (!_this._isMouseEvent && preventDefault) {\n                e.preventDefault();\n            }\n            _this._prevInputEvent = e;\n            var clients = getEventClients(e);\n            var result = _this.moveClients(clients, e, false);\n            if (_this._dragFlag) {\n                if (_this.pinchFlag || result.deltaX || result.deltaY) {\n                    var dragResult = _this._preventMouseEvent || _this.emit(\"drag\", __assign(__assign({}, result), { isScroll: !!isScroll, inputEvent: e }));\n                    if (dragResult === false) {\n                        _this.stop();\n                        return;\n                    }\n                }\n                if (_this.pinchFlag) {\n                    _this.onPinch(e, clients);\n                }\n            }\n            _this.getCurrentStore().getPosition(clients, true);\n        };\n        _this.onDragEnd = function (e) {\n            if (!_this.flag) {\n                return;\n            }\n            var _a = _this.options, pinchOutside = _a.pinchOutside, container = _a.container, preventClickEventOnDrag = _a.preventClickEventOnDrag, preventClickEventOnDragStart = _a.preventClickEventOnDragStart, preventClickEventByCondition = _a.preventClickEventByCondition;\n            var isDrag = _this.isDrag;\n            if (preventClickEventOnDrag || preventClickEventOnDragStart || preventClickEventByCondition) {\n                requestAnimationFrame(function () {\n                    _this._allowClickEvent();\n                });\n            }\n            if (!preventClickEventByCondition && !preventClickEventOnDragStart && preventClickEventOnDrag && !isDrag) {\n                _this._allowClickEvent();\n            }\n            if (_this.isTouch && pinchOutside) {\n                removeEvent(container, \"touchstart\", _this.onDragStart);\n            }\n            if (_this.pinchFlag) {\n                _this.onPinchEnd(e);\n            }\n            var clients = (e === null || e === void 0 ? void 0 : e.touches) ? getEventClients(e) : [];\n            var clientsLength = clients.length;\n            if (clientsLength === 0 || !_this.options.keepDragging) {\n                _this.flag = false;\n            }\n            else {\n                _this._addStore(new ClientStore(clients));\n            }\n            var position = _this._getPosition();\n            var currentTime = now();\n            var isDouble = !isDrag && _this.doubleFlag;\n            _this._prevInputEvent = null;\n            _this.prevTime = isDrag || isDouble ? 0 : currentTime;\n            if (!_this.flag) {\n                _this._dettachDragEvent();\n                _this._preventMouseEvent || _this.emit(\"dragEnd\", __assign({ data: _this.data, datas: _this.data, isDouble: isDouble, isDrag: isDrag, isClick: !isDrag, isMouseEvent: _this._isMouseEvent, isSecondaryButton: _this._isSecondaryButton, inputEvent: e, isTrusted: _this._isTrusted }, position));\n                _this.clientStores = [];\n                if (!_this._isMouseEvent) {\n                    _this._preventMouseEvent = true;\n                    requestAnimationFrame(function () {\n                        requestAnimationFrame(function () {\n                            _this._preventMouseEvent = false;\n                        });\n                    });\n                }\n            }\n        };\n        _this.onBlur = function () {\n            _this.onDragEnd();\n        };\n        _this._allowClickEvent = function () {\n            removeEvent(window, \"click\", _this._onClick, true);\n        };\n        _this._onClick = function (e) {\n            _this._allowClickEvent();\n            _this._preventMouseEvent = false;\n            var preventClickEventByCondition = _this.options.preventClickEventByCondition;\n            if (preventClickEventByCondition === null || preventClickEventByCondition === void 0 ? void 0 : preventClickEventByCondition(e)) {\n                return;\n            }\n            e.stopPropagation();\n            e.preventDefault();\n        };\n        _this._onContextMenu = function (e) {\n            var options = _this.options;\n            if (!options.preventRightClick) {\n                e.preventDefault();\n            }\n            else {\n                _this.onDragEnd(e);\n            }\n        };\n        _this._passCallback = function () { };\n        var elements = [].concat(targets);\n        _this.options = __assign({ checkInput: false, container: elements.length > 1 ? window : elements[0], preventRightClick: true, preventWheelClick: true, preventClickEventOnDragStart: false, preventClickEventOnDrag: false, preventClickEventByCondition: null, preventDefault: true, checkWindowBlur: false, keepDragging: false, pinchThreshold: 0, events: [\"touch\", \"mouse\"] }, options);\n        var _a = _this.options, container = _a.container, events = _a.events, checkWindowBlur = _a.checkWindowBlur;\n        _this.isTouch = events.indexOf(\"touch\") > -1;\n        _this.isMouse = events.indexOf(\"mouse\") > -1;\n        _this.targets = elements;\n        if (_this.isMouse) {\n            elements.forEach(function (el) {\n                addEvent(el, \"mousedown\", _this.onDragStart);\n                addEvent(el, \"mousemove\", _this._passCallback);\n            });\n            addEvent(container, \"contextmenu\", _this._onContextMenu);\n        }\n        if (checkWindowBlur) {\n            addEvent(window, \"blur\", _this.onBlur);\n        }\n        if (_this.isTouch) {\n            var passive_1 = {\n                passive: false,\n            };\n            elements.forEach(function (el) {\n                addEvent(el, \"touchstart\", _this.onDragStart, passive_1);\n                addEvent(el, \"touchmove\", _this._passCallback, passive_1);\n            });\n        }\n        return _this;\n    }\n    /**\n     * Stop Gesto's drag events.\n     */\n    Gesto.prototype.stop = function () {\n        this.isDrag = false;\n        this.data = {};\n        this.clientStores = [];\n        this.pinchFlag = false;\n        this.doubleFlag = false;\n        this.prevTime = 0;\n        this.flag = false;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n    };\n    /**\n     * The total moved distance\n     */\n    Gesto.prototype.getMovement = function (clients) {\n        return this.getCurrentStore().getMovement(clients) + this.clientStores.slice(1).reduce(function (prev, cur) {\n            return prev + cur.movement;\n        }, 0);\n    };\n    /**\n     * Whether to drag\n     */\n    Gesto.prototype.isDragging = function () {\n        return this.isDrag;\n    };\n    /**\n     * Whether to start drag\n     */\n    Gesto.prototype.isFlag = function () {\n        return this.flag;\n    };\n    /**\n     * Whether to start pinch\n     */\n    Gesto.prototype.isPinchFlag = function () {\n        return this.pinchFlag;\n    };\n    /**\n     * Whether to start double click\n     */\n    Gesto.prototype.isDoubleFlag = function () {\n        return this.doubleFlag;\n    };\n    /**\n     * Whether to pinch\n     */\n    Gesto.prototype.isPinching = function () {\n        return this.isPinch;\n    };\n    /**\n     * If a scroll event occurs, it is corrected by the scroll distance.\n     */\n    Gesto.prototype.scrollBy = function (deltaX, deltaY, e, isCallDrag) {\n        if (isCallDrag === void 0) { isCallDrag = true; }\n        if (!this.flag) {\n            return;\n        }\n        this.clientStores[0].move(deltaX, deltaY);\n        isCallDrag && this.onDrag(e, true);\n    };\n    /**\n     * Create a virtual drag event.\n     */\n    Gesto.prototype.move = function (_a, inputEvent) {\n        var deltaX = _a[0], deltaY = _a[1];\n        var store = this.getCurrentStore();\n        var nextClients = store.prevClients;\n        return this.moveClients(nextClients.map(function (_a) {\n            var clientX = _a.clientX, clientY = _a.clientY;\n            return {\n                clientX: clientX + deltaX,\n                clientY: clientY + deltaY,\n                originalClientX: clientX,\n                originalClientY: clientY,\n            };\n        }), inputEvent, true);\n    };\n    /**\n     * The dragStart event is triggered by an external event.\n     */\n    Gesto.prototype.triggerDragStart = function (e) {\n        this.onDragStart(e, false);\n    };\n    /**\n     * Set the event data while dragging.\n     */\n    Gesto.prototype.setEventData = function (data) {\n        var currentData = this.data;\n        for (var name_1 in data) {\n            currentData[name_1] = data[name_1];\n        }\n        return this;\n    };\n    /**\n     * Set the event data while dragging.\n     * Use `setEventData`\n     * @deprecated\n     */\n    Gesto.prototype.setEventDatas = function (data) {\n        return this.setEventData(data);\n    };\n    /**\n     * Get the current event state while dragging.\n     */\n    Gesto.prototype.getCurrentEvent = function (inputEvent) {\n        if (inputEvent === void 0) { inputEvent = this._prevInputEvent; }\n        return __assign(__assign({ data: this.data, datas: this.data }, this._getPosition()), { movement: this.getMovement(), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: false, inputEvent: inputEvent });\n    };\n    /**\n     * Get & Set the event data while dragging.\n     */\n    Gesto.prototype.getEventData = function () {\n        return this.data;\n    };\n    /**\n     * Get & Set the event data while dragging.\n     * Use getEventData method\n     * @depreacated\n     */\n    Gesto.prototype.getEventDatas = function () {\n        return this.data;\n    };\n    /**\n     * Unset Gesto\n     */\n    Gesto.prototype.unset = function () {\n        var _this = this;\n        var targets = this.targets;\n        var container = this.options.container;\n        this.off();\n        removeEvent(window, \"blur\", this.onBlur);\n        if (this.isMouse) {\n            targets.forEach(function (target) {\n                removeEvent(target, \"mousedown\", _this.onDragStart);\n            });\n            removeEvent(container, \"contextmenu\", this._onContextMenu);\n        }\n        if (this.isTouch) {\n            targets.forEach(function (target) {\n                removeEvent(target, \"touchstart\", _this.onDragStart);\n            });\n            removeEvent(container, \"touchstart\", this.onDragStart);\n        }\n        this._prevInputEvent = null;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n    };\n    Gesto.prototype.onPinchStart = function (e) {\n        var pinchThreshold = this.options.pinchThreshold;\n        if (this.isDrag && this.getMovement() > pinchThreshold) {\n            return;\n        }\n        var store = new ClientStore(getEventClients(e));\n        this.pinchFlag = true;\n        this._addStore(store);\n        var result = this.emit(\"pinchStart\", __assign(__assign({ data: this.data, datas: this.data, angle: store.getAngle(), touches: this.getCurrentStore().getPositions() }, store.getPosition()), { inputEvent: e, isTrusted: this._isTrusted }));\n        if (result === false) {\n            this.pinchFlag = false;\n        }\n    };\n    Gesto.prototype.onPinch = function (e, clients) {\n        if (!this.flag || !this.pinchFlag || clients.length < 2) {\n            return;\n        }\n        var store = this.getCurrentStore();\n        this.isPinch = true;\n        this.emit(\"pinch\", __assign(__assign({ data: this.data, datas: this.data, movement: this.getMovement(clients), angle: store.getAngle(clients), rotation: store.getRotation(clients), touches: store.getPositions(clients), scale: store.getScale(clients), distance: store.getDistance(clients) }, store.getPosition(clients)), { inputEvent: e, isTrusted: this._isTrusted }));\n    };\n    Gesto.prototype.onPinchEnd = function (e) {\n        if (!this.pinchFlag) {\n            return;\n        }\n        var isPinch = this.isPinch;\n        this.isPinch = false;\n        this.pinchFlag = false;\n        var store = this.getCurrentStore();\n        this.emit(\"pinchEnd\", __assign(__assign({ data: this.data, datas: this.data, isPinch: isPinch, touches: store.getPositions() }, store.getPosition()), { inputEvent: e }));\n    };\n    Gesto.prototype.getCurrentStore = function () {\n        return this.clientStores[0];\n    };\n    Gesto.prototype.moveClients = function (clients, inputEvent, isAdd) {\n        var position = this._getPosition(clients, isAdd);\n        var isPrevDrag = this.isDrag;\n        if (position.deltaX || position.deltaY) {\n            this.isDrag = true;\n        }\n        var isFirstDrag = false;\n        if (!isPrevDrag && this.isDrag) {\n            isFirstDrag = true;\n        }\n        return __assign(__assign({ data: this.data, datas: this.data }, position), { movement: this.getMovement(clients), isDrag: this.isDrag, isPinch: this.isPinch, isScroll: false, isMouseEvent: this._isMouseEvent, isSecondaryButton: this._isSecondaryButton, inputEvent: inputEvent, isTrusted: this._isTrusted, isFirstDrag: isFirstDrag });\n    };\n    Gesto.prototype._addStore = function (store) {\n        this.clientStores.splice(0, 0, store);\n    };\n    Gesto.prototype._getPosition = function (clients, isAdd) {\n        var store = this.getCurrentStore();\n        var position = store.getPosition(clients, isAdd);\n        var _a = this.clientStores.slice(1).reduce(function (prev, cur) {\n            var storePosition = cur.getPosition();\n            prev.distX += storePosition.distX;\n            prev.distY += storePosition.distY;\n            return prev;\n        }, position), distX = _a.distX, distY = _a.distY;\n        return __assign(__assign({}, position), { distX: distX, distY: distY });\n    };\n    Gesto.prototype._attchDragEvent = function () {\n        var container = this.options.container;\n        var passive = {\n            passive: false\n        };\n        if (this.isMouse) {\n            addEvent(container, \"mousemove\", this.onDrag);\n            addEvent(container, \"mouseup\", this.onDragEnd);\n        }\n        if (this.isTouch) {\n            addEvent(container, \"touchmove\", this.onDrag, passive);\n            addEvent(container, \"touchend\", this.onDragEnd, passive);\n            addEvent(container, \"touchcancel\", this.onDragEnd, passive);\n        }\n    };\n    Gesto.prototype._dettachDragEvent = function () {\n        var container = this.options.container;\n        if (this.isMouse) {\n            removeEvent(container, \"mousemove\", this.onDrag);\n            removeEvent(container, \"mouseup\", this.onDragEnd);\n        }\n        if (this.isTouch) {\n            removeEvent(container, \"touchstart\", this.onDragStart);\n            removeEvent(container, \"touchmove\", this.onDrag);\n            removeEvent(container, \"touchend\", this.onDragEnd);\n            removeEvent(container, \"touchcancel\", this.onDragEnd);\n        }\n    };\n    return Gesto;\n}(EventEmitter));\n\nexport { Gesto as default };\n//# sourceMappingURL=gesto.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: framework-utils\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/framework-utils.git\nversion: 1.1.0\n*/\nfunction prefixNames(prefix) {\n  var classNames = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    classNames[_i - 1] = arguments[_i];\n  }\n\n  return classNames.map(function (className) {\n    return className.split(\" \").map(function (name) {\n      return name ? \"\" + prefix + name : \"\";\n    }).join(\" \");\n  }).join(\" \");\n}\nfunction prefixCSS(prefix, css) {\n  return css.replace(/([^}{]*){/gm, function (_, selector) {\n    return selector.replace(/\\.([^{,\\s\\d.]+)/g, \".\" + prefix + \"$1\") + \"{\";\n  });\n}\n/* react */\n\nfunction ref(target, name) {\n  return function (e) {\n    e && (target[name] = e);\n  };\n}\nfunction refs(target, name, i) {\n  return function (e) {\n    e && (target[name][i] = e);\n  };\n}\n/* Class Decorator */\n\nfunction Properties(properties, action) {\n  return function (component) {\n    var prototype = component.prototype;\n    properties.forEach(function (property) {\n      action(prototype, property);\n    });\n  };\n}\n/* Property Decorator */\n\nfunction withMethods(methods, duplicate) {\n  if (duplicate === void 0) {\n    duplicate = {};\n  }\n\n  return function (prototype, propertyName) {\n    methods.forEach(function (name) {\n      var methodName = duplicate[name] || name;\n\n      if (methodName in prototype) {\n        return;\n      }\n\n      prototype[methodName] = function () {\n        var _a;\n\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var result = (_a = this[propertyName])[name].apply(_a, args);\n\n        if (result === this[propertyName]) {\n          return this;\n        } else {\n          return result;\n        }\n      };\n    });\n  };\n}\n\nexport { Properties, prefixCSS, prefixNames, ref, refs, withMethods };\n//# sourceMappingURL=utils.esm.js.map\n","/*\nCopyright (c) 2019-present NAVER Corp.\nname: @egjs/list-differ\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-list-differ\nversion: 1.0.0\n*/\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar PolyMap =\n/*#__PURE__*/\nfunction () {\n  function PolyMap() {\n    this.keys = [];\n    this.values = [];\n  }\n\n  var __proto = PolyMap.prototype;\n\n  __proto.get = function (key) {\n    return this.values[this.keys.indexOf(key)];\n  };\n\n  __proto.set = function (key, value) {\n    var keys = this.keys;\n    var values = this.values;\n    var prevIndex = keys.indexOf(key);\n    var index = prevIndex === -1 ? keys.length : prevIndex;\n    keys[index] = key;\n    values[index] = value;\n  };\n\n  return PolyMap;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar HashMap =\n/*#__PURE__*/\nfunction () {\n  function HashMap() {\n    this.object = {};\n  }\n\n  var __proto = HashMap.prototype;\n\n  __proto.get = function (key) {\n    return this.object[key];\n  };\n\n  __proto.set = function (key, value) {\n    this.object[key] = value;\n  };\n\n  return HashMap;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar SUPPORT_MAP = typeof Map === \"function\";\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar Link =\n/*#__PURE__*/\nfunction () {\n  function Link() {}\n\n  var __proto = Link.prototype;\n\n  __proto.connect = function (prevLink, nextLink) {\n    this.prev = prevLink;\n    this.next = nextLink;\n    prevLink && (prevLink.next = this);\n    nextLink && (nextLink.prev = this);\n  };\n\n  __proto.disconnect = function () {\n    // In double linked list, diconnect the interconnected relationship.\n    var prevLink = this.prev;\n    var nextLink = this.next;\n    prevLink && (prevLink.next = nextLink);\n    nextLink && (nextLink.prev = prevLink);\n  };\n\n  __proto.getIndex = function () {\n    var link = this;\n    var index = -1;\n\n    while (link) {\n      link = link.prev;\n      ++index;\n    }\n\n    return index;\n  };\n\n  return Link;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nfunction orderChanged(changed, fixed) {\n  // It is roughly in the order of these examples.\n  // 4, 6, 0, 2, 1, 3, 5, 7\n  var fromLinks = []; // 0, 1, 2, 3, 4, 5, 6, 7\n\n  var toLinks = [];\n  changed.forEach(function (_a) {\n    var from = _a[0],\n        to = _a[1];\n    var link = new Link();\n    fromLinks[from] = link;\n    toLinks[to] = link;\n  }); // `fromLinks` are connected to each other by double linked list.\n\n  fromLinks.forEach(function (link, i) {\n    link.connect(fromLinks[i - 1]);\n  });\n  return changed.filter(function (_, i) {\n    return !fixed[i];\n  }).map(function (_a, i) {\n    var from = _a[0],\n        to = _a[1];\n\n    if (from === to) {\n      return [0, 0];\n    }\n\n    var fromLink = fromLinks[from];\n    var toLink = toLinks[to - 1];\n    var fromIndex = fromLink.getIndex(); // Disconnect the link connected to `fromLink`.\n\n    fromLink.disconnect(); // Connect `fromLink` to the right of `toLink`.\n\n    if (!toLink) {\n      fromLink.connect(undefined, fromLinks[0]);\n    } else {\n      fromLink.connect(toLink, toLink.next);\n    }\n\n    var toIndex = fromLink.getIndex();\n    return [fromIndex, toIndex];\n  });\n}\n\nvar Result =\n/*#__PURE__*/\nfunction () {\n  function Result(prevList, list, added, removed, changed, maintained, changedBeforeAdded, fixed) {\n    this.prevList = prevList;\n    this.list = list;\n    this.added = added;\n    this.removed = removed;\n    this.changed = changed;\n    this.maintained = maintained;\n    this.changedBeforeAdded = changedBeforeAdded;\n    this.fixed = fixed;\n  }\n\n  var __proto = Result.prototype;\n  Object.defineProperty(__proto, \"ordered\", {\n    get: function () {\n      if (!this.cacheOrdered) {\n        this.caculateOrdered();\n      }\n\n      return this.cacheOrdered;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(__proto, \"pureChanged\", {\n    get: function () {\n      if (!this.cachePureChanged) {\n        this.caculateOrdered();\n      }\n\n      return this.cachePureChanged;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  __proto.caculateOrdered = function () {\n    var ordered = orderChanged(this.changedBeforeAdded, this.fixed);\n    var changed = this.changed;\n    var pureChanged = [];\n    this.cacheOrdered = ordered.filter(function (_a, i) {\n      var from = _a[0],\n          to = _a[1];\n      var _b = changed[i],\n          fromBefore = _b[0],\n          toBefore = _b[1];\n\n      if (from !== to) {\n        pureChanged.push([fromBefore, toBefore]);\n        return true;\n      }\n    });\n    this.cachePureChanged = pureChanged;\n  };\n\n  return Result;\n}();\n\n/**\n *\n * @memberof eg.ListDiffer\n * @static\n * @function\n * @param - Previous List <ko>   </ko>\n * @param - List to Update <ko>    </ko>\n * @param - This callback function returns the key of the item. <ko>     .</ko>\n * @return - Returns the diff between `prevList` and `list` <ko> `prevList` `list`   .</ko>\n * @example\n * import { diff } from \"@egjs/list-differ\";\n * // script => eg.ListDiffer.diff\n * const result = diff([0, 1, 2, 3, 4, 5], [7, 8, 0, 4, 3, 6, 2, 1], e => e);\n * // List before update\n * // [1, 2, 3, 4, 5]\n * console.log(result.prevList);\n * // Updated list\n * // [4, 3, 6, 2, 1]\n * console.log(result.list);\n * // Index array of values added to `list`\n * // [0, 1, 5]\n * console.log(result.added);\n * // Index array of values removed in `prevList`\n * // [5]\n * console.log(result.removed);\n * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.changed);\n * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n * // [[4, 3], [3, 4], [2, 6]]\n * console.log(result.pureChanged);\n * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n * // [[4, 1], [4, 2], [4, 3]]\n * console.log(result.ordered);\n * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.maintained);\n */\n\nfunction diff(prevList, list, findKeyCallback) {\n  var mapClass = SUPPORT_MAP ? Map : findKeyCallback ? HashMap : PolyMap;\n\n  var callback = findKeyCallback || function (e) {\n    return e;\n  };\n\n  var added = [];\n  var removed = [];\n  var maintained = [];\n  var prevKeys = prevList.map(callback);\n  var keys = list.map(callback);\n  var prevKeyMap = new mapClass();\n  var keyMap = new mapClass();\n  var changedBeforeAdded = [];\n  var fixed = [];\n  var removedMap = {};\n  var changed = [];\n  var addedCount = 0;\n  var removedCount = 0; // Add prevKeys and keys to the hashmap.\n\n  prevKeys.forEach(function (key, prevListIndex) {\n    prevKeyMap.set(key, prevListIndex);\n  });\n  keys.forEach(function (key, listIndex) {\n    keyMap.set(key, listIndex);\n  }); // Compare `prevKeys` and `keys` and add them to `removed` if they are not in `keys`.\n\n  prevKeys.forEach(function (key, prevListIndex) {\n    var listIndex = keyMap.get(key); // In prevList, but not in list, it is removed.\n\n    if (typeof listIndex === \"undefined\") {\n      ++removedCount;\n      removed.push(prevListIndex);\n    } else {\n      removedMap[listIndex] = removedCount;\n    }\n  }); // Compare `prevKeys` and `keys` and add them to `added` if they are not in `prevKeys`.\n\n  keys.forEach(function (key, listIndex) {\n    var prevListIndex = prevKeyMap.get(key); // In list, but not in prevList, it is added.\n\n    if (typeof prevListIndex === \"undefined\") {\n      added.push(listIndex);\n      ++addedCount;\n    } else {\n      maintained.push([prevListIndex, listIndex]);\n      removedCount = removedMap[listIndex] || 0;\n      changedBeforeAdded.push([prevListIndex - removedCount, listIndex - addedCount]);\n      fixed.push(listIndex === prevListIndex);\n\n      if (prevListIndex !== listIndex) {\n        changed.push([prevListIndex, listIndex]);\n      }\n    }\n  }); // Sort by ascending order of 'to(list's index).\n\n  removed.reverse();\n  return new Result(prevList, list, added, removed, changed, maintained, changedBeforeAdded, fixed);\n}\n\n/**\n * A module that checks diff when values are added, removed, or changed in an array.\n * @ko          .\n * @memberof eg\n */\n\nvar ListDiffer =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param - Initializing Data Array. <ko>    .</ko>\n   * @param - This callback function returns the key of the item. <ko>     .</ko>\n   * @example\n   * import ListDiffer from \"@egjs/list-differ\";\n   * // script => eg.ListDiffer\n   * const differ = new ListDiffer([0, 1, 2, 3, 4, 5], e => e);\n   * const result = differ.update([7, 8, 0, 4, 3, 6, 2, 1]);\n   * // List before update\n   * // [1, 2, 3, 4, 5]\n   * console.log(result.prevList);\n   * // Updated list\n   * // [4, 3, 6, 2, 1]\n   * console.log(result.list);\n   * // Index array of values added to `list`.\n   * // [0, 1, 5]\n   * console.log(result.added);\n   * // Index array of values removed in `prevList`.\n   * // [5]\n   * console.log(result.removed);\n   * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`.\n   * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n   * console.log(result.changed);\n   * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n   * // [[4, 3], [3, 4], [2, 6]]\n   * console.log(result.pureChanged);\n   * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n   * // [[4, 1], [4, 2], [4, 3]]\n   * console.log(result.ordered);\n   * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved.\n   * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n   * console.log(result.maintained);\n   */\n  function ListDiffer(list, findKeyCallback) {\n    if (list === void 0) {\n      list = [];\n    }\n\n    this.findKeyCallback = findKeyCallback;\n    this.list = [].slice.call(list);\n  }\n  /**\n   * Update list.\n   * @ko   .\n   * @param - List to update <ko>   </ko>\n   * @return - Returns the results of an update from `prevList` to `list`.<ko> `prevList` `list`   . </ko>\n   */\n\n\n  var __proto = ListDiffer.prototype;\n\n  __proto.update = function (list) {\n    var newData = [].slice.call(list);\n    var result = diff(this.list, newData, this.findKeyCallback);\n    this.list = newData;\n    return result;\n  };\n\n  return ListDiffer;\n}();\n\n/*\negjs-list-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nexport default ListDiffer;\nexport { diff };\n//# sourceMappingURL=list-differ.esm.js.map\n","/*\nCopyright (c) 2019-present NAVER Corp.\nname: @egjs/children-differ\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-children-differ\nversion: 1.0.1\n*/\nimport ListDiffer, { diff as diff$1 } from '@egjs/list-differ';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\nvar findKeyCallback = typeof Map === \"function\" ? undefined : function () {\n  var childrenCount = 0;\n  return function (el) {\n    return el.__DIFF_KEY__ || (el.__DIFF_KEY__ = ++childrenCount);\n  };\n}();\n\n/**\n * A module that checks diff when child are added, removed, or changed .\n * @ko           .\n * @memberof eg\n * @extends eg.ListDiffer\n */\n\nvar ChildrenDiffer =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(ChildrenDiffer, _super);\n  /**\n   * @param - Initializing Children <ko>    </ko>\n   */\n\n\n  function ChildrenDiffer(list) {\n    if (list === void 0) {\n      list = [];\n    }\n\n    return _super.call(this, list, findKeyCallback) || this;\n  }\n\n  return ChildrenDiffer;\n}(ListDiffer);\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n/**\n *\n * @memberof eg.ChildrenDiffer\n * @static\n * @function\n * @param - Previous List <ko>   </ko>\n * @param - List to Update <ko>    </ko>\n * @return - Returns the diff between `prevList` and `list` <ko> `prevList` `list`   .</ko>\n * @example\n * import { diff } from \"@egjs/children-differ\";\n * // script => eg.ChildrenDiffer.diff\n * const result = diff([0, 1, 2, 3, 4, 5], [7, 8, 0, 4, 3, 6, 2, 1]);\n * // List before update\n * // [1, 2, 3, 4, 5]\n * console.log(result.prevList);\n * // Updated list\n * // [4, 3, 6, 2, 1]\n * console.log(result.list);\n * // Index array of values added to `list`\n * // [0, 1, 5]\n * console.log(result.added);\n * // Index array of values removed in `prevList`\n * // [5]\n * console.log(result.removed);\n * // An array of index pairs of `prevList` and `list` with different indexes from `prevList` and `list`\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.changed);\n * // The subset of `changed` and an array of index pairs that moved data directly. Indicate an array of absolute index pairs of `ordered`.(Formatted by: Array<[index of prevList, index of list]>)\n * // [[4, 3], [3, 4], [2, 6]]\n * console.log(result.pureChanged);\n * // An array of index pairs to be `ordered` that can synchronize `list` before adding data. (Formatted by: Array<[prevIndex, nextIndex]>)\n * // [[4, 1], [4, 2], [4, 3]]\n * console.log(result.ordered);\n * // An array of index pairs of `prevList` and `list` that have not been added/removed so data is preserved\n * // [[0, 2], [4, 3], [3, 4], [2, 6], [1, 7]]\n * console.log(result.maintained);\n */\n\nfunction diff(prevList, list) {\n  return diff$1(prevList, list, findKeyCallback);\n}\n\n/*\negjs-children-differ\nCopyright (c) 2019-present NAVER Corp.\nMIT license\n*/\n\nexport default ChildrenDiffer;\nexport { diff };\n//# sourceMappingURL=children-differ.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: @scena/dragscroll\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/dragscroll.git\nversion: 1.4.0\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { now, isString, isFunction } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n\nfunction getDefaultScrollPosition(e) {\n  var container = e.container;\n  if (container === document.body) {\n    return [container.scrollLeft || document.documentElement.scrollLeft, container.scrollTop || document.documentElement.scrollTop];\n  }\n  return [container.scrollLeft, container.scrollTop];\n}\nfunction checkDefaultScrollEvent(container, callback) {\n  container.addEventListener(\"scroll\", callback);\n  return function () {\n    container.removeEventListener(\"scroll\", callback);\n  };\n}\nfunction getContainerElement(container) {\n  if (!container) {\n    return null;\n  } else if (isString(container)) {\n    return document.querySelector(container);\n  }\n  if (isFunction(container)) {\n    return container();\n  } else if (container instanceof Element) {\n    return container;\n  } else if (\"current\" in container) {\n    return container.current;\n  } else if (\"value\" in container) {\n    return container.value;\n  }\n}\n/**\n * @sort 1\n */\nvar DragScroll = /*#__PURE__*/function (_super) {\n  __extends(DragScroll, _super);\n  function DragScroll() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this._startRect = null;\n    _this._startPos = [];\n    _this._prevTime = 0;\n    _this._timer = 0;\n    _this._prevScrollPos = [0, 0];\n    _this._isWait = false;\n    _this._flag = false;\n    _this._currentOptions = null;\n    _this._lock = false;\n    _this._unregister = null;\n    _this._onScroll = function () {\n      var options = _this._currentOptions;\n      if (_this._lock || !options) {\n        return;\n      }\n      _this.emit(\"scrollDrag\", {\n        next: function (inputEvent) {\n          _this.checkScroll({\n            container: options.container,\n            inputEvent: inputEvent\n          });\n        }\n      });\n    };\n    return _this;\n  }\n  /**\n   */\n  var __proto = DragScroll.prototype;\n  __proto.dragStart = function (e, options) {\n    var container = getContainerElement(options.container);\n    if (!container) {\n      this._flag = false;\n      return;\n    }\n    var top = 0;\n    var left = 0;\n    var width = 0;\n    var height = 0;\n    if (container === document.body) {\n      width = window.innerWidth;\n      height = window.innerHeight;\n    } else {\n      var rect = container.getBoundingClientRect();\n      top = rect.top;\n      left = rect.left;\n      width = rect.width;\n      height = rect.height;\n    }\n    this._flag = true;\n    this._startPos = [e.clientX, e.clientY];\n    this._startRect = {\n      top: top,\n      left: left,\n      width: width,\n      height: height\n    };\n    this._prevScrollPos = this._getScrollPosition([0, 0], options);\n    this._currentOptions = options;\n    this._registerScrollEvent(options);\n  };\n  __proto.drag = function (e, options) {\n    clearTimeout(this._timer);\n    if (!this._flag) {\n      return;\n    }\n    var clientX = e.clientX,\n      clientY = e.clientY;\n    var _a = options.threshold,\n      threshold = _a === void 0 ? 0 : _a;\n    var _b = this,\n      _startRect = _b._startRect,\n      _startPos = _b._startPos;\n    this._currentOptions = options;\n    var direction = [0, 0];\n    if (_startRect.top > clientY - threshold) {\n      if (_startPos[1] > _startRect.top || clientY < _startPos[1]) {\n        direction[1] = -1;\n      }\n    } else if (_startRect.top + _startRect.height < clientY + threshold) {\n      if (_startPos[1] < _startRect.top + _startRect.height || clientY > _startPos[1]) {\n        direction[1] = 1;\n      }\n    }\n    if (_startRect.left > clientX - threshold) {\n      if (_startPos[0] > _startRect.left || clientX < _startPos[0]) {\n        direction[0] = -1;\n      }\n    } else if (_startRect.left + _startRect.width < clientX + threshold) {\n      if (_startPos[0] < _startRect.left + _startRect.width || clientX > _startPos[0]) {\n        direction[0] = 1;\n      }\n    }\n    if (!direction[0] && !direction[1]) {\n      return false;\n    }\n    return this._continueDrag(__assign(__assign({}, options), {\n      direction: direction,\n      inputEvent: e,\n      isDrag: true\n    }));\n  };\n  /**\n   */\n  __proto.checkScroll = function (options) {\n    var _this = this;\n    if (this._isWait) {\n      return false;\n    }\n    var _a = options.prevScrollPos,\n      prevScrollPos = _a === void 0 ? this._prevScrollPos : _a,\n      direction = options.direction,\n      _b = options.throttleTime,\n      throttleTime = _b === void 0 ? 0 : _b,\n      inputEvent = options.inputEvent,\n      isDrag = options.isDrag;\n    var nextScrollPos = this._getScrollPosition(direction || [0, 0], options);\n    var offsetX = nextScrollPos[0] - prevScrollPos[0];\n    var offsetY = nextScrollPos[1] - prevScrollPos[1];\n    var nextDirection = direction || [offsetX ? Math.abs(offsetX) / offsetX : 0, offsetY ? Math.abs(offsetY) / offsetY : 0];\n    this._prevScrollPos = nextScrollPos;\n    this._lock = false;\n    if (!offsetX && !offsetY) {\n      return false;\n    }\n    /**\n     * @event DragScroll#move\n     */\n    this.emit(\"move\", {\n      offsetX: nextDirection[0] ? offsetX : 0,\n      offsetY: nextDirection[1] ? offsetY : 0,\n      inputEvent: inputEvent\n    });\n    if (throttleTime && isDrag) {\n      clearTimeout(this._timer);\n      this._timer = window.setTimeout(function () {\n        _this._continueDrag(options);\n      }, throttleTime);\n    }\n    return true;\n  };\n  /**\n   *\n   */\n  __proto.dragEnd = function () {\n    this._flag = false;\n    this._lock = false;\n    clearTimeout(this._timer);\n    this._unregisterScrollEvent();\n  };\n  __proto._getScrollPosition = function (direction, options) {\n    var container = options.container,\n      _a = options.getScrollPosition,\n      getScrollPosition = _a === void 0 ? getDefaultScrollPosition : _a;\n    return getScrollPosition({\n      container: getContainerElement(container),\n      direction: direction\n    });\n  };\n  __proto._continueDrag = function (options) {\n    var _this = this;\n    var _a;\n    var container = options.container,\n      direction = options.direction,\n      throttleTime = options.throttleTime,\n      useScroll = options.useScroll,\n      isDrag = options.isDrag,\n      inputEvent = options.inputEvent;\n    if (!this._flag || isDrag && this._isWait) {\n      return;\n    }\n    var nowTime = now();\n    var distTime = Math.max(throttleTime + this._prevTime - nowTime, 0);\n    if (distTime > 0) {\n      clearTimeout(this._timer);\n      this._timer = window.setTimeout(function () {\n        _this._continueDrag(options);\n      }, distTime);\n      return false;\n    }\n    this._prevTime = nowTime;\n    var prevScrollPos = this._getScrollPosition(direction, options);\n    this._prevScrollPos = prevScrollPos;\n    if (isDrag) {\n      this._isWait = true;\n    }\n    // unregister native scroll event\n    if (!useScroll) {\n      this._lock = true;\n    }\n    var param = {\n      container: getContainerElement(container),\n      direction: direction,\n      inputEvent: inputEvent\n    };\n    (_a = options.requestScroll) === null || _a === void 0 ? void 0 : _a.call(options, param);\n    /**\n     * @event DragScroll#scroll\n     */\n    this.emit(\"scroll\", param);\n    this._isWait = false;\n    return useScroll || this.checkScroll(__assign(__assign({}, options), {\n      prevScrollPos: prevScrollPos,\n      direction: direction,\n      inputEvent: inputEvent\n    }));\n  };\n  __proto._registerScrollEvent = function (options) {\n    this._unregisterScrollEvent();\n    var checkScrollEvent = options.checkScrollEvent;\n    if (!checkScrollEvent) {\n      return;\n    }\n    var callback = checkScrollEvent === true ? checkDefaultScrollEvent : checkScrollEvent;\n    var container = getContainerElement(options.container);\n    if (checkScrollEvent === true && (container === document.body || container === document.documentElement)) {\n      this._unregister = checkDefaultScrollEvent(window, this._onScroll);\n    } else {\n      this._unregister = callback(container, this._onScroll);\n    }\n  };\n  __proto._unregisterScrollEvent = function () {\n    var _a;\n    (_a = this._unregister) === null || _a === void 0 ? void 0 : _a.call(this);\n    this._unregister = null;\n  };\n  return DragScroll;\n}(EventEmitter);\n\nexport default DragScroll;\n//# sourceMappingURL=dragscroll.esm.js.map\n","/*\nCopyright (c) Daybrush\nname: keycon\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/keycon.git\nversion: 1.4.0\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { removeEvent, isArray, isString, addEvent } from '@daybrush/utils';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n\nvar keycode = createCommonjsModule(function (module, exports) {\n// Source: http://jsfiddle.net/vWx8V/\n// http://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes\n\n/**\n * Conenience method returns corresponding value for given keyName or keyCode.\n *\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Mixed}\n * @api public\n */\n\nfunction keyCode(searchInput) {\n  // Keyboard Events\n  if (searchInput && 'object' === typeof searchInput) {\n    var hasKeyCode = searchInput.which || searchInput.keyCode || searchInput.charCode;\n    if (hasKeyCode) searchInput = hasKeyCode;\n  }\n\n  // Numbers\n  if ('number' === typeof searchInput) return names[searchInput]\n\n  // Everything else (cast to string)\n  var search = String(searchInput);\n\n  // check codes\n  var foundNamedKey = codes[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey\n\n  // check aliases\n  var foundNamedKey = aliases[search.toLowerCase()];\n  if (foundNamedKey) return foundNamedKey\n\n  // weird character?\n  if (search.length === 1) return search.charCodeAt(0)\n\n  return undefined\n}\n\n/**\n * Compares a keyboard event with a given keyCode or keyName.\n *\n * @param {Event} event Keyboard event that should be tested\n * @param {Mixed} keyCode {Number} or keyName {String}\n * @return {Boolean}\n * @api public\n */\nkeyCode.isEventKey = function isEventKey(event, nameOrCode) {\n  if (event && 'object' === typeof event) {\n    var keyCode = event.which || event.keyCode || event.charCode;\n    if (keyCode === null || keyCode === undefined) { return false; }\n    if (typeof nameOrCode === 'string') {\n      // check codes\n      var foundNamedKey = codes[nameOrCode.toLowerCase()];\n      if (foundNamedKey) { return foundNamedKey === keyCode; }\n    \n      // check aliases\n      var foundNamedKey = aliases[nameOrCode.toLowerCase()];\n      if (foundNamedKey) { return foundNamedKey === keyCode; }\n    } else if (typeof nameOrCode === 'number') {\n      return nameOrCode === keyCode;\n    }\n    return false;\n  }\n};\n\nexports = module.exports = keyCode;\n\n/**\n * Get by name\n *\n *   exports.code['enter'] // => 13\n */\n\nvar codes = exports.code = exports.codes = {\n  'backspace': 8,\n  'tab': 9,\n  'enter': 13,\n  'shift': 16,\n  'ctrl': 17,\n  'alt': 18,\n  'pause/break': 19,\n  'caps lock': 20,\n  'esc': 27,\n  'space': 32,\n  'page up': 33,\n  'page down': 34,\n  'end': 35,\n  'home': 36,\n  'left': 37,\n  'up': 38,\n  'right': 39,\n  'down': 40,\n  'insert': 45,\n  'delete': 46,\n  'command': 91,\n  'left command': 91,\n  'right command': 93,\n  'numpad *': 106,\n  'numpad +': 107,\n  'numpad -': 109,\n  'numpad .': 110,\n  'numpad /': 111,\n  'num lock': 144,\n  'scroll lock': 145,\n  'my computer': 182,\n  'my calculator': 183,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  \"'\": 222\n};\n\n// Helper aliases\n\nvar aliases = exports.aliases = {\n  'windows': 91,\n  '': 16,\n  '': 18,\n  '': 17,\n  '': 91,\n  'ctl': 17,\n  'control': 17,\n  'option': 18,\n  'pause': 19,\n  'break': 19,\n  'caps': 20,\n  'return': 13,\n  'escape': 27,\n  'spc': 32,\n  'spacebar': 32,\n  'pgup': 33,\n  'pgdn': 34,\n  'ins': 45,\n  'del': 46,\n  'cmd': 91\n};\n\n/*!\n * Programatically add the following\n */\n\n// lower case chars\nfor (i = 97; i < 123; i++) codes[String.fromCharCode(i)] = i - 32;\n\n// numbers\nfor (var i = 48; i < 58; i++) codes[i - 48] = i;\n\n// function keys\nfor (i = 1; i < 13; i++) codes['f'+i] = i + 111;\n\n// numpad keys\nfor (i = 0; i < 10; i++) codes['numpad '+i] = i + 96;\n\n/**\n * Get by code\n *\n *   exports.name[13] // => 'Enter'\n */\n\nvar names = exports.names = exports.title = {}; // title for backward compat\n\n// Create reverse mapping\nfor (i in codes) names[codes[i]] = i;\n\n// Add aliases\nfor (var alias in aliases) {\n  codes[alias] = aliases[alias];\n}\n});\nvar keycode_1 = keycode.code;\nvar keycode_2 = keycode.codes;\nvar keycode_3 = keycode.aliases;\nvar keycode_4 = keycode.names;\nvar keycode_5 = keycode.title;\n\nvar codeData = {\n  \"+\": \"plus\",\n  \"left command\": \"meta\",\n  \"right command\": \"meta\"\n};\nvar keysSort = {\n  shift: 1,\n  ctrl: 2,\n  alt: 3,\n  meta: 4\n};\n/**\n * @memberof KeyController\n */\nfunction getKey(keyCode, keyName) {\n  var key = (keycode_4[keyCode] || keyName || \"\").toLowerCase();\n  for (var name in codeData) {\n    key = key.replace(name, codeData[name]);\n  }\n  return key.replace(/\\s/g, \"\");\n}\n/**\n * @memberof KeyController\n */\nfunction getCombi(e, key) {\n  if (key === void 0) {\n    key = getKey(e.keyCode, e.key);\n  }\n  var keys = getModifierCombi(e);\n  keys.indexOf(key) === -1 && keys.push(key);\n  return keys.filter(Boolean);\n}\n/**\n * @memberof KeyController\n */\nfunction getModifierCombi(e) {\n  var keys = [e.shiftKey && \"shift\", e.ctrlKey && \"ctrl\", e.altKey && \"alt\", e.metaKey && \"meta\"];\n  return keys.filter(Boolean);\n}\n/**\n * @memberof KeyController\n */\nfunction getArrangeCombi(keys) {\n  var arrangeKeys = keys.slice();\n  arrangeKeys.sort(function (prev, next) {\n    var prevScore = keysSort[prev] || 5;\n    var nextScore = keysSort[next] || 5;\n    return prevScore - nextScore;\n  });\n  return arrangeKeys;\n}\n\nvar globalKeyController;\n/**\n */\nvar KeyController = /*#__PURE__*/function (_super) {\n  __extends(KeyController, _super);\n  /**\n   *\n   */\n  function KeyController(container) {\n    if (container === void 0) {\n      container = window;\n    }\n    var _this = _super.call(this) || this;\n    _this.container = container;\n    /**\n     */\n    _this.ctrlKey = false;\n    /**\n     */\n    _this.altKey = false;\n    /**\n     *\n     */\n    _this.shiftKey = false;\n    /**\n     *\n     */\n    _this.metaKey = false;\n    _this.clear = function () {\n      _this.ctrlKey = false;\n      _this.altKey = false;\n      _this.shiftKey = false;\n      _this.metaKey = false;\n      return _this;\n    };\n    _this.keydownEvent = function (e) {\n      _this.triggerEvent(\"keydown\", e);\n    };\n    _this.keyupEvent = function (e) {\n      _this.triggerEvent(\"keyup\", e);\n    };\n    _this.blur = function () {\n      _this.clear();\n      _this.trigger(\"blur\");\n    };\n    addEvent(container, \"blur\", _this.blur);\n    addEvent(container, \"keydown\", _this.keydownEvent);\n    addEvent(container, \"keyup\", _this.keyupEvent);\n    return _this;\n  }\n  var __proto = KeyController.prototype;\n  Object.defineProperty(KeyController, \"global\", {\n    /**\n     */\n    get: function () {\n      return globalKeyController || (globalKeyController = new KeyController());\n    },\n    enumerable: false,\n    configurable: true\n  });\n  KeyController.setGlobal = function () {\n    return this.global;\n  };\n  /**\n   *\n   */\n  __proto.destroy = function () {\n    var container = this.container;\n    this.clear();\n    this.off();\n    removeEvent(container, \"blur\", this.blur);\n    removeEvent(container, \"keydown\", this.keydownEvent);\n    removeEvent(container, \"keyup\", this.keyupEvent);\n  };\n  /**\n   *\n   */\n  __proto.keydown = function (comb, callback) {\n    return this.addEvent(\"keydown\", comb, callback);\n  };\n  /**\n   *\n   */\n  __proto.offKeydown = function (comb, callback) {\n    return this.removeEvent(\"keydown\", comb, callback);\n  };\n  /**\n   *\n   */\n  __proto.offKeyup = function (comb, callback) {\n    return this.removeEvent(\"keyup\", comb, callback);\n  };\n  /**\n   *\n   */\n  __proto.keyup = function (comb, callback) {\n    return this.addEvent(\"keyup\", comb, callback);\n  };\n  __proto.addEvent = function (type, comb, callback) {\n    if (isArray(comb)) {\n      this.on(\"\".concat(type, \".\").concat(getArrangeCombi(comb).join(\".\")), callback);\n    } else if (isString(comb)) {\n      this.on(\"\".concat(type, \".\").concat(comb), callback);\n    } else {\n      this.on(type, comb);\n    }\n    return this;\n  };\n  __proto.removeEvent = function (type, comb, callback) {\n    if (isArray(comb)) {\n      this.off(\"\".concat(type, \".\").concat(getArrangeCombi(comb).join(\".\")), callback);\n    } else if (isString(comb)) {\n      this.off(\"\".concat(type, \".\").concat(comb), callback);\n    } else {\n      this.off(type, comb);\n    }\n    return this;\n  };\n  __proto.triggerEvent = function (type, e) {\n    this.ctrlKey = e.ctrlKey;\n    this.shiftKey = e.shiftKey;\n    this.altKey = e.altKey;\n    this.metaKey = e.metaKey;\n    var key = getKey(e.keyCode, e.key);\n    var isToggle = key === \"ctrl\" || key === \"shift\" || key === \"meta\" || key === \"alt\";\n    var param = {\n      key: key,\n      isToggle: isToggle,\n      inputEvent: e,\n      keyCode: e.keyCode,\n      ctrlKey: e.ctrlKey,\n      altKey: e.altKey,\n      shiftKey: e.shiftKey,\n      metaKey: e.metaKey\n    };\n    this.trigger(type, param);\n    this.trigger(\"\".concat(type, \".\").concat(key), param);\n    var combi = getCombi(e, key);\n    combi.length > 1 && this.trigger(\"\".concat(type, \".\").concat(combi.join(\".\")), param);\n  };\n  return KeyController;\n}(EventEmitter);\n\n/*\nCopyright (c) NAVER Corp.\nname: @egjs/component\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-component\nversion: 3.0.2\n*/\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\nfunction __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n  return ar;\n}\n\n/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nvar isUndefined = function (value) {\n  return typeof value === \"undefined\";\n};\n\n/**\n * Event class to provide additional properties\n * @ko Component     \n */\n\nvar ComponentEvent =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create a new instance of ComponentEvent.\n   * @ko ComponentEvent   .\n   * @param eventType The name of the event.<ko> .</ko>\n   * @param props An object that contains additional event properties.<ko>   .</ko>\n   */\n  function ComponentEvent(eventType, props) {\n    var e_1, _a;\n\n    this._canceled = false;\n\n    if (props) {\n      try {\n        for (var _b = __values(Object.keys(props)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value; // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n          this[key] = props[key];\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n\n    this.eventType = eventType;\n  }\n  /**\n   * Stop the event. {@link ComponentEvent#isCanceled} will return `true` after.\n   * @ko  .  {@link ComponentEvent#isCanceled} `true` .\n   */\n\n\n  var __proto = ComponentEvent.prototype;\n\n  __proto.stop = function () {\n    this._canceled = true;\n  };\n  /**\n   * Returns a boolean value that indicates whether {@link ComponentEvent#stop} is called before.\n   * @ko {@link ComponentEvent#stop}   .\n   * @return {boolean} A boolean value that indicates whether {@link ComponentEvent#stop} is called before.<ko> {@link ComponentEvent#stop}   .</ko>\n   */\n\n\n  __proto.isCanceled = function () {\n    return this._canceled;\n  };\n\n  return ComponentEvent;\n}();\n\n/**\n * A class used to manage events in a component\n * @ko       \n */\n\nvar Component =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @support {\"ie\": \"7+\", \"ch\" : \"latest\", \"ff\" : \"latest\",  \"sf\" : \"latest\", \"edge\" : \"latest\", \"ios\" : \"7+\", \"an\" : \"2.1+ (except 3.x)\"}\n   */\n  function Component() {\n    this._eventHandler = {};\n  }\n  /**\n   * Trigger a custom event.\n   * @ko   \n   * @param {string | ComponentEvent} event The name of the custom event to be triggered or an instance of the ComponentEvent<ko>     ComponentEvent </ko>\n   * @param {any[]} params Event data to be sent when triggering a custom event <ko>     </ko>\n   * @return An instance of the component itself<ko>  </ko>\n   * @example\n   * ```ts\n   * import Component, { ComponentEvent } from \"@egjs/component\";\n   *\n   * class Some extends Component<{\n   *   beforeHi: ComponentEvent<{ foo: number; bar: string }>;\n   *   hi: { foo: { a: number; b: boolean } };\n   *   someEvent: (foo: number, bar: string) => void;\n   *   someOtherEvent: void; // When there's no event argument\n   * }> {\n   *   some(){\n   *     if(this.trigger(\"beforeHi\")){ // When event call to stop return false.\n   *       this.trigger(\"hi\");// fire hi event.\n   *     }\n   *   }\n   * }\n   *\n   * const some = new Some();\n   * some.on(\"beforeHi\", e => {\n   *   if(condition){\n   *     e.stop(); // When event call to stop, `hi` event not call.\n   *   }\n   *   // `currentTarget` is component instance.\n   *   console.log(some === e.currentTarget); // true\n   *\n   *   typeof e.foo; // number\n   *   typeof e.bar; // string\n   * });\n   * some.on(\"hi\", e => {\n   *   typeof e.foo.b; // boolean\n   * });\n   * // If you want to more know event design. You can see article.\n   * // https://github.com/naver/egjs-component/wiki/How-to-make-Component-event-design%3F\n   * ```\n   */\n\n\n  var __proto = Component.prototype;\n\n  __proto.trigger = function (event) {\n    var params = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      params[_i - 1] = arguments[_i];\n    }\n\n    var eventName = event instanceof ComponentEvent ? event.eventType : event;\n\n    var handlers = __spread(this._eventHandler[eventName] || []);\n\n    if (handlers.length <= 0) {\n      return this;\n    }\n\n    if (event instanceof ComponentEvent) {\n      event.currentTarget = this;\n      handlers.forEach(function (handler) {\n        handler(event);\n      });\n    } else {\n      handlers.forEach(function (handler) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        handler.apply(void 0, __spread(params));\n      });\n    }\n\n    return this;\n  };\n  /**\n   * Executed event just one time.\n   * @ko   .\n   * @param {string} eventName The name of the event to be attached or an event name - event handler mapped object.<ko>     - </ko>\n   * @param {function} handlerToAttach The handler function of the event to be attached <ko>   </ko>\n   * @return An instance of the component itself<ko>  </ko>\n   * @example\n   * ```ts\n   * import Component, { ComponentEvent } from \"@egjs/component\";\n   *\n   * class Some extends Component<{\n   *   hi: ComponentEvent;\n   * }> {\n   *   hi() {\n   *     alert(\"hi\");\n   *   }\n   *   thing() {\n   *     this.once(\"hi\", this.hi);\n   *   }\n   * }\n   *\n   * var some = new Some();\n   * some.thing();\n   * some.trigger(new ComponentEvent(\"hi\"));\n   * // fire alert(\"hi\");\n   * some.trigger(new ComponentEvent(\"hi\"));\n   * // Nothing happens\n   * ```\n   */\n\n\n  __proto.once = function (eventName, handlerToAttach) {\n    var _this = this;\n\n    if (typeof eventName === \"object\" && isUndefined(handlerToAttach)) {\n      var eventHash = eventName;\n\n      for (var key in eventHash) {\n        this.once(key, eventHash[key]);\n      }\n\n      return this;\n    } else if (typeof eventName === \"string\" && typeof handlerToAttach === \"function\") {\n      var listener_1 = function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        } // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n\n\n        handlerToAttach.apply(void 0, __spread(args));\n\n        _this.off(eventName, listener_1);\n      };\n\n      this.on(eventName, listener_1);\n    }\n\n    return this;\n  };\n  /**\n   * Checks whether an event has been attached to a component.\n   * @ko    .\n   * @param {string} eventName The name of the event to be attached <ko>    </ko>\n   * @return {boolean} Indicates whether the event is attached. <ko>  </ko>\n   * @example\n   * ```ts\n   * import Component from \"@egjs/component\";\n   *\n   * class Some extends Component<{\n   *   hi: void;\n   * }> {\n   *   some() {\n   *     this.hasOn(\"hi\");// check hi event.\n   *   }\n   * }\n   * ```\n   */\n\n\n  __proto.hasOn = function (eventName) {\n    return !!this._eventHandler[eventName];\n  };\n  /**\n   * Attaches an event to a component.\n   * @ko   .\n   * @param {string} eventName The name of the event to be attached or an event name - event handler mapped object.<ko>     - </ko>\n   * @param {function} handlerToAttach The handler function of the event to be attached <ko>   </ko>\n   * @return An instance of a component itself<ko>  </ko>\n   * @example\n   * ```ts\n   * import Component, { ComponentEvent } from \"@egjs/component\";\n   *\n   * class Some extends Component<{\n   *   hi: void;\n   * }> {\n   *   hi() {\n   *     console.log(\"hi\");\n   *   }\n   *   some() {\n   *     this.on(\"hi\",this.hi); //attach event\n   *   }\n   * }\n   * ```\n   */\n\n\n  __proto.on = function (eventName, handlerToAttach) {\n    if (typeof eventName === \"object\" && isUndefined(handlerToAttach)) {\n      var eventHash = eventName;\n\n      for (var name in eventHash) {\n        this.on(name, eventHash[name]);\n      }\n\n      return this;\n    } else if (typeof eventName === \"string\" && typeof handlerToAttach === \"function\") {\n      var handlerList = this._eventHandler[eventName];\n\n      if (isUndefined(handlerList)) {\n        this._eventHandler[eventName] = [];\n        handlerList = this._eventHandler[eventName];\n      }\n\n      handlerList.push(handlerToAttach);\n    }\n\n    return this;\n  };\n  /**\n   * Detaches an event from the component.<br/>If the `eventName` is not given this will detach all event handlers attached.<br/>If the `handlerToDetach` is not given, this will detach all event handlers for `eventName`.\n   * @ko    .<br/>`eventName`       .<br/>`handlerToAttach`    `eventName`     .\n   * @param {string?} eventName The name of the event to be detached <ko>  </ko>\n   * @param {function?} handlerToDetach The handler function of the event to be detached <ko>   </ko>\n   * @return An instance of a component itself <ko>  </ko>\n   * @example\n   * ```ts\n   * import Component, { ComponentEvent } from \"@egjs/component\";\n   *\n   * class Some extends Component<{\n   *   hi: void;\n   * }> {\n   *   hi() {\n   *     console.log(\"hi\");\n   *   }\n   *   some() {\n   *     this.off(\"hi\",this.hi); //detach event\n   *   }\n   * }\n   * ```\n   */\n\n\n  __proto.off = function (eventName, handlerToDetach) {\n    var e_1, _a; // Detach all event handlers.\n\n\n    if (isUndefined(eventName)) {\n      this._eventHandler = {};\n      return this;\n    } // Detach all handlers for eventname or detach event handlers by object.\n\n\n    if (isUndefined(handlerToDetach)) {\n      if (typeof eventName === \"string\") {\n        delete this._eventHandler[eventName];\n        return this;\n      } else {\n        var eventHash = eventName;\n\n        for (var name in eventHash) {\n          this.off(name, eventHash[name]);\n        }\n\n        return this;\n      }\n    } // Detach single event handler\n\n\n    var handlerList = this._eventHandler[eventName];\n\n    if (handlerList) {\n      var idx = 0;\n\n      try {\n        for (var handlerList_1 = __values(handlerList), handlerList_1_1 = handlerList_1.next(); !handlerList_1_1.done; handlerList_1_1 = handlerList_1.next()) {\n          var handlerFunction = handlerList_1_1.value;\n\n          if (handlerFunction === handlerToDetach) {\n            handlerList.splice(idx, 1);\n\n            if (handlerList.length <= 0) {\n              delete this._eventHandler[eventName];\n            }\n\n            break;\n          }\n\n          idx++;\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (handlerList_1_1 && !handlerList_1_1.done && (_a = handlerList_1.return)) _a.call(handlerList_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n\n    return this;\n  };\n  /**\n   * Version info string\n   * @ko  \n   * @name VERSION\n   * @static\n   * @example\n   * Component.VERSION;  // ex) 3.0.0\n   * @memberof Component\n   */\n\n\n  Component.VERSION = \"3.0.2\";\n  return Component;\n}();\n\n/*\nCopyright (c) NAVER Crop.\nname: @cfcs/core\nlicense: MIT\nauthor: NAVER Crop.\nrepository: https://github.com/naver/cfcs\nversion: 0.0.6\n*/\n\n/**\n * cfcs\n * Copyright (c) 2022-present NAVER Corp.\n * MIT license\n */\nfunction keys(obj) {\n  return Object.keys(obj);\n}\nfunction isObject(val) {\n  return typeof val === \"object\";\n}\nfunction isFunction(val) {\n  return typeof val === \"function\";\n}\n\nvar OBSERVERS_PATH = \"__observers__\";\n\nvar Observer =\n/*#__PURE__*/\nfunction () {\n  function Observer(value) {\n    this._emitter = new Component();\n    this._current = value;\n  }\n\n  var __proto = Observer.prototype;\n  Object.defineProperty(__proto, \"current\", {\n    get: function () {\n      return this._current;\n    },\n    set: function (value) {\n      var isUpdate = value !== this._current;\n      this._current = value;\n\n      if (isUpdate) {\n        this._emitter.trigger(\"update\", value);\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  __proto.subscribe = function (callback) {\n    this._emitter.on(\"update\", callback);\n  };\n\n  __proto.unsubscribe = function (callback) {\n    this._emitter.off(\"update\", callback);\n  };\n\n  return Observer;\n}();\nfunction observe(defaultValue) {\n  return new Observer(defaultValue);\n}\nfunction defineObservers(instance) {\n  var observers = {};\n  Object.defineProperty(instance, OBSERVERS_PATH, {\n    get: function () {\n      return observers;\n    }\n  });\n  return observers;\n}\nfunction getObservers(instance) {\n  if (!instance[OBSERVERS_PATH]) {\n    defineObservers(instance);\n  }\n\n  return instance[OBSERVERS_PATH];\n}\nfunction getObserver(instance, name, defaultValue) {\n  var observers = getObservers(instance);\n\n  if (!observers[name]) {\n    observers[name] = observe(defaultValue);\n  }\n\n  return observers[name];\n}\nfunction setObserver(instance, name, observer) {\n  var observers = getObservers(instance);\n  observers[name] = observer;\n}\nfunction isObserver(val) {\n  return val && isObject(val) && \"current\" in val && \"subscribe\" in val && \"unsubscribe\" in val;\n}\n\nfunction Reactive(name) {\n  return function (prototype, memberName) {\n    var publicName = name || memberName;\n    Object.defineProperty(prototype, memberName, {\n      get: function () {\n        return getObserver(this, publicName).current;\n      },\n      set: function (value) {\n        getObserver(this, publicName, value).current = value;\n      }\n    });\n\n    if (publicName !== memberName) {\n      Object.defineProperty(prototype, publicName, {\n        get: function () {\n          return getObserver(this, publicName).current;\n        }\n      });\n    }\n  };\n}\n\nfunction injectReactiveSubscribe(object) {\n  object[\"subscribe\"] = function (name, callback) {\n    getObserver(this, name).subscribe(callback);\n  };\n\n  object[\"unsubscribe\"] = function (name, callback) {\n    var _this = this;\n\n    if (!name) {\n      keys(getObservers(this)).forEach(function (observerName) {\n        _this.unsubscribe(observerName);\n      });\n      return;\n    }\n\n    if (!(name in this)) {\n      return;\n    }\n\n    getObserver(this, name).unsubscribe(callback);\n  };\n}\n\nfunction reactive(setup) {\n  var result = isFunction(setup) ? setup() : setup;\n  var reactiveObject = {};\n  defineObservers(reactiveObject);\n  keys(result).forEach(function (name) {\n    var value = result[name];\n\n    if (isObserver(value)) {\n      setObserver(reactiveObject, name, value);\n      Reactive(name)(reactiveObject, name);\n    } else {\n      reactiveObject[name] = value;\n    }\n  });\n  injectReactiveSubscribe(reactiveObject);\n  return reactiveObject;\n}\n\nvar instanceMap;\nvar REACTIVE = {\n  events: [\"keydown\", \"keyup\", \"blur\"],\n  state: {\n    isKeydown: false\n  },\n  mounted: function (data) {\n    var _a, _b;\n    if (!instanceMap) {\n      instanceMap = new Map();\n    }\n    var element = (_b = (_a = data.ref) === null || _a === void 0 ? void 0 : _a.current) !== null && _b !== void 0 ? _b : window;\n    var info = instanceMap.get(element);\n    if (!info) {\n      info = {\n        inst: new KeyController(element),\n        count: 0\n      };\n      instanceMap.set(element, info);\n    }\n    ++info.count;\n    var keycon = info.inst;\n    var keys = data.keys;\n    var isKeydown = observe(false);\n    var checker = data.checker;\n    keycon.keydown(keys, function (e) {\n      if (!checker || checker(e)) {\n        isKeydown.current = true;\n      }\n    });\n    keycon.keyup(keys, function () {\n      isKeydown.current = false;\n    });\n    keycon.on(\"blur\", function () {\n      isKeydown.current = false;\n    });\n    return reactive({\n      inst: keycon,\n      keys: keys,\n      destroy: function () {\n        return keycon.destroy();\n      },\n      isKeydown: isKeydown\n    });\n  },\n  destroy: function (_a) {\n    var inst = _a.inst;\n    var element = inst.container;\n    var info = instanceMap.get(element);\n    --info.count;\n    if (!info.count) {\n      inst.destroy();\n      instanceMap.delete(element);\n    }\n  },\n  on: function (inst, name, callback) {\n    var keycon = inst.inst;\n    if (name === \"keydown\") {\n      keycon.keydown(inst.keys, callback);\n    } else if (name === \"keyup\") {\n      keycon.keyup(inst.keys, callback);\n    } else {\n      keycon.on(name, callback);\n    }\n  },\n  off: function (inst, name, callback) {\n    var keycon = inst.inst;\n    if (name === \"keydown\") {\n      keycon.offKeydown(inst.keys, callback);\n    } else if (name === \"keyup\") {\n      keycon.offKeyup(inst.keys, callback);\n    } else {\n      keycon.off(name, callback);\n    }\n  }\n};\n\nexport default KeyController;\nexport { REACTIVE, getArrangeCombi, getCombi, getKey, getModifierCombi };\n//# sourceMappingURL=keycon.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: @scena/matrix\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/matrix\nversion: 1.1.1\n*/\nimport { throttle, TINY_NUM, average } from '@daybrush/utils';\n\nfunction add(matrix, inverseMatrix, startIndex, fromIndex, n, k) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    var fromX = fromIndex + i * n;\n    matrix[x] += matrix[fromX] * k;\n    inverseMatrix[x] += inverseMatrix[fromX] * k;\n  }\n}\n\nfunction swap(matrix, inverseMatrix, startIndex, fromIndex, n) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    var fromX = fromIndex + i * n;\n    var v = matrix[x];\n    var iv = inverseMatrix[x];\n    matrix[x] = matrix[fromX];\n    matrix[fromX] = v;\n    inverseMatrix[x] = inverseMatrix[fromX];\n    inverseMatrix[fromX] = iv;\n  }\n}\n\nfunction divide(matrix, inverseMatrix, startIndex, n, k) {\n  for (var i = 0; i < n; ++i) {\n    var x = startIndex + i * n;\n    matrix[x] /= k;\n    inverseMatrix[x] /= k;\n  }\n}\n/**\n *\n * @namespace Matrix\n */\n\n/**\n * @memberof Matrix\n */\n\n\nfunction ignoreDimension(matrix, m, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = matrix.slice();\n\n  for (var i = 0; i < n; ++i) {\n    newMatrix[i * n + m - 1] = 0;\n    newMatrix[(m - 1) * n + i] = 0;\n  }\n\n  newMatrix[(m - 1) * (n + 1)] = 1;\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction invert(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = matrix.slice();\n  var inverseMatrix = createIdentityMatrix(n);\n\n  for (var i = 0; i < n; ++i) {\n    // diagonal\n    var identityIndex = n * i + i;\n\n    if (!throttle(newMatrix[identityIndex], TINY_NUM)) {\n      // newMatrix[identityIndex] = 0;\n      for (var j = i + 1; j < n; ++j) {\n        if (newMatrix[n * i + j]) {\n          swap(newMatrix, inverseMatrix, i, j, n);\n          break;\n        }\n      }\n    }\n\n    if (!throttle(newMatrix[identityIndex], TINY_NUM)) {\n      // no inverse matrix\n      return [];\n    }\n\n    divide(newMatrix, inverseMatrix, i, n, newMatrix[identityIndex]);\n\n    for (var j = 0; j < n; ++j) {\n      var targetStartIndex = j;\n      var targetIndex = j + i * n;\n      var target = newMatrix[targetIndex];\n\n      if (!throttle(target, TINY_NUM) || i === j) {\n        continue;\n      }\n\n      add(newMatrix, inverseMatrix, targetStartIndex, i, n, -target);\n    }\n  }\n\n  return inverseMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction transpose(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = [];\n\n  for (var i = 0; i < n; ++i) {\n    for (var j = 0; j < n; ++j) {\n      newMatrix[j * n + i] = matrix[n * i + j];\n    }\n  }\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction getOrigin(matrix, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var originMatrix = [];\n  var w = matrix[n * n - 1];\n\n  for (var i = 0; i < n - 1; ++i) {\n    originMatrix[i] = matrix[n * (n - 1) + i] / w;\n  }\n\n  originMatrix[n - 1] = 0;\n  return originMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction fromTranslation(pos, n) {\n  var newMatrix = createIdentityMatrix(n);\n\n  for (var i = 0; i < n - 1; ++i) {\n    newMatrix[n * (n - 1) + i] = pos[i] || 0;\n  }\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertPositionMatrix(matrix, n) {\n  var newMatrix = matrix.slice();\n\n  for (var i = matrix.length; i < n - 1; ++i) {\n    newMatrix[i] = 0;\n  }\n\n  newMatrix[n - 1] = 1;\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertDimension(matrix, n, m) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  } // n < m\n\n\n  if (n === m) {\n    return matrix;\n  }\n\n  var newMatrix = createIdentityMatrix(m);\n  var length = Math.min(n, m);\n\n  for (var i = 0; i < length - 1; ++i) {\n    for (var j = 0; j < length - 1; ++j) {\n      newMatrix[i * m + j] = matrix[i * n + j];\n    }\n\n    newMatrix[(i + 1) * m - 1] = matrix[(i + 1) * n - 1];\n    newMatrix[(m - 1) * m + i] = matrix[(n - 1) * n + i];\n  }\n\n  newMatrix[m * m - 1] = matrix[n * n - 1];\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction multiplies(n) {\n  var matrixes = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    matrixes[_i - 1] = arguments[_i];\n  }\n\n  var m = createIdentityMatrix(n);\n  matrixes.forEach(function (matrix) {\n    m = multiply(m, matrix, n);\n  });\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction multiply(matrix, matrix2, n) {\n  if (n === void 0) {\n    n = Math.sqrt(matrix.length);\n  }\n\n  var newMatrix = []; // 1 y: n\n  // 1 x: m\n  // 2 x: m\n  // 2 y: k\n  // n * m X m * k\n\n  var m = matrix.length / n;\n  var k = matrix2.length / m;\n\n  if (!m) {\n    return matrix2;\n  } else if (!k) {\n    return matrix;\n  }\n\n  for (var i = 0; i < n; ++i) {\n    for (var j = 0; j < k; ++j) {\n      newMatrix[j * n + i] = 0;\n\n      for (var l = 0; l < m; ++l) {\n        // m1 x: m(l), y: n(i)\n        // m2 x: k(j):  y: m(l)\n        // nw x: n(i), y: k(j)\n        newMatrix[j * n + i] += matrix[l * n + i] * matrix2[j * m + l];\n      }\n    }\n  } // n * k\n\n\n  return newMatrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction plus(pos1, pos2) {\n  var length = Math.min(pos1.length, pos2.length);\n  var nextPos = pos1.slice();\n\n  for (var i = 0; i < length; ++i) {\n    nextPos[i] = nextPos[i] + pos2[i];\n  }\n\n  return nextPos;\n}\n/**\n * @memberof Matrix\n */\n\nfunction minus(pos1, pos2) {\n  var length = Math.min(pos1.length, pos2.length);\n  var nextPos = pos1.slice();\n\n  for (var i = 0; i < length; ++i) {\n    nextPos[i] = nextPos[i] - pos2[i];\n  }\n\n  return nextPos;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertCSStoMatrix(a, is2d) {\n  if (is2d === void 0) {\n    is2d = a.length === 6;\n  }\n\n  if (is2d) {\n    return [a[0], a[1], 0, a[2], a[3], 0, a[4], a[5], 1];\n  }\n\n  return a;\n}\n/**\n * @memberof Matrix\n */\n\nfunction convertMatrixtoCSS(a, is2d) {\n  if (is2d === void 0) {\n    is2d = a.length === 9;\n  }\n\n  if (is2d) {\n    return [a[0], a[1], a[3], a[4], a[6], a[7]];\n  }\n\n  return a;\n}\n/**\n * @memberof Matrix\n */\n\nfunction calculate(matrix, matrix2, n) {\n  if (n === void 0) {\n    n = matrix2.length;\n  }\n\n  var result = multiply(matrix, matrix2, n);\n  var k = result[n - 1];\n  return result.map(function (v) {\n    return v / k;\n  });\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateX3d(matrix, rad) {\n  return multiply(matrix, [1, 0, 0, 0, 0, Math.cos(rad), Math.sin(rad), 0, 0, -Math.sin(rad), Math.cos(rad), 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateY3d(matrix, rad) {\n  return multiply(matrix, [Math.cos(rad), 0, -Math.sin(rad), 0, 0, 1, 0, 0, Math.sin(rad), 0, Math.cos(rad), 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotateZ3d(matrix, rad) {\n  return multiply(matrix, createRotateMatrix(rad, 4));\n}\n/**\n * @memberof Matrix\n */\n\nfunction scale3d(matrix, _a) {\n  var _b = _a[0],\n      sx = _b === void 0 ? 1 : _b,\n      _c = _a[1],\n      sy = _c === void 0 ? 1 : _c,\n      _d = _a[2],\n      sz = _d === void 0 ? 1 : _d;\n  return multiply(matrix, [sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction rotate(pos, rad) {\n  return calculate(createRotateMatrix(rad, 3), convertPositionMatrix(pos, 3));\n}\n/**\n * @memberof Matrix\n */\n\nfunction translate3d(matrix, _a) {\n  var _b = _a[0],\n      tx = _b === void 0 ? 0 : _b,\n      _c = _a[1],\n      ty = _c === void 0 ? 0 : _c,\n      _d = _a[2],\n      tz = _d === void 0 ? 0 : _d;\n  return multiply(matrix, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1], 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction matrix3d(matrix1, matrix2) {\n  return multiply(matrix1, matrix2, 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction createRotateMatrix(rad, n) {\n  var cos = Math.cos(rad);\n  var sin = Math.sin(rad);\n  var m = createIdentityMatrix(n); // cos -sin\n  // sin cos\n\n  m[0] = cos;\n  m[1] = sin;\n  m[n] = -sin;\n  m[n + 1] = cos;\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createIdentityMatrix(n) {\n  var length = n * n;\n  var matrix = [];\n\n  for (var i = 0; i < length; ++i) {\n    matrix[i] = i % (n + 1) ? 0 : 1;\n  }\n\n  return matrix;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createScaleMatrix(scale, n) {\n  var m = createIdentityMatrix(n);\n  var length = Math.min(scale.length, n - 1);\n\n  for (var i = 0; i < length; ++i) {\n    m[(n + 1) * i] = scale[i];\n  }\n\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createOriginMatrix(origin, n) {\n  var m = createIdentityMatrix(n);\n  var length = Math.min(origin.length, n - 1);\n\n  for (var i = 0; i < length; ++i) {\n    m[n * (n - 1) + i] = origin[i];\n  }\n\n  return m;\n}\n/**\n * @memberof Matrix\n */\n\nfunction createWarpMatrix(pos0, pos1, pos2, pos3, nextPos0, nextPos1, nextPos2, nextPos3) {\n  var x0 = pos0[0],\n      y0 = pos0[1];\n  var x1 = pos1[0],\n      y1 = pos1[1];\n  var x2 = pos2[0],\n      y2 = pos2[1];\n  var x3 = pos3[0],\n      y3 = pos3[1];\n  var u0 = nextPos0[0],\n      v0 = nextPos0[1];\n  var u1 = nextPos1[0],\n      v1 = nextPos1[1];\n  var u2 = nextPos2[0],\n      v2 = nextPos2[1];\n  var u3 = nextPos3[0],\n      v3 = nextPos3[1];\n  var matrix = [x0, 0, x1, 0, x2, 0, x3, 0, y0, 0, y1, 0, y2, 0, y3, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, x0, 0, x1, 0, x2, 0, x3, 0, y0, 0, y1, 0, y2, 0, y3, 0, 1, 0, 1, 0, 1, 0, 1, -u0 * x0, -v0 * x0, -u1 * x1, -v1 * x1, -u2 * x2, -v2 * x2, -u3 * x3, -v3 * x3, -u0 * y0, -v0 * y0, -u1 * y1, -v1 * y1, -u2 * y2, -v2 * y2, -u3 * y3, -v3 * y3];\n  var inverseMatrix = invert(matrix, 8);\n\n  if (!inverseMatrix.length) {\n    return [];\n  }\n\n  var h = multiply(inverseMatrix, [u0, v0, u1, v1, u2, v2, u3, v3], 8);\n  h[8] = 1;\n  return convertDimension(transpose(h), 3, 4);\n}\n/**\n * @memberof Matrix\n */\n\nfunction getCenter(points) {\n  return [0, 1].map(function (i) {\n    return average(points.map(function (pos) {\n      return pos[i];\n    }));\n  });\n}\n\nexport { calculate, convertCSStoMatrix, convertDimension, convertMatrixtoCSS, convertPositionMatrix, createIdentityMatrix, createOriginMatrix, createRotateMatrix, createScaleMatrix, createWarpMatrix, fromTranslation, getCenter, getOrigin, ignoreDimension, invert, matrix3d, minus, multiplies, multiply, plus, rotate, rotateX3d, rotateY3d, rotateZ3d, scale3d, translate3d, transpose };\n//# sourceMappingURL=matrix.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: css-to-mat\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-to-mat.git\nversion: 1.0.3\n*/\nimport { splitBracket, splitComma, splitUnit, isArray, splitSpace } from '@daybrush/utils';\nimport { calculate, matrix3d, invert, translate3d, scale3d, rotateZ3d, rotateX3d, rotateY3d } from '@scena/matrix';\n\nfunction createMatrix() {\n  return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nfunction parseMat(transform) {\n  return toMat(parse(transform));\n}\nfunction getElementMatrix(el) {\n  return parseMat(getComputedStyle(el).transform);\n}\nfunction calculateMatrixDist(matrix, pos) {\n  var res = calculate(matrix, [pos[0], pos[1] || 0, pos[2] || 0, 1], 4);\n  var w = res[3] || 1;\n  return [res[0] / w, res[1] / w, res[2] / w];\n}\nfunction getDistElementMatrix(el, container) {\n  if (container === void 0) {\n    container = document.body;\n  }\n\n  var target = el;\n  var matrix = createMatrix();\n\n  while (target) {\n    var transform = getComputedStyle(target).transform;\n    matrix = matrix3d(parseMat(transform), matrix);\n\n    if (target === container) {\n      break;\n    }\n\n    target = target.parentElement;\n  }\n\n  matrix = invert(matrix, 4);\n  matrix[12] = 0;\n  matrix[13] = 0;\n  matrix[14] = 0;\n  return matrix;\n}\nfunction toMat(matrixInfos) {\n  var target = createMatrix();\n  matrixInfos.forEach(function (info) {\n    var matrixFunction = info.matrixFunction,\n        functionValue = info.functionValue;\n\n    if (!matrixFunction) {\n      return;\n    }\n\n    target = matrixFunction(target, functionValue);\n  });\n  return target;\n}\nfunction parse(transform) {\n  var transforms = isArray(transform) ? transform : splitSpace(transform);\n  return transforms.map(function (t) {\n    var _a = splitBracket(t),\n        name = _a.prefix,\n        value = _a.value;\n\n    var matrixFunction = null;\n    var functionName = name;\n    var functionValue = \"\";\n\n    if (name === \"translate\" || name === \"translateX\" || name === \"translate3d\") {\n      var _b = splitComma(value).map(function (v) {\n        return parseFloat(v);\n      }),\n          posX = _b[0],\n          _c = _b[1],\n          posY = _c === void 0 ? 0 : _c,\n          _d = _b[2],\n          posZ = _d === void 0 ? 0 : _d;\n\n      matrixFunction = translate3d;\n      functionValue = [posX, posY, posZ];\n    } else if (name === \"translateY\") {\n      var posY = parseFloat(value);\n      matrixFunction = translate3d;\n      functionValue = [0, posY, 0];\n    } else if (name === \"translateZ\") {\n      var posZ = parseFloat(value);\n      matrixFunction = translate3d;\n      functionValue = [0, 0, posZ];\n    } else if (name === \"scale\" || name === \"scale3d\") {\n      var _e = splitComma(value).map(function (v) {\n        return parseFloat(v);\n      }),\n          sx = _e[0],\n          _f = _e[1],\n          sy = _f === void 0 ? sx : _f,\n          _g = _e[2],\n          sz = _g === void 0 ? 1 : _g;\n\n      matrixFunction = scale3d;\n      functionValue = [sx, sy, sz];\n    } else if (name === \"scaleX\") {\n      var sx = parseFloat(value);\n      matrixFunction = scale3d;\n      functionValue = [sx, 1, 1];\n    } else if (name === \"scaleY\") {\n      var sy = parseFloat(value);\n      matrixFunction = scale3d;\n      functionValue = [1, sy, 1];\n    } else if (name === \"scaleZ\") {\n      var sz = parseFloat(value);\n      matrixFunction = scale3d;\n      functionValue = [1, 1, sz];\n    } else if (name === \"rotate\" || name === \"rotateZ\" || name === \"rotateX\" || name === \"rotateY\") {\n      var _h = splitUnit(value),\n          unit = _h.unit,\n          unitValue = _h.value;\n\n      var rad = unit === \"rad\" ? unitValue : unitValue * Math.PI / 180;\n\n      if (name === \"rotate\" || name === \"rotateZ\") {\n        functionName = \"rotateZ\";\n        matrixFunction = rotateZ3d;\n      } else if (name === \"rotateX\") {\n        matrixFunction = rotateX3d;\n      } else if (name === \"rotateY\") {\n        matrixFunction = rotateY3d;\n      }\n\n      functionValue = rad;\n    } else if (name === \"matrix3d\") {\n      matrixFunction = matrix3d;\n      functionValue = splitComma(value).map(function (v) {\n        return parseFloat(v);\n      });\n    } else if (name === \"matrix\") {\n      var m = splitComma(value).map(function (v) {\n        return parseFloat(v);\n      });\n      matrixFunction = matrix3d;\n      functionValue = [m[0], m[1], 0, 0, m[2], m[3], 0, 0, 0, 0, 1, 0, m[4], m[5], 0, 1];\n    } else {\n      functionName = \"\";\n    }\n\n    return {\n      name: name,\n      functionName: functionName,\n      value: value,\n      matrixFunction: matrixFunction,\n      functionValue: functionValue\n    };\n  });\n}\n\nexport { calculateMatrixDist, createMatrix, getDistElementMatrix, getElementMatrix, parse, parseMat, toMat };\n//# sourceMappingURL=css-to-mat.esm.js.map\n","/*\nCopyright (c) 2019 Daybrush\nname: css-styled\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/css-styled.git\nversion: 1.0.1\n*/\nimport { splitComma } from '@daybrush/utils';\n\nfunction hash(str) {\n  var hash = 5381,\n      i    = str.length;\n\n  while(i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n\n  /* JavaScript does bitwise operations (like XOR, above) on 32-bit signed\n   * integers. Since we want the results to be always positive, convert the\n   * signed int to an unsigned by doing an unsigned bitshift. */\n  return hash >>> 0;\n}\n\nvar stringHash = hash;\n\nfunction getHash(str) {\n  return stringHash(str).toString(36);\n}\nfunction getShadowRoot(parentElement) {\n  if (parentElement && parentElement.getRootNode) {\n    var rootNode = parentElement.getRootNode();\n\n    if (rootNode.nodeType === 11) {\n      return rootNode;\n    }\n  }\n\n  return;\n}\nfunction replaceStyle(className, css, options) {\n  if (options.original) {\n    return css;\n  }\n\n  return css.replace(/([^};{\\s}][^};{]*|^\\s*){/mg, function (_, selector) {\n    var trimmedSelector = selector.trim();\n    return (trimmedSelector ? splitComma(trimmedSelector) : [\"\"]).map(function (subSelector) {\n      var trimmedSubSelector = subSelector.trim();\n\n      if (trimmedSubSelector.indexOf(\"@\") === 0) {\n        return trimmedSubSelector;\n      } else if (trimmedSubSelector.indexOf(\":global\") > -1) {\n        return trimmedSubSelector.replace(/\\:global/g, \"\");\n      } else if (trimmedSubSelector.indexOf(\":host\") > -1) {\n        return \"\" + trimmedSubSelector.replace(/\\:host/g, \".\" + className);\n      } else if (trimmedSubSelector) {\n        return \".\" + className + \" \" + trimmedSubSelector;\n      } else {\n        return \".\" + className;\n      }\n    }).join(\", \") + \" {\";\n  });\n}\nfunction injectStyle(className, css, options, shadowRoot) {\n  var style = document.createElement(\"style\");\n  style.setAttribute(\"type\", \"text/css\");\n  style.setAttribute(\"data-styled-id\", className);\n\n  if (options.nonce) {\n    style.setAttribute(\"nonce\", options.nonce);\n  }\n\n  style.innerHTML = replaceStyle(className, css, options);\n  (shadowRoot || document.head || document.body).appendChild(style);\n  return style;\n}\n\n/**\n * Create an styled object that can be defined and inserted into the css.\n * @param - css styles\n */\n\nfunction styled(css) {\n  var injectClassName = \"rCS\" + getHash(css);\n  var injectCount = 0;\n  var injectElement;\n  return {\n    className: injectClassName,\n    inject: function (el, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var shadowRoot = getShadowRoot(el);\n      var firstMount = injectCount === 0;\n      var styleElement;\n\n      if (shadowRoot || firstMount) {\n        styleElement = injectStyle(injectClassName, css, options, shadowRoot);\n      }\n\n      if (firstMount) {\n        injectElement = styleElement;\n      }\n\n      if (!shadowRoot) {\n        ++injectCount;\n      }\n\n      return {\n        destroy: function () {\n          if (shadowRoot) {\n            shadowRoot.removeChild(styleElement);\n            styleElement = null;\n          } else {\n            if (injectCount > 0) {\n              --injectCount;\n            }\n\n            if (injectCount === 0 && injectElement) {\n              injectElement.parentNode.removeChild(injectElement);\n              injectElement = null;\n            }\n          }\n        }\n      };\n    }\n  };\n}\n\nexport default styled;\n//# sourceMappingURL=styled.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: selecto\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/selecto.git\nversion: 1.22.0\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport Gesto from 'gesto';\nimport { Properties } from 'framework-utils';\nimport { hasClass, addClass, calculateBoundSize, getDist, isObject, isString, removeEvent, isFunction, addEvent, splitUnit, isArray, camelize, between } from '@daybrush/utils';\nimport { diff } from '@egjs/children-differ';\nimport DragScroll from '@scena/dragscroll';\nimport KeyController, { getCombi } from 'keycon';\nimport { fitPoints, getOverlapPoints, isInside, getAreaSize } from 'overlap-area';\nimport { createMatrix, getDistElementMatrix, calculateMatrixDist } from 'css-to-mat';\nimport styled from 'css-styled';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\nfunction __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nfunction getClient(e) {\n  if (\"touches\" in e) {\n    var touch = e.touches[0] || e.changedTouches[0];\n    return {\n      clientX: touch.clientX,\n      clientY: touch.clientY\n    };\n  } else {\n    return {\n      clientX: e.clientX,\n      clientY: e.clientY\n    };\n  }\n}\nfunction filterDuplicated(arr) {\n  if (typeof Map === \"undefined\") {\n    return arr.filter(function (value, index) {\n      return arr.indexOf(value) === index;\n    });\n  }\n\n  var map = new Map();\n  return arr.filter(function (value) {\n    if (map.has(value)) {\n      return false;\n    }\n\n    map.set(value, true);\n    return true;\n  });\n}\nfunction elementFromPoint(clientX, clientY) {\n  return document.elementFromPoint && document.elementFromPoint(clientX, clientY) || null;\n}\nfunction createElement(jsx, prevTarget, container) {\n  var tag = jsx.tag,\n      children = jsx.children,\n      attributes = jsx.attributes,\n      className = jsx.className,\n      style = jsx.style;\n  var el = prevTarget || document.createElement(tag);\n\n  for (var name in attributes) {\n    el.setAttribute(name, attributes[name]);\n  }\n\n  var elChildren = el.children;\n  children.forEach(function (child, i) {\n    createElement(child, elChildren[i], el);\n  });\n\n  if (className) {\n    className.split(\" \").forEach(function (name) {\n      if (!hasClass(el, name)) {\n        addClass(el, name);\n      }\n    });\n  }\n\n  if (style) {\n    var elStyle = el.style;\n\n    for (var name in style) {\n      elStyle[name] = style[name];\n    }\n  }\n\n  if (!prevTarget && container) {\n    container.appendChild(el);\n  }\n\n  return el;\n}\nfunction h(tag, attrs) {\n  var children = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    children[_i - 2] = arguments[_i];\n  }\n\n  var _a = attrs || {},\n      _b = _a.className,\n      className = _b === void 0 ? \"\" : _b,\n      _c = _a.style,\n      style = _c === void 0 ? {} : _c,\n      attributes = __rest(_a, [\"className\", \"style\"]);\n\n  return {\n    tag: tag,\n    className: className,\n    style: style,\n    attributes: attributes,\n    children: children\n  };\n}\nfunction diffValue(prev, cur, func) {\n  if (prev !== cur) {\n    func(prev, cur);\n  }\n}\nfunction getRect(e, ratio, boundArea) {\n  var _a;\n\n  if (boundArea === void 0) {\n    boundArea = e.data.boundArea;\n  }\n\n  var _b = e.distX,\n      distX = _b === void 0 ? 0 : _b,\n      _c = e.distY,\n      distY = _c === void 0 ? 0 : _c;\n  var _d = e.data,\n      startX = _d.startX,\n      startY = _d.startY;\n\n  if (ratio > 0) {\n    var nextHeight = Math.sqrt((distX * distX + distY * distY) / (1 + ratio * ratio));\n    var nextWidth = ratio * nextHeight;\n    distX = (distX >= 0 ? 1 : -1) * nextWidth;\n    distY = (distY >= 0 ? 1 : -1) * nextHeight;\n  }\n\n  var width = Math.abs(distX);\n  var height = Math.abs(distY);\n  var maxWidth = distX < 0 ? startX - boundArea.left : boundArea.right - startX;\n  var maxHeight = distY < 0 ? startY - boundArea.top : boundArea.bottom - startY;\n  _a = calculateBoundSize([width, height], [0, 0], [maxWidth, maxHeight], !!ratio), width = _a[0], height = _a[1];\n  distX = (distX >= 0 ? 1 : -1) * width;\n  distY = (distY >= 0 ? 1 : -1) * height;\n  var tx = Math.min(0, distX);\n  var ty = Math.min(0, distY);\n  var left = startX + tx;\n  var top = startY + ty;\n  return {\n    left: left,\n    top: top,\n    right: left + width,\n    bottom: top + height,\n    width: width,\n    height: height\n  };\n}\nfunction getDefaultElementRect(el) {\n  var rect = el.getBoundingClientRect();\n  var left = rect.left,\n      top = rect.top,\n      width = rect.width,\n      height = rect.height;\n  return {\n    pos1: [left, top],\n    pos2: [left + width, top],\n    pos3: [left, top + height],\n    pos4: [left + width, top + height]\n  };\n}\nfunction passTargets(beforeTargets, afterTargets, continueSelectWithoutDeselect) {\n  var _a = diff(beforeTargets, afterTargets),\n      list = _a.list,\n      prevList = _a.prevList,\n      added = _a.added,\n      removed = _a.removed,\n      maintained = _a.maintained;\n\n  return __spreadArray(__spreadArray(__spreadArray([], added.map(function (index) {\n    return list[index];\n  }), true), removed.map(function (index) {\n    return prevList[index];\n  }), true), continueSelectWithoutDeselect ? maintained.map(function (_a) {\n    var nextIndex = _a[1];\n    return list[nextIndex];\n  }) : [], true);\n}\nfunction getLineSize(points) {\n  var size = 0;\n  var length = points.length;\n\n  for (var i = 1; i < length; ++i) {\n    size = Math.max(getDist(points[i], points[i - 1]), size);\n  }\n\n  return size;\n}\n\nvar injector = styled(\"\\n:host {\\n    position: fixed;\\n    display: none;\\n    border: 1px solid #4af;\\n    background: rgba(68, 170, 255, 0.5);\\n    pointer-events: none;\\n    will-change: transform;\\n    z-index: 100;\\n}\\n\");\n/**\n * @memberof Selecto\n */\n\nvar CLASS_NAME = \"selecto-selection \".concat(injector.className);\nvar PROPERTIES = [\"boundContainer\", \"selectableTargets\", \"selectByClick\", \"selectFromInside\", \"continueSelect\", \"continueSelectWithoutDeselect\", \"toggleContinueSelect\", \"toggleContinueSelectWithoutDeselect\", \"keyContainer\", \"hitRate\", \"scrollOptions\", \"checkInput\", \"preventDefault\", \"ratio\", \"getElementRect\", \"preventDragFromInside\", \"rootContainer\", \"dragCondition\", \"clickBySelectEnd\", \"checkOverflow\", \"innerScrollOptions\"];\n/**\n * @memberof Selecto\n */\n\nvar OPTIONS = __spreadArray([// ignore target, container,\n\"dragContainer\", \"cspNonce\", \"preventClickEventOnDrag\", \"preventClickEventOnDragStart\", \"preventRightClick\"], PROPERTIES, true);\nvar OPTION_TYPES = {\n  boundContainer: null,\n  portalContainer: null,\n  container: null,\n  dragContainer: null,\n  selectableTargets: Array,\n  selectByClick: Boolean,\n  selectFromInside: Boolean,\n  continueSelect: Boolean,\n  toggleContinueSelect: Array,\n  toggleContinueSelectWithoutDeselect: Array,\n  keyContainer: null,\n  hitRate: Number,\n  scrollOptions: Object,\n  checkInput: Boolean,\n  preventDefault: Boolean,\n  cspNonce: String,\n  ratio: Number,\n  getElementRect: Function,\n  preventDragFromInside: Boolean,\n  rootContainer: Object,\n  dragCondition: Function,\n  clickBySelectEnd: Boolean,\n  continueSelectWithoutDeselect: Boolean,\n  preventClickEventOnDragStart: Boolean,\n  preventClickEventOnDrag: Boolean,\n  checkOverflow: Boolean,\n  innerScrollOptions: Object\n};\n/**\n * @memberof Selecto\n */\n\nvar EVENTS = [\"dragStart\", \"drag\", \"dragEnd\", \"selectStart\", \"select\", \"selectEnd\", \"keydown\", \"keyup\", \"scroll\", \"innerScroll\"];\n/**\n * @memberof Selecto\n */\n\nvar METHODS = [\"clickTarget\", \"getSelectableElements\", \"setSelectedTargets\", \"getElementPoints\", \"getSelectedTargets\", \"findSelectableTargets\", \"triggerDragStart\", \"checkScroll\", \"selectTargetsByPoints\", \"setSelectedTargetsByPoints\"];\n\n/**\n * Selecto.js is a component that allows you to select elements in the drag area using the mouse or touch.\n * @sort 1\n * @extends EventEmitter\n */\n\nvar Selecto =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Selecto, _super);\n  /**\n   *\n   */\n\n\n  function Selecto(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.selectedTargets = [];\n    _this.dragScroll = new DragScroll();\n\n    _this._onDragStart = function (e, clickedTarget) {\n      var data = e.data,\n          clientX = e.clientX,\n          clientY = e.clientY,\n          inputEvent = e.inputEvent;\n      var _a = _this.options,\n          selectFromInside = _a.selectFromInside,\n          selectByClick = _a.selectByClick,\n          rootContainer = _a.rootContainer,\n          boundContainer = _a.boundContainer,\n          _b = _a.preventDragFromInside,\n          preventDragFromInside = _b === void 0 ? true : _b,\n          clickBySelectEnd = _a.clickBySelectEnd,\n          dragCondition = _a.dragCondition;\n\n      if (dragCondition && !dragCondition(e)) {\n        e.stop();\n        return;\n      }\n\n      data.data = {};\n      data.innerWidth = window.innerWidth;\n      data.innerHeight = window.innerHeight;\n\n      _this.findSelectableTargets(data);\n\n      data.startSelectedTargets = _this.selectedTargets;\n      data.scaleMatrix = createMatrix();\n      data.containerX = 0;\n      data.containerY = 0;\n      var boundArea = {\n        left: -Infinity,\n        top: -Infinity,\n        right: Infinity,\n        bottom: Infinity\n      };\n\n      if (rootContainer) {\n        var containerRect = _this.container.getBoundingClientRect();\n\n        data.containerX = containerRect.left;\n        data.containerY = containerRect.top;\n        data.scaleMatrix = getDistElementMatrix(_this.container, rootContainer);\n      }\n\n      if (boundContainer) {\n        var boundInfo = isObject(boundContainer) && \"element\" in boundContainer ? __assign({\n          left: true,\n          top: true,\n          bottom: true,\n          right: true\n        }, boundContainer) : {\n          element: boundContainer,\n          left: true,\n          top: true,\n          bottom: true,\n          right: true\n        };\n        var boundElement = boundInfo.element;\n        var rectElement = void 0;\n\n        if (boundElement) {\n          if (isString(boundElement)) {\n            rectElement = document.querySelector(boundElement);\n          } else if (boundElement === true) {\n            rectElement = _this.container;\n          } else {\n            rectElement = boundElement;\n          }\n\n          var rect = rectElement.getBoundingClientRect();\n\n          if (boundInfo.left) {\n            boundArea.left = rect.left;\n          }\n\n          if (boundInfo.top) {\n            boundArea.top = rect.top;\n          }\n\n          if (boundInfo.right) {\n            boundArea.right = rect.right;\n          }\n\n          if (boundInfo.bottom) {\n            boundArea.bottom = rect.bottom;\n          }\n        }\n      }\n\n      data.boundArea = boundArea;\n      var hitRect = {\n        left: clientX,\n        top: clientY,\n        right: clientX,\n        bottom: clientY,\n        width: 0,\n        height: 0\n      };\n      var firstPassedTargets = [];\n\n      if (!selectFromInside || selectByClick && !clickBySelectEnd) {\n        var pointTarget = _this._findElement(clickedTarget || elementFromPoint(clientX, clientY), data.selectableTargets);\n\n        firstPassedTargets = pointTarget ? [pointTarget] : [];\n      }\n\n      var hasInsideTargets = firstPassedTargets.length > 0;\n      var isPreventSelect = !selectFromInside && hasInsideTargets; // prevent drag from inside when selectByClick is false\n\n      if (isPreventSelect && !selectByClick) {\n        e.stop();\n        return false;\n      }\n\n      var type = inputEvent.type;\n      var isTrusted = type === \"mousedown\" || type === \"touchstart\";\n      /**\n       * When the drag starts (triggers on mousedown or touchstart), the dragStart event is called.\n       * Call the stop () function if you have a specific element or don't want to raise a select\n       * @memberof Selecto\n       * @event dragStart\n       * @param {OnDragStart} - Parameters for the dragStart event\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   selectByClick: true,\n       *   selectFromInside: false,\n       * });\n       *\n       * selecto.on(\"dragStart\", e => {\n       *   if (e.inputEvent.target.tagName === \"SPAN\") {\n       *     e.stop();\n       *   }\n       * }).on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n\n      var result = !e.isClick && isTrusted ? _this.emit(\"dragStart\", __assign(__assign({}, e), {\n        data: data.data\n      })) : true;\n\n      if (!result) {\n        e.stop();\n        return false;\n      }\n\n      if (_this.continueSelect) {\n        firstPassedTargets = passTargets(_this.selectedTargets, firstPassedTargets, _this.continueSelectWithoutDeselect);\n        data.startPassedTargets = _this.selectedTargets;\n      } else {\n        data.startPassedTargets = [];\n      }\n\n      _this._select(firstPassedTargets, hitRect, e, true);\n\n      data.startX = clientX;\n      data.startY = clientY;\n      data.selectFlag = false;\n      data.preventDragFromInside = false;\n\n      if (inputEvent.target) {\n        var offsetPos = calculateMatrixDist(data.scaleMatrix, [clientX - data.containerX, clientY - data.containerY]);\n        _this.target.style.cssText += \"position: \".concat(rootContainer ? \"absolute\" : \"fixed\", \";\") + \"left:0px;top:0px;\" + \"transform: translate(\".concat(offsetPos[0], \"px, \").concat(offsetPos[1], \"px)\");\n      }\n\n      if (isPreventSelect && selectByClick && !clickBySelectEnd) {\n        inputEvent.preventDefault(); // prevent drag from inside when selectByClick is true and force call `selectEnd`\n\n        if (preventDragFromInside) {\n          _this._selectEnd(data.startSelectedTargets, data.startPassedTargets, hitRect, e);\n\n          data.preventDragFromInside = true;\n        }\n      } else {\n        data.selectFlag = true;\n\n        if (type === \"touchstart\") {\n          inputEvent.preventDefault();\n        }\n\n        var _c = _this.options,\n            scrollOptions = _c.scrollOptions,\n            innerScrollOptions = _c.innerScrollOptions;\n        var isInnerScroll = false;\n\n        if (innerScrollOptions) {\n          var inputEvent_1 = e.inputEvent;\n          var target = inputEvent_1.target;\n          var innerScrollElement = null;\n          var parentElement = target;\n\n          while (parentElement && parentElement !== document.body) {\n            var overflow = getComputedStyle(parentElement).overflow !== \"visible\";\n\n            if (overflow) {\n              innerScrollElement = parentElement;\n              break;\n            }\n\n            parentElement = parentElement.parentElement;\n          }\n\n          if (innerScrollElement) {\n            data.innerScrollOptions = __assign({\n              container: innerScrollElement,\n              checkScrollEvent: true\n            }, innerScrollOptions === true ? {} : innerScrollOptions);\n\n            _this.dragScroll.dragStart(e, data.innerScrollOptions);\n\n            isInnerScroll = true;\n          }\n        }\n\n        if (!isInnerScroll && scrollOptions && scrollOptions.container) {\n          _this.dragScroll.dragStart(e, scrollOptions);\n        }\n\n        if (clickBySelectEnd) {\n          data.selectFlag = false;\n          e.preventDrag();\n        }\n      }\n\n      return true;\n    };\n\n    _this._onDrag = function (e) {\n      if (e.data.selectFlag) {\n        var scrollOptions = _this.scrollOptions;\n        var innerScrollOptions = e.data.innerScrollOptions;\n        var hasScrollOptions = innerScrollOptions || (scrollOptions === null || scrollOptions === void 0 ? void 0 : scrollOptions.container); // If it is a scrolling position, pass drag\n\n        if (hasScrollOptions && !e.isScroll && _this.dragScroll.drag(e, innerScrollOptions || scrollOptions)) {\n          return;\n        }\n      }\n\n      _this._checkSelected(e);\n    };\n\n    _this._onDragEnd = function (e) {\n      var data = e.data,\n          inputEvent = e.inputEvent;\n      var rect = getRect(e, _this.options.ratio);\n      var selectFlag = data.selectFlag;\n      /**\n       * When the drag ends (triggers on mouseup or touchend after drag), the dragEnd event is called.\n       * @memberof Selecto\n       * @event dragEnd\n       * @param {OnDragEnd} - Parameters for the dragEnd event\n       */\n\n      if (inputEvent) {\n        _this.emit(\"dragEnd\", __assign(__assign({\n          isDouble: !!e.isDouble,\n          isClick: !!e.isClick,\n          isDrag: false,\n          isSelect: selectFlag\n        }, e), {\n          data: data.data,\n          rect: rect\n        }));\n      }\n\n      _this.target.style.cssText += \"display: none;\";\n\n      if (selectFlag) {\n        data.selectFlag = false;\n\n        _this.dragScroll.dragEnd();\n      } else if (_this.selectByClick && _this.clickBySelectEnd) {\n        // only clickBySelectEnd\n        var pointTarget = _this._findElement(elementFromPoint(e.clientX, e.clientY), data.selectableTargets);\n\n        _this._select(pointTarget ? [pointTarget] : [], rect, e);\n      }\n\n      if (!data.preventDragFromInside) {\n        _this._selectEnd(data.startSelectedTargets, data.startPassedTargets, rect, e);\n      }\n    };\n\n    _this._onKeyDown = function (e) {\n      var options = _this.options;\n      var isKeyDown = false;\n\n      if (!_this._keydownContinueSelect) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelect);\n\n        _this._keydownContinueSelect = result;\n        isKeyDown = result;\n      }\n\n      if (!_this._keydownContinueSelectWithoutDeselection) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelectWithoutDeselect);\n\n        _this._keydownContinueSelectWithoutDeselection = result;\n        isKeyDown = isKeyDown || result;\n      }\n\n      if (!isKeyDown) {\n        return;\n      }\n      /**\n       * When you keydown the key you specified in toggleContinueSelect, the keydown event is called.\n       * @memberof Selecto\n       * @event keydown\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   toggleContinueSelect: \"shift\";\n       *   keyContainer: window,\n       * });\n       *\n       * selecto.on(\"keydown\", () => {\n       *   document.querySelector(\".button\").classList.add(\"selected\");\n       * }).on(\"keyup\", () => {\n       *   document.querySelector(\".button\").classList.remove(\"selected\");\n       * }).on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n\n\n      _this.emit(\"keydown\", {\n        keydownContinueSelect: _this._keydownContinueSelect,\n        keydownContinueSelectWithoutDeselection: _this._keydownContinueSelectWithoutDeselection\n      });\n    };\n\n    _this._onKeyUp = function (e) {\n      var options = _this.options;\n      var isKeyUp = false;\n\n      if (_this._keydownContinueSelect) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelect, true);\n\n        _this._keydownContinueSelect = !result;\n        isKeyUp = result;\n      }\n\n      if (_this._keydownContinueSelectWithoutDeselection) {\n        var result = _this._sameCombiKey(e, options.toggleContinueSelectWithoutDeselect, true);\n\n        _this._keydownContinueSelectWithoutDeselection = !result;\n        isKeyUp = isKeyUp || result;\n      }\n\n      if (!isKeyUp) {\n        return;\n      }\n      /**\n       * When you keyup the key you specified in toggleContinueSelect, the keyup event is called.\n       * @memberof Selecto\n       * @event keyup\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   toggleContinueSelect: \"shift\";\n       *   keyContainer: window,\n       * });\n       *\n       * selecto.on(\"keydown\", () => {\n       *   document.querySelector(\".button\").classList.add(\"selected\");\n       * }).on(\"keyup\", () => {\n       *   document.querySelector(\".button\").classList.remove(\"selected\");\n       * }).on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n\n\n      _this.emit(\"keyup\", {\n        keydownContinueSelect: _this._keydownContinueSelect,\n        keydownContinueSelectWithoutDeselection: _this._keydownContinueSelectWithoutDeselection\n      });\n    };\n\n    _this._onBlur = function () {\n      if (_this._keydownContinueSelect || _this._keydownContinueSelectWithoutDeselection) {\n        _this._keydownContinueSelect = false;\n        _this._keydownContinueSelectWithoutDeselection = false;\n\n        _this.emit(\"keyup\", {\n          keydownContinueSelect: _this._keydownContinueSelect,\n          keydownContinueSelectWithoutDeselection: _this._keydownContinueSelectWithoutDeselection\n        });\n      }\n    };\n\n    _this._onDocumentSelectStart = function (e) {\n      if (!_this.gesto.isFlag()) {\n        return;\n      }\n\n      var dragContainer = _this.dragContainer;\n\n      if (dragContainer === window) {\n        dragContainer = document.documentElement;\n      }\n\n      var containers = dragContainer instanceof Element ? [dragContainer] : [].slice.call(dragContainer);\n      var target = e.target;\n      containers.some(function (container) {\n        if (container === target || container.contains(target)) {\n          e.preventDefault();\n          return true;\n        }\n      });\n    };\n\n    _this.target = options.portalContainer;\n    var container = options.container;\n    _this.options = __assign({\n      portalContainer: null,\n      container: null,\n      dragContainer: null,\n      selectableTargets: [],\n      selectByClick: true,\n      selectFromInside: true,\n      clickBySelectEnd: false,\n      hitRate: 100,\n      continueSelect: false,\n      continueSelectWithoutDeselect: false,\n      toggleContinueSelect: null,\n      toggleContinueSelectWithoutDeselect: null,\n      keyContainer: null,\n      scrollOptions: undefined,\n      checkInput: false,\n      preventDefault: false,\n      boundContainer: false,\n      preventDragFromInside: true,\n      dragCondition: null,\n      rootContainer: null,\n      checkOverflow: false,\n      innerScrollOptions: false,\n      getElementRect: getDefaultElementRect,\n      cspNonce: \"\",\n      ratio: 0\n    }, options);\n    var portalContainer = _this.options.portalContainer;\n\n    if (portalContainer) {\n      container = portalContainer.parentElement;\n    }\n\n    _this.container = container || document.body;\n\n    _this.initElement();\n\n    _this.initDragScroll();\n\n    _this.setKeyController();\n\n    return _this;\n  }\n  /**\n   * You can set the currently selected targets.\n   * selectByClick, continueSelect, and continueSelectWithoutDeselect are not applied.\n   */\n\n\n  var __proto = Selecto.prototype;\n\n  __proto.setSelectedTargets = function (selectedTargets) {\n    var beforeSelected = this.selectedTargets;\n\n    var _a = diff(beforeSelected, selectedTargets),\n        added = _a.added,\n        removed = _a.removed,\n        prevList = _a.prevList,\n        list = _a.list;\n\n    this.selectedTargets = selectedTargets;\n    return {\n      added: added.map(function (index) {\n        return list[index];\n      }),\n      removed: removed.map(function (index) {\n        return prevList[index];\n      }),\n      beforeSelected: beforeSelected,\n      selected: selectedTargets\n    };\n  };\n  /**\n   * You can set the currently selected targets by points\n   * selectByClick, continueSelect, and continueSelectWithoutDeselect are not applied.\n   */\n\n\n  __proto.setSelectedTargetsByPoints = function (point1, point2) {\n    var left = Math.min(point1[0], point2[0]);\n    var top = Math.min(point1[1], point2[1]);\n    var right = Math.max(point1[0], point2[0]);\n    var bottom = Math.max(point1[1], point2[1]);\n    var rect = {\n      left: left,\n      top: top,\n      right: right,\n      bottom: bottom,\n      width: right - left,\n      height: bottom - top\n    };\n    var data = {\n      ignoreClick: true\n    };\n    this.findSelectableTargets(data);\n    var selectedElements = this.hitTest(rect, data);\n    var result = this.setSelectedTargets(selectedElements);\n    return __assign(__assign({}, result), {\n      rect: rect\n    });\n  };\n  /**\n   * Select target by virtual drag from startPoint to endPoint.\n   * The target of inputEvent is null.\n   */\n\n\n  __proto.selectTargetsByPoints = function (startPoint, endPoint) {\n    var mousedown = new MouseEvent(\"mousedown\", {\n      clientX: startPoint[0],\n      clientY: startPoint[1],\n      cancelable: true,\n      bubbles: true\n    });\n    var mousemove = new MouseEvent(\"mousemove\", {\n      clientX: endPoint[0],\n      clientY: endPoint[1],\n      cancelable: true,\n      bubbles: true\n    });\n    var mouseup = new MouseEvent(\"mousemove\", {\n      clientX: endPoint[0],\n      clientY: endPoint[1],\n      cancelable: true,\n      bubbles: true\n    });\n    var gesto = this.gesto;\n    var result = gesto.onDragStart(mousedown);\n\n    if (result !== false) {\n      gesto.onDrag(mousemove);\n      gesto.onDragEnd(mouseup);\n    }\n  };\n  /**\n   * You can get the currently selected targets.\n   */\n\n\n  __proto.getSelectedTargets = function () {\n    return this.selectedTargets;\n  };\n  /**\n   * `OnDragStart` is triggered by an external event.\n   * @param - external event\n   * @example\n   * import Selecto from \"selecto\";\n   *\n   * const selecto = new Selecto();\n   *\n   * window.addEventListener(\"mousedown\", e => {\n   *   selecto.triggerDragStart(e);\n   * });\n   */\n\n\n  __proto.triggerDragStart = function (e) {\n    this.gesto.triggerDragStart(e);\n    return this;\n  };\n  /**\n   * Destroy elements, properties, and events.\n   */\n\n\n  __proto.destroy = function () {\n    this.off();\n    this.keycon && this.keycon.destroy();\n    this.gesto.unset();\n    this.injectResult.destroy();\n    this.dragScroll.dragEnd();\n    removeEvent(document, \"selectstart\", this._onDocumentSelectStart);\n    this.keycon = null;\n    this.gesto = null;\n    this.injectResult = null;\n    this.target = null;\n    this.container = null;\n    this.options = null;\n  };\n\n  __proto.getElementPoints = function (target) {\n    var getElementRect = this.getElementRect || getDefaultElementRect;\n    var info = getElementRect(target);\n    var points = [info.pos1, info.pos2, info.pos4, info.pos3];\n\n    if (getElementRect !== getDefaultElementRect) {\n      var rect = target.getBoundingClientRect();\n      return fitPoints(points, rect);\n    }\n\n    return points;\n  };\n  /**\n   * Get all elements set in `selectableTargets`.\n   */\n\n\n  __proto.getSelectableElements = function () {\n    var selectableElements = [];\n    this.options.selectableTargets.forEach(function (target) {\n      if (isFunction(target)) {\n        var result = target();\n\n        if (result) {\n          selectableElements.push.apply(selectableElements, [].slice.call(result));\n        }\n      } else if (target instanceof Node) {\n        selectableElements.push(target);\n      } else if (isObject(target)) {\n        selectableElements.push(target.value || target.current);\n      } else {\n        var elements = [].slice.call(document.querySelectorAll(target));\n        selectableElements.push.apply(selectableElements, elements);\n      }\n    });\n    return selectableElements;\n  };\n  /**\n   * If scroll occurs during dragging, you can manually call this method to check the position again.\n   */\n\n\n  __proto.checkScroll = function () {\n    if (!this.gesto.isFlag()) {\n      return;\n    }\n\n    var scrollOptions = this.scrollOptions;\n    var innerScrollOptions = this.gesto.getEventData().innerScrollOptions;\n    var hasScrollOptions = innerScrollOptions || (scrollOptions === null || scrollOptions === void 0 ? void 0 : scrollOptions.container); // If it is a scrolling position, pass drag\n\n    if (hasScrollOptions) {\n      this.dragScroll.checkScroll(__assign({\n        inputEvent: this.gesto.getCurrentEvent()\n      }, innerScrollOptions || scrollOptions));\n    }\n  };\n  /**\n   * Find for selectableTargets again during drag event\n   * You can update selectable targets during an event.\n   */\n\n\n  __proto.findSelectableTargets = function (data) {\n    var _this = this;\n\n    if (data === void 0) {\n      data = this.gesto.getEventData();\n    }\n\n    var selectableTargets = this.getSelectableElements();\n    var selectablePoints = selectableTargets.map(function (target) {\n      return _this.getElementPoints(target);\n    });\n    data.selectableTargets = selectableTargets;\n    data.selectablePoints = selectablePoints;\n    data.selectableParentMap = null;\n    var options = this.options;\n    var hasIndexesMap = options.checkOverflow || options.innerScrollOptions;\n\n    if (hasIndexesMap) {\n      var parentMap_1 = new Map();\n      data.selectableInnerScrollParentMap = parentMap_1;\n      data.selectableInnerScrollPathsList = selectableTargets.map(function (target, index) {\n        var parentElement = target.parentElement;\n        var parents = [];\n        var paths = [];\n\n        var _loop_1 = function () {\n          var info = parentMap_1.get(parentElement);\n\n          if (!info) {\n            var overflow = getComputedStyle(parentElement).overflow !== \"visible\";\n\n            if (overflow) {\n              var rect = getDefaultElementRect(parentElement);\n              info = {\n                parentElement: parentElement,\n                indexes: [],\n                points: [rect.pos1, rect.pos2, rect.pos4, rect.pos3],\n                paths: __spreadArray([], paths, true)\n              };\n              parents.push(parentElement);\n              parents.forEach(function (prevParentElement) {\n                parentMap_1.set(prevParentElement, info);\n              });\n              parents = [];\n            }\n          }\n\n          if (info) {\n            parentElement = info.parentElement;\n            parentMap_1.get(parentElement).indexes.push(index);\n            paths.push(parentElement);\n          } else {\n            parents.push(parentElement);\n          }\n\n          parentElement = parentElement.parentElement;\n        };\n\n        while (parentElement && parentElement !== document.body) {\n          _loop_1();\n        }\n\n        return paths;\n      });\n    }\n\n    if (!options.checkOverflow) {\n      data.selectableInners = selectableTargets.map(function () {\n        return true;\n      });\n    }\n\n    this._refreshGroups(data);\n\n    return selectableTargets;\n  };\n  /**\n   * External click or mouse events can be applied to the selecto.\n   * @params - Extenal click or mouse event\n   * @params - Specify the clicked target directly.\n   */\n\n\n  __proto.clickTarget = function (e, clickedTarget) {\n    var _a = getClient(e),\n        clientX = _a.clientX,\n        clientY = _a.clientY;\n\n    var dragEvent = {\n      data: {\n        selectFlag: false\n      },\n      clientX: clientX,\n      clientY: clientY,\n      inputEvent: e,\n      isClick: true,\n      isTrusted: false,\n      stop: function () {\n        return false;\n      }\n    };\n\n    if (this._onDragStart(dragEvent, clickedTarget)) {\n      this._onDragEnd(dragEvent);\n    }\n\n    return this;\n  };\n\n  __proto.setKeyController = function () {\n    var _a = this.options,\n        keyContainer = _a.keyContainer,\n        toggleContinueSelect = _a.toggleContinueSelect,\n        toggleContinueSelectWithoutDeselect = _a.toggleContinueSelectWithoutDeselect;\n\n    if (this.keycon) {\n      this.keycon.destroy();\n      this.keycon = null;\n    }\n\n    if (toggleContinueSelect || toggleContinueSelectWithoutDeselect) {\n      this.keycon = new KeyController(keyContainer || window);\n      this.keycon.keydown(this._onKeyDown).keyup(this._onKeyUp).on(\"blur\", this._onBlur);\n    }\n  };\n\n  __proto.setKeyEvent = function () {\n    var _a = this.options,\n        toggleContinueSelect = _a.toggleContinueSelect,\n        toggleContinueSelectWithoutDeselect = _a.toggleContinueSelectWithoutDeselect;\n\n    if (!toggleContinueSelect && !toggleContinueSelectWithoutDeselect || this.keycon) {\n      return;\n    }\n\n    this.setKeyController();\n  }; // with getter, setter property\n\n\n  __proto.setKeyContainer = function (keyContainer) {\n    var _this = this;\n\n    var options = this.options;\n    diffValue(options.keyContainer, keyContainer, function () {\n      options.keyContainer = keyContainer;\n\n      _this.setKeyController();\n    });\n  };\n\n  __proto.getContinueSelect = function () {\n    var _a = this.options,\n        continueSelect = _a.continueSelect,\n        toggleContinueSelect = _a.toggleContinueSelect;\n\n    if (!toggleContinueSelect || !this._keydownContinueSelect) {\n      return continueSelect;\n    }\n\n    return !continueSelect;\n  };\n\n  __proto.getContinueSelectWithoutDeselect = function () {\n    var _a = this.options,\n        continueSelectWithoutDeselect = _a.continueSelectWithoutDeselect,\n        toggleContinueSelectWithoutDeselect = _a.toggleContinueSelectWithoutDeselect;\n\n    if (!toggleContinueSelectWithoutDeselect || !this._keydownContinueSelectWithoutDeselection) {\n      return continueSelectWithoutDeselect;\n    }\n\n    return !continueSelectWithoutDeselect;\n  };\n\n  __proto.setToggleContinueSelect = function (toggleContinueSelect) {\n    var _this = this;\n\n    var options = this.options;\n    diffValue(options.toggleContinueSelect, toggleContinueSelect, function () {\n      options.toggleContinueSelect = toggleContinueSelect;\n\n      _this.setKeyEvent();\n    });\n  };\n\n  __proto.setToggleContinueSelectWithoutDeselect = function (toggleContinueSelectWithoutDeselect) {\n    var _this = this;\n\n    var options = this.options;\n    diffValue(options.toggleContinueSelectWithoutDeselect, toggleContinueSelectWithoutDeselect, function () {\n      options.toggleContinueSelectWithoutDeselect = toggleContinueSelectWithoutDeselect;\n\n      _this.setKeyEvent();\n    });\n  };\n\n  __proto.setPreventDefault = function (value) {\n    this.gesto.options.preventDefault = value;\n  };\n\n  __proto.setCheckInput = function (value) {\n    this.gesto.options.checkInput = value;\n  };\n\n  __proto.initElement = function () {\n    this.target = createElement(h(\"div\", {\n      className: CLASS_NAME\n    }), this.target, this.container);\n    var target = this.target;\n    var _a = this.options,\n        dragContainer = _a.dragContainer,\n        checkInput = _a.checkInput,\n        preventDefault = _a.preventDefault,\n        preventClickEventOnDragStart = _a.preventClickEventOnDragStart,\n        preventClickEventOnDrag = _a.preventClickEventOnDrag,\n        preventClickEventByCondition = _a.preventClickEventByCondition,\n        _b = _a.preventRightClick,\n        preventRightClick = _b === void 0 ? true : _b;\n    this.dragContainer = typeof dragContainer === \"string\" ? [].slice.call(document.querySelectorAll(dragContainer)) : dragContainer || this.target.parentNode;\n    this.gesto = new Gesto(this.dragContainer, {\n      checkWindowBlur: true,\n      container: window,\n      checkInput: checkInput,\n      preventDefault: preventDefault,\n      preventClickEventOnDragStart: preventClickEventOnDragStart,\n      preventClickEventOnDrag: preventClickEventOnDrag,\n      preventClickEventByCondition: preventClickEventByCondition,\n      preventRightClick: preventRightClick\n    }).on({\n      dragStart: this._onDragStart,\n      drag: this._onDrag,\n      dragEnd: this._onDragEnd\n    });\n    addEvent(document, \"selectstart\", this._onDocumentSelectStart);\n    this.injectResult = injector.inject(target, {\n      nonce: this.options.cspNonce\n    });\n  };\n\n  __proto.hitTest = function (selectRect, data, gestoEvent) {\n    var _a = this.options,\n        hitRate = _a.hitRate,\n        selectByClick = _a.selectByClick;\n    var left = selectRect.left,\n        top = selectRect.top,\n        right = selectRect.right,\n        bottom = selectRect.bottom;\n    var innerGroups = data.innerGroups;\n    var innerWidth = data.innerWidth;\n    var innerHeight = data.innerHeight;\n    var clientX = gestoEvent === null || gestoEvent === void 0 ? void 0 : gestoEvent.clientX;\n    var clientY = gestoEvent === null || gestoEvent === void 0 ? void 0 : gestoEvent.clientY;\n    var ignoreClick = data.ignoreClick;\n    var rectPoints = [[left, top], [right, top], [right, bottom], [left, bottom]];\n    var hitRateValue = splitUnit(\"\".concat(hitRate));\n\n    var isHit = function (points, el) {\n      var inArea = ignoreClick ? false : isInside([clientX, clientY], points);\n\n      if (selectByClick && inArea) {\n        return true;\n      }\n\n      var overlapPoints = getOverlapPoints(rectPoints, points);\n\n      if (!overlapPoints.length) {\n        return false;\n      }\n\n      var overlapSize = getAreaSize(overlapPoints); // Line\n\n      var targetSize = 0;\n\n      if (overlapSize === 0 && getAreaSize(points) === 0) {\n        targetSize = getLineSize(points);\n        overlapSize = getLineSize(overlapPoints);\n      } else {\n        targetSize = getAreaSize(points);\n      }\n\n      if (hitRateValue.unit === \"px\") {\n        return overlapSize >= hitRateValue.value;\n      } else {\n        var rate = between(Math.round(overlapSize / targetSize * 100), 0, 100);\n        return rate >= Math.min(100, hitRateValue.value);\n      }\n    };\n\n    var selectableTargets = data.selectableTargets;\n    var selectablePoints = data.selectablePoints;\n    var selectableInners = data.selectableInners;\n\n    if (!innerGroups) {\n      return selectableTargets.filter(function (_, i) {\n        if (!selectableInners[i]) {\n          return false;\n        }\n\n        return isHit(selectablePoints[i], selectableTargets[i]);\n      });\n    }\n\n    var selectedTargets = [];\n    var minX = Math.floor(left / innerWidth);\n    var maxX = Math.floor(right / innerWidth);\n    var minY = Math.floor(top / innerHeight);\n    var maxY = Math.floor(bottom / innerHeight);\n\n    for (var x = minX; x <= maxX; ++x) {\n      var yGroups = innerGroups[x];\n\n      if (!yGroups) {\n        continue;\n      }\n\n      for (var y = minY; y <= maxY; ++y) {\n        var group = yGroups[y];\n\n        if (!group) {\n          continue;\n        }\n\n        group.forEach(function (index) {\n          var points = selectablePoints[index];\n          var inner = selectableInners[index];\n          var target = selectableTargets[index];\n\n          if (inner && isHit(points)) {\n            selectedTargets.push(target);\n          }\n        });\n      }\n    }\n\n    return filterDuplicated(selectedTargets);\n  };\n\n  __proto.initDragScroll = function () {\n    var _this = this;\n\n    this.dragScroll.on(\"scrollDrag\", function (_a) {\n      var next = _a.next;\n      next(_this.gesto.getCurrentEvent());\n    }).on(\"scroll\", function (_a) {\n      var container = _a.container,\n          direction = _a.direction;\n\n      var innerScrollOptions = _this.gesto.getEventData().innerScrollOptions;\n\n      if (innerScrollOptions) {\n        _this.emit(\"innerScroll\", {\n          container: container,\n          direction: direction\n        });\n      } else {\n        _this.emit(\"scroll\", {\n          container: container,\n          direction: direction\n        });\n      }\n    }).on(\"move\", function (_a) {\n      var offsetX = _a.offsetX,\n          offsetY = _a.offsetY,\n          inputEvent = _a.inputEvent;\n      var gesto = _this.gesto;\n\n      if (!gesto || !gesto.isFlag()) {\n        return;\n      }\n\n      var data = _this.gesto.getEventData();\n\n      var boundArea = data.boundArea;\n      data.startX -= offsetX;\n      data.startY -= offsetY;\n\n      var innerScrollOptions = _this.gesto.getEventData().innerScrollOptions;\n\n      var container = innerScrollOptions === null || innerScrollOptions === void 0 ? void 0 : innerScrollOptions.container;\n      var isMoveInnerScroll = false;\n\n      if (container) {\n        var parentMap_2 = data.selectableInnerScrollParentMap;\n        var parentInfo = parentMap_2.get(container);\n\n        if (parentInfo) {\n          parentInfo.paths.forEach(function (scrollContainer) {\n            var containerInfo = parentMap_2.get(scrollContainer);\n            containerInfo.points.forEach(function (pos) {\n              pos[0] -= offsetX;\n              pos[1] -= offsetY;\n            });\n          });\n          parentInfo.indexes.forEach(function (index) {\n            data.selectablePoints[index].forEach(function (pos) {\n              pos[0] -= offsetX;\n              pos[1] -= offsetY;\n            });\n          });\n          isMoveInnerScroll = true;\n        }\n      }\n\n      if (!isMoveInnerScroll) {\n        data.selectablePoints.forEach(function (points) {\n          points.forEach(function (pos) {\n            pos[0] -= offsetX;\n            pos[1] -= offsetY;\n          });\n        });\n      }\n\n      _this._refreshGroups(data);\n\n      boundArea.left -= offsetX;\n      boundArea.right -= offsetX;\n      boundArea.top -= offsetY;\n      boundArea.bottom -= offsetY;\n\n      _this.gesto.scrollBy(offsetX, offsetY, inputEvent.inputEvent);\n\n      _this._checkSelected(_this.gesto.getCurrentEvent());\n    });\n  };\n\n  __proto._select = function (selectedTargets, rect, e, isStart) {\n    var inputEvent = e.inputEvent;\n    var data = e.data;\n    var result = this.setSelectedTargets(selectedTargets);\n\n    if (isStart) {\n      /**\n       * When the select(drag) starts, the selectStart event is called.\n       * @memberof Selecto\n       * @event selectStart\n       * @param {Selecto.OnSelect} - Parameters for the selectStart event\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   selectByClick: true,\n       *   selectFromInside: false,\n       * });\n       *\n       * selecto.on(\"selectStart\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * }).on(\"selectEnd\", e => {\n       *   e.afterAdded.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.afterRemoved.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n      this.emit(\"selectStart\", __assign(__assign({}, result), {\n        rect: rect,\n        inputEvent: inputEvent,\n        data: data.data,\n        isTrusted: e.isTrusted\n      }));\n    }\n\n    if (result.added.length || result.removed.length) {\n      /**\n       * When the select in real time, the select event is called.\n       * @memberof Selecto\n       * @event select\n       * @param {Selecto.OnSelect} - Parameters for the select event\n       * @example\n       * import Selecto from \"selecto\";\n       *\n       * const selecto = new Selecto({\n       *   container: document.body,\n       *   selectByClick: true,\n       *   selectFromInside: false,\n       * });\n       *\n       * selecto.on(\"select\", e => {\n       *   e.added.forEach(el => {\n       *     el.classList.add(\"selected\");\n       *   });\n       *   e.removed.forEach(el => {\n       *     el.classList.remove(\"selected\");\n       *   });\n       * });\n       */\n      this.emit(\"select\", __assign(__assign({}, result), {\n        rect: rect,\n        inputEvent: inputEvent,\n        data: data.data,\n        isTrusted: e.isTrusted\n      }));\n    }\n  };\n\n  __proto._selectEnd = function (startSelectedTargets, startPassedTargets, rect, e) {\n    var inputEvent = e.inputEvent,\n        isDouble = e.isDouble,\n        data = e.data;\n\n    var _a = diff(startSelectedTargets, this.selectedTargets),\n        added = _a.added,\n        removed = _a.removed,\n        prevList = _a.prevList,\n        list = _a.list;\n\n    var _b = diff(startPassedTargets, this.selectedTargets),\n        afterAdded = _b.added,\n        afterRemoved = _b.removed,\n        afterPrevList = _b.prevList,\n        afterList = _b.list;\n\n    var type = inputEvent && inputEvent.type;\n    var isDragStart = type === \"mousedown\" || type === \"touchstart\";\n    /**\n     * When the select(dragEnd or click) ends, the selectEnd event is called.\n     * @memberof Selecto\n     * @event selectEnd\n     * @param {Selecto.OnSelectEnd} - Parameters for the selectEnd event\n     * @example\n     * import Selecto from \"selecto\";\n     *\n     * const selecto = new Selecto({\n     *   container: document.body,\n     *   selectByClick: true,\n     *   selectFromInside: false,\n     * });\n     *\n     * selecto.on(\"selectStart\", e => {\n     *   e.added.forEach(el => {\n     *     el.classList.add(\"selected\");\n     *   });\n     *   e.removed.forEach(el => {\n     *     el.classList.remove(\"selected\");\n     *   });\n     * }).on(\"selectEnd\", e => {\n     *   e.afterAdded.forEach(el => {\n     *     el.classList.add(\"selected\");\n     *   });\n     *   e.afterRemoved.forEach(el => {\n     *     el.classList.remove(\"selected\");\n     *   });\n     * });\n     */\n\n    this.emit(\"selectEnd\", {\n      startSelected: startSelectedTargets,\n      beforeSelected: startPassedTargets,\n      selected: this.selectedTargets,\n      added: added.map(function (index) {\n        return list[index];\n      }),\n      removed: removed.map(function (index) {\n        return prevList[index];\n      }),\n      afterAdded: afterAdded.map(function (index) {\n        return afterList[index];\n      }),\n      afterRemoved: afterRemoved.map(function (index) {\n        return afterPrevList[index];\n      }),\n      isDragStart: isDragStart,\n      isClick: !!e.isClick,\n      isDouble: !!isDouble,\n      rect: rect,\n      inputEvent: inputEvent,\n      data: data.data,\n      isTrusted: e.isTrusted\n    });\n  };\n\n  __proto._checkSelected = function (e, rect) {\n    if (rect === void 0) {\n      rect = getRect(e, this.options.ratio);\n    }\n\n    var data = e.data;\n    var top = rect.top,\n        left = rect.left,\n        width = rect.width,\n        height = rect.height;\n    var selectFlag = data.selectFlag;\n    var containerX = data.containerX,\n        containerY = data.containerY,\n        scaleMatrix = data.scaleMatrix;\n    var offsetPos = calculateMatrixDist(scaleMatrix, [left - containerX, top - containerY]);\n    var offsetSize = calculateMatrixDist(scaleMatrix, [width, height]);\n    var selectedTargets = [];\n\n    if (selectFlag) {\n      this.target.style.cssText += \"display: block;\" + \"left:0px;top:0px;\" + \"transform: translate(\".concat(offsetPos[0], \"px, \").concat(offsetPos[1], \"px);\") + \"width:\".concat(offsetSize[0], \"px;height:\").concat(offsetSize[1], \"px;\");\n      var passedTargets = this.hitTest(rect, data, e);\n      selectedTargets = passTargets(data.startPassedTargets, passedTargets, this.continueSelect && this.continueSelectWithoutDeselect);\n    }\n    /**\n     * When the drag, the drag event is called.\n     * Call the stop () function if you have a specific element or don't want to raise a select\n     * @memberof Selecto\n     * @event drag\n     * @param {OnDrag} - Parameters for the drag event\n     * @example\n     * import Selecto from \"selecto\";\n     *\n     * const selecto = new Selecto({\n     *   container: document.body,\n     *   selectByClick: true,\n     *   selectFromInside: false,\n     * });\n     *\n     * selecto.on(\"drag\", e => {\n     *   e.stop();\n     * }).on(\"select\", e => {\n     *   e.added.forEach(el => {\n     *     el.classList.add(\"selected\");\n     *   });\n     *   e.removed.forEach(el => {\n     *     el.classList.remove(\"selected\");\n     *   });\n     * });\n     */\n\n\n    var result = this.emit(\"drag\", __assign(__assign({}, e), {\n      data: data.data,\n      isSelect: selectFlag,\n      rect: rect\n    }));\n\n    if (result === false) {\n      this.target.style.cssText += \"display: none;\";\n      e.stop();\n      return;\n    }\n\n    if (selectFlag) {\n      this._select(selectedTargets, rect, e);\n    }\n  };\n\n  __proto._sameCombiKey = function (e, keys, isKeyup) {\n    if (!keys) {\n      return false;\n    }\n\n    var combi = getCombi(e.inputEvent, e.key);\n    var nextKeys = [].concat(keys);\n    var toggleKeys = isArray(nextKeys[0]) ? nextKeys : [nextKeys];\n\n    if (isKeyup) {\n      var singleKey_1 = e.key;\n      return toggleKeys.some(function (keys) {\n        return keys.some(function (key) {\n          return key === singleKey_1;\n        });\n      });\n    }\n\n    return toggleKeys.some(function (keys) {\n      return keys.every(function (key) {\n        return combi.indexOf(key) > -1;\n      });\n    });\n  };\n\n  __proto._findElement = function (clickedTarget, selectableTargets) {\n    var pointTarget = clickedTarget;\n\n    while (pointTarget) {\n      if (selectableTargets.indexOf(pointTarget) > -1) {\n        break;\n      }\n\n      pointTarget = pointTarget.parentElement;\n    }\n\n    return pointTarget;\n  };\n\n  __proto._refreshGroups = function (data) {\n    var _a;\n\n    var innerWidth = data.innerWidth;\n    var innerHeight = data.innerHeight;\n    var selectablePoints = data.selectablePoints;\n\n    if (this.options.checkOverflow) {\n      var innerScrollContainer_1 = (_a = this.gesto.getEventData().innerScrollOptions) === null || _a === void 0 ? void 0 : _a.container;\n      var parentMap_3 = data.selectableInnerScrollParentMap;\n      var innerScrollPathsList = data.selectableInnerScrollPathsList;\n      data.selectableInners = innerScrollPathsList.map(function (innerScrollPaths, i) {\n        var isAlwaysTrue = false;\n        return innerScrollPaths.every(function (target) {\n          if (isAlwaysTrue) {\n            return true;\n          }\n\n          if (target === innerScrollContainer_1) {\n            isAlwaysTrue = true;\n            return true;\n          }\n\n          var rect = parentMap_3.get(target);\n\n          if (rect) {\n            var points1 = selectablePoints[i];\n            var points2 = rect.points;\n            var overlapPoints = getOverlapPoints(points1, points2);\n\n            if (!overlapPoints.length) {\n              return false;\n            }\n          }\n\n          return true;\n        });\n      });\n    }\n\n    if (!innerWidth || !innerHeight) {\n      data.innerGroups = null;\n    } else {\n      var selectablePoints_1 = data.selectablePoints;\n      var groups_1 = {};\n      selectablePoints_1.forEach(function (points, i) {\n        var minX = Infinity;\n        var maxX = -Infinity;\n        var minY = Infinity;\n        var maxY = -Infinity;\n        points.forEach(function (pos) {\n          var x = Math.floor(pos[0] / innerWidth);\n          var y = Math.floor(pos[1] / innerHeight);\n          minX = Math.min(x, minX);\n          maxX = Math.max(x, maxX);\n          minY = Math.min(y, minY);\n          maxY = Math.max(y, maxY);\n        });\n\n        for (var x = minX; x <= maxX; ++x) {\n          for (var y = minY; y <= maxY; ++y) {\n            groups_1[x] = groups_1[x] || {};\n            groups_1[x][y] = groups_1[x][y] || [];\n            groups_1[x][y].push(i);\n          }\n        }\n      });\n      data.innerGroups = groups_1;\n    }\n  };\n\n  Selecto = __decorate([Properties(PROPERTIES, function (prototype, property) {\n    var attributes = {\n      enumerable: true,\n      configurable: true,\n      get: function () {\n        return this.options[property];\n      }\n    };\n    var getter = camelize(\"get \".concat(property));\n\n    if (prototype[getter]) {\n      attributes.get = function get() {\n        return this[getter]();\n      };\n    } else {\n      attributes.get = function get() {\n        return this.options[property];\n      };\n    }\n\n    var setter = camelize(\"set \".concat(property));\n\n    if (prototype[setter]) {\n      attributes.set = function set(value) {\n        this[setter](value);\n      };\n    } else {\n      attributes.set = function set(value) {\n        this.options[property] = value;\n      };\n    }\n\n    Object.defineProperty(prototype, property, attributes);\n  })], Selecto);\n  return Selecto;\n}(EventEmitter);\n\nvar Selecto$1 =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Selecto, _super);\n\n  function Selecto() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return Selecto;\n}(Selecto);\n\nexport default Selecto$1;\nexport { CLASS_NAME, EVENTS, METHODS, OPTIONS, OPTION_TYPES, PROPERTIES };\n//# sourceMappingURL=selecto.esm.js.map\n","/*\nCopyright (c) 2020 Daybrush\nname: react-selecto\nlicense: MIT\nauthor: Daybrush\nrepository: https://github.com/daybrush/selecto/blob/master/packages/react-selecto\nversion: 1.22.0\n*/\nimport { createElement, PureComponent } from 'react';\nimport VanillaSelecto, { EVENTS, CLASS_NAME, OPTIONS, PROPERTIES, METHODS } from 'selecto';\nexport * from 'selecto';\nimport { ref, withMethods } from 'framework-utils';\nimport { camelize } from '@daybrush/utils';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\nfunction __decorate(decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nvar REACT_EVENTS = EVENTS.map(function (name) {\n  return camelize(\"on \".concat(name));\n});\n\nvar Selecto =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Selecto, _super);\n\n  function Selecto() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  var __proto = Selecto.prototype;\n\n  __proto.render = function () {\n    return createElement(\"div\", {\n      className: CLASS_NAME,\n      ref: ref(this, \"selectionElement\")\n    });\n  };\n\n  __proto.componentDidMount = function () {\n    var _this = this;\n\n    var props = this.props;\n    var options = {};\n    OPTIONS.forEach(function (name) {\n      if (name in props) {\n        options[name] = props[name];\n      }\n    });\n    this.selecto = new VanillaSelecto(__assign(__assign({}, options), {\n      portalContainer: this.selectionElement\n    }));\n    EVENTS.forEach(function (name, i) {\n      _this.selecto.on(name, function (e) {\n        var selfProps = _this.props;\n        var result = selfProps[REACT_EVENTS[i]] && selfProps[REACT_EVENTS[i]](e);\n\n        if (result === false) {\n          e.stop();\n        }\n      });\n    });\n  };\n\n  __proto.componentDidUpdate = function (prevProps) {\n    var props = this.props;\n    var selecto = this.selecto;\n    PROPERTIES.forEach(function (name) {\n      if (prevProps[name] !== props[name]) {\n        selecto[name] = props[name];\n      }\n    });\n  };\n\n  __proto.componentWillUnmount = function () {\n    this.selecto.destroy();\n  };\n\n  __decorate([withMethods(METHODS)], Selecto.prototype, \"selecto\", void 0);\n\n  return Selecto;\n}(PureComponent);\n\nexport default Selecto;\n//# sourceMappingURL=selecto.esm.js.map\n","import { ILLA_MIXPANEL_EVENT_TYPE } from \"@illa-public/mixpanel-utils\"\nimport { getOverlapPoints } from \"overlap-area\"\nimport { FC, useEffect, useRef } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport Selecto, { OnDragStart, SelectoEvents } from \"react-selecto\"\nimport {\n  getIsILLAProductMode,\n  getSelectedComponentDisplayNames,\n} from \"@/redux/config/configSelector\"\nimport { configActions } from \"@/redux/config/configSlice\"\nimport { trackInEditor } from \"@/utils/mixpanelHelper\"\nimport { MultiSelectCanvasProps } from \"./interface\"\n\nconst transSelectableComponentPointsToIllAPosition = (\n  points: number[][],\n  scrollTop: number,\n  containerX: number,\n  containerY: number,\n) => {\n  const left = points[0][0]\n  const top = points[0][1]\n  const right = points[1][0]\n  const bottom = points[2][1]\n  return [\n    [left - containerX, top - containerY + scrollTop],\n    [right - containerX, top - containerY + scrollTop],\n    [right - containerX, bottom - containerY + scrollTop],\n    [left - containerX, bottom - containerY + scrollTop],\n  ]\n}\n\nexport const MultiSelectCanvas: FC<MultiSelectCanvasProps> = (props) => {\n  const { scrollContainerRef, canvasNodeDisplayName } = props\n  const containerClientRect =\n    scrollContainerRef.current?.getBoundingClientRect()\n\n  const selectStartPositionRef = useRef([0, 0])\n  const prevSelectedComponent = useRef<string[]>([])\n  const prevSelectorStatus = useRef(false)\n  const prevContainerScrollTop = useRef<number | undefined>(undefined)\n  const startScrollTop = useRef<number>(0)\n  const selectoRef = useRef<Selecto | null>(null)\n\n  const selectedComponents = useSelector(getSelectedComponentDisplayNames)\n  const isProductionMode = useSelector(getIsILLAProductMode)\n  const dispatch = useDispatch()\n\n  const onScrollHandler = (e: SelectoEvents[\"scroll\"]) => {\n    const { direction } = e\n    scrollContainerRef.current!.scrollBy(0, direction[1] * 10)\n  }\n\n  const dragConditionHandler = (e: OnDragStart<unknown>) => {\n    const triggerTarget = e.inputEvent.target\n    const isRoot = triggerTarget.getAttribute(\"data-isroot\")\n    return isRoot === \"true\"\n  }\n\n  const onDragStartHandler = (e: SelectoEvents[\"dragStart\"]) => {\n    const scrollTop = scrollContainerRef.current?.scrollTop ?? 0\n    const startX = e.clientX - (containerClientRect?.x ?? 0)\n    const startY = e.clientY - (containerClientRect?.y ?? 0) + scrollTop\n    prevContainerScrollTop.current = scrollTop\n    startScrollTop.current = scrollTop\n    let currentCanvasStyle: CSSStyleDeclaration | undefined =\n      scrollContainerRef.current?.style\n    selectStartPositionRef.current = [startX, startY]\n    currentCanvasStyle?.setProperty(\"--illa-select-area-left\", `${startX}px`)\n    currentCanvasStyle?.setProperty(\"--illa-select-area-top\", `${startY}px`)\n    prevSelectedComponent.current = selectedComponents\n  }\n\n  const onDraggingHandler = (e: SelectoEvents[\"drag\"]) => {\n    prevSelectorStatus.current = true\n    const { rect, distX, clientY } = e\n    let currentCanvasStyle: CSSStyleDeclaration | undefined =\n      scrollContainerRef.current?.style\n    const containerY = containerClientRect?.y ?? 0\n    const containerX = containerClientRect?.x ?? 0\n    const scrollTop = scrollContainerRef.current?.scrollTop ?? 0\n    const currentY = clientY - (containerClientRect?.y ?? 0) + scrollTop\n    const startAndDraggingDiff = currentY - selectStartPositionRef.current[1]\n    const dir = scrollTop - startScrollTop.current > 0 ? 1 : -1\n    const diff = scrollTop - startScrollTop.current!\n    const currentHeight =\n      Math.abs(currentY - selectStartPositionRef.current[1]) +\n      (dir === -1 ? -diff : 0)\n\n    let currentXOrigin = selectStartPositionRef.current[0]\n    let currentYOrigin = selectStartPositionRef.current[1]\n    if (distX < 0) {\n      currentXOrigin += distX\n    }\n    if (startAndDraggingDiff < 0) {\n      currentYOrigin = currentY\n    }\n    currentCanvasStyle?.setProperty(\n      \"--illa-select-area-left\",\n      `${currentXOrigin}px`,\n    )\n    currentCanvasStyle?.setProperty(\n      \"--illa-select-area-top\",\n      `${currentYOrigin}px`,\n    )\n    currentCanvasStyle?.setProperty(\n      \"--illa-select-area-width\",\n      `${rect.width}px`,\n    )\n    currentCanvasStyle?.setProperty(\n      \"--illa-select-area-height\",\n      `${currentHeight}px`,\n    )\n    const updatedSelectedComponents: string[] = []\n\n    const targets = e.currentTarget.getSelectableElements()\n    const rectPoints = [\n      // [left,top],[right,top],[right,bottom],[left,bottom]\n      [currentXOrigin, currentYOrigin],\n      [currentXOrigin + rect.width, currentYOrigin],\n      [currentXOrigin + rect.width, currentYOrigin + currentHeight],\n      [currentXOrigin, currentYOrigin + currentHeight],\n    ]\n    targets.forEach((target) => {\n      const targetOriginPoints = e.currentTarget.getElementPoints(target)\n      const targetPoints = transSelectableComponentPointsToIllAPosition(\n        targetOriginPoints,\n        scrollTop,\n        containerX,\n        containerY,\n      )\n      const points = getOverlapPoints(targetPoints, rectPoints)\n      if (points.length > 0) {\n        const displayName = target.getAttribute(\"data-displayname\")\n\n        if (displayName) {\n          updatedSelectedComponents.push(displayName)\n        }\n      }\n    })\n    let isEqual = false\n    if (\n      updatedSelectedComponents.length === prevSelectedComponent.current.length\n    ) {\n      isEqual = updatedSelectedComponents.every(\n        (value, index) => value === prevSelectedComponent.current[index],\n      )\n    }\n    if (!isEqual) {\n      prevSelectedComponent.current = updatedSelectedComponents\n      dispatch(configActions.updateSelectedComponent(updatedSelectedComponents))\n    }\n  }\n\n  const onDragEndHandler = () => {\n    if (\n      !prevSelectorStatus.current &&\n      !isProductionMode &&\n      selectedComponents.length > 0\n    ) {\n      dispatch(configActions.updateSelectedComponent([]))\n    } else {\n      trackInEditor(ILLA_MIXPANEL_EVENT_TYPE.SELECT, {\n        element: \"component\",\n        parameter1: \"drag\",\n      })\n    }\n    prevSelectorStatus.current = false\n    prevContainerScrollTop.current = undefined\n    startScrollTop.current = 0\n  }\n\n  useEffect(() => {\n    const containerRefValue = scrollContainerRef.current\n    if (!containerRefValue || !selectoRef.current) return\n\n    const scrollHandler = () => {\n      if (!prevSelectorStatus.current) return\n      selectoRef.current?.checkScroll()\n    }\n    containerRefValue.addEventListener(\"scroll\", scrollHandler)\n\n    return () => {\n      containerRefValue?.removeEventListener(\"scroll\", scrollHandler)\n    }\n  }, [\n    containerClientRect?.x,\n    containerClientRect?.y,\n    scrollContainerRef,\n    dispatch,\n  ])\n\n  return (\n    <Selecto\n      ref={selectoRef}\n      container={scrollContainerRef.current}\n      dragContainer={scrollContainerRef.current as Element}\n      selectableTargets={[`div[data-parentnode='${canvasNodeDisplayName}']`]}\n      onScroll={onScrollHandler}\n      scrollOptions={{\n        container: scrollContainerRef.current!,\n        getScrollPosition: () => {\n          return [\n            scrollContainerRef.current!.scrollLeft,\n            scrollContainerRef.current!.scrollTop,\n          ]\n        },\n        throttleTime: 30,\n        threshold: 0,\n      }}\n      dragCondition={dragConditionHandler}\n      onDragStart={onDragStartHandler}\n      onDrag={onDraggingHandler}\n      onDragEnd={onDragEndHandler}\n    />\n  )\n}\n","import { DEFAULT_MIN_COLUMN } from \"../ScaleSquare/constant/widget\"\n\ninterface WidgetShape {\n  x: number\n  y: number\n  w: number\n  h: number\n  minW: number\n}\n\nexport const getLargeItemShapeWithNodeScale = (\n  selectedComponents: WidgetShape[],\n) => {\n  const top = Math.min(...selectedComponents.map((item) => item.y))\n  const left = Math.min(...selectedComponents.map((item) => item.x))\n  const bottom = Math.max(...selectedComponents.map((item) => item.y + item.h))\n  const right = Math.max(...selectedComponents.map((item) => item.x + item.w))\n  return {\n    x: left,\n    y: top,\n    w: right - left,\n    h: bottom - top,\n    minW: DEFAULT_MIN_COLUMN,\n  }\n}\n","import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\n\nexport const applyMultiSelectedScaleSquareStyle = (\n  width: number,\n  height: number,\n  left: number,\n  top: number,\n) => {\n  return css`\n    position: absolute;\n    border: 1px dashed ${getColor(\"techPurple\", \"03\")};\n    width: ${width}px;\n    height: ${height}px;\n    left: 0;\n    top: 0;\n    transform: translate(${left}px, ${top}px);\n    pointer-events: none;\n  `\n}\n","import { FC, memo, useMemo } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { getLargeItemShapeWithNodeScale } from \"@/page/App/components/DotPanel/utils\"\nimport { getSelectedComponentDisplayNames } from \"@/redux/config/configSelector\"\nimport { getClientWidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoSelector\"\nimport {\n  MultiSelectedScaleSquareProps,\n  SelectedComponentWithShape,\n} from \"./interface\"\nimport { applyMultiSelectedScaleSquareStyle } from \"./style\"\n\nconst MultiSelectedScaleSquare: FC<MultiSelectedScaleSquareProps> = (props) => {\n  const { unitW, containerDisplayName } = props\n  const selectedComponents = useSelector(getSelectedComponentDisplayNames)\n  const widgetExecutionResult = useSelector(getClientWidgetLayoutInfo)\n  const selectedComponentsWithShape: SelectedComponentWithShape[] =\n    useMemo(() => {\n      let result: SelectedComponentWithShape[] = []\n      selectedComponents.forEach((componentDisplayName) => {\n        const currentItem = widgetExecutionResult[componentDisplayName]\n        if (!currentItem) return null\n        result.push({\n          ...widgetExecutionResult[componentDisplayName].layoutInfo,\n          parentNode: widgetExecutionResult[componentDisplayName].parentNode,\n        })\n      })\n      return result\n    }, [selectedComponents, widgetExecutionResult])\n\n  const isSameParentNode = selectedComponentsWithShape.every(\n    (node) => node.parentNode === containerDisplayName,\n  )\n\n  const scaleItem = getLargeItemShapeWithNodeScale(selectedComponentsWithShape)\n  if (selectedComponents.length <= 1 || !isSameParentNode) return null\n\n  return (\n    <div\n      css={applyMultiSelectedScaleSquareStyle(\n        scaleItem.w * unitW,\n        scaleItem.h * UNIT_HEIGHT,\n        scaleItem.x * unitW,\n        scaleItem.y * UNIT_HEIGHT,\n      )}\n    />\n  )\n}\n\nMultiSelectedScaleSquare.displayName = \"MultiSelectedScaleSquare\"\n\nexport default memo(MultiSelectedScaleSquare)\n","import { FC, ReactNode, createContext, useRef } from \"react\"\n\ninterface MouseMoveContextInjected {\n  hoveredWidgets: string[]\n  addHoverWidget: (widgetDisplayName: string) => void\n  deleteHoverWidget: (widgetDisplayName: string) => void\n  resetHoverWidget: () => void\n}\n\nexport const MouseMoveContext = createContext<MouseMoveContextInjected>(\n  {} as MouseMoveContextInjected,\n)\n\ninterface MouseMoveProviderProps {\n  children: ReactNode\n}\n\nexport const MouseMoveProvider: FC<MouseMoveProviderProps> = (props) => {\n  const { children } = props\n  const hoverWidgetsRef = useRef<string[]>([])\n\n  const addHoverWidget = (widgetDisplayName: string) => {\n    hoverWidgetsRef.current.push(widgetDisplayName)\n  }\n\n  const deleteHoverWidget = (widgetDisplayName: string) => {\n    const index = hoverWidgetsRef.current.indexOf(widgetDisplayName)\n    if (index === -1) return\n    hoverWidgetsRef.current.splice(index, 1)\n  }\n  const resetHoverWidget = () => {\n    hoverWidgetsRef.current = []\n  }\n  const value = {\n    hoveredWidgets: hoverWidgetsRef.current,\n    addHoverWidget,\n    deleteHoverWidget,\n    resetHoverWidget,\n  }\n\n  return (\n    <MouseMoveContext.Provider value={value}>\n      {children}\n    </MouseMoveContext.Provider>\n  )\n}\n","import { XYCoord } from \"react-dnd\"\n\nexport const getMouseRealPosition = (\n  clientOffSet: XYCoord,\n  containerScrollTop: number = 0,\n) => {\n  return {\n    x: clientOffSet.x,\n    y: clientOffSet.y + containerScrollTop,\n  }\n}\n\nexport const getMouseRelativePosition = (\n  canvasPosition: XYCoord,\n  mousePosition: XYCoord,\n  containerScrollTop: number = 0,\n) => {\n  const { x, y } = getMouseRealPosition(mousePosition, containerScrollTop)\n  return {\n    x: x - canvasPosition.x,\n    y: y - canvasPosition.y,\n  }\n}\n\nexport const getMousePositionWithIllaUnit = (\n  unitWidth: number,\n  canvasPosition: XYCoord,\n  mousePosition: XYCoord,\n  containerScrollTop: number = 0,\n) => {\n  const relativePosition = getMouseRelativePosition(\n    canvasPosition,\n    mousePosition,\n    containerScrollTop,\n  )\n  const realX = relativePosition.x / unitWidth\n  const integerPartX = Math.floor(realX)\n  const decimalPartX = realX - integerPartX\n  const integerPartY = Math.floor(relativePosition.y)\n  const decimalPartY = relativePosition.y - integerPartY\n  return {\n    xMod: decimalPartX,\n    yMod: decimalPartY,\n    xInteger: integerPartX,\n    yInteger: integerPartY,\n  }\n}\n","import { getCurrentUser } from \"@illa-public/user-data\"\nimport { RefObject, useCallback, useContext, useEffect, useRef } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { useParams } from \"react-router-dom\"\nimport { useWindowSize } from \"react-use\"\nimport { getIsDragging } from \"@/redux/currentApp/executionTree/executionSelector\"\nimport { MouseMoveContext } from \"../context/mouseMoveContext\"\nimport { getMousePositionWithIllaUnit } from \"../utils/calcMouse\"\nimport { sendMousePositionHandler } from \"../utils/sendBinaryMessage\"\n\ninterface CursorPosition {\n  xMod: number\n  yMod: number\n  xInteger: number\n  yInteger: number\n}\n\nexport const useMousePositionAsync = (\n  containerRef: RefObject<HTMLDivElement>,\n  unitWidth: number,\n  displayName: string,\n  isRoot: boolean = false,\n  wrapperRef: RefObject<HTMLDivElement>,\n) => {\n  const params = useParams()\n  const userInfo = useSelector(getCurrentUser)\n  const isDragging = useSelector(getIsDragging)\n  const { width, height } = useWindowSize()\n  const cursorPositionRef = useRef<CursorPosition>({\n    xInteger: 0,\n    yInteger: 0,\n    xMod: 0,\n    yMod: 0,\n  })\n\n  const mouseMoveContext = useContext(MouseMoveContext)\n  const mouseEnterHandler = useCallback(() => {\n    mouseMoveContext.addHoverWidget(displayName)\n  }, [displayName, mouseMoveContext])\n\n  const mouseLeaveHandler = useCallback(() => {\n    mouseMoveContext.deleteHoverWidget(displayName)\n    if (isRoot && !isDragging) {\n      sendMousePositionHandler(displayName, 0, 0, 0, 0, true)\n    }\n  }, [displayName, isDragging, isRoot, mouseMoveContext])\n\n  const mouseMoveAsyncHandler = useCallback(\n    (e: MouseEvent) => {\n      const { clientX, clientY } = e\n      if (\n        mouseMoveContext.hoveredWidgets.length === 0 ||\n        mouseMoveContext.hoveredWidgets.at(-1) !== displayName\n      )\n        return\n      const containerRect = containerRef.current?.getBoundingClientRect()\n      const containerPosition = {\n        x: containerRect?.left ?? 0,\n        y: containerRect?.top ?? 0,\n      }\n      const mousePosition = {\n        x: clientX,\n        y: clientY,\n      }\n      const { xInteger, xMod, yInteger, yMod } = getMousePositionWithIllaUnit(\n        unitWidth,\n        containerPosition,\n        mousePosition,\n        containerRef.current?.scrollTop,\n      )\n      cursorPositionRef.current = {\n        xInteger,\n        yInteger,\n        xMod,\n        yMod,\n      }\n      if (\n        Number.isInteger(xInteger) &&\n        Number.isInteger(yInteger) &&\n        !Number.isNaN(xMod) &&\n        !Number.isNaN(yMod) &&\n        !isDragging\n      ) {\n        sendMousePositionHandler(displayName, xInteger, yInteger, xMod, yMod)\n      }\n    },\n    [\n      containerRef,\n      displayName,\n      isDragging,\n      mouseMoveContext.hoveredWidgets,\n      unitWidth,\n    ],\n  )\n\n  const visibilityChangeHandler = useCallback(() => {\n    if (document.hidden) {\n      mouseLeaveHandler()\n    }\n  }, [mouseLeaveHandler])\n\n  const pageHideHandler = useCallback(() => {\n    mouseLeaveHandler()\n  }, [mouseLeaveHandler])\n\n  useEffect(() => {\n    const wrapperNode = wrapperRef.current\n    if (wrapperNode) {\n      wrapperNode.addEventListener(\"mouseenter\", mouseEnterHandler)\n      wrapperNode?.addEventListener(\"mousemove\", mouseMoveAsyncHandler)\n      wrapperNode?.addEventListener(\"mouseleave\", mouseLeaveHandler)\n    }\n    return () => {\n      if (wrapperNode) {\n        wrapperNode.removeEventListener(\"mouseenter\", mouseEnterHandler)\n        wrapperNode.removeEventListener(\"mousemove\", mouseMoveAsyncHandler)\n        wrapperNode.removeEventListener(\"mouseleave\", mouseLeaveHandler)\n      }\n    }\n  }, [\n    containerRef,\n    height,\n    mouseEnterHandler,\n    mouseLeaveHandler,\n    mouseMoveAsyncHandler,\n    params.appId,\n    unitWidth,\n    userInfo.nickname,\n    userInfo.userID,\n    width,\n    wrapperRef,\n  ])\n\n  useEffect(() => {\n    if (isRoot) {\n      window.addEventListener(\"blur\", mouseLeaveHandler)\n      window.addEventListener(\"visibilitychange\", visibilityChangeHandler)\n      window.addEventListener(\"pagehide\", pageHideHandler)\n    }\n\n    return () => {\n      if (isRoot) {\n        window.removeEventListener(\"blur\", mouseLeaveHandler)\n        window.removeEventListener(\"visibilitychange\", visibilityChangeHandler)\n        window.removeEventListener(\"pagehide\", pageHideHandler)\n      }\n    }\n  }, [isRoot, mouseLeaveHandler, pageHideHandler, visibilityChangeHandler])\n\n  return { cursorPositionRef }\n}\n","import { WidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoState\"\nimport { combineWidgetInfos } from \"./getDragShadow\"\n\nexport interface DropResult {\n  widgetLeft: number\n  widgetTop: number\n  widgetWidth: number\n  widgetHeight: number\n  displayName: string\n}\n\nexport const getLayoutInfosWithRelativeCombineShape = (\n  widgetLayoutInfos: WidgetLayoutInfo[],\n) => {\n  const combineShape = combineWidgetInfos(\n    widgetLayoutInfos.map((info) => info.layoutInfo),\n  )\n\n  return widgetLayoutInfos.map((info) => {\n    return {\n      ...info,\n      layoutInfo: {\n        ...info.layoutInfo,\n        x: info.layoutInfo.x - combineShape.x,\n        y: info.layoutInfo.y - combineShape.y,\n      },\n    }\n  })\n}\n","import { css } from \"@emotion/react\"\nimport { globalColor, illaPrefix } from \"@illa-design/react\"\nimport {\n  SCROLL_CONTAINER_PADDING,\n  UNIT_HEIGHT,\n} from \"@/page/App/components/DotPanel/constant/canvas\"\n\nexport const emptyStateStyle = css`\n  font-size: 14px;\n  color: ${globalColor(`--${illaPrefix}-grayBlue-04`)};\n  text-align: center;\n`\n\nexport const applyEmptyStateWrapperStyle = (\n  isInner: boolean = false,\n  paddingTopBottom: number,\n) => css`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-height: ${isInner\n    ? \"100%\"\n    : 15 * UNIT_HEIGHT - 2 * SCROLL_CONTAINER_PADDING + paddingTopBottom};\n`\n\nexport const applyContainerWrapperStyle = css`\n  width: 100%;\n  height: 100%;\n  display: flex;\n`\n","import { FC, useEffect } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { getPaddingShape } from \"@/utils/styleUtils/padding\"\nimport {\n  applyEmptyStateWrapperStyle,\n  emptyStateStyle,\n} from \"@/widgetLibrary/ContainerWidget/style\"\n\nexport const ContainerEmptyState: FC<{\n  isInner?: boolean\n  containerPadding?: string\n  handleUpdateHeight?: (height: number) => void\n}> = ({ handleUpdateHeight, isInner, containerPadding = \"0\" }) => {\n  const { t } = useTranslation()\n\n  const paddings = getPaddingShape(containerPadding)\n\n  const paddingTopBottom = paddings.paddingTop + paddings.paddingBottom\n\n  useEffect(() => {\n    if (handleUpdateHeight) {\n      handleUpdateHeight(13 * UNIT_HEIGHT + paddingTopBottom)\n    }\n  }, [handleUpdateHeight, paddingTopBottom])\n\n  return (\n    <div css={applyEmptyStateWrapperStyle(isInner, paddingTopBottom)}>\n      <span css={emptyStateStyle}>{t(\"widget.container.empty\")}</span>\n    </div>\n  )\n}\n","import { useLayoutEffect } from \"react\"\n\nexport const useAutoUpdateCanvasHeight = (\n  handleUpdateHeight: (height: number) => void,\n  containerDom: HTMLElement | null,\n  enable: boolean = true,\n) => {\n  useLayoutEffect(() => {\n    const observerRef = new ResizeObserver((entries) => {\n      if (!handleUpdateHeight) return\n      const height = entries[0].contentRect.height\n      handleUpdateHeight(height)\n    })\n    if (observerRef && containerDom && enable) {\n      observerRef.unobserve(containerDom)\n      observerRef.observe(containerDom)\n    }\n\n    return () => {\n      if (containerDom && enable) {\n        observerRef.unobserve(containerDom)\n      }\n    }\n  }, [containerDom, enable, handleUpdateHeight])\n}\n","import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\nimport {\n  BORDER_WIDTH,\n  SCROLL_CONTAINER_PADDING,\n  UNIT_HEIGHT,\n} from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { getPaddingShape } from \"@/utils/styleUtils/padding\"\nimport { getShadowStyle } from \"@/utils/styleUtils/shadow\"\n\nexport const outerComponentCanvasContainerStyle = (\n  padding: string,\n  background: string = \"transparent\",\n  shadowSize: \"none\" | \"small\" | \"medium\" | \"large\",\n  dividerColor?: string,\n) => {\n  const { paddingTop, paddingBottom, paddingLeft, paddingRight } =\n    getPaddingShape(padding)\n  return css`\n    height: 100%;\n    width: 100%;\n    padding: ${paddingTop}px ${paddingRight}px ${paddingBottom}px\n      ${paddingLeft}px;\n    position: relative;\n    overflow: hidden;\n    background: ${background};\n    box-shadow: ${getShadowStyle(shadowSize)};\n    border: ${dividerColor ? `1px solid ${dividerColor}` : \"unset\"};\n  `\n}\n\nexport const outerModalCanvasContainerStyle = (padding: string) => {\n  const { paddingTop, paddingBottom, paddingLeft, paddingRight } =\n    getPaddingShape(padding)\n  return css`\n    height: 100%;\n    width: 100%;\n    padding: ${paddingTop}px ${paddingRight}px ${paddingBottom}px\n      ${paddingLeft}px;\n    position: relative;\n    overflow: hidden;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  `\n}\n\nexport const outerComponentCanvasContainerWithJsonStyle = (\n  padding: number,\n) => css`\n  height: 100%;\n  width: 100%;\n  padding: ${padding}px;\n  position: relative;\n  overflow: hidden auto;\n`\n\nexport const componentCanvasContainerStyle = css`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  padding: ${SCROLL_CONTAINER_PADDING}px;\n  overflow: hidden auto;\n`\n\nexport const containerShapeStyle = (padding: string) => {\n  const { paddingTop, paddingBottom, paddingLeft, paddingRight } =\n    getPaddingShape(padding)\n  return css`\n    top: ${paddingTop}px;\n    bottom: ${paddingBottom}px;\n    left: ${paddingLeft}px;\n    right: ${paddingRight}px;\n    position: absolute;\n    border: ${BORDER_WIDTH}px solid ${getColor(\"grayBlue\", \"09\")};\n    pointer-events: none;\n  `\n}\n\nexport const dropZoneStyle = (canvasHeight?: number) => css`\n  width: 100%;\n  height: ${canvasHeight ? `${canvasHeight}px` : \"130vh\"};\n`\n\nexport const applyComponentCanvasStyle = (\n  unitWidth: number,\n  showDot: boolean = false,\n) => {\n  return css`\n    width: 100%;\n    height: 100%;\n    ${showDot\n      ? applyDotBackgroundStyle(unitWidth)\n      : normalCanvasBackgroundStyle}\n    position: relative;\n  `\n}\n\nconst normalCanvasBackgroundStyle = css`\n  background: unset;\n`\n\nconst applyDotBackgroundStyle = (unitWidth: number) => {\n  return css`\n    background-image: radial-gradient(\n      circle at 1px 1px,\n      ${getColor(\"grayBlue\", \"08\")} 1px,\n      transparent 0px\n    );\n    background-repeat: repeat;\n    background-size: ${unitWidth}px ${UNIT_HEIGHT}px;\n  `\n}\n\nexport const selectoSelectionStyle = css`\n  > .selecto-selection {\n    position: absolute !important;\n    transform: translate(\n      var(--illa-select-area-left, 0),\n      var(--illa-select-area-top, 0)\n    ) !important;\n    width: var(--illa-select-area-width, 0) !important;\n    height: var(--illa-select-area-height, 0) !important;\n    background: rgba(101, 74, 236, 0.08) !important;\n    border: 1px solid ${getColor(\"techPurple\", \"03\")} !important;\n  }\n`\n\nexport const maskStyle = css`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: ${getColor(\"blackAlpha\", \"04\")};\n  z-index: -1;\n`\n","import {\n  FC,\n  MouseEventHandler,\n  memo,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\"\nimport { useDrop } from \"react-dnd\"\nimport { useTranslation } from \"react-i18next\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { useScroll } from \"react-use\"\nimport useMeasure from \"react-use-measure\"\nimport { useMessage } from \"@illa-design/react\"\nimport { getMousePointerPosition } from \"@/page/App/components/DotPanel/calc\"\nimport ComponentParser from \"@/page/App/components/DotPanel/components/ComponentParser\"\nimport DragPreview from \"@/page/App/components/DotPanel/components/DragPreview\"\nimport { DragShadowPreview } from \"@/page/App/components/DotPanel/components/DragShadowPreview\"\nimport { MousePreview } from \"@/page/App/components/DotPanel/components/MousePreview\"\nimport { MultiSelectCanvas } from \"@/page/App/components/DotPanel/components/MultiSelectCanvas\"\nimport MultiSelectedScaleSquare from \"@/page/App/components/DotPanel/components/MultiSelectedContainer\"\nimport {\n  ADD_ROWS,\n  DEFAULT_BODY_COLUMNS_NUMBER,\n  SAFE_ROWS,\n  SCROLL_CONTAINER_PADDING,\n  UNIT_HEIGHT,\n} from \"@/page/App/components/DotPanel/constant/canvas\"\nimport {\n  removeScrollBarContainerControllerByDisplayName,\n  setScrollBarContainerController,\n} from \"@/page/App/components/DotPanel/context/scrollBarContext\"\nimport { useMousePositionAsync } from \"@/page/App/components/DotPanel/hooks/useMousePostionAsync\"\nimport { clamWidgetShape } from \"@/page/App/components/DotPanel/utils/getDragShadow\"\nimport { getLayoutInfosWithRelativeCombineShape } from \"@/page/App/components/DotPanel/utils/getDropResult\"\nimport { sendMousePositionHandler } from \"@/page/App/components/DotPanel/utils/sendBinaryMessage\"\nimport {\n  DRAG_EFFECT,\n  DragInfo,\n} from \"@/page/App/components/ScaleSquare/components/DragContainer/interface\"\nimport { useResizingUpdateRealTime } from \"@/page/App/components/ScaleSquare/components/ResizingAndDragContainer/ResizeHandler/hooks\"\nimport {\n  getIsILLAEditMode,\n  getIsLikeProductMode,\n  getSelectedComponentDisplayNames,\n  isShowDot,\n} from \"@/redux/config/configSelector\"\nimport {\n  getContainerListDisplayNameMappedChildrenNodeDisplayName,\n  searchDSLByDisplayName,\n} from \"@/redux/currentApp/components/componentsSelector\"\nimport { componentsActions } from \"@/redux/currentApp/components/componentsSlice\"\nimport {\n  getCurrentPageDisplayName,\n  getIsDragging,\n  getIsResizing,\n} from \"@/redux/currentApp/executionTree/executionSelector\"\nimport { getClientWidgetLayoutInfo } from \"@/redux/currentApp/layoutInfo/layoutInfoSelector\"\nimport { FocusManager } from \"@/utils/focusManager\"\nimport { newGenerateComponentNode } from \"@/utils/generators/generateComponentNode\"\nimport { getPaddingShape } from \"@/utils/styleUtils/padding\"\nimport { ContainerEmptyState } from \"@/widgetLibrary/ContainerWidget/emptyState\"\nimport { useAutoUpdateCanvasHeight } from \"@/widgetLibrary/PublicSector/utils/autoUpdateHeight\"\nimport {\n  DropCollectedProps,\n  DropResultInfo,\n  RenderComponentCanvasContainerProps,\n} from \"./interface\"\nimport {\n  applyComponentCanvasStyle,\n  componentCanvasContainerStyle,\n  containerShapeStyle,\n  dropZoneStyle,\n  outerComponentCanvasContainerStyle,\n  selectoSelectionStyle,\n} from \"./style\"\n\nconst RenderComponentCanvasContainer: FC<\n  RenderComponentCanvasContainerProps\n> = (props) => {\n  const {\n    columnNumber = DEFAULT_BODY_COLUMNS_NUMBER,\n    isRootCanvas,\n    displayName,\n    containerPadding,\n    canResizeCanvas = false,\n    safeRowNumber = SAFE_ROWS,\n    minHeight,\n    background,\n    shadowSize = \"none\",\n    handleUpdateHeight,\n  } = props\n\n  const containerListMapChildName = useSelector(\n    getContainerListDisplayNameMappedChildrenNodeDisplayName,\n  )\n\n  const scrollContainerRef = useRef<HTMLDivElement | null>(null)\n  const firstDragRef = useRef(true)\n  const dragStartScrollTop = useRef(0)\n  const { y: scrollContainerScrollTop } = useScroll(scrollContainerRef)\n  const currentPageDisplayName = useSelector(getCurrentPageDisplayName)\n  const [canvasRef, bounds] = useMeasure()\n  const messageHandler = useMessage()\n  const innerCanvasRef = useRef<HTMLDivElement | null>(null)\n  const { t } = useTranslation()\n  const paddings = getPaddingShape(containerPadding)\n  const fixedBounds = {\n    top: bounds.top + paddings.paddingTop + SCROLL_CONTAINER_PADDING,\n    left: bounds.left + paddings.paddingLeft + SCROLL_CONTAINER_PADDING,\n    width:\n      bounds.width -\n      (paddings.paddingLeft +\n        paddings.paddingRight +\n        SCROLL_CONTAINER_PADDING * 2),\n    height:\n      bounds.height -\n      (paddings.paddingTop +\n        paddings.paddingBottom +\n        SCROLL_CONTAINER_PADDING * 2),\n  }\n\n  const canShowDot = useSelector(isShowDot)\n  const unitWidth = fixedBounds.width / columnNumber\n\n  const [canvasHeight, setCanvasHeight] = useState<number>(fixedBounds.height)\n  const widgetLayoutInfo = useSelector(getClientWidgetLayoutInfo)\n  const childWidgetLayoutInfo = Object.values(widgetLayoutInfo).filter(\n    (item) => item.parentNode === displayName,\n  )\n  const selectedComponents = useSelector(getSelectedComponentDisplayNames)\n  const dispatch = useDispatch()\n  const isDraggingGlobal = useSelector(getIsDragging)\n  const isResizingGlobal = useSelector(getIsResizing)\n  const isLikeProductMode = useSelector(getIsLikeProductMode)\n\n  const isEditMode = useSelector(getIsILLAEditMode)\n\n  const currentLayoutInfo = widgetLayoutInfo[displayName]\n\n  const [collectedProps, dropRef] = useDrop<\n    DragInfo,\n    DropResultInfo,\n    DropCollectedProps\n  >(\n    () => ({\n      accept: [\"components\"],\n      canDrop: () => {\n        return isEditMode\n      },\n      drop: (dropItem, monitor) => {\n        const didDrop = monitor.didDrop()\n        if (\n          !monitor.isOver({\n            shallow: true,\n          }) &&\n          didDrop\n        ) {\n          return {\n            isDropOnCanvas: !!monitor.getDropResult()?.isDropOnCanvas,\n          }\n        }\n\n        const { draggedComponents, dropResult, dragEffect } = dropItem\n        const originParentNode = draggedComponents[0].parentNode\n\n        if (dropResult && !dropResult.shape && !dropResult.canDrop) {\n          messageHandler.error({\n            content: t(\"frame.message.session.error\"),\n          })\n          return {\n            isDropOnCanvas: false,\n          }\n        }\n\n        if (!dropResult || !dropResult.shape) {\n          return {\n            isDropOnCanvas: false,\n          }\n        }\n\n        const hasTable = draggedComponents.some(\n          (components) => components.widgetType === \"TABLE_WIDGET\",\n        )\n        const isListChildrenCanvas = Object.values(\n          containerListMapChildName,\n        ).some((childDisplayNames) => childDisplayNames.includes(displayName))\n\n        if (hasTable && isListChildrenCanvas) {\n          messageHandler.error({\n            content: t(\"editor.inspect.setter_tips.list.table_disallowed\"),\n          })\n          return {\n            isDropOnCanvas: false,\n          }\n        }\n\n        const {\n          shape: dropResultShape,\n          columnNumberWhenDrag,\n          columnNumberWhenDrop,\n        } = dropResult\n\n        if (draggedComponents.length === 1) {\n          switch (dragEffect) {\n            case DRAG_EFFECT.ADD: {\n              const newComponentNode = newGenerateComponentNode(\n                dropResultShape.x,\n                dropResultShape.y,\n                dropResultShape.w,\n                draggedComponents[0].widgetType,\n                draggedComponents[0].displayName,\n                displayName,\n                [],\n                columnNumberWhenDrop / columnNumberWhenDrag,\n              )\n\n              if (newComponentNode.type === \"MODAL_WIDGET\") {\n                dispatch(\n                  componentsActions.addModalComponentReducer({\n                    currentPageDisplayName,\n                    modalComponentNode: newComponentNode,\n                  }),\n                )\n              } else {\n                dispatch(\n                  componentsActions.addComponentReducer([newComponentNode]),\n                )\n              }\n\n              break\n            }\n            case DRAG_EFFECT.UPDATE: {\n              const updateSlices = [\n                {\n                  displayName: draggedComponents[0].displayName,\n                  x: dropResultShape.x,\n                  y: dropResultShape.y,\n                  w: dropResultShape.w,\n                  h: draggedComponents[0].layoutInfo.h,\n                },\n              ]\n              dispatch(\n                componentsActions.updateComponentPositionReducer({\n                  oldParentNodeDisplayName: originParentNode,\n                  newParentNodeDisplayName: displayName,\n                  updateSlices,\n                  columnNumberWhenDrag,\n                  columnNumberWhenDrop,\n                }),\n              )\n            }\n          }\n        }\n\n        if (draggedComponents.length > 1 && dragEffect === DRAG_EFFECT.UPDATE) {\n          const relativeLayoutInfo =\n            getLayoutInfosWithRelativeCombineShape(draggedComponents)\n          const updateSlices = relativeLayoutInfo.map((item) => {\n            const shape = clamWidgetShape(\n              {\n                x: item.layoutInfo.x + dropResultShape.x,\n                y: item.layoutInfo.y + dropResultShape.y,\n                w: item.layoutInfo.w,\n                h: item.layoutInfo.h,\n              },\n              columnNumber,\n              draggedComponents.length > 1,\n            )\n            return {\n              ...shape,\n              h: shape.previewH,\n              displayName: item.displayName,\n            }\n          })\n          dispatch(\n            componentsActions.updateComponentPositionReducer({\n              oldParentNodeDisplayName: originParentNode,\n              newParentNodeDisplayName: displayName,\n              updateSlices,\n              columnNumberWhenDrag,\n              columnNumberWhenDrop,\n            }),\n          )\n        }\n\n        const mousePosition = cursorPositionRef.current\n        sendMousePositionHandler(\n          displayName,\n          mousePosition.xInteger,\n          mousePosition.yInteger,\n          mousePosition.xMod,\n          mousePosition.yMod,\n        )\n\n        return {\n          isDropOnCanvas: true,\n        }\n      },\n      collect: (monitor) => {\n        return {\n          isOver: monitor.isOver({ shallow: true }),\n        }\n      },\n    }),\n    [\n      isEditMode,\n      unitWidth,\n      fixedBounds,\n      scrollContainerScrollTop,\n      displayName,\n      containerListMapChildName,\n    ],\n  )\n\n  const autoScrollTimeID = useRef<number>(0)\n\n  setScrollBarContainerController(displayName, scrollContainerRef)\n\n  useEffect(() => {\n    return () => {\n      removeScrollBarContainerControllerByDisplayName(displayName)\n    }\n  }, [displayName])\n\n  useEffect(() => {\n    const scrollContainer = scrollContainerRef.current\n    if (!scrollContainer) return\n    const autoScroll = (e: MouseEvent) => {\n      if (\n        (!collectedProps.isOver &&\n          scrollContainer.dataset.isDraggingOver !== \"true\") ||\n        !scrollContainer ||\n        !isRootCanvas\n      ) {\n        return\n      }\n      const { top, bottom } = scrollContainer.getBoundingClientRect()\n      const { clientY } = e\n      window.clearInterval(autoScrollTimeID.current)\n      autoScrollTimeID.current = window.setInterval(() => {\n        if (clientY < top + UNIT_HEIGHT * safeRowNumber) {\n          scrollContainer!.scrollBy({\n            top: -8,\n          })\n        }\n        if (clientY > bottom - UNIT_HEIGHT * safeRowNumber) {\n          scrollContainer!.scrollBy({\n            top: 8,\n          })\n        }\n      }, 160)\n    }\n    scrollContainer?.addEventListener(\"mousemove\", autoScroll)\n    return () => {\n      if (scrollContainer) {\n        scrollContainer?.removeEventListener(\"mousemove\", autoScroll)\n      }\n      window.clearInterval(autoScrollTimeID.current)\n    }\n  }, [collectedProps.isOver, isResizingGlobal, isRootCanvas, safeRowNumber])\n\n  const isDraggingOver =\n    scrollContainerRef.current?.dataset.isDraggingOver === \"true\"\n\n  const prevMaxHeight = useRef<number>(0)\n  const maxHeight = Math.max(\n    ...childWidgetLayoutInfo.map(\n      (item) => item.layoutInfo.y + item.layoutInfo.h,\n    ),\n  )\n  useEffect(() => {\n    if (\n      isDraggingOver &&\n      isFinite(maxHeight) &&\n      maxHeight > prevMaxHeight.current\n    ) {\n      prevMaxHeight.current = maxHeight\n    }\n\n    if (!isDraggingOver) {\n      prevMaxHeight.current = maxHeight\n    }\n  }, [isDraggingOver, maxHeight])\n\n  useEffect(() => {\n    const innerCanvasDOM = innerCanvasRef.current\n    if (!innerCanvasDOM) return\n    const innerCanvasDOMRect = innerCanvasDOM.getBoundingClientRect()\n\n    if (\n      isFinite(maxHeight) &&\n      prevMaxHeight.current > maxHeight &&\n      isResizingGlobal\n    ) {\n      return\n    }\n\n    if (canResizeCanvas) {\n      if (isFinite(maxHeight)) {\n        setCanvasHeight(maxHeight * UNIT_HEIGHT)\n      } else {\n        setCanvasHeight(minHeight as number)\n      }\n      return\n    }\n\n    if (maxHeight * UNIT_HEIGHT < fixedBounds.height) {\n      setCanvasHeight(fixedBounds.height)\n      return\n    }\n\n    if (\n      maxHeight * UNIT_HEIGHT >=\n      innerCanvasDOMRect.height - UNIT_HEIGHT * ADD_ROWS\n    ) {\n      if (isEditMode && isRootCanvas) {\n        setCanvasHeight(maxHeight * UNIT_HEIGHT + UNIT_HEIGHT * ADD_ROWS)\n      } else {\n        setCanvasHeight(maxHeight * UNIT_HEIGHT)\n      }\n      return\n    }\n\n    setCanvasHeight(maxHeight * UNIT_HEIGHT)\n  }, [\n    canResizeCanvas,\n    fixedBounds.height,\n    isEditMode,\n    isResizingGlobal,\n    isRootCanvas,\n    maxHeight,\n    minHeight,\n  ])\n\n  useEffect(() => {\n    if (firstDragRef.current && isDraggingGlobal) {\n      firstDragRef.current = false\n      dragStartScrollTop.current = scrollContainerScrollTop\n      return\n    }\n    if (!isDraggingGlobal) {\n      firstDragRef.current = true\n      dragStartScrollTop.current = scrollContainerScrollTop\n    }\n  }, [isDraggingGlobal, scrollContainerScrollTop])\n\n  const canvasUpdateHeightHandler = useCallback(\n    (height: number) => {\n      if (!handleUpdateHeight) return\n      handleUpdateHeight(\n        height +\n          SCROLL_CONTAINER_PADDING * 2 +\n          paddings.paddingTop +\n          paddings.paddingBottom,\n      )\n    },\n    [handleUpdateHeight, paddings.paddingBottom, paddings.paddingTop],\n  )\n\n  useAutoUpdateCanvasHeight(\n    canvasUpdateHeightHandler,\n    innerCanvasRef.current,\n    canResizeCanvas,\n  )\n\n  const { cursorPositionRef } = useMousePositionAsync(\n    scrollContainerRef,\n    unitWidth,\n    displayName,\n    isRootCanvas,\n    scrollContainerRef,\n  )\n\n  const handleClickOnCanvas: MouseEventHandler<HTMLDivElement> = useCallback(\n    (event) => {\n      if (selectedComponents.length > 1) {\n        // calc group position\n        let leftTopX = Number.MAX_SAFE_INTEGER\n        let leftTopY = Number.MAX_SAFE_INTEGER\n        let maxRightBottomX = Number.MIN_SAFE_INTEGER\n        let maxRightBottomY = Number.MIN_SAFE_INTEGER\n\n        selectedComponents.forEach((nodeName) => {\n          const node = searchDSLByDisplayName(nodeName)\n          if (node) {\n            leftTopX = Math.min(leftTopX, node.x)\n            leftTopY = Math.min(leftTopY, node.y)\n            maxRightBottomX = Math.max(maxRightBottomX, node.x + node.w)\n            maxRightBottomY = Math.max(maxRightBottomY, node.y + node.h)\n          }\n        })\n        FocusManager.switchFocus(\"canvas\", {\n          displayName: displayName,\n          type: \"group\",\n          // x, y, w, h\n          clickPosition: [\n            leftTopX,\n            leftTopY,\n            maxRightBottomX - leftTopX,\n            maxRightBottomY - leftTopY,\n          ],\n        })\n      } else {\n        FocusManager.switchFocus(\"canvas\", {\n          displayName: displayName,\n          type: \"inner_container\",\n          clickPosition: getMousePointerPosition(\n            event.clientX - event.currentTarget.getBoundingClientRect().x,\n            event.clientY - event.currentTarget.getBoundingClientRect().y,\n            unitWidth,\n            UNIT_HEIGHT,\n            columnNumber,\n          ),\n        })\n      }\n    },\n    [columnNumber, displayName, selectedComponents, unitWidth],\n  )\n\n  useResizingUpdateRealTime(isDraggingOver)\n\n  return (\n    <div\n      css={outerComponentCanvasContainerStyle(\n        containerPadding,\n        background,\n        shadowSize,\n      )}\n      data-outer-canvas-container={displayName}\n      ref={canvasRef}\n    >\n      <div\n        css={componentCanvasContainerStyle}\n        ref={scrollContainerRef}\n        data-scroll-container={displayName}\n        data-column-number={columnNumber}\n        data-unit-width={unitWidth}\n        data-is-dragging-over={false}\n        className=\"scroll-container\"\n      >\n        <div\n          ref={(node) => {\n            dropRef(node)\n            innerCanvasRef.current = node\n          }}\n          css={dropZoneStyle(canvasHeight)}\n          onClick={handleClickOnCanvas}\n        >\n          <div\n            css={[\n              applyComponentCanvasStyle(unitWidth, canShowDot),\n              selectoSelectionStyle,\n            ]}\n            onClick={handleClickOnCanvas}\n            data-isroot={isRootCanvas}\n            data-canvas-container={displayName}\n            data-column-number={columnNumber}\n            data-unit-width={unitWidth}\n            data-list-widget-container\n          >\n            {isEditMode && (\n              <DragShadowPreview\n                unitW={unitWidth}\n                parentDisplayName={displayName}\n                columns={columnNumber}\n              />\n            )}\n            {isEditMode && (\n              <MousePreview unitW={unitWidth} displayName={displayName} />\n            )}\n            {currentLayoutInfo?.childrenNode?.length > 0 ? (\n              currentLayoutInfo?.childrenNode?.map((childName) => {\n                return (\n                  <ComponentParser\n                    key={`${displayName}-${childName}`}\n                    displayName={childName}\n                    unitW={unitWidth}\n                    parentNodeDisplayName={displayName}\n                    columnNumber={columnNumber}\n                  />\n                )\n              })\n            ) : isRootCanvas ? null : (\n              <ContainerEmptyState\n                isInner\n                containerPadding={containerPadding}\n              />\n            )}\n            {collectedProps.isOver && isEditMode && (\n              <DragPreview\n                unitW={unitWidth}\n                parentNodeDisplayName={displayName}\n                columnNumber={columnNumber}\n              />\n            )}\n            {!isLikeProductMode && isRootCanvas && (\n              <MultiSelectCanvas\n                scrollContainerRef={scrollContainerRef}\n                canvasNodeDisplayName={displayName}\n              />\n            )}\n            {!isDraggingGlobal && !isLikeProductMode && (\n              <MultiSelectedScaleSquare\n                unitW={unitWidth}\n                containerDisplayName={displayName}\n              />\n            )}\n          </div>\n        </div>\n      </div>\n      {canShowDot && <div css={containerShapeStyle(containerPadding)} />}\n    </div>\n  )\n}\n\nRenderComponentCanvasContainer.displayName = \"RenderComponentCanvasContainer\"\nexport default memo(RenderComponentCanvasContainer)\n"],"names":["useIsomorphicLayoutEffect","useLayoutEffect","useEffect","useCollector","monitor","collect","onUpdate","collected","setCollected","useState","updateCollected","useCallback","nextValue","equal","useMonitorOutput","onCollect","handlerId","useCollectedProps","collector","connector","useOptionalFactory","arg","deps","memoDeps","useMemo","useConnectDragSource","useConnectDragPreview","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","sourceId","invariant","listener","options","targetId","manager","isCallingCanDrop","DropTargetMonitorImpl","registerTarget","type","target","registry","registerSource","source","shallowEqual","objA","objB","compare","compareContext","compareResult","keysA","keysB","bHasOwnProperty","idx","key","valueA","valueB","isRef","obj","throwIfCompositeComponentElement","element","displayName","wrapHookToRecognizeElement","hook","elementOrNode","isValidElement","node","cloneWithRef","wrapConnectorHooks","hooks","wrappedHooks","wrappedHook","setRef","ref","newRef","previousRef","cloneElement","SourceConnector","newHandlerId","didChange","dragSource","forceDidChange","dragPreview","backend","TargetConnector","dropTarget","useDragDropManager","dragDropManager","useContext","DndContext","useDragSourceConnector","dragSourceOptions","dragPreviewOptions","useDragSourceMonitor","DragSourceImpl","spec","result","globalMonitor","isDragging","end","useDragSource","handler","useDragType","useRegisteredDragSource","itemType","unregister","useDrag","specArg","useDragLayer","useConnectDropTarget","useDropTargetConnector","useDropTargetMonitor","useAccept","accept","DropTargetImpl","useDropTarget","useRegisteredDropTarget","useDrop","sortComponentNodesOnlyY","componentNodes","node1","node2","sortComponentNodes","getComponentRect","component","x","y","w","h","isCrossing","otherNode","mainNode","otherRect","mainRect","isNearingAtY","getCrossingNodeNewPosition","currentNode","allComponentNode","otherComponents","curNode","res","queue","length","walkedSet","i","index","getNearingNodes","cur","applyEffectMapToComponentNodes","effectMap","getReflowResult","allComponentNodes","exceptSelf","sortedComponentNodes","effectResultMap","finalState","getNearComponentNodes","getMousePointerPosition","mouseOffsetX","mouseOffsetY","unitWidth","unitHeight","containerMaxWidthDotNumber","preX","preY","widgetBoundaryWrapperStyle","css","getColor","titleWrapperStyle","contentWrapperStyle","WidgetErrorBoundary","jsxs","jsx","ErrorIcon","ErrorBoundary","Component","props","__publicField","MIN_HEIGHT","TransformWidgetWrapper","memo","columnNumber","widgetType","parentNodeDisplayName","displayNameMapProps","useSelector","getExecutionResult","layoutInfo","rootState","getClientWidgetLayoutInfo","originComponentNode","searchDSLByDisplayName","realProps","dispatch","useDispatch","containerListMapChildName","getContainerListDisplayNameMappedChildrenNodeDisplayName","isDraggingInGlobal","getIsDragging","listContainerDisplayName","listWidgetDisplayNames","currentListDisplayName","listContainerDisabled","listWidgetProps","isObject","updateComponentRuntimeProps","runtimeProp","ILLAEditorRuntimePropsCollectorInstance","deleteComponentRuntimeProps","dynamicHeight","dynamicMinHeight","dynamicMaxHeight","updateComponentHeight","newHeight","store","oldH","_a","WIDGET_PADDING","WIDGET_SCALE_SQUARE_BORDER_WIDTH","newH","UNIT_HEIGHT","layoutInfoActions","handleUpdateDsl","value","executionActions","handleUpdateMultiExecutionResult","allUpdate","handleUpdateOriginalDSLMultiAttr","updateSlice","notUseUndoRedo","componentsActions","handleUpdateOriginalDSLOtherMultiAttr","getRunEvents","eventType","path","otherCalcContext","originEvents","get","dynamicPaths","needRunEvents","klona","originEvent","finalContext","triggerEventHandler","formatPath","realPath","isFunction","convertPathToString","toPath","dynamicString","calcValue","evaluateDynamicString","set","scriptObj","runEventHandler","triggerMappedEventHandler","isMapped","valueToSet","isNumber","widgetConfig","widgetBuilder","hidden","borderColor","backgroundColor","radius","borderWidth","shadow","_radius","_borderWidth","applyWrapperStylesStyle","Suspense","Skeleton","getComponentAttachUsers","state","getTargetCurrentUsersExpendMe","attachUsers","targetComponentDisplayName","currentUserId","targetComponentAttachUsers","user","getDragShadowInfo","getDragShadowInfoArray","createSelector","cursor","getFirstDragShadowInfo","dragShadows","userID","message","createMessage","onCopyActionItem","action","isGuideMode","getIsILLAGuideMode","newAction","omit","DisplayNameGenerator","data","createActionData","v4","actionActions","i18n","response","fetchCreateAction","e","isILLAAPiError","onDeleteActionItem","actionID","configActions","fetchDeleteAction","DRAG_EFFECT","scrollBarContainerController","setScrollBarContainerController","removeScrollBarContainerControllerByDisplayName","getScrollBarContainerByDisplayName","isNewCrossing","isOnlyCrossingY","getCrossingWidget","draggedDisplayNames","illaSnapshot","item","sortedRuleByYAndX","getNewPositionWithCrossing","mainSquare","parentDisplayName","effectedDisplayNames","realTimeLayout","widgetLayoutArray","filterWidgetLayoutArray","newEffectedDisplayNames","crossingWidgetInfos","compareInfos","firstCompareInfo","compareNode","crossingItem","newWidgetInfo","newItemWidgetInfo","oldIndex","sendMousePosition","cursorXInteger","cursorYInteger","cursorXMod","cursorYMod","isLeave","appID","ILLARoute","currentUserInfo","getCurrentUser","ws","Connection","binMessage","getBinaryMessagePayload","Signal","Target","sendMousePositionHandler","throttle","sendShadowPosition","status","displayNames","widgetX","widgetY","widgetW","widgetH","sendShadowMessageHandler","getRatio","initialClientOffSet","initialSourceClientOffset","initOffSet","initSourceOffSet","xRatio","yRatio","combineWidgetInfos","layoutInfos","widgetXs","info","widgetYs","widgetRights","widgetBottoms","widgetRight","widgetBottom","getScrollTop","scrollTop","getContainerTop","getMousePositionInfo","mousePositionInViewport","containerTop","containerLeft","containerScrollTop","yOffset","xOffset","wRatio","DEFAULT_BODY_COLUMNS_NUMBER","mousePosition","realRelativeMouseLeft","realRelativeMouseTop","realRelativeMouseX","realRelativeMouseY","ratioRelativeMouseLeft","ratioRelativeMouseY","ratioRelativeMouseX","mouseHoveredTopHalf","mouseRealX","clamp","mouseRealY","mouseRealTopHalf","getLeftAndRightLimit","crossingWidgets","defaultLeft","defaultRight","initDefaultLeft","initDefaultRight","widgetLayoutInfo","left","right","getDragResult","relativeMainNode","minWidth","DEFAULT_MIN_COLUMN","finalY","unitWShape","crossingWidgetBottoms","widgetLayout","maxBottomWithCrossingWidget","unitHeightShape","crossWithCursorLeftWidget","leftLimit","rightLimit","minCrossingY","prev","current","_b","maxCrossingBottom","finalYShape","crossingWidgetWithFinalYShape","finalX","finalW","finalShape","crossingWidgetWithFinalShape","minY","clamWidgetShape","isMultiDrag","newW","newX","newY","transWidgetW","originWidth","originUnitW","newUnitW","newColumnNumber","minW","canCrossDifferenceColumnNumber","draggedShapes","sortedLayoutInfoByY","j","getDragPreview","unitW","dragCollectedProps","initialClientOffset","clientOffset","outerContainerElement","outerContainerStyle","outerContainerLeft","draggedComponents","draggedDisplayName","alignTop","dragEffect","unitWWhenDragged","columnNumberWhenDragged","totalScrollTop","canDrop","combineWidget","currentWidgetLayoutInfo","finalEffect","mousePositionInfo","moveEffect","topHalf","currentLayoutInfo","moveEffect2","clamWidgetResult","FocusManager","illaPanelType","clickPosition","changeDisplayNameHelper","independenciesMap","seeds","oldDisplayName","newDisplayName","updateWidgetSlice","updateActionSlice","inDepPath","paths","usedPath","usedPathArray","finalUsedPathArray","finalUsedPath","maybeDynamicStringValue","hasDynamicStringSnippet","newDynamicStringValue","propsPath","seed","isAction","isWidget","changeEventUsedDisplayNameHelper","events","prefix","propsSlice","event","EVENT_ACTION_TYPE","changeEventHandlerReferenceHelper","actionLists","componentMaps","content","successEvent","failedEvent","componentMap","mergeUpdateSlice","updateWidgetSliceMap","updateActionSliceMap","mixedChangeDisplayNameHelper","listenerApi","getInDependenciesMap","getRawTree","updateActionEventSlice","updateWidgetEventSlice","getActionList","getComponentMap","contactedUpdateActionSlices","contactedUpdateWidgetSlice","mergedActionSlice","mergedWidgetSlice","copyWidgetDisplayNameHelper","updatePathsMapValue","getComponentLayoutInfosWithRelativeCombineShape","combineShape","getComponentNodeResultByRelativeCombineShape","relativeInfos","square","clamSquare","canUsedClamSSquareW","clamSquareShape","doPaste","originCopyComponents","oldColumnNumber","sources","newComponents","types","trackInEditor","ILLA_MIXPANEL_EVENT_TYPE","CopyManager","targetAction","getActionMixedList","widgetLayoutInfos","copiedColumnNumber","getCurrentSectionColumnNumberByChildDisplayName","needCopyModalComponents","needCopyComponent","targetNodeParentNode","buildTreeByMapNode","needCopyOtherComponents","copyResult","targetNode","targetLayoutInfo","targetParentNode","prevY","newNode","executionTree","getExecution","currentIndex","leftTopX","leftTopY","containerNode","newParentNodeDisplayName","rawX","rawY","n","ShortCutContext","createContext","getUserPlatform","localStringForPlatform","isMAC","MouseHoverContext","MouseHoverProvider","children","hoverWidgetsRef","useRef","addHoverWidget","widgetDisplayName","currentHoverWidgets","deleteHoverWidget","resetHoverWidget","useMouseHover","hoverContext","handleMouseEnter","currentDisplayName","handleMouseLeave","startDragMultiNodes","dragWidgetInfos","endDragMultiNodes","isDropOnCanvas","isAddAction","dragContainerStyle","DragContainer","canDrag","isEditMode","getIsILLAEditMode","isResizingStateInGlobal","getIsResizing","selectedComponents","getSelectedComponentDisplayNames","dragRef","draggedItem","dropResult","widgetTypes","allWidgetLayoutInfo","draggedSelectedComponents","currentSelectedComponents","SvgDoc","React.createElement","getComponentUsersListContainerStyle","disableMargin","marginStyle","moreIconStyle","globalColor","illaPrefix","listContainerStyle","listItemStyle","listItemContentStyle","listItemNicknameStyle","getDisattachedComponents","currentAttached","currentSelected","updateSelectedComponentUsersHandler","payload","currentAppID","teamID","uid","getCurrentTeamInfo","getTextMessagePayload","TextSignal","TextTarget","clearComponentAttachedUsersHandler","updateCurrentAllComponentsAttachedUsers","currentComponentsAttachedUsers","disattachedComponents","handleClearSelectedComponentExecution","AVATAR_WIDTH","AVATAR_GAP","MIN_DISABLE_MARGIN_WIDTH","MIN_THREE_AVATAR_WIDTH","MIN_THREE_AVATAR_MOVE_BAR_WIDTH","CollaboratorsList","users","currentState","containerWidth","listShow","setListShow","listContainerRef","bounds","useMeasure","t","useTranslation","showMoreIcon","displayDataList","listLength","renderListItem","Fragment","avatar","id","nickname","Avatar","Trigger","MoreIcon","MOVE_BAR_HEIGHT","MIN_MOVE_BAR_WIDTH","MOVE_BAR_SVG_WIDTH","useDisplayNameInMoveBarSelector","executionResult","next","viewList","labelName","warningStyle","applyMoveBarWrapperStyle","maxWidth","isError","isLikeProductionMode","topPosition","borderRadiusStyle","backgroundColorStyle","displayNameContainerStyle","dragPointIconWrapperStyle","moveBarDisplayNameStyle","docIconStyle","docTipsWrapperStyle","WidgetDoc","DocIcon","MoveBar","widgetTop","userList","setCurrentState","containerRef","containerWidthRef","getIsLikeProductMode","displayNameInMoveBar","SCROLL_CONTAINER_PADDING","DragPointIcon","WarningCircleIcon","positionContainerStyle","isSelected","PositionContainer","getDraggingComponentIDs","fixWidgetPosition","nodeShape","minH","useResizeStart","barPosition","useResize","prevEffectedDisplayNamesRef","dragHandlerInfo","currentWidgetSnapShot","scrollContainerDOM","dragResult","useResizingUpdateRealTime","isActive","collectedProps","throttleUpdateComponentPositionByReflow","newItem","snapshotMap","snapShotShape","effectName","updateComponentResizeInfo","parentNodeDOM","canvasRect","canvasTop","canvasLeft","mouseRelativeY","mouseRelativeX","deltaX","deltaY","widgetDeltaTop","widgetDeltaHeight","widgetDeltaLeft","widgetDeltaWidth","resizeEffect","layoutInfoResult","fixedLayoutInfoResult","resizeDiff","resizeResult","applyBarPointerShapeStyle","barPositionStyle","applyBarHandlerStyle","applyBarPointerStyle","isLimitedMode","baseColor","applySquarePointerStyle","pointerPosition","positionStyle","TopLeftResizeHandler","TopRightResizeHandler","BottomLeftResizeHandler","BottomRightResizeHandler","TopResizeHandler","BottomResizeHandler","LeftResizeHandler","RightResizeHandler","ResizeHandler","resizeDirection","RESIZE_DIRECTION","resizingContainerStyle","shapeInfo","borderInfo","width","height","minHeight","isLikProductionMode","hasEditors","isHover","shownDot","getWrapperBorder","resizingPlaceholderStyle","ResizingAndDragContainer","widgetHeight","widgetLeft","widgetWidth","shortcut","isResizingWithOthers","dragShadow","currentWidgetProps","isShownDot","isShowDot","isDraggingStateInGlobal","isAutoLimitedMode","currentUserID","getCurrentUserId","errors","getExecutionError","hasError","keys","resizingIDs","getResizingComponentIDs","isResizingCurrent","isGlobalResizing","hoveredComponents","getHoveredComponents","isMouseOver","attachedUsers","componentsAttachedUsers","handleOnSelection","displayNameMapDepth","getComponentDisplayNameMapDepth","widgetExecutionLayoutInfo","currentSelectedDisplayName","depths","depth","firstParentNode","lastParentNode","currentParentNode","handleContextMenu","Dropdown","DropList","DropListItem","visible","AutoHeightWithLimitedContainer","hoverHotSpotStyle","applyWrapperPendingStyle","isEditor","isLimitedModeAndOverLap","WrapperContainer","isOverLap","getRealShapeAndPosition","componentNode","displayNamePrefix","realDisplayName","propsPositionX","propsPositionY","sharpeW","sharpeH","useGetRealShapeAndPosition","ScaleSquare","top","ScaleSquare$1","getScaleSquareState","getResizeHandler","scaleSquareState","useScaleStateSelector","ModalScaleSquare","scaleState","handleOnResizeStop","dir","delta","finalWidth","finalHeight","handleResizeStart","Resizable","modalstopPropagationContainerStyle","ComponentParser","containerType","dragPreviewStyle","DragPreview","shape","SvgCursor","nickNameContainerStyle","bgColor","applyCursorContainerStyle","color","Cursor","nickName","integerPartX","integerPartY","decimalPartX","decimalPartY","realX","realY","getColorByString","onAnimationComplete","cursorActions","AnimatePresence","motion","CursorIcon","NickNameContainer","FixedCursor","dotLintRectangleStyle","rectangleStyle","fixedPosition","columns","ShadowPreview","landingX","landingY","dragShadowActions","fixedXAndY","DragShadowPreview","dragShadowInfoArray","currentItem","getCursor","getCursorArray","MousePreview","cursorArray","FUNCTION","OBJECT","STRING","OPEN_CLOSED_CHARACTERS","TINY_NUM","__spreadArrays","s","il","r","k","a","jl","isArray","isString","isEqualSeparator","character","separator","isCharacterSpace","isSeparatorSpace","findOpen","openCharacter","texts","openCloseCharacters","isIgnore","findIgnore","findClose","otherText","closeCharacter","_loop_1","nextIndex","find","open","out_i_1","state_1","splitText","text","splitOptions","isSeparateFirst","isSeparateOnlyOpenClose","_c","isSeparateOpenClose","_d","openClosedText","close","regexText","regex","values","tempValues","resetTemp","_loop_2","out_i_2","nextOpenCloseCharacters","state_2","splitSpace","splitComma","splitBracket","matches","splitUnit","unit","camelize","str","all","letter","now","findIndex","arr","callback","defaultIndex","defalutValue","between","min","max","checkBoundSize","targetSize","compareSize","isMax","ratio","size","defaultSize","throttledSize","calculateBoundSize","minSize","maxSize","keepRatio","maxHeight","sum","nums","total","average","getRad","pos1","pos2","distX","distY","rad","getCenterPoint","points","pos","getShapeDirection","center","pos1Rad","pos2Rad","getDist","b","num","reverseUnit","hasClass","className","addClass","addEvent","el","removeEvent","tinyThrottle","isSameConstants","linearConstants1","linearConstants2","v","isSamePoint","point1","point2","getAreaSize","point","nextPoint","fitPoints","rect","getMinMaxs","minX","maxX","maxY","ratioX","ratioY","xs","ys","isInside","excludeLine","xLine","xLinearConstants","getLinearConstants","lines","convertLines","intersectionPosInfos","line","linearConstants","standardPoint","xPoints","getPointsOnLines","getIntersectionPointsByConstants","linePoint","p","intersectionCount","xMap","prevValue","x1","y1","x2","y2","dx","dy","c","a1","b1","c1","a2","b2","c2","isZeroA","isZeroB","results","minMaxs","order","minMax","bottom","pointX","pointY","getOverlapPointInfos","points1","points2","targetPoints1","targetPoints2","lines1","lines2","linearConstantsList1","line1","linearConstantsList2","line2","overlapInfos","linePointInfos","intersectionPoints","isNext","index2","index1","pointMap","getOverlapPoints","infos","__assign","EventEmitter","__proto","eventName","name","_this","resolve","param","isStop","listeners","EventEmitter$1","extendStatics","d","__extends","__","getRotatiion","touches","isMultiTouch","getEventClients","getClients","getClient","isMouseEvent","getPosition","clients","prevClients","startClients","getAverageClient","clientX","clientY","originalClientX","originalClientY","prevX","startX","startY","sumClient","client","ClientStore","isAdd","position","startClient","movement","currentClient","prevClient","INPUT_TAGNAMES","Gesto","_super","targets","isTrusted","container","pinchOutside","preventWheelClick","preventRightClick","preventDefault","checkInput","preventClickEventOnDragStart","preventClickEventOnDrag","preventClickEventByCondition","isTouch","isDragStart","activeElement","tagName","hasInput","hasContentEditable","activeTagName","timer","isScroll","isDrag","clientsLength","currentTime","isDouble","elements","checkWindowBlur","passive_1","isCallDrag","inputEvent","nextClients","currentData","name_1","pinchThreshold","isPinch","isPrevDrag","isFirstDrag","storePosition","passive","Properties","properties","prototype","property","withMethods","methods","duplicate","propertyName","methodName","args","_i","PolyMap","prevIndex","HashMap","SUPPORT_MAP","Link","prevLink","nextLink","link","orderChanged","changed","fixed","fromLinks","toLinks","from","to","_","fromLink","toLink","fromIndex","toIndex","Result","prevList","list","added","removed","maintained","changedBeforeAdded","ordered","pureChanged","fromBefore","toBefore","diff","findKeyCallback","mapClass","prevKeys","prevKeyMap","keyMap","removedMap","addedCount","removedCount","prevListIndex","listIndex","childrenCount","diff$1","getDefaultScrollPosition","checkDefaultScrollEvent","getContainerElement","DragScroll","threshold","_startRect","_startPos","direction","prevScrollPos","throttleTime","nextScrollPos","offsetX","offsetY","nextDirection","getScrollPosition","useScroll","nowTime","distTime","checkScrollEvent","DragScroll$1","createCommonjsModule","fn","module","keycode","exports","keyCode","searchInput","hasKeyCode","names","search","foundNamedKey","codes","aliases","nameOrCode","alias","keycode_4","codeData","keysSort","getKey","keyName","getCombi","getModifierCombi","getArrangeCombi","arrangeKeys","prevScore","nextScore","globalKeyController","KeyController","comb","isToggle","combi","KeyController$1","add","matrix","inverseMatrix","startIndex","fromX","swap","iv","divide","invert","newMatrix","createIdentityMatrix","identityIndex","targetStartIndex","targetIndex","multiply","matrix2","m","l","calculate","rotateX3d","rotateY3d","rotateZ3d","createRotateMatrix","scale3d","sx","sy","sz","translate3d","tx","ty","tz","matrix3d","matrix1","cos","sin","createMatrix","parseMat","transform","toMat","parse","calculateMatrixDist","getDistElementMatrix","matrixInfos","matrixFunction","functionValue","transforms","functionName","posX","posY","posZ","_e","_f","_g","_h","unitValue","hash","stringHash","getHash","getShadowRoot","parentElement","rootNode","replaceStyle","selector","trimmedSelector","subSelector","trimmedSubSelector","injectStyle","shadowRoot","style","styled","injectClassName","injectCount","injectElement","firstMount","styleElement","__rest","__decorate","decorators","desc","__spreadArray","pack","ar","touch","filterDuplicated","map","elementFromPoint","createElement","prevTarget","tag","attributes","elChildren","child","elStyle","attrs","diffValue","func","getRect","boundArea","nextHeight","nextWidth","getDefaultElementRect","passTargets","beforeTargets","afterTargets","continueSelectWithoutDeselect","getLineSize","injector","CLASS_NAME","PROPERTIES","OPTIONS","EVENTS","METHODS","Selecto","clickedTarget","selectFromInside","selectByClick","rootContainer","boundContainer","preventDragFromInside","clickBySelectEnd","dragCondition","containerRect","boundInfo","boundElement","rectElement","hitRect","firstPassedTargets","pointTarget","hasInsideTargets","isPreventSelect","offsetPos","scrollOptions","innerScrollOptions","isInnerScroll","inputEvent_1","innerScrollElement","overflow","hasScrollOptions","selectFlag","isKeyDown","isKeyUp","dragContainer","containers","portalContainer","selectedTargets","beforeSelected","selectedElements","startPoint","endPoint","mousedown","mousemove","mouseup","gesto","getElementRect","selectableElements","selectableTargets","selectablePoints","hasIndexesMap","parentMap_1","parents","prevParentElement","dragEvent","keyContainer","toggleContinueSelect","toggleContinueSelectWithoutDeselect","continueSelect","selectRect","gestoEvent","hitRate","innerGroups","innerWidth","innerHeight","ignoreClick","rectPoints","hitRateValue","isHit","inArea","overlapPoints","overlapSize","rate","selectableInners","yGroups","group","inner","isMoveInnerScroll","parentMap_2","parentInfo","scrollContainer","containerInfo","isStart","startSelectedTargets","startPassedTargets","afterAdded","afterRemoved","afterPrevList","afterList","containerX","containerY","scaleMatrix","offsetSize","passedTargets","isKeyup","nextKeys","toggleKeys","singleKey_1","innerScrollContainer_1","parentMap_3","innerScrollPathsList","innerScrollPaths","isAlwaysTrue","selectablePoints_1","groups_1","getter","setter","Selecto$1","VanillaSelecto","REACT_EVENTS","selfProps","prevProps","selecto","PureComponent","transSelectableComponentPointsToIllAPosition","MultiSelectCanvas","scrollContainerRef","canvasNodeDisplayName","containerClientRect","selectStartPositionRef","prevSelectedComponent","prevSelectorStatus","prevContainerScrollTop","startScrollTop","selectoRef","isProductionMode","getIsILLAProductMode","onScrollHandler","dragConditionHandler","onDragStartHandler","currentCanvasStyle","onDraggingHandler","currentY","startAndDraggingDiff","currentHeight","currentXOrigin","currentYOrigin","updatedSelectedComponents","targetOriginPoints","targetPoints","isEqual","onDragEndHandler","containerRefValue","scrollHandler","getLargeItemShapeWithNodeScale","applyMultiSelectedScaleSquareStyle","MultiSelectedScaleSquare","containerDisplayName","widgetExecutionResult","selectedComponentsWithShape","componentDisplayName","isSameParentNode","scaleItem","MouseMoveContext","MouseMoveProvider","getMouseRealPosition","clientOffSet","getMouseRelativePosition","canvasPosition","getMousePositionWithIllaUnit","relativePosition","useMousePositionAsync","isRoot","wrapperRef","params","useParams","userInfo","useWindowSize","cursorPositionRef","mouseMoveContext","mouseEnterHandler","mouseLeaveHandler","mouseMoveAsyncHandler","containerPosition","xInteger","xMod","yInteger","yMod","visibilityChangeHandler","pageHideHandler","wrapperNode","getLayoutInfosWithRelativeCombineShape","emptyStateStyle","applyEmptyStateWrapperStyle","isInner","paddingTopBottom","applyContainerWrapperStyle","ContainerEmptyState","handleUpdateHeight","containerPadding","paddings","getPaddingShape","useAutoUpdateCanvasHeight","containerDom","enable","observerRef","entries","outerComponentCanvasContainerStyle","padding","background","shadowSize","dividerColor","paddingTop","paddingBottom","paddingLeft","paddingRight","getShadowStyle","outerModalCanvasContainerStyle","outerComponentCanvasContainerWithJsonStyle","componentCanvasContainerStyle","containerShapeStyle","BORDER_WIDTH","dropZoneStyle","canvasHeight","applyComponentCanvasStyle","showDot","applyDotBackgroundStyle","normalCanvasBackgroundStyle","selectoSelectionStyle","maskStyle","RenderComponentCanvasContainer","isRootCanvas","canResizeCanvas","safeRowNumber","SAFE_ROWS","firstDragRef","dragStartScrollTop","scrollContainerScrollTop","currentPageDisplayName","getCurrentPageDisplayName","canvasRef","messageHandler","useMessage","innerCanvasRef","fixedBounds","canShowDot","setCanvasHeight","childWidgetLayoutInfo","isDraggingGlobal","isResizingGlobal","isLikeProductMode","dropRef","dropItem","didDrop","originParentNode","hasTable","components","isListChildrenCanvas","childDisplayNames","dropResultShape","columnNumberWhenDrag","columnNumberWhenDrop","newComponentNode","newGenerateComponentNode","updateSlices","autoScrollTimeID","autoScroll","isDraggingOver","prevMaxHeight","innerCanvasDOM","innerCanvasDOMRect","ADD_ROWS","canvasUpdateHeightHandler","handleClickOnCanvas","maxRightBottomX","maxRightBottomY","nodeName","childName"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,91,92,93,94,95,96,97,98,99,100,101,102,103,104]}