import{o as u,k as n,F as m,S as k,l as w,m as F,be as re}from"./@illa-design-1f43bb6c.js";import{u as d,eH as r,i5 as N,b as P,bA as M,hW as ce,i6 as A,i7 as b,i8 as C,i9 as f,fv as se,e as pe,be as R,ia as de,ib as ue}from"./index-4dce6ee8.js";import{r as _}from"./react-9b7e00e3.js";import{I as c}from"./index-2c4267bb.js";import{C as U,a as O,b as V}from"./index-03ca7e7b.js";import{d as he,e as Te,f as be,g as Ce,a as B,c as ye,b as me,h as ge,i as Ee}from"./style-f068f7a5.js";import{u as fe,C as _e}from"./style-af69883e.js";import{R as ve}from"./index-5b916626.js";import{a as I}from"./@emotion-08a6282b.js";import{S as L}from"./index-01ad6233.js";import{T as Se}from"./index-cd7c17cc.js";import"./codeMirror-vendor-320207e2.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";import"./index-b9f5fd51.js";import"./index-6f32d056.js";import"./index-5be17f9b.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./hook-302a78fc.js";import"./renderComponentCanvasContainer-2e4cd54a.js";import"./style-49f23046.js";import"./index-d48f7e94.js";import"./index-cf2bb556.js";import"./index-2fdfc937.js";import"./layoutInfoListener-bd63c738.js";import"./drive-584d85d3.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./popper-a04e2b11.js";import"./objectWithoutPropertiesLoose-e3246981.js";import"./clsx-06f54762.js";import"./index-934389e2.js";import"./style-51b259bb.js";const j=i=>{const{t:a}=d(),{handleValueChange:t}=i,o=i.options;return u(m,{children:[n(c,{title:a("editor.action.panel.firebase.database_ref"),value:o.ref,onChange:e=>t(e,"ref"),expectedType:r.STRING}),n(c,{title:a("editor.action.panel.firebase.object_to_set"),value:o.object,onChange:e=>t(e,"object"),expectedType:r.OBJECT})]})};j.displayName="AppendDataToListPart";const Y=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return n(c,{lineNumbers:!0,style:{height:"88px"},title:a("editor.action.panel.firebase.user_object"),value:t.object,onChange:e=>o(e,"object"),expectedType:r.OBJECT})};Y.displayName="CreateOneUserPart";const v=i=>{const{t:a}=d(),{handleValueChange:t,collectionType:o,value:e}=i,E=o===N.DROPDOWN,T=P(M),[g,y]=_.useState([]),h=_.useCallback(()=>{const s=E?N.RAW:N.DROPDOWN;t(s,"collectionType")},[t,E]),l=s=>t(s,"collection");return _.useEffect(()=>{T.resourceID!=null&&ce(T.resourceID).then(({data:s})=>{let p=[];s.Schema&&(p=s.Schema.collections||[]),y(p)})},[T.resourceID]),u("div",{css:he,children:[u("span",{css:Te,children:[a("editor.action.panel.firebase.collection"),n("span",{css:be,onClick:h,children:a(E?"editor.action.panel.firebase.use_raw_id":"editor.action.panel.firebase.use_a_dropdown")})]}),E?n(k,{colorScheme:"techPurple",showSearch:!0,defaultValue:e,value:e,ml:"16px",w:"100%",placeholder:a("editor.action.panel.firebase.placeholder.select_collection"),onChange:s=>{l(s)},options:g}):n("div",{css:Ce,children:n(U,{value:e,singleLine:!0,onChange:l,expectValueType:r.STRING,lang:O.JAVASCRIPT,codeType:V.EXPRESSION,canShowCompleteInfo:!0,placeholder:a("editor.action.panel.firebase.placeholder.input_collection")})})]})};v.displayName="CollectionInput";const Q=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return u(m,{children:[n(v,{handleValueChange:o,value:t.collection,collectionType:t.collectionType}),n(c,{title:a("editor.action.panel.firebase.document_id"),value:t.id,onChange:e=>o(e,"id"),expectedType:r.STRING})]})};Q.displayName="DeleteOneDocumentPart";const J=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return n(c,{title:a("editor.action.panel.firebase.uid"),value:t.filter,onChange:e=>o(e,"filter"),expectedType:r.STRING})};J.displayName="DeleteOneUserPart";const W=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return n(c,{title:a("editor.action.panel.firebase.parent_document_id"),value:t.parent,onChange:e=>o(e,"parent"),expectedType:r.STRING,tips:a("editor.action.panel.firebase.tips.parent_document_id_tips")})};W.displayName="GetCollectionsPart";const H=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return u(m,{children:[n(v,{handleValueChange:o,value:t.collection,collectionType:t.collectionType}),n(c,{title:a("editor.action.panel.firebase.document_id"),value:t.id,onChange:e=>o(e,"id"),expectedType:r.STRING})]})};H.displayName="GetDocumentByIDPart";const $=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return n(c,{title:a("editor.action.panel.firebase.email"),value:t.filter,onChange:e=>o(e,"filter"),expectedType:r.STRING})};$.displayName="GetUserByEmailPart";const X=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return n(c,{title:a("editor.action.panel.firebase.uid"),value:t.filter,onChange:e=>o(e,"filter"),expectedType:r.STRING})};X.displayName="GetUserByIDPart";const z=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return n(c,{title:a("editor.action.panel.firebase.phone_number"),value:t.filter,onChange:e=>o(e,"filter"),expectedType:r.STRING})};z.displayName="GetUserByPhonePart";const K=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return u(m,{children:[n(v,{handleValueChange:o,value:t.collection,collectionType:t.collectionType}),n(c,{title:a("editor.action.panel.firebase.document_id"),value:t.id,onChange:e=>o(e,"id"),expectedType:r.STRING,tips:a("editor.action.panel.firebase.tips.document_id")}),n(c,{title:a("editor.action.panel.firebase.value"),value:t.value,onChange:e=>o(e,"value"),expectedType:r.OBJECT,placeholder:a("editor.action.panel.firebase.placeholder.document_value")})]})};K.displayName="InsertDocumentPart";const q=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return u(m,{children:[n(c,{title:a("editor.action.panel.firebase.len_of_list"),value:t.number,onChange:e=>o(e,"number"),expectedType:r.NUMBER,placeholder:"{{1000}}"}),n(c,{title:a("editor.action.panel.firebase.next_page_token"),value:t.token,onChange:e=>o(e,"token"),expectedType:r.STRING})]})};q.displayName="ListUsersPart";const Ae=[{label:"==",value:"=="},{label:">",value:">"},{label:"<",value:"<"},{label:"<=",value:"<="},{label:">=",value:">="},{label:"contains",value:"array-contains"},{label:"in",value:"in"},{label:"array contains any",value:"array-contains-any"}],G=i=>{const{t:a}=d(),{defaultValue:t,handleValueChange:o,name:e}=i,{control:E,getValues:T}=fe({mode:"onChange",shouldUnregister:!0}),g=_.useCallback((y,h,l,s,p)=>{let S=[...T()[e]];const le=s||S[y].condition||"";S[y]={field:h,value:l,condition:le},p(S),o(S,"where")},[o,T,e]);return n(_e,{control:E,defaultValue:t,render:({field:{value:y,onChange:h}})=>n(ve,{label:a("editor.action.panel.firebase.where"),records:y,customRender:(l,s)=>u(m,{children:[n("div",{css:B,children:n(U,{value:l.field,singleLine:!0,onChange:p=>{g(s,p,l.value,l.operation,h)},wrapperCss:ye,expectValueType:r.STRING,lang:O.JAVASCRIPT,codeType:V.EXPRESSION,canShowCompleteInfo:!0,placeholder:"field"})}),n(k,{colorScheme:"techPurple",showSearch:!0,defaultValue:l.condition,value:l.condition,w:"0",ml:"-1px",mr:"-1px",bdRadius:"0",flexGrow:"1",onChange:p=>g(s,l.field,l.value,p,h),options:Ae}),n("div",{css:B,children:n(U,{singleLine:!0,value:l.value,onChange:p=>{g(s,l.field,p,l.condition,h)},wrapperCss:me,lang:O.JAVASCRIPT,codeType:V.EXPRESSION,canShowCompleteInfo:!0,placeholder:"value"})})]}),onAdd:()=>{h([...y,{field:"",value:"",condition:""}])},onDelete:(l,s)=>{let p=[...y];p.splice(l,1),p.length===0&&(p=[{field:"",value:"",condition:""}]),h(p)},onChangeKey:(l,s,p)=>g(l,s,p,"",h),onChangeValue:(l,s,p)=>g(l,s,p,"",h)}),name:e})};G.displayName="CollectionRecordEditor";const xe=I`
  min-width: 160px;
  font-size: 14px;
  font-weight: 500;
  text-align: right;
  color: ${w(`--${F}-grayBlue-02`)};
  height: 30px;
  display: flex;
  flex-direction: row;
  justify-content: end;
  align-items: center;
  align-self: start;
`,Ie=I`
  min-width: 160px;
  font-size: 14px;
  line-height: 22px;
  font-weight: 500;
  margin-left: 10px;
  text-align: left;
  color: ${w(`--${F}-grayBlue-02`)};
`,De=I`
  display: flex;
  flex-direction: row;
  align-items: center;
  min-height: 30px;
  padding: 0 16px;
`,Ne=I`
  min-height: 22px;
  align-self: flex-start;
  display: flex;
  align-items: center;
`,x=i=>{const{onCheckboxChange:a,onValueChange:t,checkboxTitle:o,checkboxValue:e,inputTitle:E,inputValue:T,inputPlaceholder:g,inputTips:y,showInputEditor:h=!0,hasExpectedType:l=!0,expectedType:s=r.STRING}=i;return u(m,{children:[u("div",{css:De,children:[n("span",{css:xe}),u("div",{css:Ne,children:[n(re,{colorScheme:"techPurple",checked:e,ml:"16px",onChange:a}),n("span",{css:Ie,children:o})]})]}),e&&h&&n(c,{title:E,value:T,onChange:t,hasExpectedType:l,expectedType:s,tips:y,placeholder:g})]})};x.displayName="CheckboxInput";const Z=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return u(m,{children:[n(v,{handleValueChange:o,value:t.collection,collectionType:t.collectionType}),n(G,{name:"where",handleValueChange:o,defaultValue:t.where}),n(c,{title:a("editor.action.panel.firebase.limit"),value:t.limit,onChange:e=>o(e,"limit"),expectedType:r.NUMBER}),n(c,{title:a("editor.action.panel.firebase.order_by"),value:t.orderBy,onChange:e=>o(e,"orderBy"),expectedType:r.STRING}),n(c,{title:a("editor.action.panel.firebase.ordering_direction"),value:t.orderDirection,onChange:e=>o(e,"orderDirection"),expectedType:r.STRING,placeholder:a("editor.action.panel.firebase.placeholder.asc")}),n(x,{checkboxTitle:a("editor.action.panel.firebase.use_start_at"),checkboxValue:t.startAt.trigger,onCheckboxChange:e=>o({value:t.startAt.value,trigger:e},"startAt"),inputTitle:a("editor.action.panel.firebase.start_at"),inputValue:t.startAt.value,onValueChange:e=>o({trigger:t.startAt.trigger,value:e},"startAt"),hasExpectedType:!1}),n(x,{checkboxTitle:a("editor.action.panel.firebase.use_end_at"),checkboxValue:t.endAt.trigger,onCheckboxChange:e=>o({value:t.endAt.value,trigger:e},"endAt"),inputTitle:a("editor.action.panel.firebase.end_at"),inputValue:t.endAt.value,onValueChange:e=>o({trigger:t.endAt.trigger,value:e},"endAt"),hasExpectedType:!1})]})};Z.displayName="QueryCollectionGroupPart";const ee=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return n(c,{title:a("editor.action.panel.firebase.database_ref"),value:t.ref,onChange:e=>o(e,"ref"),expectedType:r.STRING})};ee.displayName="QueryDatabasePart";const te=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return u(m,{children:[n(v,{handleValueChange:o,value:t.collection,collectionType:t.collectionType}),n(G,{name:"where",handleValueChange:o,defaultValue:t.where}),n(c,{title:a("editor.action.panel.firebase.limit"),value:t.limit,onChange:e=>o(e,"limit"),expectedType:r.NUMBER}),n(c,{title:a("editor.action.panel.firebase.order_by"),value:t.orderBy,onChange:e=>o(e,"orderBy"),expectedType:r.STRING}),n(c,{title:a("editor.action.panel.firebase.ordering_direction"),value:t.orderDirection,onChange:e=>o(e,"orderDirection"),expectedType:r.STRING,placeholder:a("editor.action.panel.firebase.placeholder.asc")}),u("div",{css:ge,children:[n(x,{checkboxTitle:a("editor.action.panel.firebase.use_start_at"),checkboxValue:t.startAt.trigger,onCheckboxChange:e=>o({value:t.startAt.value,trigger:e},"startAt"),inputTitle:a("editor.action.panel.firebase.start_at"),inputValue:t.startAt.value,onValueChange:e=>o({trigger:t.startAt.trigger,value:e},"startAt"),hasExpectedType:!1}),n(x,{checkboxTitle:a("editor.action.panel.firebase.use_end_at"),checkboxValue:t.endAt.trigger,onCheckboxChange:e=>o({value:t.endAt.value,trigger:e},"endAt"),inputTitle:a("editor.action.panel.firebase.end_at"),inputValue:t.endAt.value,onValueChange:e=>o({trigger:t.endAt.trigger,value:e},"endAt"),hasExpectedType:!1})]})]})};te.displayName="QueryFirebasePart";const ae=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return u(m,{children:[n(c,{title:a("editor.action.panel.firebase.database_ref"),value:t.ref,onChange:e=>o(e,"ref"),expectedType:r.STRING}),n(c,{title:a("editor.action.panel.firebase.object_to_set"),value:t.object,onChange:e=>o(e,"object"),expectedType:r.OBJECT})]})};ae.displayName="SetDataPart";const ne=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return u(m,{children:[n(c,{title:a("editor.action.panel.firebase.database_ref"),value:t.ref,onChange:e=>o(e,"ref"),expectedType:r.STRING}),n(c,{title:a("editor.action.panel.firebase.object_to_set"),value:t.object,onChange:e=>o(e,"object"),expectedType:r.OBJECT})]})};ne.displayName="UpdateDataPart";const oe=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return u(m,{children:[n(v,{handleValueChange:o,value:t.collection,collectionType:t.collectionType}),n(c,{title:a("editor.action.panel.firebase.document_id"),value:t.id,onChange:e=>o(e,"id"),expectedType:r.STRING}),n(c,{title:a("editor.action.panel.firebase.value"),value:t.value,onChange:e=>o(e,"value"),expectedType:r.OBJECT})]})};oe.displayName="UpdateDocumentPart";const ie=i=>{const{t:a}=d(),t=i.options,{handleValueChange:o}=i;return u(m,{children:[n(c,{title:a("editor.action.panel.firebase.uid"),value:t.uid,onChange:e=>o(e,"uid"),expectedType:r.STRING}),n(c,{lineNumbers:!0,style:{height:"88px"},title:a("editor.action.panel.firebase.user_object"),value:t.object,onChange:e=>o(e,"object"),expectedType:r.OBJECT})]})};ie.displayName="UpdateOneUserPart";const Re=[{label:"Firebase Auth",value:A.AUTH},{label:"Firestore",value:A.FIRESTORE},{label:"Realtime Database",value:A.REALTIME}],Pe=[{label:"Query Firebase",value:b.QUERY_FIREBASE},{label:"Insert Document",value:b.INSERT_DOCUMENT},{label:"Update Document",value:b.UPDATE_DOCUMENT},{label:"Get Document by ID",value:b.GET_DOCUMENT_BY_ID},{label:"Delete a Document",value:b.DELETE_ONE_DOCUMENT},{label:"Get Collections",value:b.GET_COLLECTIONS},{label:"Query Collection Group",value:b.QUERY_COLLECTION_GROUP}],Ue=[{label:"Get user by UID",value:C.GET_USER_BY_UID},{label:"Get user by email",value:C.GET_USER_BY_EMAIL},{label:"Get user by phone number",value:C.GET_USER_BY_PHONE},{label:"Create a user",value:C.CREATE_ONE_USER},{label:"Update a user",value:C.UPDATE_ONE_USER},{label:"Delete a user",value:C.DELETE_ONE_USER},{label:"List users",value:C.LIST_USERS}],Oe=[{label:"Query database",value:f.QUERY_DATABASE},{label:"Set data",value:f.SET_DATA},{label:"Update data",value:f.UPDATE_DATA},{label:"Append data to a list",value:f.APPEND_DATA_TO_LIST}],Ve={[A.AUTH]:Ue,[A.FIRESTORE]:Pe,[A.REALTIME]:Oe},Ge=()=>{const{t:i}=d(),a=P(M),o=P(se).content,e=a.content,E=e.options,T=pe(),g=_.useCallback(l=>s=>{const p=s;switch(l){case"operation":let D=ue[p];e.service===o.service&&o.operation===p&&(D=o.options),T(R.updateCachedAction({...a,content:{...a.content,operation:p,options:D}}));break;case"service":const S=de[p];T(R.updateCachedAction({...a,content:{operation:"",service:p,options:S}}))}},[T,a,e,o]),y=_.useCallback((l,s)=>{T(R.updateCachedAction({...a,content:{...a.content,options:{...E,[s]:l}}}))},[T,a,E]),h=_.useMemo(()=>{const l={options:e.options,handleValueChange:y};switch(e.operation){case C.GET_USER_BY_UID:return n(X,{...l});case C.DELETE_ONE_USER:return n(J,{...l});case C.GET_USER_BY_EMAIL:return n($,{...l});case C.GET_USER_BY_PHONE:return n(z,{...l});case C.CREATE_ONE_USER:return n(Y,{...l});case C.UPDATE_ONE_USER:return n(ie,{...l});case C.LIST_USERS:return n(q,{...l});case b.QUERY_FIREBASE:return n(te,{...l});case b.INSERT_DOCUMENT:return n(K,{...l});case b.UPDATE_DOCUMENT:return n(oe,{...l});case b.GET_DOCUMENT_BY_ID:return n(H,{...l});case b.DELETE_ONE_DOCUMENT:return n(Q,{...l});case b.GET_COLLECTIONS:return n(W,{...l});case b.QUERY_COLLECTION_GROUP:return n(Z,{...l});case f.QUERY_DATABASE:return n(ee,{...l});case f.SET_DATA:return n(ae,{...l});case f.UPDATE_DATA:return n(ne,{...l});case f.APPEND_DATA_TO_LIST:return n(j,{...l})}},[e.operation,e.options,y]);return u("div",{css:Ee,children:[n(L,{title:i("editor.action.panel.firebase.service_type"),componentType:"select",value:e.service,showSearch:!0,options:Re,onSelectedValueChange:g("service")}),n(L,{title:i("editor.action.panel.firebase.action_type"),componentType:"select",showSearch:!0,value:e.operation,placeholder:i("editor.action.panel.firebase.placeholder.select_an_action"),options:Ve[e.service],onSelectedValueChange:g("operation")}),h,n(Se,{})]})};Ge.displayName="FirebasePanel";export{Ge as default};
//# sourceMappingURL=index-60d7f1b1.js.map
