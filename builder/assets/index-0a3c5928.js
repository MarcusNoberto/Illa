import{k as a,o as p,D as g,n as f,aY as D,B as Q,bd as j,F as A}from"./@illa-design-1f43bb6c.js";import{u as F,gE as U,gF as M,gG as u,gJ as q,d6 as J,gI as k,gH as H,gM as P}from"./index-4dce6ee8.js";import{r as w}from"./react-9b7e00e3.js";import{c as G,C as s,o as y,f as z,l as K,b as Z,h as S}from"./style-49dd2bac.js";import"./@emotion-08a6282b.js";import"./codeMirror-vendor-320207e2.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";const Y=`-----BEGIN CERTIFICATE-----
MIIFazCCA1OgAwIBAgIRAIIQz7DSQONZRGPgu2OCiwAwDQYJKoZIhvcNAQELBQAw
TzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh
cmNoIEdyb3VwMRUwEwYDVQQDEwxJU1JHIFJvb3QgWDEwHhcNMTUwNjA0MTEwNDM4
WhcNMzUwNjA0MTEwNDM4WjBPMQswCQYDVQQGEwJVUzEpMCcGA1UEChMgSW50ZXJu
ZXQgU2VjdXJpdHkgUmVzZWFyY2ggR3JvdXAxFTATBgNVBAMTDElTUkcgUm9vdCBY
MTCCAiIwDQYJKoZIhvcNAQEBBQADggIPADCCAgoCggIBAK3oJHP0FDfzm54rVygc
h77ct984kIxuPOZXoHj3dcKi/vVqbvYATyjb3miGbESTtrFj/RQSa78f0uoxmyF+
0TM8ukj13Xnfs7j/EvEhmkvBioZxaUpmZmyPfjxwv60pIgbz5MDmgK7iS4+3mX6U
A5/TR5d8mUgjU+g4rk8Kb4Mu0UlXjIB0ttov0DiNewNwIRt18jA8+o+u3dpjq+sW
T8KOEUt+zwvo/7V3LvSye0rgTBIlDHCNAymg4VMk7BPZ7hm/ELNKjD+Jo2FR3qyH
B5T0Y3HsLuJvW5iB4YlcNHlsdu87kGJ55tukmi8mxdAQ4Q7e2RCOFvu396j3x+UC
B5iPNgiV5+I3lg02dZ77DnKxHZu8A/lJBdiB3QW0KtZB6awBdpUKD9jf1b0SHzUv
KBds0pjBqAlkd25HN7rOrFleaJ1/ctaJxQZBKT5ZPt0m9STJEadao0xAH0ahmbWn
OlFuhjuefXKnEgV4We0+UXgVCwOPjdAvBbI+e0ocS3MFEvzG6uBQE3xDk3SzynTn
jh8BCNAw1FtxNrQHusEwMFxIt4I7mKZ9YIqioymCzLq9gwQbooMDQaHWBfEbwrbw
qHyGO0aoSCqI3Haadr8faqU9GY/rOPNk3sgrDQoo//fb4hVC1CLQJ13hef4Y53CI
rU7m2Ys6xt0nUW7/vGT1M0NPAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIBBjAPBgNV
HRMBAf8EBTADAQH/MB0GA1UdDgQWBBR5tFnme7bl5AFzgAiIyBpY9umbbjANBgkq
hkiG9w0BAQsFAAOCAgEAVR9YqbyyqFDQDLHYGmkgJykIrGF1XIpu+ILlaS/V9lZL
ubhzEFnTIZd+50xx+7LSYK05qAvqFyFWhfFQDlnrzuBZ6brJFe+GnY+EgPbk6ZGQ
3BebYhtF8GaV0nxvwuo77x/Py9auJ/GpsMiu/X1+mvoiBOv/2X/qkSsisRcOj/KK
NFtY2PwByVS5uCbMiogziUwthDyC3+6WVwW6LLv3xLfHTjuCvjHIInNzktHCgKQ5
ORAzI4JMPJ+GslWYHb4phowim57iaztXOoJwTdwJx4nLCgdNbOhdjsnvzqvHu7Ur
TkXWStAmzOVyyghqpZXjFaH3pO3JLF+l+/+sKAIuvtd7u+Nxe5AW0wdeRlN8NwdC
jNPElpzVmbUq4JUagEiuTDkHzsxHpFKVK7q4+63SM1N95R1NbdWhscdCb+ZAJzVc
oyi3B43njTOQ5yOf+1CceWxG1bQVs5ZufpsMljq4Ui0/1lvh+wjChP4kqKOJ2qxq
4RgqsahDYVvTH9w7jXbyLeiNdd8XM2w9U/t7y0Ff/9yi0GE44Za4rF2LN9d11TPA
mRGunUHBcnWEvgJBQl9nJEiU0Zsnvgc/ubhPgXRR4Xq37Z0j4r7g1SgEEzwxA57d
emyPxgcYxn/eR44/KJ4EBs+lVDR3veyJm+kXQ99b21/+jh5Xos1AnX5iItreGCc=
-----END CERTIFICATE-----`,C=n=>{switch(n){case"hydra":case"postgresql":case"supabasedb":return"5432";case"mysql":case"mariadb":return"3306";case"tidb":return"4000";default:return"3306"}},x=n=>/^(.*):\/\/(.*):(.*)@(.*?)(?::(\d+))?\/(.*)$/.test(n);function L(n){const o=/^(.*):\/\/(.*):(.*)@(.*?)(?::(\d+))?\/(.*)$/,l=n.match(o);if(l)return{databaseUsername:l[2],databasePassword:l[3],host:l[4],port:l[5]??80,databaseName:l[6]}}const X=n=>{const{resourceType:o,resourceID:l}=n,{t}=F(),{control:r,setValue:c,watch:m}=U(),{getResourceByID:B}=w.useContext(M),e=B(l),b=(e==null?void 0:e.content.ssl.ssl)??(o==="tidb"||o==="hydra"),E=(e==null?void 0:e.content.ssl.serverCert)??(o==="tidb"||o==="hydra"?Y:""),I=w.useMemo(()=>o==="tidb"||o==="hydra"?a(H,{i18nKey:"editor.action.form.tips.tidb.ca_certificate",t,components:[a(k,{onClick:()=>{o==="tidb"?window.open("https://docs.pingcap.com/tidbcloud/tidb-cloud-tls-connect-to-dedicated-tier","_blank"):o==="hydra"&&window.open("https://docs.hydra.so/cloud-warehouse-operations/tls","_blank")}},"ca-link")]}):"",[o,t]),V=m("host"),v=P(V??""),T=m("ssl",b);return a(A,{children:p("div",{css:G,children:[a(s,{controlledType:"input",isRequired:!0,title:t("editor.action.resource.db.label.name"),control:r,defaultValue:(e==null?void 0:e.resourceName)??"",rules:[{validate:u}],placeholders:[t("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:t("editor.action.resource.restapi.tip.name")}),a(g,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),a("div",{css:y,children:t("editor.action.resource.db.title.general_option")}),a(q,{control:r,defaultValue:"",rules:{required:!1},render:({field:{value:d,onChange:h,onBlur:N}})=>p("div",{css:z,children:[a("div",{css:K,children:a("span",{css:Z(f("grayBlue","02")),children:t("editor.action.form.option.neon.connection_string")})}),p("div",{css:S,children:[a(D,{onBlur:N,onChange:h,error:!x(d)&&d!=="",value:d,colorScheme:"techPurple",placeholder:"xxxxxx://myuser:mypassword@localhost:5432/mydb"}),a(Q,{disabled:!x(d),onClick:()=>{const i=L(d);i!==void 0&&(c("host",i.host),c("port",i.port),c("databaseName",i.databaseName),c("databaseUsername",i.databaseUsername),c("databasePassword",i.databasePassword),h(""))},colorScheme:"techPurple",h:"32px",children:t("editor.action.form.option.neon.parse")})]})]}),name:"connectionString"}),a(s,{title:t("editor.action.resource.db.label.hostname_port"),defaultValue:[e==null?void 0:e.content.host,(e==null?void 0:e.content.port)??C(o)],name:["host","port"],controlledType:["input","number"],control:r,isRequired:!0,rules:[{validate:u},{required:!0}],styles:[{flex:4},{flex:1}],placeholders:[t("editor.action.resource.db.placeholder.hostname"),C(o)]}),v&&a(s,{defaultValue:"",name:"",title:"",controlledType:"none",control:r,tips:a(j,{title:t("editor.action.form.tips.connect_to_local.title.tips"),closable:!1,content:t("editor.action.form.tips.connect_to_local.selfhost")})}),a(s,{title:t("editor.action.resource.db.label.database"),defaultValue:e==null?void 0:e.content.databaseName,name:"databaseName",controlledType:"input",control:r,isRequired:!0,rules:[{validate:u}],placeholders:[t("editor.action.resource.db.placeholder.database")]}),a(s,{title:t("editor.action.resource.db.label.username_password"),defaultValue:[e==null?void 0:e.content.databaseUsername,e==null?void 0:e.content.databasePassword],name:["databaseUsername","databasePassword"],controlledType:["input","password"],control:r,isRequired:!0,rules:[{validate:u},{required:!0}],placeholders:[t("editor.action.resource.db.placeholder.username"),t("editor.action.resource.db.placeholder.password")]}),J,a(g,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),a("div",{css:y,children:t("editor.action.resource.db.title.advanced_option")}),a(s,{controlledType:["switch"],title:t("editor.action.resource.db.label.ssl_options"),control:r,defaultValue:b,name:"ssl",contentLabel:t("editor.action.resource.db.tip.ssl_options")}),T&&p(A,{children:[a(s,{controlledType:["textarea"],title:t("editor.action.resource.db.label.ca_certificate"),isRequired:!0,rules:[{validate:u}],control:r,defaultValue:E,name:"serverCert",placeholders:[t("editor.action.resource.db.placeholder.certificate")],tips:I}),a(s,{controlledType:["textarea"],title:t("editor.action.resource.db.label.client_key"),control:r,defaultValue:e==null?void 0:e.content.ssl.clientKey,name:"clientKey",placeholders:[t("editor.action.resource.db.placeholder.certificate")]}),a(s,{controlledType:["textarea"],title:t("editor.action.resource.db.label.client_certificate"),control:r,defaultValue:e==null?void 0:e.content.ssl.clientCert,name:"clientCert",placeholders:[t("editor.action.resource.db.placeholder.certificate")]})]})]})})};X.displayName="MysqlConfigElement";export{X as default};
//# sourceMappingURL=index-0a3c5928.js.map
