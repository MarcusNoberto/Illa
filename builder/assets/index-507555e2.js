import{v as w,k as t,o as I,a3 as E,a5 as L,a6 as O,J as B,T as V,cs as v,aW as $,O as U}from"./@illa-design-402f214a.js";import{r as c}from"./react-9b7e00e3.js";import{d as K,l as M,m as R,a as T,i as W,b as f,o as j,e as q,r as g,c as G,h as H,L as J,f as X,g as z}from"./style-65ce7107.js";import{gX as F,u as A,eo as Q}from"./index-2f1869ab.js";import{i as S}from"./lodash-lib-6e94956b.js";import"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./react-icons-vendor-2430ea65.js";const N=()=>`column-${w()}`,Y=n=>{const s=N();return{...F,custom:!0,header:`Column ${n}`,id:s,accessorKey:s,columnIndex:n-1}},b=c.createContext({}),P=n=>{const{columnItems:s,attrPath:a,handleUpdateDsl:e}=n,i=c.useCallback(r=>{const o=s.filter((p,d)=>d!==r);e(a,o)},[s,e,a]),m=c.useCallback(r=>{let o=s.find((d,C)=>C===r);if(!o)return;o={...o,accessorKey:N()};const p=[...s,o];e(a,p)},[s,e,a]),l=c.useCallback((r,o)=>{const p=s[r],d=[...s];d.splice(r,1),d.splice(o,0,p),e(a,d)},[a,s,e]),h=c.useCallback((r,o)=>{e(r,o)},[e]),u={...n,handleDeleteColumnItem:i,handleCopyColumnItem:m,handleMoveColumnItem:l,handleUpdateItemVisible:h};return t(b.Provider,{value:u,children:n.children})};P.displayName="ColumnsSetterProvider";const k=n=>{const{index:s,label:a,visible:e,custom:i}=n,[m,l]=c.useState(!1),{widgetDisplayName:h,attrPath:u,childrenSetter:r,handleUpdateItemVisible:o,handleDeleteColumnItem:p}=c.useContext(b),{t:d}=A(),C=c.useCallback(()=>{l(!1)},[]);return t(V,{withoutPadding:!0,colorScheme:"white",popupVisible:m,content:t(Q,{title:a??"",handleCloseModal:C,attrPath:`${u}.${s}`,widgetDisplayName:h,childrenSetter:r}),trigger:"click",showArrow:!1,position:"left",clickOutsideToClose:!0,onVisibleChange:y=>{l(y)},children:I("div",{css:K,children:[I("div",{css:M,children:[t("span",{css:R,className:"movableIconWrapper",children:t(E,{})}),t("span",{css:T,children:a||d("editor.inspect.setter_content.option_list.list_no_label")})]}),I("div",{css:W,children:[t("span",{css:f,onClick:y=>{o(`${u}.${s}.visible`,!e),y.stopPropagation()},children:e?t(L,{}):t(O,{})}),i?t("span",{css:f,onClick:y=>{p(s),y.stopPropagation()},children:t(B,{})}):null]})]})})};k.displayName="DragIconAndLabel";const Z=n=>{const{header:s,visible:a,custom:e,index:i}=n,m=c.useRef(null);return t("div",{ref:m,css:j,children:t(k,{index:i,label:s,visible:a,custom:e})})},x=()=>t("div",{css:q,children:"No columns"});x.displayName="ColumnsEmptyBody";const ee=()=>{const{columnItems:n,handleUpdateDsl:s,attrPath:a}=c.useContext(b),[e,i]=c.useState(n);c.useEffect(()=>{S(n,e)||i(n)},[n]);const m=l=>{S(l,e)||i(l)};return!n||!Array.isArray(n)||n.length===0?t(x,{}):t($,{initial:!1,children:t(v.Group,{axis:"y",initial:!1,values:e,onReorder:m,css:g,children:e.map((l,h)=>{const{value:u,header:r,accessorKey:o,visible:p,custom:d,id:C}=l;return t(v.Item,{initial:!1,css:g,value:l,onDragEnd:()=>{const y=e.map((D,_)=>({...D,columnIndex:_}));s(a,y)},children:t(Z,{accessorKey:o,header:r,value:u,visible:p,custom:d,index:h,id:C},o)},l.accessorKey)})})})},te=n=>{const{attrName:s,handleUpdateDsl:a,value:e=[],childrenSetter:i,widgetDisplayName:m}=n,{t:l}=A(),h=c.useCallback(()=>{const u=e.length+1,r=Y(u);a(s,[...e,r])},[e,s,a]);return!Array.isArray(i)||i.length===0?null:I(P,{childrenSetter:i,widgetDisplayName:m,columnItems:e,attrPath:s,handleUpdateDsl:a,children:[I("div",{css:G,children:[t("div",{children:l("editor.inspect.setter_content.column_setter.label",{number:e.length})}),I("div",{css:H,onClick:h,children:[t(U,{_css:z}),t("span",{children:l("editor.inspect.setter_content.column_setter.new")})]})]}),I("div",{css:J,children:[t("div",{css:X,children:t("div",{children:l("editor.inspect.setter_content.column_setter.title")})}),t(ee,{})]})]})};te.displayName="ColumnSetter";export{te as default};
//# sourceMappingURL=index-507555e2.js.map
