import{o as w,k as r,F as g,S as P}from"./@illa-design-1f43bb6c.js";import{u as y,eH as h,b as R,bA as M,fv as G,e as B,hW as K,be as V}from"./index-4dce6ee8.js";import{r as m}from"./react-9b7e00e3.js";import{S as E}from"./index-01ad6233.js";import{I as A}from"./index-2c4267bb.js";import{C as I,a as S,b as D}from"./index-03ca7e7b.js";import{R as k}from"./index-5b916626.js";import{a as T,c as N,b as F}from"./style-f068f7a5.js";import{l as J,m as W,c as X,T as _}from"./index-cd7c17cc.js";import"./@emotion-08a6282b.js";import"./codeMirror-vendor-320207e2.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";import"./index-b9f5fd51.js";import"./index-6f32d056.js";import"./index-5be17f9b.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./hook-302a78fc.js";import"./renderComponentCanvasContainer-2e4cd54a.js";import"./style-49f23046.js";import"./index-d48f7e94.js";import"./index-cf2bb556.js";import"./index-2fdfc937.js";import"./layoutInfoListener-bd63c738.js";import"./drive-584d85d3.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./popper-a04e2b11.js";import"./objectWithoutPropertiesLoose-e3246981.js";import"./clsx-06f54762.js";import"./index-934389e2.js";import"./style-51b259bb.js";import"./style-af69883e.js";const f=o=>{const{handleValueChange:i,withDataEditor:s,collectionIds:l}=o,n=o.params,{t:p}=y();return w(g,{children:[r(E,{componentType:"select",onChange:i("collectionID"),value:n.collectionID,title:p("editor.action.form.label.appwrite.collectionid"),placeholder:p("editor.action.form.placeholder.appwrite.collectionid"),options:l}),r(A,{onChange:i("documentID"),value:n.documentID,title:p("editor.action.form.label.appwrite.documentid")}),s&&r(A,{value:n.data,onChange:i("data"),lineNumbers:!0,expectedType:h.OBJECT,style:{height:"88px"},title:p("editor.action.form.label.appwrite.data"),placeholder:p("editor.action.form.placeholder.appwrite.data")})]})};f.displayName="DocumentSubPanel";const j=()=>{const{t:o}=y();return[{label:o("editor.action.form.option.appwrite.filter.equal"),value:"equal"},{label:o("editor.action.form.option.appwrite.filter.notequal"),value:"notEqual"},{label:o("editor.action.form.option.appwrite.filter.lessthan"),value:"lessThan"},{label:o("editor.action.form.option.appwrite.filter.lessthanEqual"),value:"lessThanEqual"},{label:o("editor.action.form.option.appwrite.filter.greaterthan"),value:"greaterThan"},{label:o("editor.action.form.option.appwrite.filter.greaterthanequal"),value:"greaterThanEqual"}]},U=()=>{const{t:o}=y();return[{label:o("editor.action.form.option.appwrite.order.asc"),value:"asc"},{label:o("editor.action.form.option.appwrite.order.desc"),value:"desc"}]},x=o=>{const{handleValueChange:i,collectionIds:s}=o,l=o.params,{t:n}=y(),p=j(),v=U(),C=m.useCallback(e=>{if(!(e&&l.hasOwnProperty(e)))return;const a=l[e],t=e==="filter"?{key:"",operator:"",value:""}:{key:"",value:""};let c=[...a,t];i(e)(c)},[i,l]),b=m.useCallback((e,a,t)=>{if(!(t&&l.hasOwnProperty(t)))return;let d=[...l[t]];const L=t==="filter"?{key:"",operator:"",value:""}:{key:"",value:""};d.splice(e,1),d.length===0&&(d=[L]),i(t)(d)},[i,l]),u=m.useCallback((e,a,t,c,d)=>{if(!(c&&l.hasOwnProperty(c)))return;let O=[...l[c]];const q=d?{key:a,value:t,operator:d}:{key:a,value:t};O[e]=q,i(c)(O)},[i,l]);return w(g,{children:[r(E,{componentType:"select",onChange:i("collectionID"),value:l.collectionID,title:n("editor.action.form.label.appwrite.collectionid"),placeholder:n("editor.action.form.placeholder.appwrite.collectionid"),options:s}),r(k,{label:n("editor.action.form.label.appwrite.filter"),records:l.filter,customRender:(e,a)=>w(g,{children:[r("div",{css:T,children:r(I,{value:e.key,singleLine:!0,onChange:t=>{u(a,t,e.value,"filter",e.operator)},wrapperCss:N,expectValueType:h.STRING,lang:S.JAVASCRIPT,codeType:D.EXPRESSION,canShowCompleteInfo:!0,placeholder:n("editor.action.form.placeholder.appwrite.filter.attribute")})}),r(P,{colorScheme:"techPurple",showSearch:!0,defaultValue:e.operator,value:e.operator,w:"0",ml:"-0.5px",mr:"-0.5px",bdRadius:"0",flexGrow:"1",onChange:t=>u(a,e.key,e.value,"filter",t),options:p}),r("div",{css:T,children:r(I,{singleLine:!0,value:e.value,onChange:t=>{u(a,e.key,t,"filter",e.operator)},wrapperCss:F,expectValueType:h.STRING,lang:S.JAVASCRIPT,codeType:D.EXPRESSION,canShowCompleteInfo:!0,placeholder:n("editor.action.form.placeholder.appwrite.filter.value")})})]}),name:"filter",onAdd:C,onDelete:b,onChangeKey:()=>{},onChangeValue:()=>{}}),r(k,{label:n("editor.action.form.label.appwrite.order"),records:l.orderBy,customRender:(e,a)=>w(g,{children:[r("div",{css:T,children:r(I,{value:e.key,singleLine:!0,onChange:t=>{u(a,t,e.value,"orderBy")},wrapperCss:N,expectValueType:h.STRING,lang:S.JAVASCRIPT,codeType:D.EXPRESSION,canShowCompleteInfo:!0,placeholder:n("editor.action.form.placeholder.appwrite.order")})}),r(P,{colorScheme:"techPurple",showSearch:!0,defaultValue:e.value,value:e.value,w:"0",bdRadius:"0",flexGrow:"1",onChange:t=>u(a,e.key,t,"orderBy"),options:v})]}),name:"orderBy",onAdd:C,onDelete:b,onChangeKey:()=>{},onChangeValue:()=>{}}),r(A,{onChange:i("limit"),value:l.limit,expectedType:h.NUMBER,title:n("editor.action.form.label.appwrite.limit")})]})};x.displayName="ListDocumentsSubPanel";const Y={get:f,create:f,update:f,delete:f,list:x},H=[{label:"Create a document",value:"create"},{label:"Get a document",value:"get"},{label:"Update a document",value:"update"},{label:"Delete a document",value:"delete"},{label:"List documents",value:"list"}],z=()=>{const o=R(M),i=R(G),s=o.content,l=i.content,n=B(),[p,v]=m.useState([]);m.useEffect(()=>{o.resourceID!=null&&K(o.resourceID).then(({data:a})=>{var c;const t=(((c=a.Schema)==null?void 0:c.collections)??[]).map(d=>d.id);v(t)})},[o.resourceID]);const C=m.useCallback(a=>{const t=l.method===a?l:{opts:a==="list"?J:W,method:a};n(V.updateCachedAction({...o,content:t}))},[o,n,l]),b=m.useCallback(a=>t=>{n(V.updateCachedAction({...o,content:{...s,opts:{...s.opts,[a]:t}}}))},[o,s,n]),u=Y[s.method],e=!["get","delete"].includes(s.method);return w("div",{css:X,children:[r(E,{componentType:"select",onChange:C,value:s.method,options:H,title:"Method"}),r(u,{handleValueChange:b,withDataEditor:e,params:s.opts,collectionIds:p},s.method),r(_,{})]})};z.displayName="AppwritePanel";export{H as AppwriteActionMethodsOptions,z as default};
//# sourceMappingURL=index-67152553.js.map
