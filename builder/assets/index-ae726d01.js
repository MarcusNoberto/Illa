import{o as g,k as c,S as k,F as J,n as E,T as K}from"./@illa-design-402f214a.js";import{r as C}from"./react-9b7e00e3.js";import{u as N,b as v,fw as B,e as G,bf as p,eI as w,bB as _}from"./index-2f1869ab.js";import{a as y,C as f}from"./index-9dcf4ab8.js";import{R as A}from"./index-654af204.js";import{b as j,a as F,c as H,d as M,e as D,r as U,f as z}from"./style-e472ee1f.js";import{R as $,T as W}from"./index-e89bb2f6.js";import{a as x}from"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";import"./index-65ed348a.js";import"./index-e7294a86.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./hook-34b2061f.js";import"./renderComponentCanvasContainer-44ad78fe.js";import"./style-7ce959a8.js";import"./index-f466602f.js";import"./index-cf2bb556.js";import"./index-b8442d1a.js";import"./layoutInfoListener-bba65cc8.js";import"./drive-6b05f117.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./popper-cd761d27.js";import"./clsx-85d7d0af.js";import"./objectWithoutPropertiesLoose-24430c43.js";import"./index-323e87cb.js";import"./style-bd23c0f2.js";import"./style-91620c64.js";const O=b=>{const{t:l}=N(),i=b.actionItem,e=i.content.bodyType,a=i.content.body,u=e==="form-data",m=v(B),t=G();let o=y.JAVASCRIPT;if(e==="raw")switch(a.type){case"text":o=y.JAVASCRIPT;break;case"json":o=y.JSON;break;case"xml":o=y.XML;break;case"javascript":o=y.JAVASCRIPT;break;case"html":o=y.HTML;break}const d=C.useCallback(n=>{let r=null;const h=m==null?void 0:m.content;if(m.resourceID===i.resourceID&&h.method!=="GET"&&h.bodyType!=="none"&&h.bodyType===n)r=h.body;else switch(n){case"none":r=null;break;case"x-www-form-urlencoded":r=[{key:"",value:""}];break;case"form-data":r=[{key:"",type:"",value:""}];break;case"raw":r=$;break;case"binary":r="";break}t(p.updateCachedAction({...i,content:{...i.content,bodyType:n,body:r}}))},[i,t,m.content,m.resourceID]),s=C.useCallback(n=>{t(p.updateCachedAction({...i,content:{...i.content,body:n}}))},[i,t]),T=C.useCallback((n,r,h,R)=>{let V=[...a];V[n]=u?{key:r,type:h,value:R}:{key:r,value:R},s(V)},[a,s,u]),S=C.useCallback((n,r)=>{t(p.updateCachedAction({...i,content:{...i.content,body:{...a,[r]:n}}}))},[i,a,t]),I=(n,r,h)=>{T(n,r,"",h)},L=C.useCallback(()=>{const n=u?{key:"",type:"",value:""}:{key:"",value:""},r=[...a,n];s(r)},[a,s,u]),P=C.useCallback(n=>{let r=[...a];const h=u?{key:"",type:"",value:""}:{key:"",value:""};r.splice(n,1),r.length===0&&(r=[h]),s(r)},[a,s,u]);return g("div",{css:j,children:[c("span",{css:F,children:l("editor.action.resource.restapi.label.body")}),g("div",{css:H,children:[g("div",{css:M,children:[c(k,{colorScheme:"techPurple",value:e,options:["none","form-data","x-www-form-urlencoded","raw","binary"],bdRadius:e==="raw"?"8px 0 0 8px":"8px",onChange:n=>d(n)}),e==="raw"&&c(k,{bdRadius:"0 8px 8px 0",colorScheme:"techPurple",w:"162px",ml:"-1px",value:a.type,options:["text","json","xml","javascript","html"],onChange:n=>S(n,"type")})]}),e==="raw"&&c("div",{css:D,children:c(f,{showLineNumbers:!0,lang:o,value:a.content,expectValueType:w.STRING,height:"88px",onChange:n=>S(n,"content")})}),e==="x-www-form-urlencoded"&&c(A,{label:"",name:"body",records:a,onChangeKey:I,onChangeValue:I,onDelete:P,onAdd:L}),e==="form-data"&&c(A,{label:"",name:"body",records:a,customRender:(n,r)=>g(J,{children:[c(f,{value:n.key,singleLine:!0,height:"32px",onChange:h=>T(r,h,n.type,n.value),wrapperCss:U,expectValueType:w.STRING,lang:y.JAVASCRIPT,placeholder:"key"}),c(k,{colorScheme:"techPurple",showSearch:!0,defaultValue:n.type,value:n.type,w:"0",bdRadius:"0",flexGrow:"1",onChange:h=>T(r,n.key,h,n.value),options:[{label:l("editor.action.panel.label.option.restapi.body_type.text"),value:"text"},{label:l("editor.action.panel.label.option.restapi.body_type.file"),value:"file"}]}),c(f,{singleLine:!0,expectValueType:n.type==="file"?w.OBJECT:w.STRING,value:n.value,onChange:h=>T(r,n.key,n.type,h),height:"32px",wrapperCss:z,lang:y.JAVASCRIPT,placeholder:n.type==="file"?l("editor.action.panel.placeholder.restapi.body_type.file"):"value"})]}),onChangeKey:()=>{},onChangeValue:()=>{},onDelete:P,onAdd:L}),e==="binary"&&c("div",{css:D,children:c(f,{lang:y.JAVASCRIPT,showLineNumbers:!0,value:a??"",expectValueType:w.STRING,height:"88px",onChange:s})})]})]})};O.displayName="BodyEditor";x`
  display: flex;
  flex-direction: column;
`;const X=x`
  padding: 8px 0;
`,Y=x`
  width: 200px;
  box-sizing: border-box;
  color: ${E("grayBlue","02")};
  font-weight: 400;
  margin-left: 24px;
  margin-right: 8px;
  border-radius: 8px 0 0 8px;
  font-size: 14px;
  text-overflow: ellipsis;
  overflow-wrap: break-word;
  white-space: nowrap;
  overflow: hidden;
`,q=x`
  display: flex;
  flex-direction: row;
  align-items: center;
  min-height: 48px;
  padding: 0 16px;
`,Q=x`
  min-width: 160px;
  font-size: 14px;
  font-weight: 500;
  text-align: right;
  color: ${E("grayBlue","02")};
`,Z=x`
  flex-grow: 1;
  width: 0;
`,ee=["GET","POST","PUT","HEAD","PATCH","DELETE","OPTIONS"],te=()=>{const{t:b}=N(),l=v(_),i=v(B),e=l.content,a=G(),u=v(t=>t.resource.find(o=>o.resourceID===(l==null?void 0:l.resourceID))),m=C.useCallback(t=>{let o="none",d=null;t!=="GET"&&i.resourceID===l.resourceID&&i.content.method===t&&(o=i.content.bodyType,d=i.content.body),a(p.updateCachedAction({...l,content:{...e,method:t,bodyType:o,body:d}}))},[l,e,a,i.content.body,i.content.bodyType,i.content.method,i.resourceID]);return g("div",{css:X,children:[g("div",{css:q,children:[c("span",{css:Q,children:b("editor.action.resource.restapi.label.action_type")}),c(k,{colorScheme:"techPurple",ml:"16px",value:e.method,w:"160px",maxW:"160px",options:ee,onChange:m}),c(K,{position:"top-start",content:u!=null&&u.content?u.content.baseUrl:"",children:c("div",{css:Y,children:u!=null&&u.content?u.content.baseUrl:""})}),c(f,{singleLine:!0,wrapperCss:Z,expectValueType:w.STRING,value:e.url,placeholder:b("editor.action.form.placeholder.url"),lang:y.JAVASCRIPT,onChange:t=>{a(p.updateCachedAction({...l,content:{...e,url:t}}))}})]}),c(A,{records:e.urlParams,label:b("editor.action.resource.restapi.label.url_parameters"),onChangeKey:(t,o,d)=>{let s=[...e.urlParams];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,urlParams:s}}))},onChangeValue:(t,o,d)=>{let s=[...e.urlParams];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,urlParams:s}}))},onDelete:(t,o)=>{let d=[...e.urlParams];d.splice(t,1),d.length===0&&(d=[{key:"",value:""}]),a(p.updateCachedAction({...l,content:{...e,urlParams:d}}))},onAdd:()=>{let t=[...e.urlParams,{key:"",value:""}];a(p.updateCachedAction({...l,content:{...e,urlParams:t}}))}}),c(A,{records:e.headers,label:b("editor.action.resource.restapi.label.headers"),onChangeKey:(t,o,d)=>{let s=[...e.headers];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,headers:s}}))},onChangeValue:(t,o,d)=>{let s=[...e.headers];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,headers:s}}))},onDelete:t=>{let o=[...e.headers];o.splice(t,1),o.length===0&&(o=[{key:"",value:""}]),a(p.updateCachedAction({...l,content:{...e,headers:o}}))},onAdd:()=>{let t=[...e.headers,{key:"",value:""}];a(p.updateCachedAction({...l,content:{...e,headers:t}}))}}),c(A,{records:e.cookies,label:b("editor.action.resource.restapi.label.cookies"),onChangeKey:(t,o,d)=>{let s=[...e.cookies];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,cookies:s}}))},onChangeValue:(t,o,d)=>{let s=[...e.cookies];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,cookies:s}}))},onDelete:t=>{let o=[...e.cookies];o.splice(t,1),o.length===0&&(o=[{key:"",value:""}]),a(p.updateCachedAction({...l,content:{...e,cookies:o}}))},onAdd:()=>{let t=[...e.cookies,{key:"",value:""}];a(p.updateCachedAction({...l,content:{...e,cookies:t}}))}}),!["GET","HEAD"].includes(e.method)&&c(O,{actionItem:l}),c(W,{})]})};te.displayName="RestApiPanel";export{te as default};
//# sourceMappingURL=index-ae726d01.js.map
