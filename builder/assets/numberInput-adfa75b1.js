import{k as d,o as F,aT as $,I as j}from"./@illa-design-1f43bb6c.js";import{r}from"./react-9b7e00e3.js";import{aE as q}from"./index-4dce6ee8.js";import{h as D,g as z,I as G}from"./utils-1cfed9ac.js";import{L as J}from"./index-2c54d160.js";import{T as K}from"./index-99007076.js";import{a as Q,b as X}from"./style-49f23046.js";import{w as Y}from"./lodash-lib-6e94956b.js";import"./@emotion-08a6282b.js";import"./codeMirror-vendor-320207e2.js";import"./react-icons-vendor-2430ea65.js";const S=(t,a={})=>{const{hideValidationMessage:o,pattern:n,regex:p,required:c,customRule:s}=a;if(!o){const l=D({value:z(t),pattern:n,regex:p,required:c,customRule:s});return l&&l.length>0?l:""}return""},Z=t=>`${t}`.replace(/\d+/,function(a){return a.replace(/(\d)(?=(\d{3})+$)/g,"$1,")}),w=r.forwardRef((t,a)=>{const{openThousandSeparator:o,max:n,min:p,placeholder:c,value:s,precision:l,disabled:f,readOnly:M,prefix:b,suffix:R,loading:N,colorScheme:i,handleOnChange:v,handleOnBlur:g,handleOnFocus:m}=t;return d(j,{inputRef:a,max:n,min:p,formatter:o?Z:void 0,placeholder:c,value:s,precision:l,disabled:f,readOnly:M,prefix:b,suffix:N?d($,{spin:!0}):R,mode:"button",onChange:v,onBlur:g,onFocus:m,colorScheme:i})});w.displayName="WrappedInputNumber";const _=t=>{const{displayName:a,value:o,handleUpdateDsl:n,updateComponentRuntimeProps:p,deleteComponentRuntimeProps:c,labelPosition:s,labelFull:l,label:f,labelAlign:M,labelWidth:b=33,labelCaption:R,labelWidthUnit:N,required:i,labelHidden:v,tooltipText:g,pattern:m,regex:V,customRule:C,hideValidationMessage:h,updateComponentHeight:k,validateMessage:H,defaultValue:u,triggerEventHandler:x,handleUpdateMultiExecutionResult:W}=t,O=r.useRef(null),[L,T]=r.useState(o||u);r.useEffect(()=>{(typeof u>"u"||typeof u=="number")&&(T(u),W([{displayName:a,value:{value:u===""?void 0:u}}]))},[u,a,W]);const P=r.useRef(Y((e,I,A)=>{new Promise(B=>{const U=S(e,A);W([{displayName:a,value:{value:e===""?void 0:e,validateMessage:U}}]),B(!0)}).then(()=>{I("change")})},180)),y=r.useCallback(e=>{T(e),P.current(e,x,{hideValidationMessage:h,pattern:m,regex:V,required:i,customRule:C})},[C,h,m,V,i,x]),E=r.useCallback(e=>{const I=S(e,{hideValidationMessage:h,pattern:m,regex:V,required:i,customRule:C});return n({validateMessage:I}),I},[C,n,h,m,V,i]);return r.useEffect(()=>(p({focus:()=>{var e;(e=O.current)==null||e.focus()},setValue:e=>{(typeof e=="number"||typeof e>"u")&&y(e)},clearValue:()=>{y(0)},validate:()=>E(o),clearValidation:()=>{n({validateMessage:""})}}),()=>{c()}),[c,y,n,E,p,o]),F(q,{updateComponentHeight:k,children:[d(K,{tooltipText:g,tooltipDisabled:!g,children:F("div",{css:Q(s),children:[d(J,{labelFull:l,label:f,labelAlign:M,labelWidth:b,labelCaption:R,labelWidthUnit:N,labelPosition:s,required:i,labelHidden:v,hasTooltip:!!g}),d(w,{...t,value:L,ref:O,handleOnChange:y,handleOnBlur:()=>{x("blur")},handleOnFocus:()=>{x("focus")}})]})}),!h&&d("div",{css:X(b,s,v||!f),children:d(G,{validateMessage:H})})]})};_.displayName="NumberInputWidget";export{_ as NumberInputWidget,w as WrappedInputNumber,_ as default};
//# sourceMappingURL=numberInput-adfa75b1.js.map
