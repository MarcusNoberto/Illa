import{o as w,k as r,F as g,S as P}from"./@illa-design-402f214a.js";import{u as y,eI as h,b as R,bB as M,fw as B,e as G,hX as K,bf as V}from"./index-2f1869ab.js";import{r as m}from"./react-9b7e00e3.js";import{S as E}from"./index-511dc243.js";import{I as A}from"./index-f4dfedf2.js";import{C as I,a as S,b as D}from"./index-9dcf4ab8.js";import{R as k}from"./index-654af204.js";import{a as T,c as N,b as F}from"./style-f9cb11da.js";import{l as J,m as X,c as _,T as j}from"./index-e89bb2f6.js";import"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";import"./index-5fb9a68f.js";import"./index-65ed348a.js";import"./index-e7294a86.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./hook-34b2061f.js";import"./renderComponentCanvasContainer-44ad78fe.js";import"./style-7ce959a8.js";import"./index-f466602f.js";import"./index-cf2bb556.js";import"./index-b8442d1a.js";import"./layoutInfoListener-bba65cc8.js";import"./drive-6b05f117.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./popper-cd761d27.js";import"./clsx-85d7d0af.js";import"./objectWithoutPropertiesLoose-24430c43.js";import"./index-323e87cb.js";import"./style-bd23c0f2.js";import"./style-91620c64.js";const f=o=>{const{handleValueChange:i,withDataEditor:s,collectionIds:l}=o,n=o.params,{t:p}=y();return w(g,{children:[r(E,{componentType:"select",onChange:i("collectionID"),value:n.collectionID,title:p("editor.action.form.label.appwrite.collectionid"),placeholder:p("editor.action.form.placeholder.appwrite.collectionid"),options:l}),r(A,{onChange:i("documentID"),value:n.documentID,title:p("editor.action.form.label.appwrite.documentid")}),s&&r(A,{value:n.data,onChange:i("data"),lineNumbers:!0,expectedType:h.OBJECT,style:{height:"88px"},title:p("editor.action.form.label.appwrite.data"),placeholder:p("editor.action.form.placeholder.appwrite.data")})]})};f.displayName="DocumentSubPanel";const U=()=>{const{t:o}=y();return[{label:o("editor.action.form.option.appwrite.filter.equal"),value:"equal"},{label:o("editor.action.form.option.appwrite.filter.notequal"),value:"notEqual"},{label:o("editor.action.form.option.appwrite.filter.lessthan"),value:"lessThan"},{label:o("editor.action.form.option.appwrite.filter.lessthanEqual"),value:"lessThanEqual"},{label:o("editor.action.form.option.appwrite.filter.greaterthan"),value:"greaterThan"},{label:o("editor.action.form.option.appwrite.filter.greaterthanequal"),value:"greaterThanEqual"}]},W=()=>{const{t:o}=y();return[{label:o("editor.action.form.option.appwrite.order.asc"),value:"asc"},{label:o("editor.action.form.option.appwrite.order.desc"),value:"desc"}]},x=o=>{const{handleValueChange:i,collectionIds:s}=o,l=o.params,{t:n}=y(),p=U(),v=W(),C=m.useCallback(e=>{if(!(e&&l.hasOwnProperty(e)))return;const a=l[e],t=e==="filter"?{key:"",operator:"",value:""}:{key:"",value:""};let c=[...a,t];i(e)(c)},[i,l]),b=m.useCallback((e,a,t)=>{if(!(t&&l.hasOwnProperty(t)))return;let d=[...l[t]];const L=t==="filter"?{key:"",operator:"",value:""}:{key:"",value:""};d.splice(e,1),d.length===0&&(d=[L]),i(t)(d)},[i,l]),u=m.useCallback((e,a,t,c,d)=>{if(!(c&&l.hasOwnProperty(c)))return;let O=[...l[c]];const q=d?{key:a,value:t,operator:d}:{key:a,value:t};O[e]=q,i(c)(O)},[i,l]);return w(g,{children:[r(E,{componentType:"select",onChange:i("collectionID"),value:l.collectionID,title:n("editor.action.form.label.appwrite.collectionid"),placeholder:n("editor.action.form.placeholder.appwrite.collectionid"),options:s}),r(k,{label:n("editor.action.form.label.appwrite.filter"),records:l.filter,customRender:(e,a)=>w(g,{children:[r("div",{css:T,children:r(I,{value:e.key,singleLine:!0,onChange:t=>{u(a,t,e.value,"filter",e.operator)},wrapperCss:N,expectValueType:h.STRING,lang:S.JAVASCRIPT,codeType:D.EXPRESSION,canShowCompleteInfo:!0,placeholder:n("editor.action.form.placeholder.appwrite.filter.attribute")})}),r(P,{colorScheme:"techPurple",showSearch:!0,defaultValue:e.operator,value:e.operator,w:"0",ml:"-0.5px",mr:"-0.5px",bdRadius:"0",flexGrow:"1",onChange:t=>u(a,e.key,e.value,"filter",t),options:p}),r("div",{css:T,children:r(I,{singleLine:!0,value:e.value,onChange:t=>{u(a,e.key,t,"filter",e.operator)},wrapperCss:F,expectValueType:h.STRING,lang:S.JAVASCRIPT,codeType:D.EXPRESSION,canShowCompleteInfo:!0,placeholder:n("editor.action.form.placeholder.appwrite.filter.value")})})]}),name:"filter",onAdd:C,onDelete:b,onChangeKey:()=>{},onChangeValue:()=>{}}),r(k,{label:n("editor.action.form.label.appwrite.order"),records:l.orderBy,customRender:(e,a)=>w(g,{children:[r("div",{css:T,children:r(I,{value:e.key,singleLine:!0,onChange:t=>{u(a,t,e.value,"orderBy")},wrapperCss:N,expectValueType:h.STRING,lang:S.JAVASCRIPT,codeType:D.EXPRESSION,canShowCompleteInfo:!0,placeholder:n("editor.action.form.placeholder.appwrite.order")})}),r(P,{colorScheme:"techPurple",showSearch:!0,defaultValue:e.value,value:e.value,w:"0",bdRadius:"0",flexGrow:"1",onChange:t=>u(a,e.key,t,"orderBy"),options:v})]}),name:"orderBy",onAdd:C,onDelete:b,onChangeKey:()=>{},onChangeValue:()=>{}}),r(A,{onChange:i("limit"),value:l.limit,expectedType:h.NUMBER,title:n("editor.action.form.label.appwrite.limit")})]})};x.displayName="ListDocumentsSubPanel";const Y={get:f,create:f,update:f,delete:f,list:x},z=[{label:"Create a document",value:"create"},{label:"Get a document",value:"get"},{label:"Update a document",value:"update"},{label:"Delete a document",value:"delete"},{label:"List documents",value:"list"}],H=()=>{const o=R(M),i=R(B),s=o.content,l=i.content,n=G(),[p,v]=m.useState([]);m.useEffect(()=>{o.resourceID!=null&&K(o.resourceID).then(({data:a})=>{var c;const t=(((c=a.Schema)==null?void 0:c.collections)??[]).map(d=>d.id);v(t)})},[o.resourceID]);const C=m.useCallback(a=>{const t=l.method===a?l:{opts:a==="list"?J:X,method:a};n(V.updateCachedAction({...o,content:t}))},[o,n,l]),b=m.useCallback(a=>t=>{n(V.updateCachedAction({...o,content:{...s,opts:{...s.opts,[a]:t}}}))},[o,s,n]),u=Y[s.method],e=!["get","delete"].includes(s.method);return w("div",{css:_,children:[r(E,{componentType:"select",onChange:C,value:s.method,options:z,title:"Method"}),r(u,{handleValueChange:b,withDataEditor:e,params:s.opts,collectionIds:p},s.method),r(j,{})]})};H.displayName="AppwritePanel";export{z as AppwriteActionMethodsOptions,H as default};
//# sourceMappingURL=index-ccd10f39.js.map
