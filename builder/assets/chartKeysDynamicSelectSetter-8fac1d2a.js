import{k}from"./@illa-design-1f43bb6c.js";import{r}from"./react-9b7e00e3.js";import{b as S,ci as N,cm as v,cl as J,aS as R,dN as j,gX as P,eH as F}from"./index-4dce6ee8.js";import{a as E}from"./listItem-2bf53712.js";import{B as _}from"./baseDynamicSelect-8afdaca5.js";import{f as H}from"./formatData-c7a900a1.js";import{g as i}from"./lodash-lib-6e94956b.js";import"./@emotion-08a6282b.js";import"./codeMirror-vendor-320207e2.js";import"./react-icons-vendor-2430ea65.js";import"./index-03ca7e7b.js";import"./index-6f32d056.js";import"./index-5be17f9b.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./index-8df6bc42.js";import"./style-8b1d8060.js";import"./style-6680c91c.js";import"./index-934389e2.js";const X=C=>{const{widgetDisplayName:a,attrName:o,value:m,labelName:M,labelDesc:O,panelConfig:y,handleUpdateMultiAttrDSL:n}=C,c=S(e=>{const t=N(e);return i(t,a,{})}),b=S(e=>{const t=v(J(e),a);return t?t.props||{}:{}}),x=r.useMemo(()=>i(c,"dataSourceMode","select")==="dynamic",[c]),l=r.useMemo(()=>{let e=i(c,"dataSource",[]);return x&&(e=i(c,"dataSourceJS",[])),H(e)},[x,c]),f=r.useMemo(()=>{if(!R(l))return[];let e=Object.keys(l).map(t=>t);return o==="groupBy"&&m&&e.unshift("—"),e},[o,l,m]),p=r.useMemo(()=>i(b,"datasets",[]),[b]),h=r.useCallback(e=>p.length?e?p.map(t=>({...t,color:"illa-preset"})):p.map((t,g)=>({...t,color:E[g%E.length]})):[],[p]),s=r.useCallback((e,t)=>{if(e==="groupBy")if(m&&!t||!m&&t){const g=h(!!t);n==null||n({datasets:g,[e]:t==="—"?void 0:t})}else n==null||n({[e]:t==="—"?void 0:t});else n==null||n({[e]:t})},[h,n,m]),$=S(j),T=r.useMemo(()=>{var e;return((e=$[`${a}.${o}JS`]??[])==null?void 0:e.length)>0},[o,$,a]),d=r.useMemo(()=>i(c,`${a}.${o}JS`,"select")==="dynamic",[o,c,a]),u=r.useMemo(()=>i(y,o,""),[o,y]),B=r.useCallback(()=>{const e=f.some(t=>t===u);d?(s(`${a}.${o}JS`,"select"),e?s(o,u):s(o,"")):(s(`${a}.${o}JS`,"dynamic"),e&&s(o,u))},[f,d,u,s,a,o]),D=r.useCallback(e=>{s==null||s(o,e)},[o,s]),I=r.useCallback(e=>{s(o,e)},[o,s]);return k("div",{css:P,children:k(_,{...C,isDynamic:d,options:f,onClickFxButton:B,onChangeSelect:D,value:u,onChangeInput:I,expectedType:F.STRING,path:`${a}.${o}`,labelName:M,labelDesc:O,isError:T})})};X.displayName="ChartXAxisSetter2";export{X as default};
//# sourceMappingURL=chartKeysDynamicSelectSetter-8fac1d2a.js.map
