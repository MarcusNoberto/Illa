import{k as x}from"./@illa-design-402f214a.js";import{r}from"./react-9b7e00e3.js";import{b as l,cj as O,cn as j,cm as k,aS as E}from"./index-2f1869ab.js";import{a as C}from"./listItem-00848ca6.js";import{f as M}from"./formatData-3ff4f5a5.js";import R from"./searchSelect-23098b03.js";import{g as c}from"./lodash-lib-6e94956b.js";import"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./react-icons-vendor-2430ea65.js";import"./baseSelect-76e02b82.js";import"./style-f1ef1d8c.js";import"./style-ab05d1ea.js";import"./index-323e87cb.js";const h=p=>{const{widgetDisplayName:u,attrName:f,value:s,handleUpdateMultiAttrDSL:o}=p,a=l(e=>{const t=O(e);return c(t,u,{})}),g=l(e=>{const t=j(k(e),u);return t?t.props||{}:{}}),S=r.useMemo(()=>c(a,"dataSourceMode","select")==="dynamic",[a]),i=r.useMemo(()=>{let e=c(a,"dataSource",[]);return S&&(e=c(a,"dataSourceJS",[])),M(e)},[S,a]),y=r.useMemo(()=>{if(!E(i))return[];let e=Object.keys(i).map(t=>t);return f==="groupBy"&&s&&e.unshift("—"),e},[f,i,s]),n=r.useMemo(()=>c(g,"datasets",[]),[g]),d=r.useCallback(e=>n.length?e?n.map(t=>({...t,color:"illa-preset"})):n.map((t,m)=>({...t,color:C[m%C.length]})):[],[n]),b=r.useCallback((e,t)=>{if(e==="groupBy")if(s&&!t||!s&&t){const m=d(!!t);o==null||o({datasets:m,[e]:t==="—"?void 0:t})}else o==null||o({[e]:t==="—"?void 0:t});else o==null||o({[e]:t})},[d,o,s]);return x(R,{...p,options:y,handleUpdateDsl:b})};h.displayName="ChartXAxisSetter";export{h as default};
//# sourceMappingURL=chartKeysSelectSetter-4074d89f.js.map
