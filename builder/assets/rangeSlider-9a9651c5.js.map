{"version":3,"file":"rangeSlider-9a9651c5.js","sources":["../../src/widgetLibrary/RangeSliderWidget/style.ts","../../src/widgetLibrary/RangeSliderWidget/rangeSlider.tsx"],"sourcesContent":["import { SerializedStyles, css } from \"@emotion/react\"\n\nexport const applyLabelAndComponentWrapperStyle = (\n  labelPosition: \"left\" | \"right\" | \"top\" = \"left\",\n): SerializedStyles => {\n  if (labelPosition === \"left\") {\n    return css`\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n    `\n  }\n  if (labelPosition === \"right\") {\n    return css`\n      display: flex;\n      flex-direction: row-reverse;\n      align-items: center;\n      justify-content: space-between;\n    `\n  }\n  return css``\n}\n\nexport const applyWrapperSlider = css`\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  gap: 8px;\n  padding: 0 8px;\n  align-items: center;\n`\n\nexport const applyIcon = css`\n  height: 16px;\n  width: 16px;\n`\n","import { FC, forwardRef, useCallback, useEffect, useRef } from \"react\"\nimport { Slider } from \"@illa-design/react\"\nimport { AutoHeightContainer } from \"@/widgetLibrary/PublicSector/AutoHeightContainer\"\nimport { InvalidMessage } from \"@/widgetLibrary/PublicSector/InvalidMessage/\"\nimport { handleValidateCheck } from \"@/widgetLibrary/PublicSector/InvalidMessage/utils\"\nimport { Label } from \"@/widgetLibrary/PublicSector/Label\"\nimport { TooltipWrapper } from \"@/widgetLibrary/PublicSector/TooltipWrapper\"\nimport { applyValidateMessageWrapperStyle } from \"@/widgetLibrary/PublicSector/TransformWidgetWrapper/style\"\nimport { AllData } from \"../IconWidget/utils\"\nimport { RangeSliderWidgetProps, WrappedRangeSliderProps } from \"./interface\"\nimport {\n  applyIcon,\n  applyLabelAndComponentWrapperStyle,\n  applyWrapperSlider,\n} from \"./style\"\n\nexport const WrappedRangeSlider = forwardRef<\n  HTMLDivElement,\n  WrappedRangeSliderProps\n>((props, ref) => {\n  const {\n    startValue,\n    endValue,\n    prefixIcon,\n    suffixIcon,\n    hideOutput,\n    min,\n    max,\n    handleOnChange,\n    getValidateMessage,\n    handleUpdateMultiExecutionResult,\n    displayName,\n  } = props\n\n  const onChangeSliderValue = useCallback(\n    (value: number | number[]) => {\n      new Promise((resolve) => {\n        const message = getValidateMessage(value)\n        handleUpdateMultiExecutionResult([\n          {\n            displayName,\n            value: {\n              startValue: (value as number[])[0] ?? min ?? 0,\n              endValue: (value as number[])[1] ?? max ?? 10,\n              validateMessage: message,\n            },\n          },\n        ])\n        resolve(true)\n      }).then(() => {\n        handleOnChange?.()\n      })\n    },\n    [\n      displayName,\n      getValidateMessage,\n      handleOnChange,\n      handleUpdateMultiExecutionResult,\n      max,\n      min,\n    ],\n  )\n  const getIcon = (iconName: string) => (iconName && AllData[iconName]) || null\n  const currentPrefixIcon = getIcon(prefixIcon ?? \"\")\n  const currentSuffixIcon = getIcon(suffixIcon ?? \"\")\n  return (\n    <div css={applyWrapperSlider}>\n      {currentPrefixIcon && (\n        <span css={applyIcon}>\n          {currentPrefixIcon && currentPrefixIcon({})}\n        </span>\n      )}\n      <Slider\n        value={[startValue, endValue]}\n        tooltipVisible={!hideOutput}\n        onChange={onChangeSliderValue}\n        isRange={true}\n        ref={ref}\n        {...props}\n      />\n      {currentSuffixIcon && (\n        <span css={applyIcon}>\n          {currentSuffixIcon && currentSuffixIcon({})}\n        </span>\n      )}\n    </div>\n  )\n})\n\nWrappedRangeSlider.displayName = \"WrappedRangeSlider\"\n\nexport const RangeSliderWidget: FC<RangeSliderWidgetProps> = (props) => {\n  const {\n    startValue,\n    endValue,\n    displayName,\n    handleUpdateMultiExecutionResult,\n    updateComponentRuntimeProps,\n    deleteComponentRuntimeProps,\n    labelPosition,\n    labelFull,\n    labelWrapping,\n    label,\n    labelAlign,\n    labelWidth = 33,\n    labelCaption,\n    labelWidthUnit,\n    required,\n    labelHidden,\n    tooltipText,\n    customRule,\n    hideValidationMessage,\n    validateMessage,\n    updateComponentHeight,\n    triggerEventHandler,\n  } = props\n\n  const rangeSliderRef = useRef<HTMLDivElement>(null)\n  const defaultStartValue = useRef<number>(startValue)\n  const defaultEndValue = useRef<number>(endValue)\n\n  const getValidateMessage = useCallback(\n    (value: unknown) => {\n      if (!hideValidationMessage) {\n        const message = handleValidateCheck({\n          value,\n          required,\n          customRule,\n        })\n        const showMessage = message && message.length > 0\n        return showMessage ? message : \"\"\n      }\n      return \"\"\n    },\n    [customRule, hideValidationMessage, required],\n  )\n\n  const handleValidate = useCallback(\n    (value: unknown) => {\n      const message = getValidateMessage(value)\n      handleUpdateMultiExecutionResult([\n        {\n          displayName,\n          value: {\n            validateMessage: message || \"\",\n          },\n        },\n      ])\n      return message\n    },\n    [displayName, getValidateMessage, handleUpdateMultiExecutionResult],\n  )\n\n  useEffect(() => {\n    updateComponentRuntimeProps({\n      setStartOfRange: (startValue: number) => {\n        handleUpdateMultiExecutionResult([\n          {\n            displayName,\n            value: { startValue },\n          },\n        ])\n      },\n      setEndOfRange: (endValue: number) => {\n        handleUpdateMultiExecutionResult([\n          {\n            displayName,\n            value: { endValue },\n          },\n        ])\n      },\n      validate: () => {\n        return handleValidate([\n          {\n            displayName,\n            value: { startValue, endValue },\n          },\n        ])\n      },\n      clearValidation: () => {\n        handleUpdateMultiExecutionResult([\n          {\n            displayName,\n            value: {\n              validateMessage: \"\",\n            },\n          },\n        ])\n      },\n      reset: () => {\n        handleUpdateMultiExecutionResult([\n          {\n            displayName,\n            value: {\n              startValue: defaultStartValue,\n              endValue: defaultEndValue,\n              validateMessage: \"\",\n            },\n          },\n        ])\n      },\n      focus: () => {\n        rangeSliderRef.current?.focus()\n      },\n    })\n    return () => {\n      deleteComponentRuntimeProps()\n    }\n  }, [\n    deleteComponentRuntimeProps,\n    displayName,\n    endValue,\n    handleUpdateMultiExecutionResult,\n    handleValidate,\n    startValue,\n    updateComponentRuntimeProps,\n  ])\n\n  const handleOnChange = useCallback(() => {\n    triggerEventHandler(\"change\")\n  }, [triggerEventHandler])\n  return (\n    <AutoHeightContainer updateComponentHeight={updateComponentHeight}>\n      <TooltipWrapper tooltipText={tooltipText} tooltipDisabled={!tooltipText}>\n        <div\n          css={applyLabelAndComponentWrapperStyle(\n            labelWrapping ? \"top\" : labelPosition,\n          )}\n        >\n          <Label\n            labelFull={labelFull}\n            label={label}\n            labelAlign={labelAlign}\n            labelWidth={labelWidth}\n            labelCaption={labelCaption}\n            labelWidthUnit={labelWidthUnit}\n            labelPosition={labelPosition}\n            required={required}\n            labelHidden={labelHidden}\n            hasTooltip={!!tooltipText}\n          />\n          <WrappedRangeSlider\n            {...props}\n            startValue={startValue}\n            endValue={endValue}\n            ref={rangeSliderRef}\n            getValidateMessage={getValidateMessage}\n            handleOnChange={handleOnChange}\n          />\n        </div>\n      </TooltipWrapper>\n      {!hideValidationMessage && (\n        <div\n          css={applyValidateMessageWrapperStyle(\n            labelWidth,\n            labelPosition,\n            labelHidden || !label,\n          )}\n        >\n          <InvalidMessage validateMessage={validateMessage} />\n        </div>\n      )}\n    </AutoHeightContainer>\n  )\n}\nRangeSliderWidget.displayName = \"RangeSliderWidget\"\nexport default RangeSliderWidget\n"],"names":["applyLabelAndComponentWrapperStyle","labelPosition","css","applyWrapperSlider","applyIcon","WrappedRangeSlider","forwardRef","props","ref","startValue","endValue","prefixIcon","suffixIcon","hideOutput","min","max","handleOnChange","getValidateMessage","handleUpdateMultiExecutionResult","displayName","onChangeSliderValue","useCallback","value","resolve","message","getIcon","iconName","AllData","currentPrefixIcon","currentSuffixIcon","jsxs","jsx","Slider","RangeSliderWidget","updateComponentRuntimeProps","deleteComponentRuntimeProps","labelFull","labelWrapping","label","labelAlign","labelWidth","labelCaption","labelWidthUnit","required","labelHidden","tooltipText","customRule","hideValidationMessage","validateMessage","updateComponentHeight","triggerEventHandler","rangeSliderRef","useRef","defaultStartValue","defaultEndValue","handleValidateCheck","handleValidate","useEffect","_a","AutoHeightContainer","TooltipWrapper","Label","applyValidateMessageWrapperStyle","InvalidMessage"],"mappings":"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"}