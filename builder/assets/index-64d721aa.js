import{k as t,o as x,D as g,n as I,aY as P,B as T,bd as v,F as S}from"./@illa-design-1f43bb6c.js";import{u as R,gE as U,gF as E,gG as q,gJ as D,d6 as N,gM as k}from"./index-4dce6ee8.js";import{r as b}from"./react-9b7e00e3.js";import{c as A,C as n,o as w,f as B,l as F,b as L,h as j}from"./style-49dd2bac.js";import"./@emotion-08a6282b.js";import"./codeMirror-vendor-320207e2.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";const z={databaseIndex:0,databasePassword:"",databaseUsername:"",host:"",port:"6379",ssl:!1};function G(l){const m=/^redis:\/\/(.*):(.*)@(.*?)(?::(\d+))?$/,i=l.match(m);if(!i||i.length!==5)return;const[,e,a,s,h]=i;return{databaseUsername:e,databasePassword:a,host:s,port:h??80}}const y=l=>/^redis:\/\/(.*):(.*)@(.*?)(?::(\d+))?$/.test(l),M=l=>{const{resourceID:m,resourceType:i}=l,{t:e}=R(),{control:a,setValue:s}=U(),{getResourceByID:h}=b.useContext(E),d=h(m);let o;d===void 0?o=z:o=d.content;const[f,C]=b.useState(!1),c=b.useMemo(()=>({title:e("editor.action.resource.db.label.username_password"),controlledType:["input","password"],name:["databaseUsername","databasePassword"],defaultValue:[o.databaseUsername,o.databasePassword],placeholders:[e("editor.action.resource.db.placeholder.username"),e("editor.action.resource.db.placeholder.password")]}),[o.databasePassword,o.databaseUsername,e]),V=b.useCallback(r=>{const p=k(r??"");return p!==f&&C(p),!0},[f]);return t(S,{children:x("div",{css:A,children:[t(n,{controlledType:"input",isRequired:!0,title:e("editor.action.resource.db.label.name"),control:a,defaultValue:(d==null?void 0:d.resourceName)??"",rules:[{validate:q}],placeholders:[e("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:e("editor.action.resource.restapi.tip.name")}),t(g,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:w,children:e("editor.action.resource.db.title.general_option")}),t(D,{control:a,defaultValue:"",rules:{required:!1},render:({field:{value:r,onChange:p,onBlur:_}})=>x("div",{css:B,children:[t("div",{css:F,children:t("span",{css:L(I("grayBlue","02")),children:e("editor.action.form.option.neon.connection_string")})}),x("div",{css:j,children:[t(P,{onBlur:_,onChange:p,error:!y(r)&&r!=="",value:r,colorScheme:"techPurple",placeholder:"redis://myuser:mypassword@localhost:6379"}),t(T,{disabled:!y(r),onClick:()=>{const u=G(r);u!==void 0&&(s("host",u.host),s("port",u.port),s("databaseUsername",u.databaseUsername),s("databasePassword",u.databasePassword),p(""))},colorScheme:"techPurple",h:"32px",children:e("editor.action.form.option.neon.parse")})]})]}),name:"connectionString"}),t(n,{defaultValue:[o.host,o.port],title:e("editor.action.resource.db.label.hostname_port"),control:a,rules:[{required:!0,validate:V},{required:!0}],isRequired:!0,controlledType:["input","number"],name:["host","port"],placeholders:[e("editor.action.resource.db.placeholder.hostname"),"6379"],styles:[{flex:4},{flex:1}]}),f&&t(n,{defaultValue:"",name:"",title:"",controlledType:"none",control:a,tips:t(v,{title:e("editor.action.form.tips.connect_to_local.title.tips"),closable:!1,content:e("editor.action.form.tips.connect_to_local.selfhost")})}),i==="redis"&&t(n,{title:e("editor.action.resource.db.label.database_index"),defaultValue:o.databaseIndex,name:"databaseIndex",placeholders:[e("editor.action.resource.db.placeholder.database_index")],controlledType:"number",control:a}),t(n,{title:c.title,controlledType:c.controlledType,control:a,defaultValue:c.defaultValue,name:c.name,placeholders:c.placeholders}),N,t(g,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),t("div",{css:w,children:e("editor.action.resource.db.title.advanced_option")}),t(n,{title:e("editor.action.resource.db.label.ssl_options"),control:a,defaultValue:o.ssl,controlledType:"switch",name:"ssl",contentLabel:e("editor.action.resource.db.tip.ssl_options")})]})})};M.displayName="RedisConfigElement";export{M as default};
//# sourceMappingURL=index-64d721aa.js.map
