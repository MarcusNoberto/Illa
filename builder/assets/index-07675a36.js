import{o as A,k as r,F as E,D as g,aa as D}from"./@illa-design-1f43bb6c.js";import{gO as x,gP as m,u as T,gG as I,gQ as y,gR as n,gE as K,gF as R,gK as f,gJ as L}from"./index-4dce6ee8.js";import{r as G}from"./react-9b7e00e3.js";import{C as l,c as Q,o as k,e as U,a as H}from"./style-49dd2bac.js";import{I as F}from"./index-a2b8dbce.js";import"./@emotion-08a6282b.js";import"./codeMirror-vendor-320207e2.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";const O=[{label:x.HEADER,value:m.HEADER},{label:x.URLPARAMS,value:m.URLPARAMS}],q=i=>{const{control:o,auth:e,watch:a}=i,{t:s}=T(),b=a("addTo",m.HEADER);return A(E,{children:[r(l,{title:s("editor.action.resource.db.label.key"),isRequired:!0,defaultValue:(e==null?void 0:e.key)??"",name:"key",rules:[{required:!0}],controlledType:["input"],control:o}),r(l,{title:s("editor.action.resource.db.label.value"),isRequired:!0,defaultValue:(e==null?void 0:e.value)??"",name:"value",rules:[{required:!0}],controlledType:["password"],control:o}),r(l,{title:s("editor.action.resource.db.label.add_to"),isRequired:!0,defaultValue:(e==null?void 0:e.addTo)??m.HEADER,name:"addTo",rules:[{required:!0}],controlledType:["select"],control:o,options:O}),b===m.HEADER&&r(l,{title:s("editor.action.resource.db.label.header_prefix"),defaultValue:(e==null?void 0:e.headerPrefix)??"Bearer",name:"headerPrefix",controlledType:["input"],control:o})]})};q.displayName="APIKeyAuthPanel";const C=i=>{const{control:o,auth:e}=i,{t:a}=T();return A(E,{children:[r(l,{title:a("editor.action.resource.restapi.label.basic_auth_username"),defaultValue:(e==null?void 0:e.username)??"",name:"username",controlledType:"input",control:o,isRequired:!0,rules:[{validate:I}]}),r(l,{title:a("editor.action.resource.restapi.label.basic_auth_password"),defaultValue:(e==null?void 0:e.password)??"",name:"password",controlledType:"password",control:o,isRequired:!0,rules:[{required:!0}]})]})};C.displayName="BasicAuthPanel";const w=i=>{const{control:o,auth:e}=i,{t:a}=T();return r(l,{title:a("editor.action.resource.restapi.label.bearerToken"),defaultValue:(e==null?void 0:e.bearerToken)??"",name:"bearerToken",controlledType:"input",control:o,isRequired:!0,rules:[{validate:I}]})};w.displayName="BearerAuthPanel";const M=[{label:y.NONE,value:n.NONE},{label:y.BASIC,value:n.BASIC},{label:y.BEARER,value:n.BEARER},{label:y.APIKEY,value:n.APIKEY}],Y=i=>{const{resourceID:o}=i,{t:e}=T(),{control:a,formState:s,watch:b}=K(),{getResourceByID:N}=G.useContext(R),t=N(o),_=[{name:"urlParams",title:e("editor.action.resource.restapi.label.url_parameters"),defaultValue:t==null?void 0:t.content.urlParams},{name:"headers",defaultValue:t==null?void 0:t.content.headers,title:e("editor.action.resource.restapi.label.headers")},{name:"cookies",defaultValue:t==null?void 0:t.content.cookies,title:e("editor.action.resource.restapi.label.cookies")}],v=b("authentication",(t==null?void 0:t.content.authentication)??n.NONE);return r(E,{children:A("div",{css:Q,children:[r(l,{controlledType:"input",isRequired:!0,title:e("editor.action.resource.db.label.name"),control:a,defaultValue:(t==null?void 0:t.resourceName)??"",rules:[{validate:I}],placeholders:[e("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:e("editor.action.resource.restapi.tip.name")}),r(g,{direction:"horizontal",ml:"24px",mr:"24px",mt:"16px",mb:"8px",w:"unset"}),r("div",{css:k,children:e("editor.action.resource.db.title.general_option")}),r(l,{title:e("editor.action.resource.restapi.label.base_url"),defaultValue:(t==null?void 0:t.content.baseUrl)??"",isRequired:!0,name:"baseUrl",controlledType:"input",control:a,rules:[{required:e("editor.action.resource.error.invalid_url"),validate:f}],placeholders:[e("editor.action.resource.restapi.placeholder.base_url")],tips:s.errors.baseUrl&&A("div",{css:U,children:[r(D,{css:H}),r(E,{children:s.errors.baseUrl.message})]})}),_.map(({name:V,title:B,defaultValue:S})=>r(L,{control:a,defaultValue:S??[{key:"",value:""}],render:({field:{value:d,onChange:h}})=>r(F,{label:B,records:d,onAdd:()=>{h([...d,{key:"",value:""}])},onDelete:u=>{let c=[...d];c.splice(u,1),c.length===0&&(c=[{key:"",value:""}]),h(c)},onChangeKey:(u,c,P)=>{let p=[...d];p[u]={key:c,value:P},h(p)},onChangeValue:(u,c,P)=>{let p=[...d];p[u].value=P,h(p)}}),name:V},V)),r(l,{title:e("editor.action.resource.restapi.label.authentication"),defaultValue:(t==null?void 0:t.content.authentication)??"none",name:"authentication",controlledType:["select"],control:a,options:M}),v===n.BASIC&&r(C,{control:a,auth:t==null?void 0:t.content.authContent}),v===n.BEARER&&r(w,{control:a,auth:t==null?void 0:t.content.authContent}),v===n.APIKEY&&r(q,{watch:b,control:a,auth:t==null?void 0:t.content.authContent}),r(g,{direction:"horizontal",ml:"24px",mr:"24px",mt:"16px",mb:"8px",w:"unset"}),r("div",{css:k,children:e("editor.action.resource.db.title.graphql_introspection")}),r(l,{title:e("editor.action.resource.db.label.introspection"),contentLabel:e("editor.action.resource.db.label.disable_introspection"),defaultValue:(t==null?void 0:t.content.disableIntrospection)??!1,name:"disableIntrospection",controlledType:["switch"],control:a,tips:e("editor.action.resource.db.tip.introspection")})]})})};Y.displayName="GraphQLConfigElement";export{Y as default};
//# sourceMappingURL=index-07675a36.js.map
