import{k as l,F as y,o as w}from"./@illa-design-402f214a.js";import{r as g}from"./react-9b7e00e3.js";import{b7 as t,eI as u,hY as E,hZ as G,h_ as j,h$ as k,i0 as M,i1 as O,i2 as A,u as U,e as H,b as T,fw as F,bB as L,hX as K,bf as J}from"./index-2f1869ab.js";import{I as R}from"./index-f4dfedf2.js";import{S as x}from"./index-511dc243.js";import{c as q,T as Y}from"./index-e89bb2f6.js";import"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";import"./index-9dcf4ab8.js";import"./index-65ed348a.js";import"./index-e7294a86.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./index-5fb9a68f.js";import"./hook-34b2061f.js";import"./renderComponentCanvasContainer-44ad78fe.js";import"./style-7ce959a8.js";import"./index-f466602f.js";import"./index-cf2bb556.js";import"./index-b8442d1a.js";import"./layoutInfoListener-bba65cc8.js";import"./drive-6b05f117.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./popper-cd761d27.js";import"./clsx-85d7d0af.js";import"./objectWithoutPropertiesLoose-24430c43.js";import"./index-323e87cb.js";import"./style-bd23c0f2.js";import"./style-91620c64.js";const Q=[{label:t.t("editor.action.panel.label.option.couchdb.action_type.list"),value:"listRecords"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.retrieve"),value:"retrieveRecord"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.create"),value:"createRecord"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.update"),value:"updateRecord"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.delete"),value:"deleteRecord"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.find"),value:"find"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.get"),value:"getView"}],X=[{title:t.t("editor.action.panel.label.option.couchdb.skip"),type:"editor",expectedType:u.NUMBER,name:["opts","skip"]},{title:t.t("editor.action.panel.label.option.couchdb.limit"),type:"editor",expectedType:u.NUMBER,name:["opts","limit"]},{title:t.t("editor.action.panel.label.option.couchdb.include"),type:"switch",name:["opts","includeDocs"],content:t.t("editor.action.panel.label.option.couchdb.include_doc_option")},{title:t.t("editor.action.panel.label.option.couchdb.des"),type:"switch",name:["opts","descendingOrder"],content:t.t("editor.action.panel.label.option.couchdb.des_option")}],Z=[{title:t.t("editor.action.panel.label.option.couchdb.id"),type:"editor",expectedType:u.STRING,name:["opts","_id"],lineNumbers:!0,style:{maxHeight:"88px"}}],$=[{title:t.t("editor.action.panel.label.option.couchdb.record"),type:"editor",expectedType:u.OBJECT,name:["opts","record"],lineNumbers:!0,placeholder:t.t("editor.action.panel.label.placeholder.couchdb.record"),style:{height:"88px"}}],z=[{title:t.t("editor.action.panel.label.option.couchdb.id"),type:"editor",expectedType:u.STRING,name:["opts","_id"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.rev"),type:"editor",expectedType:u.STRING,name:["opts","_rev"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.record"),type:"editor",expectedType:u.OBJECT,name:["opts","record"],lineNumbers:!0,placeholder:t.t("editor.action.panel.label.placeholder.couchdb.record"),style:{height:"88px"}}],W=[{title:t.t("editor.action.panel.label.option.couchdb.id"),type:"editor",expectedType:u.STRING,name:["opts","_id"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.rev"),type:"editor",expectedType:u.STRING,name:["opts","_rev"],lineNumbers:!0,style:{maxHeight:"88px"}}],ee=[{title:t.t("editor.action.panel.label.option.couchdb.mangoquery"),type:"editor",expectedType:u.OBJECT,name:["opts","mangoQuery"],lineNumbers:!0,placeholder:t.t("editor.action.panel.label.placeholder.couchdb.mangoquery"),style:{height:"88px"}}],te=[{title:t.t("editor.action.panel.label.option.couchdb.ViewURL"),type:"editor",expectedType:u.STRING,name:["opts","viewurl"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.StartKey"),type:"editor",expectedType:u.STRING,name:["opts","startkey"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.EndKey"),type:"editor",expectedType:u.STRING,name:["opts","endkey"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.skip"),type:"editor",expectedType:u.NUMBER,name:["opts","skip"]},{title:t.t("editor.action.panel.label.option.couchdb.limit"),type:"editor",expectedType:u.NUMBER,name:["opts","limit"]},{title:t.t("editor.action.panel.label.option.couchdb.include"),type:"switch",name:["opts","includeDocs"],content:t.t("editor.action.panel.label.option.couchdb.include_doc_option")}],oe={listRecords:E,retrieveRecord:G,createRecord:j,updateRecord:k,deleteRecord:M,find:O,getView:A},I=o=>{const{onInputValueChange:c}=o,p=o.opts;return l(y,{children:$.map(a=>{const{title:i,name:e,expectedType:r,lineNumbers:n,style:d={},placeholder:s}=a,m=p[e[1]];return l(R,{title:i,expectedType:r,value:m,onChange:c(e),lineNumbers:!!n,placeholder:s,style:d},e.join("-"))})})};I.displayName="CreateRecordSubPanel";const S=o=>{const{onInputValueChange:c}=o,p=o.opts;return l(y,{children:W.map(a=>{const{title:i,name:e,expectedType:r,lineNumbers:n,style:d={}}=a,s=p[e[1]];return l(R,{title:i,expectedType:r,value:s,onChange:c(e),lineNumbers:!!n,style:d},e.join("-"))})})};S.displayName="DeleteRecordSubPanel";const f=o=>{const{onInputValueChange:c}=o,p=o.opts;return l(y,{children:ee.map(a=>{const{title:i,name:e,expectedType:r,lineNumbers:n,style:d,placeholder:s}=a,m=p[e[1]];return l(R,{title:i,expectedType:r,value:m,onChange:c(e),lineNumbers:!!n,placeholder:s,style:d},e.join("-"))})})};f.displayName="FindRecordSubPanel";const V=o=>{const{onInputValueChange:c,onBooleanValueChange:p}=o,a=o.opts;return l(y,{children:te.map(i=>{const{title:e,type:r,name:n,expectedType:d,lineNumbers:s=!1,style:m={},content:N=""}=i,h=a[n[1]];return r==="editor"?l(R,{title:e,expectedType:d,value:h,onChange:c(n),lineNumbers:s,style:m},n.join("-")):l(x,{title:e,componentType:r,onBooleanValueChange:p(n),value:h,switchContent:N},n.join("-"))})})};V.displayName="GetViewSubPanel";const v=o=>{const{onBooleanValueChange:c,onInputValueChange:p}=o,a=o.opts;return l(y,{children:X.map(i=>{const{title:e,type:r,name:n,expectedType:d,content:s=""}=i,m=a[n[1]];return r==="editor"?l(R,{title:e,expectedType:d,value:m,onChange:p(n)},n.join("-")):l(x,{title:e,componentType:r,onBooleanValueChange:c(n),value:m,switchContent:s},n.join("-"))})})};v.displayName="ListRecordsSubPanel";const B=o=>{const{onInputValueChange:c}=o,p=o.opts;return l(y,{children:Z.map(a=>{const{title:i,name:e,expectedType:r,lineNumbers:n,style:d={}}=a,s=p[e[1]];return l(R,{title:i,expectedType:r,value:s,onChange:c(e),lineNumbers:!!n,style:d},e.join("-"))})})};B.displayName="RetrieveRecordSubPanel";const D=o=>{const{onInputValueChange:c}=o,p=o.opts;return l(y,{children:z.map(a=>{const{title:i,name:e,expectedType:r,lineNumbers:n,style:d={},placeholder:s}=a,m=p[e[1]];return l(R,{title:i,expectedType:r,value:m,onChange:c(e),lineNumbers:!!n,placeholder:s,style:d},e.join("-"))})})};D.displayName="UpdateRecordSubPanel";const ne={listRecords:v,retrieveRecord:B,createRecord:I,updateRecord:D,deleteRecord:S,find:f,getView:V},P=(o,c,p)=>{if(c.length===1){const n=c[0];return{...o,[n]:p}}const[a,...i]=c,e=o[a],r=P(e,i,p);return{...o,[a]:r}},ae=()=>{const{t:o}=U(),c=H(),p=T(F),a=T(L),i=a.content,e=p.content,[r,n]=g.useState([]);g.useEffect(()=>{a.resourceID!=null&&K(a.resourceID).then(({data:h})=>{const{Schema:b}=h;n((b==null?void 0:b.databases)??[])})},[a.resourceID]);const d=g.useCallback((h,b)=>{const _=b[0]==="method";let C={...i};_?e.method===h?C={...e}:C={...i,method:h,opts:oe[h]}:C=P({...C},b,h),c(J.updateCachedAction({...a,content:C}))},[a,i,c,e]),s=g.useCallback(h=>b=>{d(b,[].concat(h))},[d]),m=g.useCallback(h=>b=>{d(b,[].concat(h))},[d]),N=ne[i.method];return w("div",{css:q,children:[l(x,{title:o("editor.action.panel.label.couchdb.database"),componentType:"select",onSelectedValueChange:s("database"),value:i.database,options:r,placeholder:o("editor.action.panel.label.placeholder.couchdb.database")}),l(x,{title:o("editor.action.panel.label.couchdb.action_type"),componentType:"select",onSelectedValueChange:s("method"),value:i.method,options:Q}),l(N,{onInputValueChange:s,onBooleanValueChange:m,opts:i.opts}),l(Y,{})]})};ae.displayName="CouchDBPanel";export{ae as default};
//# sourceMappingURL=index-68403fd5.js.map
