import{k as S}from"./@illa-design-402f214a.js";import{r as c}from"./react-9b7e00e3.js";import{b as h,cj as $,g$ as M,h0 as b}from"./index-2f1869ab.js";import T from"./index-dadf6af3.js";import{g as i,t as x}from"./lodash-lib-6e94956b.js";import"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./react-icons-vendor-2430ea65.js";import"./index-9dcf4ab8.js";import"./index-65ed348a.js";import"./index-e7294a86.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./util-302f4200.js";import"./index-323e87cb.js";import"./style-87b0eeec.js";import"./style-ab05d1ea.js";const y=(t,r,o)=>{if(t===""||t==null)return"";const n=`${t.substring(`{{${o}.${r}.map((currentRow) => ( `.length,t.length-4)}`;return t.includes("currentRow")?M(n):t},f=(t,r,o)=>{const n=b(t);return n===""?n:`{{${o}.${r}.map((currentRow) => ( ${n}))}}`},D=t=>{const{parentAttrName:r,handleUpdateDsl:o,value:n,widgetDisplayName:s}=t,p=h(e=>{const u=$(e);return i(u,s,{})}),d=c.useMemo(()=>i(p,"dataSourceMode","select")==="dynamic",[p]),l=c.useMemo(()=>i(p,`${r}.fromCurrentRow`,{}),[p,r]),a=c.useMemo(()=>d?"dataSourceJS":"dataSource",[d]),g=c.useCallback((e,u)=>{const m=u.includes("currentRow"),C=m?f(u,a,s):u,R=x(e).at(-1);o(e,C),o(`${r}.fromCurrentRow`,{...l,[R]:m})},[a,l,o,r,s]),w=c.useCallback(e=>e.includes("currentRow")?f(e,a,s):e,[a,s]);return S(T,{...t,value:y(n,a,s),wrappedCodeFunc:w,handleUpdateDsl:g})};D.displayName="TableMappedValueInputSetter";export{D as default};
//# sourceMappingURL=tableMappedValueInputSetter-5c6f1b70.js.map
