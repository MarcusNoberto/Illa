{"version":3,"file":"radioButton-051fb077.js","sources":["../../src/widgetLibrary/RadioButtonWidget/radioButton.tsx"],"sourcesContent":["import { FC, useCallback, useEffect, useMemo } from \"react\"\nimport { RadioGroup } from \"@illa-design/react\"\nimport { AutoHeightContainer } from \"@/widgetLibrary/PublicSector/AutoHeightContainer\"\nimport { InvalidMessage } from \"@/widgetLibrary/PublicSector/InvalidMessage/\"\nimport { handleValidateCheck } from \"@/widgetLibrary/PublicSector/InvalidMessage/utils\"\nimport { Label } from \"@/widgetLibrary/PublicSector/Label\"\nimport { TooltipWrapper } from \"@/widgetLibrary/PublicSector/TooltipWrapper\"\nimport {\n  applyLabelAndComponentWrapperStyle,\n  applyValidateMessageWrapperStyle,\n} from \"@/widgetLibrary/PublicSector/TransformWidgetWrapper/style\"\nimport { formatSelectOptions } from \"@/widgetLibrary/PublicSector/utils/formatSelectOptions\"\nimport { RadioButtonWidgetProps, WrappedRadioButtonProps } from \"./interface\"\n\nexport const WrappedRadioButton: FC<WrappedRadioButtonProps> = (props) => {\n  const {\n    value,\n    options,\n    disabled,\n    direction,\n    colorScheme,\n    handleOnChange,\n    getValidateMessage,\n    handleUpdateMultiExecutionResult,\n    displayName,\n  } = props\n\n  const changeValue = (value?: number | undefined) => {\n    new Promise((resolve) => {\n      const message = getValidateMessage(value)\n      handleUpdateMultiExecutionResult([\n        {\n          displayName,\n          value: {\n            value: value || \"\",\n            validateMessage: message,\n          },\n        },\n      ])\n      resolve(true)\n    }).then(() => {\n      handleOnChange?.()\n    })\n  }\n\n  return (\n    <RadioGroup\n      w=\"100%\"\n      minW=\"0\"\n      type=\"button\"\n      forceEqualWidth\n      value={value}\n      disabled={disabled}\n      options={options}\n      direction={direction}\n      colorScheme={colorScheme}\n      onChange={changeValue}\n    />\n  )\n}\n\nWrappedRadioButton.displayName = \"WrappedRadioButton\"\n\nexport const RadioButtonWidget: FC<RadioButtonWidgetProps> = (props) => {\n  const {\n    value,\n    optionConfigureMode,\n    manualOptions,\n    mappedOption,\n    handleUpdateDsl,\n    updateComponentRuntimeProps,\n    deleteComponentRuntimeProps,\n    labelPosition,\n    labelFull,\n    label,\n    labelAlign,\n    labelWidth = 33,\n    labelCaption,\n    labelWidthUnit,\n    required,\n    labelHidden,\n    tooltipText,\n    customRule,\n    hideValidationMessage,\n    validateMessage,\n    updateComponentHeight,\n    triggerEventHandler,\n  } = props\n\n  const finalOptions = useMemo(() => {\n    return formatSelectOptions(optionConfigureMode, manualOptions, mappedOption)\n  }, [optionConfigureMode, manualOptions, mappedOption])\n\n  const getValidateMessage = useCallback(\n    (value?: unknown) => {\n      if (!hideValidationMessage) {\n        const message = handleValidateCheck({\n          value,\n          required,\n          customRule,\n        })\n        const showMessage = message && message.length > 0\n        return showMessage ? message : \"\"\n      }\n      return \"\"\n    },\n    [customRule, hideValidationMessage, required],\n  )\n\n  const handleValidate = useCallback(\n    (value?: unknown) => {\n      const message = getValidateMessage(value)\n      handleUpdateDsl({\n        validateMessage: message,\n      })\n      return message\n    },\n    [getValidateMessage, handleUpdateDsl],\n  )\n\n  useEffect(() => {\n    updateComponentRuntimeProps({\n      setValue: (value: any) => {\n        handleUpdateDsl({ value })\n      },\n      clearValue: () => {\n        handleUpdateDsl({ value: undefined })\n      },\n      validate: () => {\n        return handleValidate(value)\n      },\n      clearValidation: () => {},\n    })\n    return () => {\n      deleteComponentRuntimeProps()\n    }\n  }, [\n    updateComponentRuntimeProps,\n    handleUpdateDsl,\n    deleteComponentRuntimeProps,\n    handleValidate,\n    value,\n  ])\n\n  const handleOnChange = useCallback(() => {\n    triggerEventHandler(\"change\")\n  }, [triggerEventHandler])\n\n  return (\n    <AutoHeightContainer updateComponentHeight={updateComponentHeight}>\n      <TooltipWrapper tooltipText={tooltipText} tooltipDisabled={!tooltipText}>\n        <div css={applyLabelAndComponentWrapperStyle(labelPosition)}>\n          <Label\n            labelFull={labelFull}\n            label={label}\n            labelAlign={labelAlign}\n            labelWidth={labelWidth}\n            labelCaption={labelCaption}\n            labelWidthUnit={labelWidthUnit}\n            labelPosition={labelPosition}\n            required={required}\n            labelHidden={labelHidden}\n            hasTooltip={!!tooltipText}\n          />\n          <WrappedRadioButton\n            {...props}\n            options={finalOptions}\n            getValidateMessage={getValidateMessage}\n            handleOnChange={handleOnChange}\n          />\n        </div>\n      </TooltipWrapper>\n      <div\n        css={applyValidateMessageWrapperStyle(\n          labelWidth,\n          labelPosition,\n          labelHidden || !label,\n        )}\n      >\n        <InvalidMessage validateMessage={validateMessage} />\n      </div>\n    </AutoHeightContainer>\n  )\n}\nRadioButtonWidget.displayName = \"RadioButtonWidget\"\nexport default RadioButtonWidget\n"],"names":["WrappedRadioButton","props","value","options","disabled","direction","colorScheme","handleOnChange","getValidateMessage","handleUpdateMultiExecutionResult","displayName","jsx","RadioGroup","resolve","message","RadioButtonWidget","optionConfigureMode","manualOptions","mappedOption","handleUpdateDsl","updateComponentRuntimeProps","deleteComponentRuntimeProps","labelPosition","labelFull","label","labelAlign","labelWidth","labelCaption","labelWidthUnit","required","labelHidden","tooltipText","customRule","hideValidationMessage","validateMessage","updateComponentHeight","triggerEventHandler","finalOptions","useMemo","formatSelectOptions","useCallback","handleValidateCheck","handleValidate","useEffect","jsxs","AutoHeightContainer","TooltipWrapper","applyLabelAndComponentWrapperStyle","Label","applyValidateMessageWrapperStyle","InvalidMessage"],"mappings":"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"}