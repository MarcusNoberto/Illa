import{k as l,F as y,o as w}from"./@illa-design-1f43bb6c.js";import{r as g}from"./react-9b7e00e3.js";import{b5 as t,eH as u,hX as E,hY as G,hZ as j,h_ as k,h$ as M,i0 as A,i1 as O,u as H,e as U,b as T,fv as F,bA as L,hW as K,be as J}from"./index-4dce6ee8.js";import{I as R}from"./index-2c4267bb.js";import{S as x}from"./index-01ad6233.js";import{c as q,T as Y}from"./index-cd7c17cc.js";import"./@emotion-08a6282b.js";import"./codeMirror-vendor-320207e2.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";import"./index-03ca7e7b.js";import"./index-6f32d056.js";import"./index-5be17f9b.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./index-b9f5fd51.js";import"./hook-302a78fc.js";import"./renderComponentCanvasContainer-2e4cd54a.js";import"./style-49f23046.js";import"./index-d48f7e94.js";import"./index-cf2bb556.js";import"./index-2fdfc937.js";import"./layoutInfoListener-bd63c738.js";import"./drive-584d85d3.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./popper-a04e2b11.js";import"./objectWithoutPropertiesLoose-e3246981.js";import"./clsx-06f54762.js";import"./index-934389e2.js";import"./style-51b259bb.js";import"./style-af69883e.js";const Q=[{label:t.t("editor.action.panel.label.option.couchdb.action_type.list"),value:"listRecords"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.retrieve"),value:"retrieveRecord"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.create"),value:"createRecord"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.update"),value:"updateRecord"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.delete"),value:"deleteRecord"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.find"),value:"find"},{label:t.t("editor.action.panel.label.option.couchdb.action_type.get"),value:"getView"}],W=[{title:t.t("editor.action.panel.label.option.couchdb.skip"),type:"editor",expectedType:u.NUMBER,name:["opts","skip"]},{title:t.t("editor.action.panel.label.option.couchdb.limit"),type:"editor",expectedType:u.NUMBER,name:["opts","limit"]},{title:t.t("editor.action.panel.label.option.couchdb.include"),type:"switch",name:["opts","includeDocs"],content:t.t("editor.action.panel.label.option.couchdb.include_doc_option")},{title:t.t("editor.action.panel.label.option.couchdb.des"),type:"switch",name:["opts","descendingOrder"],content:t.t("editor.action.panel.label.option.couchdb.des_option")}],X=[{title:t.t("editor.action.panel.label.option.couchdb.id"),type:"editor",expectedType:u.STRING,name:["opts","_id"],lineNumbers:!0,style:{maxHeight:"88px"}}],Z=[{title:t.t("editor.action.panel.label.option.couchdb.record"),type:"editor",expectedType:u.OBJECT,name:["opts","record"],lineNumbers:!0,placeholder:t.t("editor.action.panel.label.placeholder.couchdb.record"),style:{height:"88px"}}],$=[{title:t.t("editor.action.panel.label.option.couchdb.id"),type:"editor",expectedType:u.STRING,name:["opts","_id"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.rev"),type:"editor",expectedType:u.STRING,name:["opts","_rev"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.record"),type:"editor",expectedType:u.OBJECT,name:["opts","record"],lineNumbers:!0,placeholder:t.t("editor.action.panel.label.placeholder.couchdb.record"),style:{height:"88px"}}],z=[{title:t.t("editor.action.panel.label.option.couchdb.id"),type:"editor",expectedType:u.STRING,name:["opts","_id"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.rev"),type:"editor",expectedType:u.STRING,name:["opts","_rev"],lineNumbers:!0,style:{maxHeight:"88px"}}],ee=[{title:t.t("editor.action.panel.label.option.couchdb.mangoquery"),type:"editor",expectedType:u.OBJECT,name:["opts","mangoQuery"],lineNumbers:!0,placeholder:t.t("editor.action.panel.label.placeholder.couchdb.mangoquery"),style:{height:"88px"}}],te=[{title:t.t("editor.action.panel.label.option.couchdb.ViewURL"),type:"editor",expectedType:u.STRING,name:["opts","viewurl"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.StartKey"),type:"editor",expectedType:u.STRING,name:["opts","startkey"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.EndKey"),type:"editor",expectedType:u.STRING,name:["opts","endkey"],lineNumbers:!0,style:{maxHeight:"88px"}},{title:t.t("editor.action.panel.label.option.couchdb.skip"),type:"editor",expectedType:u.NUMBER,name:["opts","skip"]},{title:t.t("editor.action.panel.label.option.couchdb.limit"),type:"editor",expectedType:u.NUMBER,name:["opts","limit"]},{title:t.t("editor.action.panel.label.option.couchdb.include"),type:"switch",name:["opts","includeDocs"],content:t.t("editor.action.panel.label.option.couchdb.include_doc_option")}],oe={listRecords:E,retrieveRecord:G,createRecord:j,updateRecord:k,deleteRecord:M,find:A,getView:O},I=o=>{const{onInputValueChange:c}=o,p=o.opts;return l(y,{children:Z.map(a=>{const{title:i,name:e,expectedType:r,lineNumbers:n,style:d={},placeholder:s}=a,m=p[e[1]];return l(R,{title:i,expectedType:r,value:m,onChange:c(e),lineNumbers:!!n,placeholder:s,style:d},e.join("-"))})})};I.displayName="CreateRecordSubPanel";const S=o=>{const{onInputValueChange:c}=o,p=o.opts;return l(y,{children:z.map(a=>{const{title:i,name:e,expectedType:r,lineNumbers:n,style:d={}}=a,s=p[e[1]];return l(R,{title:i,expectedType:r,value:s,onChange:c(e),lineNumbers:!!n,style:d},e.join("-"))})})};S.displayName="DeleteRecordSubPanel";const f=o=>{const{onInputValueChange:c}=o,p=o.opts;return l(y,{children:ee.map(a=>{const{title:i,name:e,expectedType:r,lineNumbers:n,style:d,placeholder:s}=a,m=p[e[1]];return l(R,{title:i,expectedType:r,value:m,onChange:c(e),lineNumbers:!!n,placeholder:s,style:d},e.join("-"))})})};f.displayName="FindRecordSubPanel";const v=o=>{const{onInputValueChange:c,onBooleanValueChange:p}=o,a=o.opts;return l(y,{children:te.map(i=>{const{title:e,type:r,name:n,expectedType:d,lineNumbers:s=!1,style:m={},content:N=""}=i,h=a[n[1]];return r==="editor"?l(R,{title:e,expectedType:d,value:h,onChange:c(n),lineNumbers:s,style:m},n.join("-")):l(x,{title:e,componentType:r,onBooleanValueChange:p(n),value:h,switchContent:N},n.join("-"))})})};v.displayName="GetViewSubPanel";const V=o=>{const{onBooleanValueChange:c,onInputValueChange:p}=o,a=o.opts;return l(y,{children:W.map(i=>{const{title:e,type:r,name:n,expectedType:d,content:s=""}=i,m=a[n[1]];return r==="editor"?l(R,{title:e,expectedType:d,value:m,onChange:p(n)},n.join("-")):l(x,{title:e,componentType:r,onBooleanValueChange:c(n),value:m,switchContent:s},n.join("-"))})})};V.displayName="ListRecordsSubPanel";const B=o=>{const{onInputValueChange:c}=o,p=o.opts;return l(y,{children:X.map(a=>{const{title:i,name:e,expectedType:r,lineNumbers:n,style:d={}}=a,s=p[e[1]];return l(R,{title:i,expectedType:r,value:s,onChange:c(e),lineNumbers:!!n,style:d},e.join("-"))})})};B.displayName="RetrieveRecordSubPanel";const D=o=>{const{onInputValueChange:c}=o,p=o.opts;return l(y,{children:$.map(a=>{const{title:i,name:e,expectedType:r,lineNumbers:n,style:d={},placeholder:s}=a,m=p[e[1]];return l(R,{title:i,expectedType:r,value:m,onChange:c(e),lineNumbers:!!n,placeholder:s,style:d},e.join("-"))})})};D.displayName="UpdateRecordSubPanel";const ne={listRecords:V,retrieveRecord:B,createRecord:I,updateRecord:D,deleteRecord:S,find:f,getView:v},P=(o,c,p)=>{if(c.length===1){const n=c[0];return{...o,[n]:p}}const[a,...i]=c,e=o[a],r=P(e,i,p);return{...o,[a]:r}},ae=()=>{const{t:o}=H(),c=U(),p=T(F),a=T(L),i=a.content,e=p.content,[r,n]=g.useState([]);g.useEffect(()=>{a.resourceID!=null&&K(a.resourceID).then(({data:h})=>{const{Schema:b}=h;n((b==null?void 0:b.databases)??[])})},[a.resourceID]);const d=g.useCallback((h,b)=>{const _=b[0]==="method";let C={...i};_?e.method===h?C={...e}:C={...i,method:h,opts:oe[h]}:C=P({...C},b,h),c(J.updateCachedAction({...a,content:C}))},[a,i,c,e]),s=g.useCallback(h=>b=>{d(b,[].concat(h))},[d]),m=g.useCallback(h=>b=>{d(b,[].concat(h))},[d]),N=ne[i.method];return w("div",{css:q,children:[l(x,{title:o("editor.action.panel.label.couchdb.database"),componentType:"select",onSelectedValueChange:s("database"),value:i.database,options:r,placeholder:o("editor.action.panel.label.placeholder.couchdb.database")}),l(x,{title:o("editor.action.panel.label.couchdb.action_type"),componentType:"select",onSelectedValueChange:s("method"),value:i.method,options:Q}),l(N,{onInputValueChange:s,onBooleanValueChange:m,opts:i.opts}),l(Y,{})]})};ae.displayName="CouchDBPanel";export{ae as default};
//# sourceMappingURL=index-d5454c31.js.map
