import{k as S}from"./@illa-design-1f43bb6c.js";import{r as a}from"./react-9b7e00e3.js";import{b as i,d0 as M,dN as b,d4 as x,gX as N,eH as k}from"./index-4dce6ee8.js";import{B as E}from"./baseDynamicSelect-8afdaca5.js";import{g as u}from"./lodash-lib-6e94956b.js";import"./@emotion-08a6282b.js";import"./codeMirror-vendor-320207e2.js";import"./react-icons-vendor-2430ea65.js";import"./index-03ca7e7b.js";import"./index-6f32d056.js";import"./index-5be17f9b.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./index-8df6bc42.js";import"./style-8b1d8060.js";import"./style-6680c91c.js";import"./index-934389e2.js";const A=d=>{const{handleUpdateDsl:t,widgetDisplayName:c,labelName:h,labelDesc:g}=d,m=i(M),p=i(b),y=a.useMemo(()=>{var e;return((e=p[`${c}.dataSource`]??[])==null?void 0:e.length)>0},[p,c]),o=i(e=>{var n;return((n=x(c,e))==null?void 0:n.props)||{}}),r=a.useMemo(()=>u(o,"dataSourceMode","select")==="dynamic",[o]),s=a.useMemo(()=>r?u(o,"dataSourceJS"):u(o,"dataSource"),[r,o]),l=a.useMemo(()=>m.map(e=>({label:e.displayName,value:`{{${e.displayName}.data}}`})),[m]),f=a.useCallback(()=>{const e=l.some(n=>n.value===s);r?(t("dataSourceMode","select"),e?t("dataSource",s):t("dataSource","")):(t("dataSourceMode","dynamic"),e&&t("dataSourceJS",s))},[t,r,l,s]),C=a.useCallback(e=>{t("dataSourceJS",e)},[t]),D=a.useCallback(e=>{t("dataSource",e)},[t]);return S("div",{css:N,children:S(E,{...d,isDynamic:r,onClickFxButton:f,selectPlaceholder:"Select a query or transformer",inputPlaceholder:"{{}}",onChangeInput:C,path:`${c}.dataSourceJS`,options:l,expectedType:k.ARRAY,onChangeSelect:D,value:s,labelName:h,labelDesc:g,isError:y})})};A.displayName="DataSourceSetter";export{A as default};
//# sourceMappingURL=dataSourceSelectSetter-7fd95ec2.js.map
