{"version":3,"file":"optionMappedInputSetter-11f51ad4.js","sources":["../../src/utils/InspectHelper/selectWidgetHelper.ts","../../src/page/App/components/InspectPanel/PanelSetters/InputSetter/OptionMappedInput/optionMappedInputSetter.tsx"],"sourcesContent":["import { JSToString, stringToJS } from \"@/utils/evaluateDynamicString/utils\"\n\nexport const realInputValue = (\n  attrValue: string | undefined,\n  widgetDisplayName: string,\n) => {\n  if (attrValue === \"\" || attrValue == undefined) return \"\"\n  const value = `${attrValue.substring(\n    `{{${widgetDisplayName}.dataSources.map((item) => ( `.length,\n    attrValue.length - 4,\n  )}`\n\n  return JSToString(value)\n}\n\nexport const getNeedComputedValue = (\n  value: string,\n  widgetDisplayName: string,\n) => {\n  const stringToCanEvaluate = stringToJS(value)\n  if (stringToCanEvaluate === \"\") {\n    return stringToCanEvaluate\n  }\n  return `{{${widgetDisplayName}.dataSources.map((item) => ( ${stringToCanEvaluate}))}}`\n}\n","import { FC, useCallback } from \"react\"\nimport {\n  getNeedComputedValue,\n  realInputValue,\n} from \"@/utils/InspectHelper/selectWidgetHelper\"\nimport BaseInput from \"../BaseInput\"\nimport { BaseInputSetterProps } from \"../interface\"\n\nconst OptionMappedInputSetter: FC<BaseInputSetterProps> = (props) => {\n  const { handleUpdateDsl, value, widgetDisplayName } = props\n\n  const handleValueChange = useCallback(\n    (attrName: string, value: string) => {\n      const output = getNeedComputedValue(value, widgetDisplayName)\n      handleUpdateDsl(attrName, output)\n    },\n    [handleUpdateDsl, widgetDisplayName],\n  )\n\n  const wrappedCodeFunc = useCallback(\n    (value: string) => {\n      return getNeedComputedValue(value, widgetDisplayName)\n    },\n    [widgetDisplayName],\n  )\n\n  return (\n    <BaseInput\n      {...props}\n      value={realInputValue(value, widgetDisplayName)}\n      handleUpdateDsl={handleValueChange}\n      wrappedCodeFunc={wrappedCodeFunc}\n    />\n  )\n}\n\nOptionMappedInputSetter.displayName = \"OptionMappedInputSetter\"\nexport default OptionMappedInputSetter\n"],"names":["realInputValue","attrValue","widgetDisplayName","value","JSToString","getNeedComputedValue","stringToCanEvaluate","stringToJS","OptionMappedInputSetter","props","handleUpdateDsl","handleValueChange","useCallback","attrName","output","wrappedCodeFunc","jsx","BaseInput"],"mappings":"yjBAEa,MAAAA,EAAiB,CAC5BC,EACAC,IACG,CACC,GAAAD,IAAc,IAAMA,GAAa,KAAkB,MAAA,GACjD,MAAAE,EAAQ,GAAGF,EAAU,UACzB,KAAKC,CAAiB,gCAAgC,OACtDD,EAAU,OAAS,CACpB,CAAA,GAED,OAAOG,EAAWD,CAAK,CACzB,EAEaE,EAAuB,CAClCF,EACAD,IACG,CACG,MAAAI,EAAsBC,EAAWJ,CAAK,EAC5C,OAAIG,IAAwB,GACnBA,EAEF,KAAKJ,CAAiB,gCAAgCI,CAAmB,MAClF,EChBME,EAAqDC,GAAU,CACnE,KAAM,CAAE,gBAAAC,EAAiB,MAAAP,EAAO,kBAAAD,CAAA,EAAsBO,EAEhDE,EAAoBC,EAAA,YACxB,CAACC,EAAkBV,IAAkB,CAC7B,MAAAW,EAAST,EAAqBF,EAAOD,CAAiB,EAC5DQ,EAAgBG,EAAUC,CAAM,CAClC,EACA,CAACJ,EAAiBR,CAAiB,CAAA,EAG/Ba,EAAkBH,EAAA,YACrBT,GACQE,EAAqBF,EAAOD,CAAiB,EAEtD,CAACA,CAAiB,CAAA,EAIlB,OAAAc,EAACC,EAAA,CACE,GAAGR,EACJ,MAAOT,EAAeG,EAAOD,CAAiB,EAC9C,gBAAiBS,EACjB,gBAAAI,CAAA,CAAA,CAGN,EAEAP,EAAwB,YAAc"}