import{k as S}from"./@illa-design-402f214a.js";import{r as a}from"./react-9b7e00e3.js";import{b as i,d1 as M,dO as b,d5 as x,gY as N,eI as k}from"./index-2f1869ab.js";import{B as E}from"./baseDynamicSelect-34bff5ed.js";import{g as u}from"./lodash-lib-6e94956b.js";import"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./react-icons-vendor-2430ea65.js";import"./index-9dcf4ab8.js";import"./index-65ed348a.js";import"./index-e7294a86.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./index-388caa78.js";import"./style-f1ef1d8c.js";import"./style-ab05d1ea.js";import"./index-323e87cb.js";const I=d=>{const{handleUpdateDsl:t,widgetDisplayName:c,labelName:h,labelDesc:g}=d,m=i(M),p=i(b),y=a.useMemo(()=>{var e;return((e=p[`${c}.dataSource`]??[])==null?void 0:e.length)>0},[p,c]),o=i(e=>{var n;return((n=x(c,e))==null?void 0:n.props)||{}}),r=a.useMemo(()=>u(o,"dataSourceMode","select")==="dynamic",[o]),s=a.useMemo(()=>r?u(o,"dataSourceJS"):u(o,"dataSource"),[r,o]),l=a.useMemo(()=>m.map(e=>({label:e.displayName,value:`{{${e.displayName}.data}}`})),[m]),f=a.useCallback(()=>{const e=l.some(n=>n.value===s);r?(t("dataSourceMode","select"),e?t("dataSource",s):t("dataSource","")):(t("dataSourceMode","dynamic"),e&&t("dataSourceJS",s))},[t,r,l,s]),C=a.useCallback(e=>{t("dataSourceJS",e)},[t]),D=a.useCallback(e=>{t("dataSource",e)},[t]);return S("div",{css:N,children:S(E,{...d,isDynamic:r,onClickFxButton:f,selectPlaceholder:"Select a query or transformer",inputPlaceholder:"{{}}",onChangeInput:C,path:`${c}.dataSourceJS`,options:l,expectedType:k.ARRAY,onChangeSelect:D,value:s,labelName:h,labelDesc:g,isError:y})})};I.displayName="DataSourceSetter";export{I as default};
//# sourceMappingURL=dataSourceSelectSetter-f2fde6e8.js.map
