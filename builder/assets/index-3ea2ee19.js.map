{"version":3,"file":"index-3ea2ee19.js","sources":["../../src/page/App/components/Actions/ActionPanel/Layout/Label/style.ts","../../src/page/App/components/Actions/ActionPanel/Layout/Label/index.tsx","../../src/page/App/components/Actions/ActionPanel/Layout/HorizontalWithLabel/style.ts","../../src/page/App/components/Actions/ActionPanel/Layout/HorizontalWithLabel/index.tsx","../../src/page/App/components/Actions/ActionPanel/AIAgentPanel/index.tsx"],"sourcesContent":["import { css } from \"@emotion/react\"\n\nexport const actionPanelLabelContainerStyle = css`\n  width: 160px;\n  flex-shrink: 0;\n  text-align: right;\n  font-size: 14px;\n  font-weight: 500;\n  line-height: 22px;\n`\n","import { FC, memo } from \"react\"\nimport { ActionPanelLabelProps } from \"./interface\"\nimport { actionPanelLabelContainerStyle } from \"./style\"\n\nconst ActionPanelLabel: FC<ActionPanelLabelProps> = (props) => {\n  const { name } = props\n  return <span css={actionPanelLabelContainerStyle}>{name}</span>\n}\n\nActionPanelLabel.displayName = \"ActionPanelLabel\"\n\nexport default memo(ActionPanelLabel)\n","import { css } from \"@emotion/react\"\n\nexport const horizontalWithLabelContainerStyle = css`\n  width: 100%;\n  display: flex;\n  padding: 8px 16px;\n  gap: 16px;\n  align-items: center;\n`\n","import { FC, memo } from \"react\"\nimport ActionPanelLabel from \"../Label\"\nimport { HorizontalWithLabelProps } from \"./interface\"\nimport { horizontalWithLabelContainerStyle } from \"./style\"\n\nconst HorizontalWithLabel: FC<HorizontalWithLabelProps> = (props) => {\n  const { labelName, children } = props\n  return (\n    <div css={horizontalWithLabelContainerStyle}>\n      <ActionPanelLabel name={labelName} />\n      {children}\n    </div>\n  )\n}\n\nHorizontalWithLabel.displayName = \"HorizontalWithLabel\"\n\nexport default memo(HorizontalWithLabel)\n","import { getLLM } from \"@illa-public/market-agent\"\nimport { AiAgentActionContent, Params } from \"@illa-public/public-types\"\nimport { FC, useCallback, useMemo } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Input } from \"@illa-design/react\"\nimport { CodeEditor } from \"@/components/CodeEditor\"\nimport { CODE_LANG } from \"@/components/CodeEditor/CodeMirror/extensions/interface\"\nimport { RecordEditor } from \"@/components/RecordEditor\"\nimport { getCachedAction } from \"@/redux/config/configSelector\"\nimport { configActions } from \"@/redux/config/configSlice\"\nimport { VALIDATION_TYPES } from \"@/utils/validationFactory\"\nimport HorizontalWithLabel from \"../Layout/HorizontalWithLabel\"\nimport { TransformerComponent } from \"../TransformerComponent\"\n\nconst AIAgentPanel: FC = () => {\n  const currentAction = useSelector(getCachedAction)!\n  const { t } = useTranslation()\n  const dispatch = useDispatch()\n\n  const aiAgentContent = currentAction.content as AiAgentActionContent\n\n  const handleChangeInput = useCallback(\n    (value: string) => {\n      dispatch(\n        configActions.updateCachedAction({\n          ...currentAction,\n          content: {\n            ...aiAgentContent,\n            input: value,\n          },\n        }),\n      )\n    },\n    [currentAction, dispatch, aiAgentContent],\n  )\n\n  const handleChangeVariableValue = useCallback(\n    (index: number, key: string, value: string) => {\n      let newList: Params[] = [...aiAgentContent.variables]\n      newList[index] = { key, value }\n      dispatch(\n        configActions.updateCachedAction({\n          ...currentAction,\n          content: {\n            ...aiAgentContent,\n            variables: newList,\n          },\n        }),\n      )\n    },\n    [aiAgentContent, currentAction, dispatch],\n  )\n\n  const variables = useMemo(() => {\n    const resourcesKeys = (aiAgentContent.virtualResource?.variables ?? []).map(\n      (item) => item.key,\n    )\n\n    let resourcesKeyValues: Record<string, string> = {}\n    if ((aiAgentContent.virtualResource?.variables ?? []).length > 0) {\n      ;(aiAgentContent.virtualResource?.variables ?? []).forEach((item) => {\n        if (!item) return\n        resourcesKeyValues[item.key] = item.value\n      })\n    }\n\n    let currentActionKeyValues: Record<string, string> = {}\n\n    if (aiAgentContent.variables.length > 0) {\n      aiAgentContent.variables.forEach((item) => {\n        if (!item) return\n        currentActionKeyValues[item.key] = item.value\n      })\n    }\n\n    const variable = resourcesKeys.map((item) => {\n      return {\n        key: item,\n        value: currentActionKeyValues[item] || resourcesKeyValues[item] || \"\",\n      }\n    })\n    return variable\n  }, [aiAgentContent.variables, aiAgentContent.virtualResource?.variables])\n\n  return (\n    <div>\n      {aiAgentContent.virtualResource && (\n        <HorizontalWithLabel labelName={t(\"editor.ai-agent.label.model\")}>\n          <Input\n            prefix={getLLM(aiAgentContent.virtualResource.model)?.logo}\n            colorScheme=\"techPurple\"\n            readOnly\n            value={getLLM(aiAgentContent.virtualResource.model)?.name}\n          />\n        </HorizontalWithLabel>\n      )}\n      {variables.length > 0 && (\n        <RecordEditor\n          fillOnly\n          records={variables}\n          onChangeValue={handleChangeVariableValue}\n          label={t(\"editor.ai-agent.label.variable\")}\n        />\n      )}\n      <HorizontalWithLabel\n        labelName={t(\"editor.action.panel.label.ai-agent.input\")}\n      >\n        <CodeEditor\n          lang={CODE_LANG.JAVASCRIPT}\n          expectValueType={VALIDATION_TYPES.STRING}\n          modalTitle={t(\"editor.action.panel.label.ai-agent.input\")}\n          value={aiAgentContent.input}\n          onChange={handleChangeInput}\n        />\n      </HorizontalWithLabel>\n      <TransformerComponent />\n    </div>\n  )\n}\n\nAIAgentPanel.displayName = \"AIAgentPanel\"\n\nexport default AIAgentPanel\n"],"names":["actionPanelLabelContainerStyle","css","ActionPanelLabel","props","name","jsx","memo","horizontalWithLabelContainerStyle","HorizontalWithLabel","labelName","children","jsxs","AIAgentPanel","currentAction","useSelector","getCachedAction","t","useTranslation","dispatch","useDispatch","aiAgentContent","handleChangeInput","useCallback","value","configActions","handleChangeVariableValue","index","key","newList","variables","useMemo","resourcesKeys","_a","item","resourcesKeyValues","_b","_c","currentActionKeyValues","Input","getLLM","RecordEditor","CodeEditor","CODE_LANG","VALIDATION_TYPES","TransformerComponent"],"mappings":"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"}