import{n as w,k as n,o as M,F as j,aj as N,N as m,A as P}from"./@illa-design-402f214a.js";import{a as S,j as W}from"./@emotion-4f16718e.js";import{r as a}from"./react-9b7e00e3.js";import{R as D}from"./index-2218d726.js";import{M as L}from"./index-461ab516.js";import{T as $}from"./index-5f69abbc.js";import{u as F}from"./index-2f1869ab.js";import{k as R}from"./lodash-lib-6e94956b.js";import"./codeMirror-vendor-eff8ab8d.js";import"./react-icons-vendor-2430ea65.js";const I=S`
  width: 100%;
  height: 100%;
  overflow: hidden;
`,f=S`
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: ${w("gray","01")};
  color: ${w("white","01")};
`,V=a.forwardRef((u,o)=>{const{url:l,playing:c,autoPlay:r,controls:d=!0,loop:t,volume:y,muted:p,playbackRate:g,onPlay:h,onReady:v,onPause:b,onEnded:E,onPlaybackRateChange:e}=u,{t:s}=F(),[i,T]=a.useState(!0),[C,x]=a.useState(!1),{sourceLoadErrorHandler:k}=a.useContext(L);return l===""?n("div",{css:f,children:s("widget.video.empty")}):M(j,{children:[i?n("div",{css:f,children:n(P,{colorScheme:"white"})}):C?n("div",{css:f,children:s("widget.video.fail")}):null,n(D,{style:i||C?{display:"none"}:void 0,fallback:n("div",{css:f,children:n(P,{colorScheme:"white"})}),ref:o,width:"100%",height:"100%",url:l,volume:y,muted:p,controls:d,playbackRate:g,loop:t,playing:r||c,draggable:!1,onReady:()=>{T(!1),x(!1),v()},onPlay:h,onPause:b,onEnded:E,onError:()=>{k==null||k(l,"VIDEO_WIDGET"),T(!1),x(!0)},onPlaybackRateChange:e})]})});V.displayName="WrappedVideo";const U=u=>{const{handleUpdateMultiExecutionResult:o,updateComponentRuntimeProps:l,deleteComponentRuntimeProps:c,displayName:r,tooltipText:d,triggerEventHandler:t,controls:y}=u,p=a.useRef(null);a.useEffect(()=>(l({play:()=>{o([{displayName:r,value:{playing:!0}}])},pause:()=>{o([{displayName:r,value:{playing:!1}}])},setVideoUrl:e=>{if(!N(e)){console.error("TypeError: url is not a string");return}o([{displayName:r,value:{url:e}}])},seekTo:(e,s="seconds")=>{var i;if(!m(e)){console.error("TypeError: value is not a number");return}(i=p.current)==null||i.seekTo(e,s)},mute:e=>{if(!R(e)){console.error("TypeError: value is not a boolean");return}o([{displayName:r,value:{muted:e}}])},showControls:e=>{if(!R(e)){console.error("TypeError: value is not a boolean");return}o([{displayName:r,value:{controls:e}}])},setLoop:e=>{if(!R(e)){console.error("TypeError: value is not a boolean");return}o([{displayName:r,value:{loop:e}}])},setSpeed:e=>{if(!m(e)){console.error("TypeError: value is not a number");return}const s=Math.max(.0625,Math.min(16,e));o([{displayName:r,value:{playbackRate:s}}])},setVolume:e=>{if(!m(e)){console.error("TypeError: value is not a number");return}const s=Math.max(0,Math.min(1,e));o([{displayName:r,value:{volume:s}}])}}),()=>{c()}),[l,c,o,r]);const g=a.useCallback(()=>{o([{displayName:r,value:{playing:!0}}]),t("play")},[r,t,o]),h=a.useCallback(()=>{o([{displayName:r,value:{playing:!1}}]),t("pause")},[r,t,o]),v=a.useCallback(()=>{t("loaded")},[t]),b=a.useCallback(()=>{t("ended")},[t]),E=a.useCallback(e=>{m(e)&&o([{displayName:r,value:{playbackRate:e}}])},[r,o]);return n($,{tooltipText:d,tooltipDisabled:!d,children:n("div",{css:I,children:W(V,{...u,key:Number(y),ref:p,onReady:v,onPlay:g,onPause:h,onEnded:b,onPlaybackRateChange:E})})})};U.displayName="VideoWidget";export{U as VideoWidget,V as WrappedVideo,U as default};
//# sourceMappingURL=video-32099ae7.js.map
