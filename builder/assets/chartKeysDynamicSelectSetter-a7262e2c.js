import{k}from"./@illa-design-402f214a.js";import{r}from"./react-9b7e00e3.js";import{b as S,cj as j,cn as v,cm as J,aS as N,dO as R,gY as P,eI as F}from"./index-2f1869ab.js";import{a as E}from"./listItem-00848ca6.js";import{B as _}from"./baseDynamicSelect-34bff5ed.js";import{f as Y}from"./formatData-3ff4f5a5.js";import{g as i}from"./lodash-lib-6e94956b.js";import"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./react-icons-vendor-2430ea65.js";import"./index-9dcf4ab8.js";import"./index-65ed348a.js";import"./index-e7294a86.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./index-388caa78.js";import"./style-f1ef1d8c.js";import"./style-ab05d1ea.js";import"./index-323e87cb.js";const G=C=>{const{widgetDisplayName:a,attrName:o,value:m,labelName:M,labelDesc:O,panelConfig:y,handleUpdateMultiAttrDSL:n}=C,c=S(e=>{const t=j(e);return i(t,a,{})}),b=S(e=>{const t=v(J(e),a);return t?t.props||{}:{}}),x=r.useMemo(()=>i(c,"dataSourceMode","select")==="dynamic",[c]),l=r.useMemo(()=>{let e=i(c,"dataSource",[]);return x&&(e=i(c,"dataSourceJS",[])),Y(e)},[x,c]),f=r.useMemo(()=>{if(!N(l))return[];let e=Object.keys(l).map(t=>t);return o==="groupBy"&&m&&e.unshift("—"),e},[o,l,m]),p=r.useMemo(()=>i(b,"datasets",[]),[b]),h=r.useCallback(e=>p.length?e?p.map(t=>({...t,color:"illa-preset"})):p.map((t,g)=>({...t,color:E[g%E.length]})):[],[p]),s=r.useCallback((e,t)=>{if(e==="groupBy")if(m&&!t||!m&&t){const g=h(!!t);n==null||n({datasets:g,[e]:t==="—"?void 0:t})}else n==null||n({[e]:t==="—"?void 0:t});else n==null||n({[e]:t})},[h,n,m]),$=S(R),I=r.useMemo(()=>{var e;return((e=$[`${a}.${o}JS`]??[])==null?void 0:e.length)>0},[o,$,a]),d=r.useMemo(()=>i(c,`${a}.${o}JS`,"select")==="dynamic",[o,c,a]),u=r.useMemo(()=>i(y,o,""),[o,y]),T=r.useCallback(()=>{const e=f.some(t=>t===u);d?(s(`${a}.${o}JS`,"select"),e?s(o,u):s(o,"")):(s(`${a}.${o}JS`,"dynamic"),e&&s(o,u))},[f,d,u,s,a,o]),B=r.useCallback(e=>{s==null||s(o,e)},[o,s]),D=r.useCallback(e=>{s(o,e)},[o,s]);return k("div",{css:P,children:k(_,{...C,isDynamic:d,options:f,onClickFxButton:T,onChangeSelect:B,value:u,onChangeInput:D,expectedType:F.STRING,path:`${a}.${o}`,labelName:M,labelDesc:O,isError:I})})};G.displayName="ChartXAxisSetter2";export{G as default};
//# sourceMappingURL=chartKeysDynamicSelectSetter-a7262e2c.js.map
