import{o as V,k as r,F as h,D as I,bc as U}from"./@illa-design-402f214a.js";import{u as y,gH as b,gF as F,gG as j,gK as _}from"./index-2f1869ab.js";import{r as G}from"./react-9b7e00e3.js";import{C as c,c as L,o as M}from"./style-8475474f.js";import{I as v}from"./index-ecdc0c14.js";import"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";const O={baseUrl:"",urlParams:[{key:"",value:""}],headers:[{key:"",value:""}],cookies:[{key:"",value:""}],authentication:"none",selfSignedCert:!1,certs:{caCert:"",clientKey:"",clientCert:"",mode:"verify-full"},authContent:{}},A=p=>{const{control:m}=p,e=p.auth,{t:o}=y();return V(h,{children:[r(c,{title:o("editor.action.resource.restapi.label.basic_auth_username"),defaultValue:(e==null?void 0:e.username)??"",name:"username",isRequired:!0,controlledType:"input",control:m,rules:[{validate:b}]}),r(c,{title:o("editor.action.resource.restapi.label.basic_auth_password"),defaultValue:(e==null?void 0:e.password)??"",name:"password",isRequired:!0,controlledType:"password",control:m,rules:[{required:!0}]})]})};A.displayName="BasicAuthPanel";const x=p=>{const{control:m}=p,e=p.auth,{t:o}=y();return r(c,{title:o("editor.action.resource.restapi.label.bearerToken"),defaultValue:(e==null?void 0:e.token)??"",name:"token",controlledType:"input",control:m,isRequired:!0,rules:[{validate:b}]})};x.displayName="BearerAuthPanel";const z=[{title:"editor.action.resource.restapi.label.digest_auth_username",name:"username",controlledType:"input",defaultValue:"",required:!1},{title:"editor.action.resource.restapi.label.digest_auth_password",name:"password",controlledType:"password",defaultValue:"",required:!1}],q=p=>{const{control:m}=p,e=p.auth,{t:o}=y();return r(h,{children:z.map(d=>r(c,{title:o(d.title),defaultValue:(e==null?void 0:e[d.name])??d.defaultValue,name:d.name,controlledType:d.controlledType,control:m,isRequired:d.required},d.name))})};q.displayName="DigestAuthPanel";const H={none:null,basic:A,bearer:x,digest:q},W=p=>{var C,g,w,R,T;const{resourceID:m}=p,{t:e}=y(),{control:o,watch:d}=F(),{getResourceByID:P}=G.useContext(j),f=P(m),t=(f==null?void 0:f.content)??O,D=(d("baseUrl",t.baseUrl)??"").startsWith("https://"),S=d("selfSignedCert",t==null?void 0:t.selfSignedCert),K=d("mode",(C=t.certs)==null?void 0:C.mode)==="skip",N=d("authentication",t.authentication),k=H[N],E=[{label:e("editor.action.resource.restapi.option.authentication.none"),value:"none"},{label:e("editor.action.resource.restapi.option.authentication.basic_auth"),value:"basic"},{label:e("editor.action.resource.restapi.option.authentication.bearer"),value:"bearer"},{label:e("editor.action.form.option.restapi.authentication.digest_auth"),value:"digest"}],B=[{label:e("editor.action.form.option.restapi.verification_mode.full_verification"),value:"verify-full"},{label:e("editor.action.form.option.restapi.verification_mode.verify_ca_certificat"),value:"verify-ca"},{label:e("editor.action.form.option.restapi.verification_mode.skip_ca_certificate_"),value:"skip"}];return r(h,{children:V("div",{css:L,children:[r(c,{controlledType:"input",isRequired:!0,title:e("editor.action.resource.db.label.name"),control:o,defaultValue:(f==null?void 0:f.resourceName)??"",rules:[{validate:b}],placeholders:[e("editor.action.resource.db.placeholder.name")],name:"resourceName",tips:e("editor.action.resource.restapi.tip.name")}),r(I,{direction:"horizontal",ml:"24px",mr:"24px",mt:"8px",mb:"8px",w:"unset"}),r("div",{css:M,children:e("editor.action.resource.db.title.general_option")}),r(c,{title:e("editor.action.resource.restapi.label.base_url"),defaultValue:t.baseUrl,isRequired:!0,name:"baseUrl",controlledType:"input",control:o,rules:[{validate:b}],placeholders:[e("editor.action.resource.restapi.placeholder.base_url")]}),r(_,{control:o,defaultValue:t.urlParams,render:({field:{value:i,onChange:n}})=>r(v,{label:e("editor.action.resource.restapi.label.url_parameters"),records:i,onAdd:()=>{n([...i,{key:"",value:""}])},onDelete:l=>{let a=[...i];a.splice(l,1),a.length===0&&(a=[{key:"",value:""}]),n(a)},onChangeKey:(l,a,u)=>{let s=[...i];s[l]={key:a,value:u},n(s)},onChangeValue:(l,a,u)=>{let s=[...i];s[l]={key:a,value:u},n(s)}}),name:"urlParams"}),r(_,{control:o,defaultValue:t.headers,render:({field:{value:i,onChange:n}})=>r(v,{label:e("editor.action.resource.restapi.label.headers"),records:i,onAdd:()=>{n([...i,{key:"",value:""}])},onDelete:l=>{let a=[...i];a.splice(l,1),a.length===0&&(a=[{key:"",value:""}]),n(a)},onChangeKey:(l,a,u)=>{let s=[...i];s[l]={key:a,value:u},n(s)},onChangeValue:(l,a,u)=>{let s=[...i];s[l]={key:a,value:u},n(s)}}),name:"headers"}),r(_,{control:o,defaultValue:t.cookies,render:({field:{value:i,onChange:n}})=>r(v,{label:e("editor.action.resource.restapi.label.cookies"),records:i,onAdd:()=>{n([...i,{key:"",value:""}])},onDelete:l=>{let a=[...i];a.splice(l,1),a.length===0&&(a=[{key:"",value:""}]),n(a)},onChangeKey:(l,a,u)=>{let s=[...i];s[l]={key:a,value:u},n(s)},onChangeValue:(l,a,u)=>{let s=[...i];s[l]={key:a,value:u},n(s)}}),name:"cookies"}),D&&r(c,{title:e("editor.action.form.label.restapi.certificates"),defaultValue:(t==null?void 0:t.selfSignedCert)??!1,name:"selfSignedCert",controlledType:"switch",control:o,contentLabel:e("editor.action.form.option.restapi.certificates")}),S&&V(h,{children:[r(c,{controlledType:["textarea"],title:e("editor.action.form.option.restapi.ca_certificate"),control:o,defaultValue:((g=t==null?void 0:t.certs)==null?void 0:g.caCert)??"",name:"caCert",placeholders:[e("editor.action.resource.db.placeholder.certificate")]}),r(c,{controlledType:["textarea"],title:e("editor.action.form.option.restapi.client_key"),control:o,defaultValue:((w=t==null?void 0:t.certs)==null?void 0:w.clientKey)??"",name:"clientKey",placeholders:[e("editor.action.resource.db.placeholder.certificate")]}),r(c,{controlledType:["textarea"],title:e("editor.action.form.option.restapi.client_certificate"),control:o,defaultValue:((R=t==null?void 0:t.certs)==null?void 0:R.clientCert)??"",name:"clientCert",placeholders:[e("editor.action.resource.db.placeholder.certificate")]}),r(c,{title:e("editor.action.form.label.restapi.verification_mode"),defaultValue:((T=t==null?void 0:t.certs)==null?void 0:T.mode)??"verify-full",name:"mode",controlledType:"select",control:o,options:B}),K&&r(c,{title:"",defaultValue:"",name:"",controlledType:"none",control:o,tips:r(U,{title:e("editor.action.form.tips.connect_to_local.title.tips"),content:e("editor.action.form.tips.restapi.verification_mode.skip_ca_certificate")})})]}),r(c,{title:e("editor.action.resource.restapi.label.authentication"),defaultValue:t.authentication,name:"authentication",controlledType:"select",control:o,options:E}),k&&r(k,{control:o,auth:t.authContent})]})})};W.displayName="RestApiConfigElement";export{W as default};
//# sourceMappingURL=index-797ed8a8.js.map
