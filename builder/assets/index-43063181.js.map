{"version":3,"file":"index-43063181.js","sources":["../../src/page/App/components/Actions/ActionPanel/OracleDBPanel/style.ts","../../src/page/App/components/Actions/ActionPanel/OracleDBPanel/index.tsx"],"sourcesContent":["import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\n\nexport const labelStyle = css`\n  color: ${getColor(\"grayBlue\", \"02\")};\n  font-size: 14px;\n  font-weight: 500;\n  line-height: 22px;\n\n  position: relative;\n`\n\nexport const labelTipsStyle = css`\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  width: 100%;\n  border-bottom: 1px dashed ${getColor(\"grayBlue\", \"06\")};\n`\n\nexport const modeContainerStyle = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n`\n","import { OracleDBActionInitial } from \"@illa-public/public-configs\"\nimport {\n  ActionItem,\n  OracleDBAction,\n  OracleDBActionSQLMode,\n  OracleDBActionType,\n} from \"@illa-public/public-types\"\nimport { FC, useCallback, useEffect, useState } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Trigger } from \"@illa-design/react\"\nimport { CODE_LANG } from \"@/components/CodeEditor/CodeMirror/extensions/interface\"\nimport { ILLAMarkdown } from \"@/components/ILLAMarkdown\"\nimport { TransformerComponent } from \"@/page/App/components/Actions/ActionPanel/TransformerComponent\"\nimport { actionItemContainer } from \"@/page/App/components/Actions/ActionPanel/style\"\nimport { InputEditor } from \"@/page/App/components/Actions/InputEditor\"\nimport { getCachedAction } from \"@/redux/config/configSelector\"\nimport { configActions } from \"@/redux/config/configSlice\"\nimport { fetchResourceMeta } from \"@/services/resource\"\nimport { VALIDATION_TYPES } from \"@/utils/validationFactory\"\nimport { SQLModeSelector } from \"../pulicComponent/SQLModeSelector\"\nimport { labelStyle, labelTipsStyle, modeContainerStyle } from \"./style\"\n\nconst OracleDBPanel: FC = () => {\n  const { t } = useTranslation()\n  const dispatch = useDispatch()\n  const cachedAction = useSelector(getCachedAction) as ActionItem<\n    OracleDBAction<OracleDBActionType>\n  >\n  const [sqlTable, setSqlTable] = useState<Record<string, unknown>>()\n  const content = cachedAction.content ?? OracleDBActionInitial\n\n  useEffect(() => {\n    if (cachedAction.resourceID == undefined) return\n    fetchResourceMeta(cachedAction.resourceID).then(({ data }) => {\n      setSqlTable(data?.Schema ?? {})\n    })\n  }, [cachedAction.resourceID])\n\n  const handleValueChange = useCallback(\n    (name: string) => (value: string) => {\n      dispatch(\n        configActions.updateCachedAction({\n          ...cachedAction,\n          content: {\n            ...content,\n            opts: {\n              ...content.opts,\n              [name]: value,\n            },\n          },\n        }),\n      )\n    },\n    [cachedAction, content, dispatch],\n  )\n\n  return (\n    <>\n      <div css={actionItemContainer}>\n        <InputEditor\n          style={{ height: \"88px\" }}\n          placeholder={t(\"editor.action.panel.mssql.placeholder.query\")}\n          lineNumbers\n          mode={CODE_LANG.SQL}\n          canShowCompleteInfo\n          expectedType={VALIDATION_TYPES.STRING}\n          value={(content.opts as OracleDBActionSQLMode).raw}\n          onChange={handleValueChange(\"raw\")}\n          sqlScheme={sqlTable}\n          showSafeModeTips={content.mode === \"sql-safe\"}\n        />\n        <TransformerComponent fullWidth />\n      </div>\n      {(content.mode === \"sql\" || content.mode === \"sql-safe\") && (\n        <div css={modeContainerStyle}>\n          <Trigger\n            content={\n              <ILLAMarkdown\n                textString={t(\n                  \"editor.action.panel.label.tips.general.safe_mode\",\n                )}\n              />\n            }\n            trigger=\"hover\"\n            position=\"left\"\n            maxW=\"240px\"\n          >\n            <span css={labelStyle}>\n              {t(\"editor.action.panel.label.general.safe_mode\")}\n              <span css={labelTipsStyle} />\n            </span>\n          </Trigger>\n          <SQLModeSelector />\n        </div>\n      )}\n    </>\n  )\n}\nOracleDBPanel.displayName = \"OracleDBPanel\"\nexport default OracleDBPanel\n"],"names":["labelStyle","css","getColor","labelTipsStyle","modeContainerStyle","OracleDBPanel","t","useTranslation","dispatch","useDispatch","cachedAction","useSelector","getCachedAction","sqlTable","setSqlTable","useState","content","OracleDBActionInitial","useEffect","fetchResourceMeta","data","handleValueChange","useCallback","name","value","configActions","jsxs","Fragment","actionItemContainer","jsx","InputEditor","CODE_LANG","VALIDATION_TYPES","TransformerComponent","Trigger","ILLAMarkdown","SQLModeSelector"],"mappings":"4pCAGO,MAAMA,EAAaC;AAAA,WACfC,EAAS,WAAY,IAAI,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQxBC,EAAiBF;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKAC,EAAS,WAAY,IAAI,CAAC;AAAA,EAG3CE,EAAqBH;AAAA;AAAA;AAAA;AAAA;AAAA,ECG5BI,EAAoB,IAAM,CACxB,KAAA,CAAE,EAAAC,GAAMC,IACRC,EAAWC,IACXC,EAAeC,EAAYC,CAAe,EAG1C,CAACC,EAAUC,CAAW,EAAIC,EAAkC,SAAA,EAC5DC,EAAUN,EAAa,SAAWO,EAExCC,EAAAA,UAAU,IAAM,CACVR,EAAa,YAAc,MAC/BS,EAAkBT,EAAa,UAAU,EAAE,KAAK,CAAC,CAAE,KAAAU,KAAW,CAChDN,GAAAM,GAAA,YAAAA,EAAM,SAAU,CAAA,CAAE,CAAA,CAC/B,CAAA,EACA,CAACV,EAAa,UAAU,CAAC,EAE5B,MAAMW,EAAoBC,EAAA,YACvBC,GAAkBC,GAAkB,CACnChB,EACEiB,EAAc,mBAAmB,CAC/B,GAAGf,EACH,QAAS,CACP,GAAGM,EACH,KAAM,CACJ,GAAGA,EAAQ,KACX,CAACO,CAAI,EAAGC,CACV,CACF,CAAA,CACD,CAAA,CAEL,EACA,CAACd,EAAcM,EAASR,CAAQ,CAAA,EAGlC,OAEIkB,EAAAC,EAAA,CAAA,SAAA,CAACD,EAAA,MAAA,CAAI,IAAKE,EACR,SAAA,CAAAC,EAACC,EAAA,CACC,MAAO,CAAE,OAAQ,MAAO,EACxB,YAAaxB,EAAE,6CAA6C,EAC5D,YAAW,GACX,KAAMyB,EAAU,IAChB,oBAAmB,GACnB,aAAcC,EAAiB,OAC/B,MAAQhB,EAAQ,KAA+B,IAC/C,SAAUK,EAAkB,KAAK,EACjC,UAAWR,EACX,iBAAkBG,EAAQ,OAAS,UAAA,CACrC,EACAa,EAACI,EAAqB,CAAA,UAAS,EAAC,CAAA,CAAA,EAClC,GACEjB,EAAQ,OAAS,OAASA,EAAQ,OAAS,aAC3CU,EAAC,MAAI,CAAA,IAAKtB,EACR,SAAA,CAAAyB,EAACK,EAAA,CACC,QACEL,EAACM,EAAA,CACC,WAAY7B,EACV,kDACF,CAAA,CACF,EAEF,QAAQ,QACR,SAAS,OACT,KAAK,QAEL,SAAAoB,EAAC,OAAK,CAAA,IAAK1B,EACR,SAAA,CAAAM,EAAE,6CAA6C,EAChDuB,EAAC,OAAK,CAAA,IAAK1B,CAAgB,CAAA,CAAA,EAC7B,CAAA,CACF,IACCiC,EAAgB,EAAA,CAAA,EACnB,CAEJ,CAAA,CAAA,CAEJ,EACA/B,EAAc,YAAc"}