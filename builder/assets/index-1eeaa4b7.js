import{o as w,k as c,S as k,F as J,n as E,T as K}from"./@illa-design-1f43bb6c.js";import{r as C}from"./react-9b7e00e3.js";import{u as N,b as v,fv as B,e as G,be as p,eH as g,bA as _}from"./index-4dce6ee8.js";import{a as y,C as A}from"./index-03ca7e7b.js";import{R as f}from"./index-5b916626.js";import{b as j,a as H,c as F,d as M,e as D,r as U,f as z}from"./style-fd01a1ce.js";import{R as $,T as W}from"./index-cd7c17cc.js";import{a as x}from"./@emotion-08a6282b.js";import"./codeMirror-vendor-320207e2.js";import"./lodash-lib-6e94956b.js";import"./react-icons-vendor-2430ea65.js";import"./index-6f32d056.js";import"./index-5be17f9b.js";import"./clsx.m-925abe8b.js";import"./clsx.m-266f4de0.js";import"./hook-302a78fc.js";import"./renderComponentCanvasContainer-2e4cd54a.js";import"./style-49f23046.js";import"./index-d48f7e94.js";import"./index-cf2bb556.js";import"./index-2fdfc937.js";import"./layoutInfoListener-bd63c738.js";import"./drive-584d85d3.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./popper-a04e2b11.js";import"./objectWithoutPropertiesLoose-e3246981.js";import"./clsx-06f54762.js";import"./index-934389e2.js";import"./style-51b259bb.js";import"./style-af69883e.js";const O=b=>{const{t:l}=N(),i=b.actionItem,e=i.content.bodyType,a=i.content.body,u=e==="form-data",m=v(B),t=G();let o=y.JAVASCRIPT;if(e==="raw")switch(a.type){case"text":o=y.JAVASCRIPT;break;case"json":o=y.JSON;break;case"xml":o=y.XML;break;case"javascript":o=y.JAVASCRIPT;break;case"html":o=y.HTML;break}const d=C.useCallback(n=>{let r=null;const h=m==null?void 0:m.content;if(m.resourceID===i.resourceID&&h.method!=="GET"&&h.bodyType!=="none"&&h.bodyType===n)r=h.body;else switch(n){case"none":r=null;break;case"x-www-form-urlencoded":r=[{key:"",value:""}];break;case"form-data":r=[{key:"",type:"",value:""}];break;case"raw":r=$;break;case"binary":r="";break}t(p.updateCachedAction({...i,content:{...i.content,bodyType:n,body:r}}))},[i,t,m.content,m.resourceID]),s=C.useCallback(n=>{t(p.updateCachedAction({...i,content:{...i.content,body:n}}))},[i,t]),T=C.useCallback((n,r,h,R)=>{let V=[...a];V[n]=u?{key:r,type:h,value:R}:{key:r,value:R},s(V)},[a,s,u]),S=C.useCallback((n,r)=>{t(p.updateCachedAction({...i,content:{...i.content,body:{...a,[r]:n}}}))},[i,a,t]),I=(n,r,h)=>{T(n,r,"",h)},L=C.useCallback(()=>{const n=u?{key:"",type:"",value:""}:{key:"",value:""},r=[...a,n];s(r)},[a,s,u]),P=C.useCallback(n=>{let r=[...a];const h=u?{key:"",type:"",value:""}:{key:"",value:""};r.splice(n,1),r.length===0&&(r=[h]),s(r)},[a,s,u]);return w("div",{css:j,children:[c("span",{css:H,children:l("editor.action.resource.restapi.label.body")}),w("div",{css:F,children:[w("div",{css:M,children:[c(k,{colorScheme:"techPurple",value:e,options:["none","form-data","x-www-form-urlencoded","raw","binary"],bdRadius:e==="raw"?"8px 0 0 8px":"8px",onChange:n=>d(n)}),e==="raw"&&c(k,{bdRadius:"0 8px 8px 0",colorScheme:"techPurple",w:"162px",ml:"-1px",value:a.type,options:["text","json","xml","javascript","html"],onChange:n=>S(n,"type")})]}),e==="raw"&&c("div",{css:D,children:c(A,{showLineNumbers:!0,lang:o,value:a.content,expectValueType:g.STRING,height:"88px",onChange:n=>S(n,"content")})}),e==="x-www-form-urlencoded"&&c(f,{label:"",name:"body",records:a,onChangeKey:I,onChangeValue:I,onDelete:P,onAdd:L}),e==="form-data"&&c(f,{label:"",name:"body",records:a,customRender:(n,r)=>w(J,{children:[c(A,{value:n.key,singleLine:!0,height:"32px",onChange:h=>T(r,h,n.type,n.value),wrapperCss:U,expectValueType:g.STRING,lang:y.JAVASCRIPT,placeholder:"key"}),c(k,{colorScheme:"techPurple",showSearch:!0,defaultValue:n.type,value:n.type,w:"0",bdRadius:"0",flexGrow:"1",onChange:h=>T(r,n.key,h,n.value),options:[{label:l("editor.action.panel.label.option.restapi.body_type.text"),value:"text"},{label:l("editor.action.panel.label.option.restapi.body_type.file"),value:"file"}]}),c(A,{singleLine:!0,expectValueType:n.type==="file"?g.OBJECT:g.STRING,value:n.value,onChange:h=>T(r,n.key,n.type,h),height:"32px",wrapperCss:z,lang:y.JAVASCRIPT,placeholder:n.type==="file"?l("editor.action.panel.placeholder.restapi.body_type.file"):"value"})]}),onChangeKey:()=>{},onChangeValue:()=>{},onDelete:P,onAdd:L}),e==="binary"&&c("div",{css:D,children:c(A,{lang:y.JAVASCRIPT,showLineNumbers:!0,value:a??"",expectValueType:g.STRING,height:"88px",onChange:s})})]})]})};O.displayName="BodyEditor";x`
  display: flex;
  flex-direction: column;
`;const X=x`
  padding: 8px 0;
`,Y=x`
  width: 200px;
  box-sizing: border-box;
  color: ${E("grayBlue","02")};
  font-weight: 400;
  margin-left: 24px;
  margin-right: 8px;
  border-radius: 8px 0 0 8px;
  font-size: 14px;
  text-overflow: ellipsis;
  overflow-wrap: break-word;
  white-space: nowrap;
  overflow: hidden;
`,q=x`
  display: flex;
  flex-direction: row;
  align-items: center;
  min-height: 48px;
  padding: 0 16px;
`,Q=x`
  min-width: 160px;
  font-size: 14px;
  font-weight: 500;
  text-align: right;
  color: ${E("grayBlue","02")};
`,Z=x`
  flex-grow: 1;
  width: 0;
`,ee=["GET","POST","PUT","HEAD","PATCH","DELETE","OPTIONS"],te=()=>{const{t:b}=N(),l=v(_),i=v(B),e=l.content,a=G(),u=v(t=>t.resource.find(o=>o.resourceID===(l==null?void 0:l.resourceID))),m=C.useCallback(t=>{let o="none",d=null;t!=="GET"&&i.resourceID===l.resourceID&&i.content.method===t&&(o=i.content.bodyType,d=i.content.body),a(p.updateCachedAction({...l,content:{...e,method:t,bodyType:o,body:d}}))},[l,e,a,i.content.body,i.content.bodyType,i.content.method,i.resourceID]);return w("div",{css:X,children:[w("div",{css:q,children:[c("span",{css:Q,children:b("editor.action.resource.restapi.label.action_type")}),c(k,{colorScheme:"techPurple",ml:"16px",value:e.method,w:"160px",maxW:"160px",options:ee,onChange:m}),c(K,{position:"top-start",content:u!=null&&u.content?u.content.baseUrl:"",children:c("div",{css:Y,children:u!=null&&u.content?u.content.baseUrl:""})}),c(A,{singleLine:!0,wrapperCss:Z,expectValueType:g.STRING,value:e.url,placeholder:b("editor.action.form.placeholder.url"),lang:y.JAVASCRIPT,onChange:t=>{a(p.updateCachedAction({...l,content:{...e,url:t}}))}})]}),c(f,{records:e.urlParams,label:b("editor.action.resource.restapi.label.url_parameters"),onChangeKey:(t,o,d)=>{let s=[...e.urlParams];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,urlParams:s}}))},onChangeValue:(t,o,d)=>{let s=[...e.urlParams];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,urlParams:s}}))},onDelete:(t,o)=>{let d=[...e.urlParams];d.splice(t,1),d.length===0&&(d=[{key:"",value:""}]),a(p.updateCachedAction({...l,content:{...e,urlParams:d}}))},onAdd:()=>{let t=[...e.urlParams,{key:"",value:""}];a(p.updateCachedAction({...l,content:{...e,urlParams:t}}))}}),c(f,{records:e.headers,label:b("editor.action.resource.restapi.label.headers"),onChangeKey:(t,o,d)=>{let s=[...e.headers];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,headers:s}}))},onChangeValue:(t,o,d)=>{let s=[...e.headers];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,headers:s}}))},onDelete:t=>{let o=[...e.headers];o.splice(t,1),o.length===0&&(o=[{key:"",value:""}]),a(p.updateCachedAction({...l,content:{...e,headers:o}}))},onAdd:()=>{let t=[...e.headers,{key:"",value:""}];a(p.updateCachedAction({...l,content:{...e,headers:t}}))}}),c(f,{records:e.cookies,label:b("editor.action.resource.restapi.label.cookies"),onChangeKey:(t,o,d)=>{let s=[...e.cookies];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,cookies:s}}))},onChangeValue:(t,o,d)=>{let s=[...e.cookies];s[t]={key:o,value:d},a(p.updateCachedAction({...l,content:{...e,cookies:s}}))},onDelete:t=>{let o=[...e.cookies];o.splice(t,1),o.length===0&&(o=[{key:"",value:""}]),a(p.updateCachedAction({...l,content:{...e,cookies:o}}))},onAdd:()=>{let t=[...e.cookies,{key:"",value:""}];a(p.updateCachedAction({...l,content:{...e,cookies:t}}))}}),!["GET","HEAD"].includes(e.method)&&c(O,{actionItem:l}),c(W,{})]})};te.displayName="RestApiPanel";export{te as default};
//# sourceMappingURL=index-1eeaa4b7.js.map
