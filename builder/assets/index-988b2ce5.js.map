{"version":3,"file":"index-988b2ce5.js","sources":["../../src/page/App/components/InspectPanel/PanelSetters/InputSetter/PaddingInput/style.ts","../../src/page/App/components/InspectPanel/PanelSetters/InputSetter/PaddingInput/index.tsx"],"sourcesContent":["import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\n\nexport const directionPaddingContainerStyle = css`\n  display: flex;\n  padding: 8px 16px;\n`\n\nexport const setterContainerStyle = css`\n  padding: 8px 16px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`\n\nexport const optionsIconHotSpotStyle = css`\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nexport const prefixContainerStyle = css`\n  color: ${getColor(\"grayBlue\", \"04\")};\n  font-size: 12px;\n`\n","import PartialIcon from \"@assets/rightPagePanel/partial.svg?react\"\nimport { PADDING_MODE } from \"@illa-public/public-types\"\nimport { get } from \"lodash-es\"\nimport { FC, FocusEventHandler, useRef } from \"react\"\nimport { useDispatch } from \"react-redux\"\nimport { Input, RadioGroup } from \"@illa-design/react\"\nimport AllIcon from \"@/assets/rightPagePanel/all.svg?react\"\nimport { PanelLabel } from \"@/page/App/components/InspectPanel/components/Label\"\nimport { configActions } from \"@/redux/config/configSlice\"\nimport { DirectionPaddingSetterProps } from \"./interface\"\nimport {\n  directionPaddingContainerStyle,\n  optionsIconHotSpotStyle,\n  prefixContainerStyle,\n  setterContainerStyle,\n} from \"./style\"\n\nconst formatValue = (value: string = \"\") => {\n  const values = value\n    .split(\" \")\n    .filter((v) => v !== \"\")\n    .filter((v) => !isNaN(Number(v)))\n  if (values.length === 2) {\n    return `${values[0]} ${values[1]} 0 0`\n  }\n  if (values.length === 3) {\n    return `${values[0]} ${values[1]} ${values[2]} 0`\n  }\n  if (values.length > 4) {\n    return `${values[0]} ${values[1]} ${values[2]} ${values[3]}`\n  }\n  return values.join(\" \")\n}\n\nconst formatPartialValue = (value: string = \"\") => {\n  if (!/^[0-9]+$/.test(value)) {\n    return \"0\"\n  }\n  return value\n}\n\nconst options = [\n  {\n    label: (\n      <div css={optionsIconHotSpotStyle}>\n        <AllIcon />\n      </div>\n    ),\n    value: PADDING_MODE.ALL,\n  },\n  {\n    label: (\n      <div css={optionsIconHotSpotStyle}>\n        <PartialIcon />\n      </div>\n    ),\n    value: PADDING_MODE.PARTIAL,\n  },\n]\n\nexport const DirectionPaddingSetter: FC<DirectionPaddingSetterProps> = (\n  props,\n) => {\n  const dispatch = useDispatch()\n  const { handleUpdateMultiAttrDSL, componentNode, attrName, labelName } = props\n\n  const paddingValue = {\n    mode: get(componentNode, `props.${attrName}.mode`, PADDING_MODE.ALL),\n    size: get(componentNode, `props.${attrName}.size`, \"0\"),\n  }\n\n  const values = paddingValue.size.split(\" \")\n  const isAll = paddingValue.mode === PADDING_MODE.ALL\n\n  const allInputRef = useRef<HTMLInputElement>(null)\n\n  const handleChangeAllValue = (allValue: string) => {\n    handleUpdateMultiAttrDSL?.({\n      [attrName]: {\n        mode: PADDING_MODE.ALL,\n        size: allValue,\n      },\n    })\n  }\n\n  const handleBlurAllValue: FocusEventHandler<HTMLInputElement> = (e) => {\n    handleUpdateMultiAttrDSL?.({\n      [attrName]: {\n        mode: PADDING_MODE.ALL,\n        size: formatValue(e.target.value ?? \"\"),\n      },\n    })\n    dispatch(configActions.updateShowDot(false))\n  }\n\n  const handleChangePartialValue = (index: number) => {\n    return (partialValue: string) => {\n      values[index] = partialValue\n      if (partialValue !== \"\" && !/^[0-9]+$/.test(partialValue)) return\n      handleUpdateMultiAttrDSL?.({\n        [attrName]: {\n          mode: PADDING_MODE.PARTIAL,\n          size: values.join(\" \"),\n        },\n      })\n    }\n  }\n\n  const handleChangeMode = (mode: PADDING_MODE) => {\n    if (paddingValue.mode === mode) return\n    switch (mode) {\n      case PADDING_MODE.ALL: {\n        let result = paddingValue.size\n        const partialSize = Array.from(new Set(paddingValue.size.split(\" \")))\n        if (partialSize.length === 1) {\n          result = partialSize[0]\n        }\n\n        handleUpdateMultiAttrDSL?.({\n          [attrName]: {\n            size: result,\n            mode: mode,\n          },\n        })\n        break\n      }\n      case PADDING_MODE.PARTIAL: {\n        const partialSize = paddingValue.size.split(\" \")\n        let result = paddingValue.size\n        if (partialSize.length === 1) {\n          result = `${partialSize[0]} ${partialSize[0]} ${partialSize[0]} ${partialSize[0]}`\n        }\n        if (partialSize.length === 4) {\n          result = `${partialSize[0]} ${partialSize[1]} ${partialSize[2]} ${partialSize[3]}`\n        }\n\n        handleUpdateMultiAttrDSL?.({\n          [attrName]: {\n            size: result,\n            mode: mode,\n          },\n        })\n        break\n      }\n    }\n  }\n\n  const handleOnFocus = () => {\n    dispatch(configActions.updateShowDot(true))\n  }\n\n  const handleOnBlurPartialValue = (index: number) => {\n    const fixFunc: FocusEventHandler<HTMLInputElement> = (e) => {\n      dispatch(configActions.updateShowDot(false))\n      const value = formatPartialValue(e.target.value)\n      values[index] = value\n      handleUpdateMultiAttrDSL?.({\n        [attrName]: {\n          mode: PADDING_MODE.PARTIAL,\n          size: values.join(\" \"),\n        },\n      })\n    }\n    return fixFunc\n  }\n\n  return (\n    <>\n      <div css={setterContainerStyle}>\n        <PanelLabel labelName={labelName} />\n        <RadioGroup\n          type=\"button\"\n          options={options}\n          value={paddingValue.mode}\n          onChange={handleChangeMode}\n          size=\"small\"\n          w=\"105px\"\n          forceEqualWidth\n        />\n      </div>\n      <div css={directionPaddingContainerStyle}>\n        {isAll ? (\n          <Input\n            prefix={<span css={prefixContainerStyle}>All</span>}\n            colorScheme=\"techPurple\"\n            value={values.join(\" \")}\n            ref={allInputRef}\n            onFocus={handleOnFocus}\n            onChange={handleChangeAllValue}\n            onBlur={handleBlurAllValue}\n          />\n        ) : (\n          <>\n            <Input\n              prefix={<span css={prefixContainerStyle}>T</span>}\n              colorScheme=\"techPurple\"\n              bdRadius=\"8px 0 0 8px\"\n              value={values[0]}\n              onFocus={handleOnFocus}\n              onBlur={handleOnBlurPartialValue(0)}\n              onChange={handleChangePartialValue(0)}\n            />\n            <Input\n              prefix={<span css={prefixContainerStyle}>R</span>}\n              colorScheme=\"techPurple\"\n              bdRadius=\"0\"\n              pos=\"relative\"\n              l=\"-1px\"\n              value={values[1]}\n              onFocus={handleOnFocus}\n              onBlur={handleOnBlurPartialValue(1)}\n              onChange={handleChangePartialValue(1)}\n            />\n            <Input\n              prefix={<span css={prefixContainerStyle}>B</span>}\n              colorScheme=\"techPurple\"\n              bdRadius=\"0\"\n              pos=\"relative\"\n              l=\"-2px\"\n              value={values[2]}\n              onFocus={handleOnFocus}\n              onBlur={handleOnBlurPartialValue(2)}\n              onChange={handleChangePartialValue(2)}\n            />\n            <Input\n              prefix={<span css={prefixContainerStyle}>L</span>}\n              colorScheme=\"techPurple\"\n              bdRadius=\"0 8px 8px 0\"\n              pos=\"relative\"\n              l=\"-3px\"\n              value={values[3]}\n              onFocus={handleOnFocus}\n              onBlur={handleOnBlurPartialValue(3)}\n              onChange={handleChangePartialValue(3)}\n            />\n          </>\n        )}\n      </div>\n    </>\n  )\n}\n\nexport default DirectionPaddingSetter\n"],"names":["directionPaddingContainerStyle","css","setterContainerStyle","optionsIconHotSpotStyle","prefixContainerStyle","getColor","formatValue","value","values","v","formatPartialValue","options","jsx","AllIcon","PADDING_MODE","PartialIcon","DirectionPaddingSetter","props","dispatch","useDispatch","handleUpdateMultiAttrDSL","componentNode","attrName","labelName","paddingValue","get","isAll","allInputRef","useRef","handleChangeAllValue","allValue","handleBlurAllValue","e","configActions","handleChangePartialValue","index","partialValue","handleChangeMode","mode","result","partialSize","handleOnFocus","handleOnBlurPartialValue","jsxs","Fragment","PanelLabel","RadioGroup","Input"],"mappings":"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"}