{"version":3,"file":"cascader-f96790b1.js","sources":["../../src/widgetLibrary/CascaderWidget/cascader.tsx"],"sourcesContent":["import { FC, useCallback, useEffect, useMemo } from \"react\"\nimport { Cascader } from \"@illa-design/react\"\nimport {\n  CascaderWidgetProps,\n  WrappedCascaderWidgetProps,\n} from \"@/widgetLibrary/CascaderWidget/interface\"\nimport { AutoHeightContainer } from \"@/widgetLibrary/PublicSector/AutoHeightContainer\"\nimport { Label } from \"@/widgetLibrary/PublicSector/Label\"\nimport { TooltipWrapper } from \"@/widgetLibrary/PublicSector/TooltipWrapper\"\nimport { applyLabelAndComponentWrapperStyle } from \"@/widgetLibrary/PublicSector/TransformWidgetWrapper/style\"\n\nexport const WrappedCascaderWidget: FC<WrappedCascaderWidgetProps> = (\n  props,\n) => {\n  const {\n    options,\n    value = [],\n    expandTrigger,\n    placeholder,\n    allowClear,\n    handleOnChange,\n    handleOnFocus,\n    handleOnBlur,\n    handleUpdateMultiExecutionResult,\n    displayName,\n    disabled,\n    readOnly,\n  } = props\n  const handleChangeValue = useCallback(\n    (value: null | (string | string[])[]) => {\n      if (!disabled && !readOnly)\n        new Promise((resolve) => {\n          handleUpdateMultiExecutionResult([\n            {\n              displayName,\n              value: {\n                value,\n              },\n            },\n          ])\n          resolve(value)\n        }).then(() => {\n          handleOnChange?.()\n        })\n    },\n    [\n      disabled,\n      displayName,\n      handleOnChange,\n      handleUpdateMultiExecutionResult,\n      readOnly,\n    ],\n  )\n\n  const handleFocus = useCallback(() => {\n    if (!disabled) {\n      handleOnFocus?.()\n    }\n  }, [disabled, handleOnFocus])\n\n  const handleBlur = useCallback(() => {\n    if (!disabled) {\n      handleOnBlur?.()\n    }\n  }, [disabled, handleOnBlur])\n\n  return (\n    <Cascader\n      options={options}\n      value={value}\n      trigger={expandTrigger}\n      placeholder={placeholder}\n      allowClear={allowClear}\n      onChange={handleChangeValue}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      disabled={disabled || readOnly}\n      showSearch\n    />\n  )\n}\n\nexport const CascaderWidget: FC<CascaderWidgetProps> = (props) => {\n  const {\n    dataSource = [],\n    updateComponentHeight,\n    tooltipText,\n    labelPosition,\n    labelFull,\n    labelAlign,\n    labelWidth,\n    labelCaption,\n    labelWidthUnit,\n    required,\n    labelHidden,\n    label,\n    dataSourceMode,\n    dataSourceJS = [],\n    value,\n    handleUpdateMultiExecutionResult,\n    displayName,\n    placeholder,\n    expandTrigger,\n    allowClear,\n    disabled,\n    readOnly,\n    updateComponentRuntimeProps,\n    deleteComponentRuntimeProps,\n    handleUpdateDsl,\n    triggerEventHandler,\n  } = props\n\n  const finalOptions = useMemo(() => {\n    return dataSourceMode === \"dynamic\" ? dataSourceJS || [] : dataSource || []\n  }, [dataSource, dataSourceJS, dataSourceMode])\n\n  useEffect(() => {\n    updateComponentRuntimeProps({\n      setValue: (value: any) => {\n        handleUpdateDsl({\n          value: Array.isArray(value) ? value : [],\n        })\n      },\n      clearValue: () => {\n        handleUpdateDsl({\n          value: [],\n        })\n      },\n    })\n    return () => {\n      deleteComponentRuntimeProps()\n    }\n  }, [\n    deleteComponentRuntimeProps,\n    handleUpdateDsl,\n    updateComponentRuntimeProps,\n  ])\n\n  const handleOnChange = useCallback(() => {\n    triggerEventHandler(\"change\")\n  }, [triggerEventHandler])\n\n  const handleOnFocus = useCallback(() => {\n    triggerEventHandler(\"focus\")\n  }, [triggerEventHandler])\n\n  const handleOnBlur = useCallback(() => {\n    triggerEventHandler(\"blur\")\n  }, [triggerEventHandler])\n\n  return (\n    <AutoHeightContainer updateComponentHeight={updateComponentHeight}>\n      <TooltipWrapper tooltipText={tooltipText} tooltipDisabled={!tooltipText}>\n        <div css={applyLabelAndComponentWrapperStyle(labelPosition)}>\n          <Label\n            labelFull={labelFull}\n            label={label}\n            labelAlign={labelAlign}\n            labelWidth={labelWidth}\n            labelCaption={labelCaption}\n            labelWidthUnit={labelWidthUnit}\n            labelPosition={labelPosition}\n            required={required}\n            labelHidden={labelHidden}\n            hasTooltip={!!tooltipText}\n          />\n          <WrappedCascaderWidget\n            options={Array.isArray(finalOptions) ? finalOptions : []}\n            value={value}\n            handleUpdateMultiExecutionResult={handleUpdateMultiExecutionResult}\n            displayName={displayName}\n            placeholder={placeholder}\n            expandTrigger={expandTrigger}\n            allowClear={allowClear}\n            handleOnChange={handleOnChange}\n            handleOnFocus={handleOnFocus}\n            handleOnBlur={handleOnBlur}\n            disabled={disabled}\n            readOnly={readOnly}\n          />\n        </div>\n      </TooltipWrapper>\n    </AutoHeightContainer>\n  )\n}\n\nexport default CascaderWidget\n"],"names":["WrappedCascaderWidget","props","options","value","expandTrigger","placeholder","allowClear","handleOnChange","handleOnFocus","handleOnBlur","handleUpdateMultiExecutionResult","displayName","disabled","readOnly","handleChangeValue","useCallback","resolve","handleFocus","handleBlur","jsx","Cascader","CascaderWidget","dataSource","updateComponentHeight","tooltipText","labelPosition","labelFull","labelAlign","labelWidth","labelCaption","labelWidthUnit","required","labelHidden","label","dataSourceMode","dataSourceJS","updateComponentRuntimeProps","deleteComponentRuntimeProps","handleUpdateDsl","triggerEventHandler","finalOptions","useMemo","useEffect","AutoHeightContainer","TooltipWrapper","jsxs","applyLabelAndComponentWrapperStyle","Label"],"mappings":"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"}