import{y as ae,k as w}from"./@illa-design-1f43bb6c.js";import{r as s}from"./react-9b7e00e3.js";import{j as re}from"./index-6f32d056.js";import{e as oe,f as ne,s as se,g as ie,q as ce,r as le,u as ue,v as fe,w as de,x as he,h as me,y as ge,z as pe,d as be,o as V,i as ye,A as X,B as ke,b as Se,a as Ce,n as ve,F as xe,G as Ee,H as Be,I as Ne,J as Oe,k as Y,E as k,K as We,L as t,M as Te,p as Me,N as Ke,S as Re,O as Le}from"./codeMirror-vendor-320207e2.js";import{_ as He,a as we}from"./objectWithoutPropertiesLoose-e3246981.js";import{a as De}from"./@emotion-08a6282b.js";import{T as Ve}from"./index-99007076.js";import{w as Je}from"./lodash-lib-6e94956b.js";import"./index-4dce6ee8.js";import"./react-icons-vendor-2430ea65.js";var F=function(e){e===void 0&&(e={});var o=[];e.closeBracketsKeymap!==!1&&(o=o.concat(oe)),e.defaultKeymap!==!1&&(o=o.concat(ne)),e.searchKeymap!==!1&&(o=o.concat(se)),e.historyKeymap!==!1&&(o=o.concat(ie)),e.foldKeymap!==!1&&(o=o.concat(ce)),e.completionKeymap!==!1&&(o=o.concat(le)),e.lintKeymap!==!1&&(o=o.concat(ue));var a=[];return e.lineNumbers!==!1&&a.push(fe()),e.highlightActiveLineGutter!==!1&&a.push(de()),e.highlightSpecialChars!==!1&&a.push(he()),e.history!==!1&&a.push(me()),e.foldGutter!==!1&&a.push(ge()),e.drawSelection!==!1&&a.push(pe()),e.dropCursor!==!1&&a.push(be()),e.allowMultipleSelections!==!1&&a.push(V.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&a.push(ye()),e.syntaxHighlighting!==!1&&a.push(X(ke,{fallback:!0})),e.bracketMatching!==!1&&a.push(Se()),e.closeBrackets!==!1&&a.push(Ce()),e.autocompletion!==!1&&a.push(ve()),e.rectangularSelection!==!1&&a.push(xe()),e.crosshairCursor!==!1&&a.push(Ee()),e.highlightActiveLine!==!1&&a.push(Be()),e.highlightSelectionMatches!==!1&&a.push(Ne()),e.tabSize&&typeof e.tabSize=="number"&&a.push(Oe.of(" ".repeat(e.tabSize))),a.concat([Y.of(o.flat())]).filter(Boolean)};const Ae="#e5c07b",G="#e06c75",je="#56b6c2",Ie="#ffffff",D="#abb2bf",z="#7d8799",ze="#61afef",Fe="#98c379",P="#d19a66",Ge="#c678dd",Pe="#21252b",U="#2c313a",_="#282c34",I="#353a42",Ue="#3E4451",q="#528bff",_e=k.theme({"&":{color:D,backgroundColor:_},".cm-content":{caretColor:q},".cm-cursor, .cm-dropCursor":{borderLeftColor:q},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Ue},".cm-panels":{backgroundColor:Pe,color:D},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:_,color:z,border:"none"},".cm-activeLineGutter":{backgroundColor:U},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:I},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:I,borderBottomColor:I},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:U,color:D}}},{dark:!0}),qe=We.define([{tag:t.keyword,color:Ge},{tag:[t.name,t.deleted,t.character,t.propertyName,t.macroName],color:G},{tag:[t.function(t.variableName),t.labelName],color:ze},{tag:[t.color,t.constant(t.name),t.standard(t.name)],color:P},{tag:[t.definition(t.name),t.separator],color:D},{tag:[t.typeName,t.className,t.number,t.changed,t.annotation,t.modifier,t.self,t.namespace],color:Ae},{tag:[t.operator,t.operatorKeyword,t.url,t.escape,t.regexp,t.link,t.special(t.string)],color:je},{tag:[t.meta,t.comment],color:z},{tag:t.strong,fontWeight:"bold"},{tag:t.emphasis,fontStyle:"italic"},{tag:t.strikethrough,textDecoration:"line-through"},{tag:t.link,color:z,textDecoration:"underline"},{tag:t.heading,fontWeight:"bold",color:G},{tag:[t.atom,t.bool,t.special(t.variableName)],color:P},{tag:[t.processingInstruction,t.string,t.inserted],color:Fe},{tag:t.invalid,color:Ie}]),Qe=[_e,X(qe)];var Xe=function(e){e===void 0&&(e={});var{indentWithTab:o=!0,editable:a=!0,readOnly:l=!1,theme:u="light",placeholder:i="",basicSetup:d=!0}=e,n=[],g=k.theme({"&":{backgroundColor:"#fff"}},{dark:!1});switch(o&&n.unshift(Y.of([Te])),d&&(typeof d=="boolean"?n.unshift(F()):n.unshift(F(d))),i&&n.unshift(Me(i)),u){case"light":n.push(g);break;case"dark":n.push(Qe);break;case"none":break;default:n.push(u);break}return a===!1&&n.push(k.editable.of(!1)),l&&n.push(V.readOnly.of(!0)),[...n]},Ye=r=>({line:r.state.doc.lineAt(r.state.selection.main.from),lineCount:r.state.doc.lines,lineBreak:r.state.lineBreak,length:r.state.doc.length,readOnly:r.state.readOnly,tabSize:r.state.tabSize,selection:r.state.selection,selectionAsSingle:r.state.selection.asSingle().main,ranges:r.state.selection.ranges,selectionCode:r.state.sliceDoc(r.state.selection.main.from,r.state.selection.main.to),selections:r.state.selection.ranges.map(e=>r.state.sliceDoc(e.from,e.to)),selectedText:r.state.selection.ranges.some(e=>!e.empty)}),Q=Ke.define();function Ze(r){var{value:e,selection:o,onChange:a,onStatistics:l,onCreateEditor:u,onUpdate:i,extensions:d=[],autoFocus:n,theme:g="light",height:S="",minHeight:h="",maxHeight:p="",placeholder:C="",width:v="",minWidth:x="",maxWidth:E="",editable:f=!0,readOnly:b=!1,indentWithTab:K=!0,basicSetup:R=!0,root:J,initialState:W}=r,[B,L]=s.useState(),[c,y]=s.useState(),[N,O]=s.useState(),A=k.theme({"&":{height:S,minHeight:h,maxHeight:p,width:v,minWidth:x,maxWidth:E}}),j=k.updateListener.of(m=>{if(m.docChanged&&typeof a=="function"&&!m.transactions.some(te=>te.annotation(Q))){var M=m.state.doc,H=M.toString();a(H,m)}l&&l(Ye(m))}),ee=Xe({theme:g,editable:f,readOnly:b,placeholder:C,indentWithTab:K,basicSetup:R}),T=[j,A,...ee];return i&&typeof i=="function"&&T.push(k.updateListener.of(i)),T=T.concat(d),s.useEffect(()=>{if(B&&!N){var m={doc:e,selection:o,extensions:T},M=W?V.fromJSON(W.json,m,W.fields):V.create(m);if(O(M),!c){var H=new k({state:M,parent:B,root:J});y(H),u&&u(H,M)}}return()=>{c&&(O(void 0),y(void 0))}},[B,N]),s.useEffect(()=>L(r.container),[r.container]),s.useEffect(()=>()=>{c&&(c.destroy(),y(void 0))},[c]),s.useEffect(()=>{n&&c&&c.focus()},[n,c]),s.useEffect(()=>{c&&c.dispatch({effects:Re.reconfigure.of(T)})},[g,d,S,h,p,v,x,E,C,f,b,K,R,a,i]),s.useEffect(()=>{if(e!==void 0){var m=c?c.state.doc.toString():"";c&&e!==m&&c.dispatch({changes:{from:0,to:m.length,insert:e||""},annotations:[Q.of(!0)]})}},[e,c]),{state:N,setState:O,view:c,setView:y,container:B,setContainer:L}}var $e=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Z=s.forwardRef((r,e)=>{var{className:o,value:a="",selection:l,extensions:u=[],onChange:i,onStatistics:d,onCreateEditor:n,onUpdate:g,autoFocus:S,theme:h="light",height:p,minHeight:C,maxHeight:v,width:x,minWidth:E,maxWidth:f,basicSetup:b,placeholder:K,indentWithTab:R,editable:J,readOnly:W,root:B,initialState:L}=r,c=He(r,$e),y=s.useRef(null),{state:N,view:O,container:A}=Ze({container:y.current,root:B,value:a,autoFocus:S,theme:h,height:p,minHeight:C,maxHeight:v,width:x,minWidth:E,maxWidth:f,basicSetup:b,placeholder:K,indentWithTab:R,editable:J,readOnly:W,selection:l,onChange:i,onStatistics:d,onCreateEditor:n,onUpdate:g,extensions:u,initialState:L});if(s.useImperativeHandle(e,()=>({editor:y.current,state:N,view:O}),[y,A,N,O]),typeof a!="string")throw new Error("value must be typeof string but got "+typeof a);var j=typeof h=="string"?"cm-theme-"+h:"cm-theme";return ae.jsx("div",we({ref:y,className:""+j+(o?" "+o:"")},c))});Z.displayName="CodeMirror";const et=De`
  cursor: text;
`,$=s.forwardRef(({value:r,disabled:e,handleOnChange:o,handleOnBlur:a,handleOnFocus:l},u)=>{const i=s.useRef(""),d=s.useMemo(()=>{if(r)try{if(r!==i.current){const n=JSON.stringify(JSON.parse(r),null,2);return i.current=n,n}return i.current}catch(n){return console.warn(n),r!==i.current?r:i.current}else return""},[r]);return w(Z,{ref:u,value:d,css:et,onChange:o,onFocus:l,onBlur:a,theme:Le,extensions:[re()],editable:!e,onMouseDownCapture:n=>n.stopPropagation(),onTouchStartCapture:n=>n.stopPropagation()})});$.displayName="BaseJsonEditor";const tt=r=>{const{displayName:e,tooltipText:o,value:a,defaultValue:l,triggerEventHandler:u,handleUpdateMultiExecutionResult:i,updateComponentRuntimeProps:d,deleteComponentRuntimeProps:n}=r,g=s.useRef(null),S=s.useRef(null),h=s.useRef(l),p=s.useRef(a),C=s.useRef(Je((f,b)=>{typeof f=="string"&&(i([{displayName:e,value:{value:f}}]),b("change"))},180)),v=s.useCallback(f=>{C.current(f,u)},[u]),x=s.useCallback(()=>{u("focus")},[u]),E=s.useCallback(()=>{u("blur")},[u]);return s.useEffect(()=>{h.current!==l&&(h.current=l)},[l]),s.useEffect(()=>{h.current===l&&p.current!==h.current&&(i([{displayName:e,value:{value:l}}]),p.current=l)},[l,e,i]),s.useEffect(()=>{p.current!==a&&(p.current=a)},[a]),s.useEffect(()=>(d({setValue:f=>{typeof f=="string"&&i([{displayName:e,value:{value:f}}])},clearValue:()=>{i([{displayName:e,value:{value:void 0}}])},focus:()=>{var f,b;(b=(f=g.current)==null?void 0:f.view)==null||b.focus()}}),()=>{n()}),[e,n,i,d]),w(Ve,{tooltipText:o,tooltipDisabled:!o,children:w("div",{ref:S,children:w($,{...r,ref:g,value:a,handleOnChange:v,handleOnBlur:E,handleOnFocus:x})})})};tt.displayName="JsonEditorWidget";export{tt as JsonEditorWidget,tt as default};
//# sourceMappingURL=jsonEditor-89c70178.js.map
