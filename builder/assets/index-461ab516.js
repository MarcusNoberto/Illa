import{k as d}from"./@illa-design-402f214a.js";import{b as _,cr as f,eh as E,ay as I,ax as p,e4 as h,ei as C}from"./index-2f1869ab.js";import{r as a}from"./react-9b7e00e3.js";const T=(t,r)=>{let e=r?"deploy_":"builder_editor_";switch(t){case"IMAGE_WIDGET":return`${e}traffic_not_enough_image`;case"CAROUSEL_WIDGET":return`${e}traffic_not_enough_carousel`;case"VIDEO_WIDGET":return`${e}traffic_not_enough_video`;case"AUDIO_WIDGET":return`${e}traffic_not_enough_audio`}},i=a.createContext({}),S=({children:t})=>{const r=a.useRef(!1),e=_(f),n=a.useCallback(async(o,u)=>{if(r.current||!o)return;let s=h+C;if(o.includes(s))try{await E({url:o.replace(s,""),method:"GET"})}catch(l){let c=!1;r.current||(c=I(l,p.TRAFFIC,T(u,e))),c&&(r.current=!0)}},[e]);return d(i.Provider,{value:{sourceLoadErrorHandler:n},children:t})};i.displayName="MediaSourceLoadContext";export{i as M,S as a};
//# sourceMappingURL=index-461ab516.js.map
