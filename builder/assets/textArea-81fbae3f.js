import{k as V,aZ as re,b8 as le,o as Z}from"./@illa-design-1f43bb6c.js";import{r as a}from"./react-9b7e00e3.js";import{aF as C,aE as oe,aG as ie,aH as ue}from"./index-4dce6ee8.js";import{h as ce,g as de,I as me}from"./utils-1cfed9ac.js";import{L as he}from"./index-2c54d160.js";import{T as pe}from"./index-99007076.js";import{a as fe,b as ge}from"./style-49f23046.js";import{a as K}from"./@emotion-08a6282b.js";import{w as xe}from"./lodash-lib-6e94956b.js";import"./codeMirror-vendor-320207e2.js";import"./react-icons-vendor-2430ea65.js";const be=(i="left",u)=>K`
    display: flex;
    height: ${u?`calc(100% - ${C})px`:"100%"};
    flex-direction: ${i==="top"?"column":"row"};
    & textarea {
      resize: none;
    }
  `,Me=K`
  flex: 1;
  width: 100%;
  overflow-y: auto;
  & > textarea:hover {
    z-index: 0;
  }
`,J=(i,u={})=>{const{hideValidationMessage:c,pattern:p,regex:f,maxLength:d,minLength:m,required:t,customRule:g}=u;if(!c){const r=ce({value:de(i),pattern:p,regex:f,minLength:m,maxLength:d,required:t,customRule:g});return r&&r.length>0?r:""}return""},P=a.forwardRef((i,u)=>{const{value:c,placeholder:p,disabled:f,readOnly:d,showCharacterCount:m,colorScheme:t,handleOnChange:g,handleOnFocus:r,handleOnBlur:w,allowClear:E,maxLength:O,dynamicHeight:T,dynamicMinHeight:l=0,dynamicMaxHeight:x=1/0,labelPosition:b,showValidationMessage:n}=i,M=a.useMemo(()=>{const s=b==="top"?ie:ue,o=`${n?l-s-C:l-s}px`,h=`${n?x-s-C:x-s}px`;return T==="limited"?{minH:o,maxH:h,h:"auto"}:T==="fixed"?{maxH:n?`calc(100% - ${s+C})px`:`calc(100% - ${s})px`,h:"auto"}:{minH:n?`calc(100% - ${C})px`:"100%",maxH:n?`calc(100% - ${C})px`:"100%",h:"auto"}},[T,x,l,b,n]);return V(re,{css:Me,...M,textAreaRef:u,value:c,placeholder:p,disabled:f,readOnly:d,maxLength:O,showWordLimit:m,colorScheme:t,allowClear:E,onFocus:r,onBlur:w,onChange:g,onClear:()=>{g("")},autoSize:!0})});P.displayName="WrappedTextarea";const We=i=>{const{value:u,handleUpdateDsl:c,updateComponentRuntimeProps:p,deleteComponentRuntimeProps:f,minLength:d,maxLength:m,labelPosition:t,labelFull:g,label:r,labelAlign:w,labelWidth:E=33,labelCaption:O,labelWidthUnit:T,required:l,labelHidden:x,tooltipText:b,pattern:n,regex:M,customRule:s,hideValidationMessage:o,updateComponentHeight:h,validateMessage:A,triggerEventHandler:y,dynamicHeight:k="fixed",dynamicMinHeight:_,dynamicMaxHeight:B,defaultValue:L,handleUpdateMultiExecutionResult:$,displayName:F}=i,G=a.useRef(null),N=a.useRef(null),[Q,W]=le(),[X,U]=a.useState(L);a.useEffect(()=>{U(L),$([{displayName:F,value:{value:L||""}}])},[L,F,$]),a.useEffect(()=>{var e;N.current&&(h==null||h((e=N.current)==null?void 0:e.clientHeight))},[A,t,h]);const z=a.useCallback(e=>{const H=J(e,{hideValidationMessage:o,pattern:n,regex:M,minLength:d,maxLength:m,required:l,customRule:s});return c({validateMessage:H}),H},[o,n,M,d,m,l,s,c]),Y=a.useRef(xe((e,H,R)=>{new Promise(ne=>{const se=J(e,R);$([{displayName:F,value:{value:e||"",validateMessage:se}}]),ne(!0)}).then(()=>{H("change")})},180)),v=a.useCallback(e=>{U(e),Y.current(e,y,{hideValidationMessage:o,pattern:n,regex:M,minLength:d,maxLength:m,required:l,customRule:s})},[s,o,m,d,n,M,l,y]);a.useEffect(()=>(p({focus:()=>{var e;(e=G.current)==null||e.focus()},setValue:e=>{v(typeof e=="string"?e:"")},clearValue:()=>{v("")},validate:()=>z(u),clearValidation:()=>{c({validateMessage:""})}}),()=>{f()}),[f,v,c,z,p,u]);const ee=a.useCallback(()=>{y("focus")},[y]),ae=a.useCallback(()=>{y("blur")},[y]),te=a.useMemo(()=>{switch(k){case"auto":return!0;case"limited":return!0;case"fixed":default:return!1}},[k]),S=a.useRef({}),D=a.useMemo(()=>!!(!o&&A),[o,A]),I=(e,H,R)=>R===void 0?R:R-(e+H),j=I(t==="top"&&r?30:6,W.height,_),q=I(t==="top"&&r?30:6,W.height,B);return j!==S.current.min&&(S.current.min=j),q!==S.current.max&&(S.current.max=q),V(pe,{tooltipText:b,tooltipDisabled:!b,children:Z(oe,{updateComponentHeight:h,enable:te,children:[Z("div",{css:[fe(t),be(t,D)],children:[V(he,{labelFull:g,label:r,labelAlign:w,labelWidth:E,labelCaption:O,labelWidthUnit:T,labelPosition:t,required:l,labelHidden:x,hasTooltip:!!b}),V(P,{...i,value:X,ref:G,handleOnChange:v,handleOnFocus:ee,handleOnBlur:ae,showValidationMessage:D})]}),!o&&V("div",{css:ge(E,t,x||!r),ref:Q,children:V(me,{validateMessage:A})})]})})};P.displayName="WrappedTextarea";export{We as TextareaWidget,P as WrappedTextarea,We as default};
//# sourceMappingURL=textArea-81fbae3f.js.map
