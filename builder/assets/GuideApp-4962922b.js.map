{"version":3,"file":"GuideApp-4962922b.js","sources":["../../src/components/Guide/GuideDraggablePopover/style.ts","../../src/components/Guide/GuideDraggablePopover/index.tsx","../../src/components/Guide/GuideSuccess/style.ts","../../src/components/Guide/GuideSuccess/index.tsx","../../src/components/Guide/WidgetStepMask/style.ts","../../src/components/Guide/assets/move.svg?react","../../src/components/Guide/WidgetStepMask/index.tsx","../../src/components/Guide/style.ts","../../src/components/Guide/GuideCreateApp/CreateModal/style.ts","../../src/components/Guide/index.tsx","../../src/hooks/useInitGuideApp.tsx","../../src/page/Template/GuideApp.tsx"],"sourcesContent":["import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\nimport { CurrentMaskPosition } from \"@/components/Guide/GuideDraggablePopover/index\"\n\nconst POPOVER_MARGIN = 14\n\nconst applyTriangleStyle = (position: CurrentMaskPosition) => {\n  if (position === \"right\") return css``\n  // only show triangle for top and bottom\n  const positionStyle =\n    position === \"top\"\n      ? css`\n          bottom: -5px;\n          border-width: 6px 6px 0 6px;\n          border-color: ${getColor(\"techPurple\", \"03\")} transparent transparent\n            transparent;\n        `\n      : css`\n          top: -5px;\n          border-width: 0 6px 6px 6px;\n          border-color: transparent transparent ${getColor(\"techPurple\", \"03\")}\n            transparent;\n        `\n  return css`\n    &::before {\n      content: \"\";\n      position: absolute;\n      ${positionStyle};\n      left: 50%;\n      transform: translateX(-50%);\n      width: 0;\n      height: 0;\n      border-style: solid;\n    }\n  `\n}\n\nexport const applyPopoverStyle = (\n  position: CurrentMaskPosition,\n  domRect?: DOMRect,\n) => {\n  const positionStyle = domRect\n    ? position === \"top\"\n      ? css`\n          bottom: ${window.innerHeight - domRect?.top + POPOVER_MARGIN}px;\n          left: ${domRect?.left - 60}px;\n        `\n      : position === \"right\"\n        ? css`\n            top: ${domRect?.top + POPOVER_MARGIN}px;\n            left: ${domRect?.left - domRect?.width}px;\n          `\n        : css`\n            top: ${domRect?.bottom + POPOVER_MARGIN}px;\n            left: ${domRect?.left - domRect?.width}px;\n          `\n    : css``\n\n  return css`\n    cursor: move;\n    z-index: 11;\n    position: absolute;\n    background-color: ${getColor(\"techPurple\", \"03\")};\n    color: ${getColor(\"white\", \"01\")};\n    padding: 8px 12px;\n    border-radius: 2px;\n    ${positionStyle};\n    ${applyTriangleStyle(position)};\n  `\n}\n","import { motion } from \"framer-motion\"\nimport { FC, useMemo } from \"react\"\nimport { createPortal } from \"react-dom\"\nimport { applyPopoverStyle } from \"@/components/Guide/GuideDraggablePopover/style\"\nimport { GuidePopover } from \"@/components/Guide/GuidePopover\"\nimport { GUIDE_STEP } from \"@/config/guide/config\"\n\nexport type CurrentMaskPosition = \"top\" | \"bottom\" | \"right\"\n\nexport interface GuideCurrentMaskProps {\n  currentStep: number\n  position?: CurrentMaskPosition\n}\n\nexport const GuideDraggablePopover: FC<GuideCurrentMaskProps> = (props) => {\n  const { currentStep, position = \"bottom\" } = props\n  const { selector, titleKey, descKey, hideExit, doItForMe } =\n    GUIDE_STEP[currentStep]\n  const isLastStep = useMemo(\n    () => currentStep === GUIDE_STEP.length - 1,\n    [currentStep],\n  )\n\n  const domRect = useMemo(() => {\n    if (selector) {\n      const element = document.querySelector(selector)\n      return element?.getBoundingClientRect()\n    }\n  }, [selector])\n\n  return createPortal(\n    <motion.div\n      css={applyPopoverStyle(position, domRect)}\n      drag\n      dragMomentum={false}\n    >\n      <GuidePopover\n        title={titleKey}\n        description={descKey}\n        hideExit={hideExit}\n        isLastStep={isLastStep}\n        onClickDoIt={doItForMe}\n      />\n    </motion.div>,\n    document.body,\n  )\n}\n\nGuideDraggablePopover.displayName = \"GuideDraggablePopover\"\n","import { css } from \"@emotion/react\"\n\nexport const popoverStyle = css`\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 2;\n`\n","import Lottie from \"lottie-react\"\nimport { FC, useState } from \"react\"\nimport { createPortal } from \"react-dom\"\nimport { popoverStyle } from \"@/components/Guide/GuideSuccess/style\"\nimport animationData from \"@/components/Guide/assets/lottie/success.json\"\n\nexport const GuideSuccess: FC = () => {\n  const [showAnimation, setShowAnimation] = useState(true)\n\n  const handleAnimationComplete = () => {\n    setShowAnimation(false)\n  }\n\n  return showAnimation\n    ? createPortal(\n        <div css={popoverStyle}>\n          <Lottie\n            animationData={animationData}\n            loop={false}\n            autoplay={true}\n            onComplete={handleAnimationComplete}\n          />\n        </div>,\n        document.body,\n      )\n    : null\n}\n\nGuideSuccess.displayName = \"GuideSuccess\"\n","import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\nimport { UNIT_HEIGHT } from \"@/page/App/components/DotPanel/constant/canvas\"\n\nexport const applyStepMaskWrapperStyle = (\n  visible: boolean,\n  unitWidth: number,\n) => {\n  return css`\n    display: ${visible ? \"flex\" : \"none\"};\n    flex-direction: column;\n    position: absolute;\n    top: ${unitWidth * 5}px;\n    left: 50%;\n    transform: translate(-50%, 0);\n    gap: ${UNIT_HEIGHT * 3}px;\n    pointer-events: none;\n    font-size: 14px;\n  `\n}\n\nexport const stepMaskStyle = css`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: ${getColor(\"grayBlue\", \"04\")};\n  background: ${getColor(\"techPurple\", \"08\")};\n  border: 1px dashed ${getColor(\"techPurple\", \"03\")};\n`\n\n// transform stepMaskStyle to function, set {width, height}\nexport const applyStepMaskStyle = (shape: {\n  width: number\n  height: number\n}) => {\n  const { width, height } = shape\n  return css`\n    width: ${width}px;\n    height: ${height}px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: ${getColor(\"grayBlue\", \"04\")};\n    background: ${getColor(\"techPurple\", \"08\")};\n    border: 1px dashed ${getColor(\"techPurple\", \"03\")};\n  `\n}\n\nexport const moveIconStyle = css`\n  width: 24px;\n  height: 24px;\n  margin-right: 4px;\n  flex-shrink: 0;\n`\n\nexport const ellipsisStyle = css`\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n`\n\nexport const stepFirstLineStyle = css`\n  display: flex;\n  justify-content: space-between;\n`\n\n// hidden function, use visible to control\nexport const applyVisibleStyle = (visible: boolean) => {\n  return css`\n    visibility: ${visible ? \"visible\" : \"hidden\"};\n  `\n}\n","import * as React from \"react\";\nconst SvgMove = (props) => /* @__PURE__ */ React.createElement(\"svg\", { width: 24, height: 24, viewBox: \"0 0 24 24\", fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\", ...props }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M13.75 16.75H6.75C6.19772 16.75 5.75 16.3023 5.75 15.75V5.75C5.75 5.19772 6.19772 4.75 6.75 4.75H10.75H12.75H16.75C17.3023 4.75 17.75 5.19772 17.75 5.75V12.75\", stroke: \"#A9AEB8\", strokeLinecap: \"round\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M16.25 5.75H12.5833H10.9167H7.25C6.97386 5.75 6.75 5.97386 6.75 6.25V15.25C6.75 15.5261 6.97386 15.75 7.25 15.75H13.4167H16.25C16.5261 15.75 16.75 15.5261 16.75 15.25V12.4167V6.25C16.75 5.97386 16.5261 5.75 16.25 5.75Z\", fill: \"white\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M17.738 17.4498L16.7796 19.9049L15.2481 14.4825L20.3222 16.9324L17.738 17.4498Z\", fill: \"white\", stroke: \"#A9AEB8\", strokeLinecap: \"round\", strokeLinejoin: \"round\" }));\nexport default SvgMove;\n","import { FC, useMemo } from \"react\"\nimport { useTranslation } from \"react-i18next\"\nimport { useSelector } from \"react-redux\"\nimport {\n  applyStepMaskStyle,\n  applyStepMaskWrapperStyle,\n  applyVisibleStyle,\n  ellipsisStyle,\n  moveIconStyle,\n  stepFirstLineStyle,\n} from \"@/components/Guide/WidgetStepMask/style\"\nimport MoveIcon from \"@/components/Guide/assets/move.svg?react\"\nimport { GUIDE_SELECT_WIDGET } from \"@/config/guide/config\"\nimport {\n  DEFAULT_BODY_COLUMNS_NUMBER,\n  UNIT_HEIGHT,\n} from \"@/page/App/components/DotPanel/constant/canvas\"\nimport { getCanvasShape } from \"@/redux/config/configSelector\"\nimport { widgetBuilder } from \"@/widgetLibrary/widgetBuilder\"\n\nexport interface StepMaskProps {\n  currentStep: number\n}\n\nexport const WidgetStepMask: FC<StepMaskProps> = (props) => {\n  const { t } = useTranslation()\n\n  const { currentStep } = props\n  const canvasShape = useSelector(getCanvasShape)\n\n  const unitWidth = useMemo(() => {\n    return canvasShape.canvasWidth / DEFAULT_BODY_COLUMNS_NUMBER\n  }, [canvasShape.canvasWidth])\n\n  const widgetShape = useMemo(() => {\n    return GUIDE_SELECT_WIDGET.map((widget) => {\n      const { w, h } = widgetBuilder(widget).config\n      return {\n        width: w * unitWidth,\n        height: h * UNIT_HEIGHT,\n      }\n    })\n  }, [unitWidth])\n\n  const applyMaskStyle = (step: number) => {\n    return [\n      applyStepMaskStyle(widgetShape[step]),\n      applyVisibleStyle(currentStep <= step),\n    ]\n  }\n\n  return (\n    <div css={applyStepMaskWrapperStyle(currentStep <= 2, unitWidth)}>\n      <div css={stepFirstLineStyle}>\n        <div css={applyMaskStyle(0)}>\n          <MoveIcon css={moveIconStyle} />\n          <span css={ellipsisStyle}>\n            {t(\"editor.tutorial.panel.onboarding_app.drag_input\")}\n          </span>\n        </div>\n        <div css={applyMaskStyle(1)}>\n          <MoveIcon css={moveIconStyle} />\n          <span css={ellipsisStyle}>\n            {t(\"editor.tutorial.panel.onboarding_app.drag_button\")}\n          </span>\n        </div>\n      </div>\n      <div css={applyMaskStyle(2)}>\n        <MoveIcon css={moveIconStyle} />\n        <span css={ellipsisStyle}>\n          {t(\"editor.tutorial.panel.onboarding_app.drag_table\")}\n        </span>\n      </div>\n    </div>\n  )\n}\n\nWidgetStepMask.displayName = \"WidgetStepMask\"\n","import { css } from \"@emotion/react\"\nimport { GUIDE_SELECT_WIDGET, SELECT_WIDGET_ITEM } from \"@/config/guide/config\"\n\nconst applyHighlightStyle = (currentStep: number) => css`\n  [data-onboarding-session=\"COMMON\"] {\n    ${GUIDE_SELECT_WIDGET.slice(currentStep).map((widget) => {\n      const { highlightIcon } = SELECT_WIDGET_ITEM[widget]\n      return css`\n        [data-onboarding-icon=${widget}] {\n          content: url(${highlightIcon});\n        }\n      `\n    })}\n  }\n`\n\nexport const applyGuideStyle = (currentStep: number) => {\n  switch (currentStep) {\n    case 0:\n    case 1:\n    case 2:\n      return applyHighlightStyle(currentStep)\n    default:\n      return css``\n  }\n}\n\nexport const shiftStyle = css`\n  top: -15px;\n`\n\nexport const actionShiftStyle = css`\n  left: 84px;\n`\n","import { css } from \"@emotion/react\"\nimport { getColor } from \"@illa-design/react\"\n\nexport const containerStyle = css`\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: 24px;\n  position: relative;\n`\n\nexport const headerStyle = css`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n`\n\nexport const closeIconStyle = css`\n  position: absolute;\n  right: 24px;\n  top: 24px;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nexport const titleStyle = css`\n  color: ${getColor(\"grayBlue\", \"02\")};\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 24px;\n`\n\nexport const descStyle = css`\n  color: ${getColor(\"grayBlue\", \"03\")};\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 22px;\n`\n\nexport const operateContainerStyle = css`\n  width: 100%;\n  display: flex;\n  gap: 16px;\n`\n\nexport const createOptionsContainerStyle = (bgColor: string) => css`\n  display: flex;\n  color: ${getColor(\"white\", \"01\")};\n  border-radius: 8px;\n  align-items: center;\n  background-color: ${bgColor};\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 500;\n  line-height: 22px;\n  cursor: pointer;\n  height: 118px;\n  width: 200px;\n  padding: 24px;\n  flex-direction: column;\n  text-align: center;\n  gap: 8px;\n`\nexport const iconStyle = css`\n  display: flex;\n  padding: 12px;\n  width: 40px;\n  height: 40px;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  border-radius: 50%;\n  background-color: ${getColor(\"white\", \"07\")};\n  position: relative;\n`\n","import { Global } from \"@emotion/react\"\nimport { isCloudVersion } from \"@illa-public/utils\"\nimport { FC, RefObject, useEffect, useRef, useState } from \"react\"\nimport { createPortal } from \"react-dom\"\nimport { useSelector } from \"react-redux\"\nimport { GuideDraggablePopover } from \"@/components/Guide/GuideDraggablePopover\"\nimport { GuidePoint } from \"@/components/Guide/GuidePoint\"\nimport { GuideSuccess } from \"@/components/Guide/GuideSuccess\"\nimport { WidgetStepMask } from \"@/components/Guide/WidgetStepMask\"\nimport {\n  actionShiftStyle,\n  applyGuideStyle,\n  shiftStyle,\n} from \"@/components/Guide/style\"\nimport { GUIDE_STEP } from \"@/config/guide/config\"\nimport { getCurrentStep } from \"@/redux/guide/guideSelector\"\nimport GuideCreateApp from \"./GuideCreateApp\"\n\nexport interface GuideProps {\n  canvasRef: RefObject<HTMLDivElement>\n}\n\nexport const Guide: FC<GuideProps> = (props) => {\n  const { canvasRef } = props\n  const currentStep = useSelector(getCurrentStep)\n  const [firstStepElement, setFirstStepElement] = useState<Element | null>()\n\n  const { selector } = GUIDE_STEP[currentStep]\n  const postgresqlQuery = document.querySelector(\".postgresql1-query\")\n  const currentElement = selector && document.querySelector(selector)\n\n  const timeout = useRef<number>()\n\n  useEffect(() => {\n    // get first step element\n    if (currentStep === 0 && selector) {\n      timeout.current = window.setTimeout(() => {\n        const element = document.querySelector(selector)\n        setFirstStepElement(element)\n      }, 10)\n    }\n    return () => {\n      window.clearTimeout(timeout.current)\n    }\n  }, [currentStep, selector])\n\n  return (\n    <>\n      <Global styles={applyGuideStyle(currentStep)} />\n      {canvasRef.current?.children?.[0] &&\n        createPortal(\n          <WidgetStepMask currentStep={currentStep} />,\n          canvasRef.current.children[0],\n        )}\n      {/* widget tip */}\n      {currentStep === 0 && firstStepElement && (\n        <>\n          {createPortal(<GuidePoint />, firstStepElement)}\n          <GuideDraggablePopover currentStep={0} position=\"bottom\" />\n        </>\n      )}\n      {/* action tip */}\n      {(currentStep === 3 || currentStep === 4) && postgresqlQuery && (\n        <GuideDraggablePopover currentStep={currentStep} position=\"top\" />\n      )}\n      {currentStep === 3 &&\n        postgresqlQuery &&\n        createPortal(<GuidePoint css={actionShiftStyle} />, postgresqlQuery)}\n      {currentStep === 11 && currentElement && (\n        <GuideDraggablePopover currentStep={currentStep} position=\"right\" />\n      )}\n      {(currentStep === 4 || currentStep === 5 || currentStep === 7) &&\n        currentElement &&\n        createPortal(<GuidePoint css={shiftStyle} />, currentElement)}\n      {/* success tip */}\n      {currentStep === 12 && <GuideSuccess />}\n      {currentStep === 12 && currentElement ? (\n        isCloudVersion ? (\n          <GuideCreateApp />\n        ) : (\n          <GuideDraggablePopover currentStep={currentStep} position=\"right\" />\n        )\n      ) : null}\n    </>\n  )\n}\n\nGuide.displayName = \"Guide\"\n","import { getCurrentTeamInfo } from \"@illa-public/user-data\"\nimport { useCallback, useEffect, useState } from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { useParams } from \"react-router-dom\"\nimport { initGuideApp } from \"@/config/guide\"\nimport { useDestroyApp } from \"@/hooks/useDestoryExecutionTree\"\nimport { updateCurrentAppInfo } from \"@/hooks/useInitApp\"\nimport { CurrentAppResp } from \"@/page/App/resp/currentAppResp\"\nimport { getIsOnline } from \"@/redux/config/configSelector\"\nimport { IllaMode } from \"@/redux/config/configState\"\nimport { appInfoActions } from \"@/redux/currentApp/appInfo/appInfoSlice\"\nimport { DashboardAppInitialState } from \"@/redux/currentApp/appInfo/appInfoState\"\nimport { guideActions } from \"@/redux/guide/guideSlice\"\nimport { GuideInitialState } from \"@/redux/guide/guideState\"\nimport { resourceActions } from \"@/redux/resource/resourceSlice\"\nimport { fetchResources } from \"@/services/resource\"\n\nexport const useInitGuideApp = (mode: IllaMode = \"template-edit\") => {\n  const { appId = \"\" } = useParams()\n  const dispatch = useDispatch()\n  const isOnline = useSelector(getIsOnline)\n  const teamInfo = useSelector(getCurrentTeamInfo)\n  const { teamIdentifier } = useParams()\n\n  const [loadingState, setLoadingState] = useState(true)\n  const [errorState, setErrorState] = useState(false)\n\n  const { uid, teamID } = {\n    uid: teamInfo?.uid ?? \"\",\n    teamID: teamInfo?.id ?? \"\",\n  }\n\n  useDestroyApp()\n\n  const handleCurrentApp = useCallback(\n    (data: CurrentAppResp) => {\n      updateCurrentAppInfo(data, mode, appId, teamID, uid)\n    },\n    [mode, appId, teamID, uid],\n  )\n\n  useEffect(() => {\n    const controller = new AbortController()\n    if (isOnline) {\n      new Promise<CurrentAppResp>(async (resolve) => {\n        setErrorState(false)\n        setLoadingState(true)\n        fetchResources(controller.signal).then((response) => {\n          dispatch(resourceActions.updateResourceListReducer(response.data))\n          initGuideApp()\n            .then((data) => {\n              handleCurrentApp(data)\n              resolve(data)\n            })\n            .finally(() => {\n              dispatch(guideActions.updateGuideStatusReducer(true))\n              setLoadingState(false)\n            })\n        })\n      })\n    }\n\n    return () => {\n      controller.abort()\n      dispatch(guideActions.updateGuideInfoReducer(GuideInitialState))\n      dispatch(appInfoActions.updateAppInfoReducer(DashboardAppInitialState))\n    }\n  }, [appId, dispatch, isOnline, teamIdentifier, handleCurrentApp])\n\n  return { loadingState, errorState }\n}\n","import { getCurrentTeamInfo, getPlanUtils } from \"@illa-public/user-data\"\nimport {\n  ACTION_MANAGE,\n  ATTRIBUTE_GROUP,\n  canManage,\n} from \"@illa-public/user-role-utils\"\nimport { Unsubscribe } from \"@reduxjs/toolkit\"\nimport { FC, useEffect, useRef } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { TriggerProvider } from \"@illa-design/react\"\nimport { Guide } from \"@/components/Guide\"\nimport { useInitGuideApp } from \"@/hooks/useInitGuideApp\"\nimport { ActionEditor } from \"@/page/App/Module/ActionEditor\"\nimport { CanvasPanel } from \"@/page/App/Module/CanvasPanel\"\nimport ComponentsManager from \"@/page/App/Module/ComponentManager\"\nimport { DataWorkspace } from \"@/page/App/Module/DataWorkspace\"\nimport { PageNavBar } from \"@/page/App/Module/PageNavBar\"\nimport { AppLoading } from \"@/page/App/components/AppLoading\"\nimport { Debugger } from \"@/page/App/components/Debugger\"\nimport {\n  bottomPanelStyle,\n  centerPanelStyle,\n  contentStyle,\n  editorContainerStyle,\n  middlePanelStyle,\n  navbarStyle,\n} from \"@/page/App/style\"\nimport { setupConfigListeners } from \"@/redux/config/configListener\"\nimport {\n  isOpenBottomPanel,\n  isOpenDebugger,\n  isOpenLeftPanel,\n  isOpenRightPanel,\n} from \"@/redux/config/configSelector\"\nimport { setupActionListeners } from \"@/redux/currentApp/action/actionListener\"\nimport { setupComponentsListeners } from \"@/redux/currentApp/components/componentsListener\"\nimport { setupExecutionListeners } from \"@/redux/currentApp/executionTree/executionListener\"\nimport { setupLayoutInfoListeners } from \"@/redux/currentApp/layoutInfo/layoutInfoListener\"\nimport { getGuideStatus } from \"@/redux/guide/guideSelector\"\nimport { startAppListening } from \"@/store\"\nimport { MediaSourceLoadProvider } from \"@/utils/mediaSourceLoad\"\nimport { Shortcut } from \"@/utils/shortcut\"\nimport { useResize } from \"../App/components/ScaleSquare/components/ResizingAndDragContainer/ResizeHandler/hooks\"\n\nconst GuideApp: FC = () => {\n  const teamInfo = useSelector(getCurrentTeamInfo)\n\n  const canvasRef = useRef<HTMLDivElement>(null)\n\n  const currentUserRole = teamInfo?.myRole\n\n  // check if user can manage the app\n  if (currentUserRole) {\n    const canEditApp = canManage(\n      currentUserRole,\n      ATTRIBUTE_GROUP.APP,\n      getPlanUtils(teamInfo),\n      ACTION_MANAGE.EDIT_APP,\n    )\n    if (!canEditApp) {\n      throw new Error(\"You don't have permission to edit this app\")\n    }\n  }\n\n  useEffect(() => {\n    const subscriptions: Unsubscribe[] = [\n      setupExecutionListeners(startAppListening),\n      setupComponentsListeners(startAppListening),\n      setupLayoutInfoListeners(startAppListening),\n      setupActionListeners(startAppListening),\n      setupConfigListeners(startAppListening),\n    ]\n    return () => subscriptions.forEach((unsubscribe) => unsubscribe())\n  }, [])\n\n  const showLeftPanel = useSelector(isOpenLeftPanel)\n  const showRightPanel = useSelector(isOpenRightPanel)\n  const showBottomPanel = useSelector(isOpenBottomPanel)\n  const showDebugger = useSelector(isOpenDebugger)\n\n  // init app\n  const { loadingState } = useInitGuideApp()\n  const isOpen = useSelector(getGuideStatus)\n  const [, resizeDropRef] = useResize()\n\n  return (\n    <div css={editorContainerStyle} ref={resizeDropRef}>\n      {loadingState && <AppLoading />}\n      {!loadingState && (\n        <Shortcut>\n          <MediaSourceLoadProvider>\n            {isOpen && <Guide canvasRef={canvasRef} />}\n            <TriggerProvider renderInBody zIndex={10}>\n              <PageNavBar css={navbarStyle} />\n            </TriggerProvider>\n            <div css={contentStyle}>\n              {showLeftPanel && <DataWorkspace />}\n              <div css={middlePanelStyle}>\n                <TriggerProvider renderInBody zIndex={10}>\n                  <CanvasPanel ref={canvasRef} css={centerPanelStyle} />\n                </TriggerProvider>\n                {showBottomPanel && !showDebugger ? <ActionEditor /> : null}\n                {showDebugger && <Debugger css={bottomPanelStyle} />}\n              </div>\n              {showRightPanel && (\n                <TriggerProvider renderInBody zIndex={10}>\n                  <ComponentsManager />\n                </TriggerProvider>\n              )}\n            </div>\n          </MediaSourceLoadProvider>\n        </Shortcut>\n      )}\n    </div>\n  )\n}\n\nexport default GuideApp\n\nGuideApp.displayName = \"GuideApp\"\n"],"names":["POPOVER_MARGIN","applyTriangleStyle","position","css","positionStyle","getColor","applyPopoverStyle","domRect","GuideDraggablePopover","props","currentStep","selector","titleKey","descKey","hideExit","doItForMe","GUIDE_STEP","isLastStep","useMemo","element","createPortal","jsx","motion","GuidePopover","popoverStyle","GuideSuccess","showAnimation","setShowAnimation","useState","handleAnimationComplete","Lottie","animationData","applyStepMaskWrapperStyle","visible","unitWidth","UNIT_HEIGHT","applyStepMaskStyle","shape","width","height","moveIconStyle","ellipsisStyle","stepFirstLineStyle","applyVisibleStyle","SvgMove","React.createElement","WidgetStepMask","t","useTranslation","canvasShape","useSelector","getCanvasShape","DEFAULT_BODY_COLUMNS_NUMBER","widgetShape","GUIDE_SELECT_WIDGET","widget","w","h","widgetBuilder","applyMaskStyle","step","jsxs","MoveIcon","applyHighlightStyle","highlightIcon","SELECT_WIDGET_ITEM","applyGuideStyle","shiftStyle","actionShiftStyle","Guide","canvasRef","getCurrentStep","firstStepElement","setFirstStepElement","postgresqlQuery","currentElement","timeout","useRef","useEffect","Fragment","Global","_b","_a","GuidePoint","useInitGuideApp","mode","appId","useParams","dispatch","useDispatch","isOnline","getIsOnline","teamInfo","getCurrentTeamInfo","teamIdentifier","loadingState","setLoadingState","errorState","setErrorState","uid","teamID","useDestroyApp","handleCurrentApp","useCallback","data","updateCurrentAppInfo","controller","resolve","fetchResources","response","resourceActions","initGuideApp","guideActions","GuideInitialState","appInfoActions","DashboardAppInitialState","GuideApp","currentUserRole","canManage","ATTRIBUTE_GROUP","getPlanUtils","ACTION_MANAGE","subscriptions","setupExecutionListeners","startAppListening","setupComponentsListeners","setupLayoutInfoListeners","setupActionListeners","setupConfigListeners","unsubscribe","showLeftPanel","isOpenLeftPanel","showRightPanel","isOpenRightPanel","showBottomPanel","isOpenBottomPanel","showDebugger","isOpenDebugger","isOpen","getGuideStatus","resizeDropRef","useResize","editorContainerStyle","AppLoading","Shortcut","MediaSourceLoadProvider","TriggerProvider","PageNavBar","navbarStyle","contentStyle","DataWorkspace","middlePanelStyle","CanvasPanel","centerPanelStyle","ActionEditor","Debugger","bottomPanelStyle","ComponentsManager"],"mappings":"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"}