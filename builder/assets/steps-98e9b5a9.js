import{ah as $,k,F as N,T as B,ab as R,c0 as _}from"./@illa-design-1f43bb6c.js";import{r as g}from"./react-9b7e00e3.js";import{b as q,ci as z,aE as G}from"./index-4dce6ee8.js";import{g as U}from"./lodash-lib-6e94956b.js";import"./@emotion-08a6282b.js";import"./codeMirror-vendor-320207e2.js";import"./react-icons-vendor-2430ea65.js";const W=(d,r)=>{d.length>=r&&d.splice(r,1)},J=(d,r)=>{const p=d==="dynamic";if(!r)return p?{labels:[],values:[],captions:[],tooltips:[],hiddens:[]}:[];if(!p&&$(r)){const a=r.filter(n=>!(n!=null&&n.hidden)),u=[];return a.filter(n=>u.includes(n==null?void 0:n.value)?!1:(u.push(n==null?void 0:n.value),!0))}const{labels:e=[],values:o=[],captions:x=[],tooltips:b=[],hiddens:l=[]}=r;let f=[...l];const C=[...e],v=[...o],m=[...x],t=[...b];f=f.filter((a,u)=>(a&&[C,v,m,t].forEach(n=>W(n,u)),!a));const h=v.filter((a,u)=>{const n=v.indexOf(a)===u;return n||[C,f,m,t].forEach(M=>W(M,u)),n});return{labels:C,values:h,captions:m,tooltips:t,hiddens:f}},K=(d,r)=>{const p=d;return r?k(B,{trigger:"hover",colorScheme:"grayBlue",position:"top-start",showArrow:!1,content:k(N,{children:r}),children:k("div",{children:p})}):p},Q=(d,r,p)=>{if(d==="static"){const t=r;return{items:t.map((a,u)=>{const{label:n,value:M,caption:I,tooltip:y=""}=a;return{title:K(n||M||u,y),description:I,disabled:p}}),uniqueOptions:t.map(a=>a.value)}}const e=r,o=(e==null?void 0:e.labels)||[],x=(e==null?void 0:e.values)||[],b=(e==null?void 0:e.captions)||[],l=(e==null?void 0:e.tooltips)||[],f=(e==null?void 0:e.hiddens)||[],C=Math.max(o.length,x.length,b.length,l.length,f.length),v=[],m=[];for(let t=0;t<C;t++){let h=o[t]||x[t]||t;R(h)&&(h=t);const a=R(b[t])?"":b[t],u=R(l[t])?"":l[t];m.push({title:K(h,u),description:k(N,{children:a})}),v.push(x[t])}return{items:m,uniqueOptions:v}},X=d=>{const{direction:r,items:p,current:e,handleStepsChange:o}=d;return k(_,{direction:r,items:p,type:"line",current:e,onChange:o})},le=d=>{const{manualOptions:r,mappedOption:p,displayName:e,linkContainer:o,viewList:x,currentIndex:b,linkWidgetDisplayName:l,defaultStep:f,disabled:C,updateComponentHeight:v,handleUpdateMultiExecutionResult:m,handleUpdateOriginalDSLOtherMultiAttr:t,optionConfigureMode:h,updateComponentRuntimeProps:a,deleteComponentRuntimeProps:u,handleUpdateDsl:n}=d,M=g.useRef(!1),I=q(z),y=g.useMemo(()=>o&&!!l,[o,l]),E=g.useMemo(()=>(x??[]).map(s=>{const{key:c,...S}=s;return{value:s.key,...S}}).filter(s=>!(s!=null&&s.hidden)),[x]),L=g.useMemo(()=>J(h,h==="static"?r:p),[r,p,h]),{items:T,uniqueOptions:i}=g.useMemo(()=>y?{items:E.map((c,S)=>{const{label:w,value:H,caption:j,tooltip:P=""}=c;return{title:K(w||H||S,P),description:j,disabled:C}}),uniqueOptions:E.map(c=>c.value)}:Q(h,L,C),[y,E,h,L,C]),V=g.useCallback(s=>{l&&t(l,s,!0),t(e,s,!0)},[e,t,l]),F=g.useCallback(s=>{const c={currentKey:i==null?void 0:i[s],currentIndex:s};y?V(c):n(c)},[n,V,y,i]),O=g.useCallback(s=>{const c=i==null?void 0:i.findIndex(w=>w===s),S={currentKey:i[c],currentIndex:c};y?V(S):n(S)},[n,V,y,i]),A=g.useCallback(()=>{o||n({currentIndex:i==null?void 0:i.findIndex(s=>s===f),currentKey:f})},[f,n,o,i]);return g.useEffect(()=>{if(M.current!==o&&l)if(M.current=o,o){const s=U(I,`${l}.currentIndex`),c=U(I,`${l}.currentKey`);m([{displayName:e,value:{currentIndex:s,currentKey:c}}])}else{const s=i==null?void 0:i.findIndex(c=>c===f);m([{displayName:e,value:{currentIndex:s<0?0:s,currentKey:f}}]),l&&t(l,{linkWidgetDisplayName:void 0},!0),t(e,{linkWidgetDisplayName:void 0},!0)}},[f,e,I,m,t,o,l,i]),g.useEffect(()=>(a({setValue:s=>{O(s)},resetValue:()=>{A()}}),()=>{u()}),[u,A,O,a]),k(G,{updateComponentHeight:v,children:k(X,{...d,items:T,current:b,handleStepsChange:F})})};export{le as StepsWidget,X as WrappedSteps,le as default};
//# sourceMappingURL=steps-98e9b5a9.js.map
