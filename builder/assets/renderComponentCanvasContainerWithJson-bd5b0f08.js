import{k as l,bx as te,b7 as ae}from"./@illa-design-402f214a.js";import{r as n}from"./react-9b7e00e3.js";import{e as se,df as k,bm as A,aS as D,bh as O,dg as oe,dh as T,di as U,dj as L,aH as H,dm as re,dv as ie,eL as ce,cu as le}from"./index-2f1869ab.js";import{R as de}from"./index-e7294a86.js";import{E as ue,l as pe,n as me}from"./renderComponentCanvasContainer-44ad78fe.js";import{d as he}from"./style-7ce959a8.js";import{g as W,M as ge,t as _,s as v,h as fe}from"./lodash-lib-6e94956b.js";const B=n.memo(b=>{const{componentNode:s,unitW:i}=b,{displayName:t,type:h,w:y,h:g,childrenNode:f,props:P}=s,o=se(),E=n.useCallback(e=>{k.addRuntimeProp(t,e)},[t]),J=n.useCallback(()=>{k.deleteRuntimeProp(t)},[t]),w=n.useMemo(()=>P??{},[P]),j=n.useCallback(e=>{o(A.updateExecutionByDisplayNameReducer({displayName:t,value:e}))},[o,t]),q=n.useCallback(e=>{o(A.updateExecutionByMultiDisplayNameReducer(e))},[o]),F=n.useCallback((e,c)=>{D(e)&&o(O.updateComponentPropsReducer({displayName:t,updateSlice:e,notUseUndoRedo:c}))},[o,t]),z=n.useCallback((e,c,u)=>{!e||!D(c)||o(O.updateComponentPropsReducer({displayName:e,updateSlice:c,notUseUndoRedo:u}))},[o]),x=n.useCallback((e,c,u)=>{const p=W(s.props,c,[]),r=W(s.props,"$dynamicAttrPaths",[]),d=oe(p).filter(a=>a.eventType===e).map(a=>({...a,originEnable:a.enabled})),m=k.getCurrentPageCalcContext(u);return{dynamicPaths:r,needRunEvents:d,finalContext:m}},[s.props]),V=n.useCallback((e,c="events",u,p)=>{const{dynamicPaths:r,needRunEvents:d,finalContext:m}=x(e,c,u);r==null||r.forEach(a=>{const C=ge(p)?p(a):T(_(a).slice(1)),N=W(d,C,"");if(N)try{const ne=U("",N,m);v(d,C,ne)}catch{v(d,C,void 0)}}),d.forEach(a=>{L(a,m)})},[x]),$=n.useCallback((e,c="events",u)=>{const{dynamicPaths:p,needRunEvents:r,finalContext:d}=x(e,c);p==null||p.forEach(m=>{const a=T(_(m).slice(2)),C=W(r,a,"");if(C)try{const N=U("",C,d);Array.isArray(N)&&fe(u)?v(r,a,N[u]):v(r,a,N)}catch{v(r,a,void 0)}}),r.forEach(m=>{L(m,d)})},[x]);if(!h)return null;const M=re(h);if(!M)return null;const G=M.widget,{hidden:Q,borderColor:Y,backgroundColor:K,radius:S,borderWidth:R,shadow:X}=w,Z=isNaN(Number(S))?S==null?void 0:S.toString():S+"px",ee=isNaN(Number(R))?R==null?void 0:R.toString():R+"px";return l(ue,{children:Q?null:l("div",{css:he(Y,ee,Z,K,X,h),children:l(n.Suspense,{fallback:l(te,{animation:!0,text:!1,image:{shape:"square",w:"100%",h:"100%",mr:"0 !important"},h:"100%",w:"100%"}),children:l(G,{...w,w:y,h:g,unitW:i,unitH:H,updateComponentRuntimeProps:E,deleteComponentRuntimeProps:J,handleUpdateOriginalDSLMultiAttr:F,handleUpdateOriginalDSLOtherMultiAttr:z,handleUpdateDsl:j,handleUpdateMultiExecutionResult:q,displayName:t,childrenNode:f,componentNode:s,triggerEventHandler:V,triggerMappedEventHandler:$})})})})});B.displayName="TransformWidgetWrapper";const I=b=>{const{componentNode:s,unitW:i,displayNamePrefix:t}=b,{x:h,y,w:g,h:f}=pe(s,i,t);return l(de,{bounds:"parent",size:{width:g,height:f},position:{x:h,y},enableResizing:!1,disableDragging:!0,minWidth:ie*i,minHeight:s.minH*H,children:l("div",{className:"wrapperPending",css:ce,children:l(B,{componentNode:s,unitW:i})})})};I.displayName="ScaleSquareWithJSON";const Ce=n.memo(I),Pe=b=>{const{componentNode:s,columnNumber:i=le,displayNamePrefix:t,containerPadding:h}=b,[y,g]=ae(),f=n.useMemo(()=>g.width/i,[i,g.width]),P=n.useMemo(()=>{const o=s.childrenNode;return o==null?void 0:o.map(E=>{switch(E.containerType){case"EDITOR_SCALE_SQUARE":return l(Ce,{componentNode:E,unitW:f,columnNumber:i,displayNamePrefix:t},E.displayName);default:return null}})},[i,s.childrenNode,t,f]);return l("div",{css:me(h),ref:y,"data-list-widget-container":!0,children:P})};export{Pe as R};
//# sourceMappingURL=renderComponentCanvasContainerWithJson-bd5b0f08.js.map
