import{o as B,k as m,aY as G,b5 as J,aD as K,F as Q}from"./@illa-design-402f214a.js";import{r as a}from"./react-9b7e00e3.js";import{aE as X}from"./index-2f1869ab.js";import{h as Z,g as _,I as $}from"./utils-c87ab5dc.js";import{L as ee}from"./index-94227886.js";import{T as ae}from"./index-5f69abbc.js";import{a as te,b as ne}from"./style-7ce959a8.js";import{w as se}from"./lodash-lib-6e94956b.js";import"./@emotion-4f16718e.js";import"./codeMirror-vendor-eff8ab8d.js";import"./react-icons-vendor-2430ea65.js";const E=(b,s={})=>{const{hideValidationMessage:l,pattern:u,regex:t,maxLength:n,minLength:o,required:g,customRule:d}=s;if(!l){const r=Z({value:_(b),pattern:u,regex:t,minLength:o,maxLength:n,required:g,customRule:d});return r&&r.length>0?r:""}return""},S=a.forwardRef((b,s)=>{const{type:l="input",showVisibleButton:u=!0,value:t,placeholder:n,disabled:o,readOnly:g,prefixText:d,suffixText:r,showCharacterCount:f,colorScheme:v,handleOnChange:x,handleOnFocus:i,handleOnBlur:w,allowClear:C,maxLength:p,minLength:c,clearValue:h}=b;return B(Q,{children:[l==="input"&&m(G,{w:"100%",inputRef:s,value:t,placeholder:n,disabled:o,readOnly:g,addBefore:d,addAfter:r,onFocus:i,onBlur:w,onChange:x,showWordLimit:f,colorScheme:v,allowClear:C,onClear:h,maxLength:p,minLength:c}),l==="password"&&m(J,{w:"100%",inputRef:s,value:t,autoComplete:"new-password",visibilityToggle:u,placeholder:n,disabled:o,readOnly:g,addBefore:d,addAfter:r,onFocus:i,onBlur:w,onChange:x,showWordLimit:f,colorScheme:v,allowClear:C,onClear:h,maxLength:p,minLength:c}),l==="search"&&m(K,{w:"100%",inputRef:s,value:t,placeholder:n,disabled:o,readOnly:g,addBefore:d,addAfter:r,onFocus:i,onBlur:w,onChange:x,showWordLimit:f,colorScheme:v,allowClear:C,onClear:h,maxLength:p,minLength:c})]})});S.displayName="WrappedInput";const le=b=>{const{displayName:s,value:l,handleUpdateDsl:u,minLength:t,maxLength:n,labelPosition:o,labelFull:g,label:d,labelAlign:r,labelWidth:f=33,labelCaption:v,labelWidthUnit:x,required:i,labelHidden:w,tooltipText:C,pattern:p,regex:c,customRule:h,hideValidationMessage:L,defaultValue:R,updateComponentHeight:P,validateMessage:H,triggerEventHandler:V,updateComponentRuntimeProps:I,deleteComponentRuntimeProps:O,handleUpdateMultiExecutionResult:y}=b,k=a.useRef(null),[D,T]=a.useState(l||R||"");a.useEffect(()=>{T(R),y([{displayName:s,value:{value:R||""}}])},[R,s,y]);const A=a.useCallback(e=>{const W=E(e,{hideValidationMessage:L,pattern:p,regex:c,minLength:t,maxLength:n,required:i,customRule:h});return u({validateMessage:W}),W},[h,u,L,n,t,p,c,i]),N=a.useRef(se((e,W,q)=>{new Promise(Y=>{const z=E(e,q);y([{displayName:s,value:{value:e||"",validateMessage:z}}]),Y(!0)}).then(()=>{W("change")})},180)),M=a.useCallback(e=>{T(e),N.current(e,V,{hideValidationMessage:L,pattern:p,regex:c,minLength:t,maxLength:n,required:i,customRule:h})},[h,L,n,t,p,c,i,V]),F=a.useCallback(()=>{M("")},[M]);a.useEffect(()=>(I({focus:()=>{var e;(e=k.current)==null||e.focus()},setValue:e=>{typeof e=="string"&&M(e)},clearValue:()=>{F()},validate:()=>A(l),clearValidation:()=>{u({validateMessage:""})}}),()=>{O()}),[F,O,M,u,A,I,l]);const U=a.useCallback(()=>{V("focus")},[V]),j=a.useCallback(()=>{V("blur")},[V]);return B(X,{updateComponentHeight:P,children:[m(ae,{tooltipText:C,tooltipDisabled:!C,children:B("div",{css:te(o),children:[m(ee,{labelFull:g,label:d,labelAlign:r,labelWidth:f,labelCaption:v,labelWidthUnit:x,labelPosition:o,required:i,labelHidden:w,hasTooltip:!!C}),m(S,{...b,value:D,ref:k,handleOnChange:M,handleOnFocus:U,handleOnBlur:j,clearValue:F})]})}),!L&&m("div",{css:ne(f,o,w||!d),children:m($,{validateMessage:H})})]})};le.displayName="InputWidget";export{le as InputWidget,S as WrappedInput,le as default};
//# sourceMappingURL=input-495a0572.js.map
